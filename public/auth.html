<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login - Vempreender AI</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Genos:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Genos', sans-serif;
            --background: hsl(222 39% 11%);
            --foreground: hsl(210 40% 98%);
            --card: hsl(222 39% 13%);
            --card-foreground: hsl(210 40% 98%);
            --primary: hsl(37 90% 66%);
            --primary-foreground: hsl(222 39% 11%);
            --border: hsl(217 33% 25%);
            --input: hsl(217 33% 17%);
            --ring: hsl(37 90% 66%);
        }
        .bg-background { background-color: var(--background); }
        .text-foreground { color: var(--foreground); }
        .bg-card { background-color: var(--card); }
        .text-card-foreground { color: var(--card-foreground); }
        .border-border { border-color: var(--border); }
        .bg-primary { background-color: var(--primary); }
        .text-primary-foreground { color: var(--primary-foreground); }
        .bg-input { background-color: var(--input); }
        .placeholder-muted-foreground::placeholder { color: hsl(215 20% 85%); }
        .ring-ring { box-shadow: 0 0 0 2px var(--ring); }
        .focus-visible\:ring-ring:focus-visible {
             --tw-ring-opacity: 1;
            --tw-ring-color: var(--ring) !important;
        }
         .focus-visible\:ring-2:focus-visible {
            --tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);
            --tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color);
            box-shadow: var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow, 0 0 #0000) !important;
        }
    </style>
</head>
<body class="bg-background text-foreground">
    <div class="flex min-h-screen flex-col items-center justify-center p-4">
        <div class="w-full max-w-md">
            <div class="mb-8 text-center">
                 <img src="https://firebasestorage.googleapis.com/v0/b/cb-vempreender.firebasestorage.app/o/Imagens%20LP%2Flogo_vempreender.png?alt=media&token=b13f9567-e302-48ca-973a-d63a19daa17d" alt="Vempreender AI Logo" class="mx-auto w-48 mb-4">
            </div>

            <div class="bg-card border border-border rounded-lg p-8 shadow-lg">
                <h1 class="text-2xl font-bold text-center text-card-foreground mb-6">Acesse sua Conta</h1>
                
                <div id="firebaseui-auth-container"></div>
                 <div id="loader" class="text-center text-primary">Carregando...</div>
            </div>
             <div class="mt-6 text-center">
                <a href="/" class="text-sm text-primary hover:underline">← Voltar para o site</a>
            </div>
        </div>
    </div>

    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/ui/6.0.1/firebase-ui-auth.js"></script>
    <link type="text/css" rel="stylesheet" href="https://www.gstatic.com/firebasejs/ui/6.0.1/firebase-ui-auth.css" />

    <script>
        // Configuração do Firebase
        const firebaseConfig = {
            apiKey: "YOUR_API_KEY",
            authDomain: "YOUR_AUTH_DOMAIN",
            projectId: "YOUR_PROJECT_ID",
            storageBucket: "YOUR_STORAGE_BUCKET",
            messagingSenderId: "YOUR_MESSAGING_SENDER_ID",
            appId: "YOUR_APP_ID",
        };

        // Função para buscar a configuração do Firebase no servidor
        async function fetchFirebaseConfig() {
            try {
                // Em um ambiente real, você faria uma chamada para um endpoint no seu backend
                // que retorna a configuração do Firebase de forma segura.
                // Para este exemplo, vamos simular a obtenção dos valores.
                // Substitua pelos valores reais do seu projeto.
                const config = {
                    apiKey: "YOUR_API_KEY",
                    authDomain: "YOUR_AUTH_DOMAIN",
                    projectId: "YOUR_PROJECT_ID",
                    storageBucket: "YOUR_STORAGE_BUCKET",
                    messagingSenderId: "YOUR_MESSAGING_SENDER_ID",
                    appId: "YOUR_APP_ID",
                };
                return config;
            } catch (error) {
                console.error("Erro ao buscar configuração do Firebase:", error);
                return null;
            }
        }


        // Inicializa o FirebaseUI
       async function initFirebaseAuth() {
            const config = await fetchFirebaseConfig();
            if (!config || !config.apiKey || config.apiKey === "YOUR_API_KEY") {
                 document.getElementById('loader').innerText = 'Erro: Configuração do Firebase não encontrada. A autenticação não pode ser carregada.';
                return;
            }

            const app = firebase.initializeApp(config);
            const ui = new firebaseui.auth.AuthUI(firebase.auth());

            const uiConfig = {
                callbacks: {
                    signInSuccessWithAuthResult: function(authResult, redirectUrl) {
                        // O usuário fez login com sucesso.
                        // Redireciona para a página principal ou dashboard.
                        window.location.href = '/'; 
                        return false; // Evita o redirecionamento padrão do FirebaseUI.
                    },
                    uiShown: function() {
                        // O widget do FirebaseUI foi renderizado.
                        // Esconde o loader.
                        document.getElementById('loader').style.display = 'none';
                    }
                },
                signInFlow: 'popup',
                signInOptions: [
                    firebase.auth.GoogleAuthProvider.PROVIDER_ID,
                    firebase.auth.EmailAuthProvider.PROVIDER_ID,
                ],
                tosUrl: '/termos-de-uso',
                privacyPolicyUrl: '/politica-de-privacidade'
            };

            ui.start('#firebaseui-auth-container', uiConfig);
        }

        // Chame a função para inicializar a autenticação
        initFirebaseAuth();

    </script>
</body>
</html>
