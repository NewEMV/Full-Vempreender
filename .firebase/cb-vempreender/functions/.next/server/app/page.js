(()=>{var exports={};exports.id=974,exports.ids=[974],exports.modules={1470:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setup=void 0;let n=r(91645),i=r(71271),s=r(86777),a=r(5674),o=r(26786),l=r(31359),u="ip_resolver";function c(e){l.trace(i.LogVerbosity.DEBUG,u,e)}let h="ipv4",d="ipv6",p=443;class f{constructor(e,t,r){var a;this.listener=t,this.addresses=[],this.error=null,this.hasReturnedResult=!1,c("Resolver constructed for target "+(0,o.uriToString)(e));let l=[];if(e.scheme!==h&&e.scheme!==d){this.error={code:i.Status.UNAVAILABLE,details:`Unrecognized scheme ${e.scheme} in IP resolver`,metadata:new s.Metadata};return}for(let t of e.path.split(",")){let r=(0,o.splitHostPort)(t);if(null===r||e.scheme===h&&!(0,n.isIPv4)(r.host)||e.scheme===d&&!(0,n.isIPv6)(r.host)){this.error={code:i.Status.UNAVAILABLE,details:`Failed to parse ${e.scheme} address ${t}`,metadata:new s.Metadata};return}l.push({host:r.host,port:null!=(a=r.port)?a:p})}this.addresses=l,c("Parsed "+e.scheme+" address list "+this.addresses)}updateResolution(){this.hasReturnedResult||(this.hasReturnedResult=!0,process.nextTick(()=>{this.error?this.listener.onError(this.error):this.listener.onSuccessfulResolution(this.addresses,null,null,null,{})}))}destroy(){this.hasReturnedResult=!1}static getDefaultAuthority(e){return e.path.split(",")[0]}}t.setup=function(){(0,a.registerResolver)(h,f),(0,a.registerResolver)(d,f)}},1532:(e,t,r)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.setup=t.OutlierDetectionLoadBalancer=t.OutlierDetectionLoadBalancingConfig=void 0;let i=r(40536),s=r(71271),a=r(80324),o=r(76250),l=r(86239),u=r(72309),c=r(72910),h=r(43356),d=r(4719),p=r(31359),f="outlier_detection";function m(e){p.trace(s.LogVerbosity.DEBUG,f,e)}let g="outlier_detection",y=(null!=(n=process.env.GRPC_EXPERIMENTAL_ENABLE_OUTLIER_DETECTION)?n:"true")==="true",v={stdev_factor:1900,enforcement_percentage:100,minimum_hosts:5,request_volume:100},b={threshold:85,enforcement_percentage:100,minimum_hosts:5,request_volume:50};function S(e,t,r,n){if(t in e&&typeof e[t]!==r){let i=n?`${n}.${t}`:t;throw Error(`outlier detection config ${i} parse error: expected ${r}, got ${typeof e[t]}`)}}function T(e,t,r){let n=r?`${r}.${t}`:t;if(t in e){if(!(0,a.isDuration)(e[t]))throw Error(`outlier detection config ${n} parse error: expected Duration, got ${typeof e[t]}`);if(!(e[t].seconds>=0&&e[t].seconds<=315576e6&&e[t].nanos>=0&&e[t].nanos<=0x3b9ac9ff))throw Error(`outlier detection config ${n} parse error: values out of range for non-negative Duaration`)}}function w(e,t,r){let n=r?`${r}.${t}`:t;if(S(e,t,"number",r),t in e&&!(e[t]>=0&&e[t]<=100))throw Error(`outlier detection config ${n} parse error: value out of range for percentage (0-100)`)}class C{constructor(e,t,r,n,i,s,a){if(this.childPolicy=a,a.length>0&&"pick_first"===a[0].getLoadBalancerName())throw Error("outlier_detection LB policy cannot have a pick_first child policy");this.intervalMs=null!=e?e:1e4,this.baseEjectionTimeMs=null!=t?t:3e4,this.maxEjectionTimeMs=null!=r?r:3e5,this.maxEjectionPercent=null!=n?n:10,this.successRateEjection=i?Object.assign(Object.assign({},v),i):null,this.failurePercentageEjection=s?Object.assign(Object.assign({},b),s):null}getLoadBalancerName(){return g}toJsonObject(){return{interval:(0,a.msToDuration)(this.intervalMs),base_ejection_time:(0,a.msToDuration)(this.baseEjectionTimeMs),max_ejection_time:(0,a.msToDuration)(this.maxEjectionTimeMs),max_ejection_percent:this.maxEjectionPercent,success_rate_ejection:this.successRateEjection,failure_percentage_ejection:this.failurePercentageEjection,child_policy:this.childPolicy.map(e=>e.toJsonObject())}}getIntervalMs(){return this.intervalMs}getBaseEjectionTimeMs(){return this.baseEjectionTimeMs}getMaxEjectionTimeMs(){return this.maxEjectionTimeMs}getMaxEjectionPercent(){return this.maxEjectionPercent}getSuccessRateEjectionConfig(){return this.successRateEjection}getFailurePercentageEjectionConfig(){return this.failurePercentageEjection}getChildPolicy(){return this.childPolicy}copyWithChildPolicy(e){return new C(this.intervalMs,this.baseEjectionTimeMs,this.maxEjectionTimeMs,this.maxEjectionPercent,this.successRateEjection,this.failurePercentageEjection,e)}static createFromJson(e){var t;if(T(e,"interval"),T(e,"base_ejection_time"),T(e,"max_ejection_time"),w(e,"max_ejection_percent"),"success_rate_ejection"in e){if("object"!=typeof e.success_rate_ejection)throw Error("outlier detection config success_rate_ejection must be an object");S(e.success_rate_ejection,"stdev_factor","number","success_rate_ejection"),w(e.success_rate_ejection,"enforcement_percentage","success_rate_ejection"),S(e.success_rate_ejection,"minimum_hosts","number","success_rate_ejection"),S(e.success_rate_ejection,"request_volume","number","success_rate_ejection")}if("failure_percentage_ejection"in e){if("object"!=typeof e.failure_percentage_ejection)throw Error("outlier detection config failure_percentage_ejection must be an object");w(e.failure_percentage_ejection,"threshold","failure_percentage_ejection"),w(e.failure_percentage_ejection,"enforcement_percentage","failure_percentage_ejection"),S(e.failure_percentage_ejection,"minimum_hosts","number","failure_percentage_ejection"),S(e.failure_percentage_ejection,"request_volume","number","failure_percentage_ejection")}return new C(e.interval?(0,a.durationToMs)(e.interval):null,e.base_ejection_time?(0,a.durationToMs)(e.base_ejection_time):null,e.max_ejection_time?(0,a.durationToMs)(e.max_ejection_time):null,null!=(t=e.max_ejection_percent)?t:null,e.success_rate_ejection,e.failure_percentage_ejection,e.child_policy.map(l.validateLoadBalancingConfig))}}t.OutlierDetectionLoadBalancingConfig=C;class x extends d.BaseSubchannelWrapper{constructor(e,t){super(e),this.mapEntry=t,this.stateListeners=[],this.ejected=!1,this.refCount=0,this.childSubchannelState=e.getConnectivityState(),e.addConnectivityStateListener((e,t,r,n)=>{if(this.childSubchannelState=r,!this.ejected)for(let e of this.stateListeners)e(this,t,r,n)})}getConnectivityState(){return this.ejected?i.ConnectivityState.TRANSIENT_FAILURE:this.childSubchannelState}addConnectivityStateListener(e){this.stateListeners.push(e)}removeConnectivityStateListener(e){let t=this.stateListeners.indexOf(e);t>-1&&this.stateListeners.splice(t,1)}ref(){this.child.ref(),this.refCount+=1}unref(){if(this.child.unref(),this.refCount-=1,this.refCount<=0&&this.mapEntry){let e=this.mapEntry.subchannelWrappers.indexOf(this);e>=0&&this.mapEntry.subchannelWrappers.splice(e,1)}}eject(){for(let e of(this.ejected=!0,this.stateListeners))e(this,this.childSubchannelState,i.ConnectivityState.TRANSIENT_FAILURE,-1)}uneject(){for(let e of(this.ejected=!1,this.stateListeners))e(this,i.ConnectivityState.TRANSIENT_FAILURE,this.childSubchannelState,-1)}getMapEntry(){return this.mapEntry}getWrappedSubchannel(){return this.child}}function E(){return{success:0,failure:0}}class _{constructor(){this.activeBucket=E(),this.inactiveBucket=E()}addSuccess(){this.activeBucket.success+=1}addFailure(){this.activeBucket.failure+=1}switchBuckets(){this.inactiveBucket=this.activeBucket,this.activeBucket=E()}getLastSuccesses(){return this.inactiveBucket.success}getLastFailures(){return this.inactiveBucket.failure}}class I{constructor(e,t){this.wrappedPicker=e,this.countCalls=t}pick(e){let t=this.wrappedPicker.pick(e);if(t.pickResultType!==c.PickResultType.COMPLETE)return t;{let e=t.subchannel,r=e.getMapEntry();if(!r)return Object.assign(Object.assign({},t),{subchannel:e.getWrappedSubchannel()});{let n=t.onCallEnded;return this.countCalls&&(n=e=>{var n;e===s.Status.OK?r.counter.addSuccess():r.counter.addFailure(),null==(n=t.onCallEnded)||n.call(t,e)}),Object.assign(Object.assign({},t),{subchannel:e.getWrappedSubchannel(),onCallEnded:n})}}}}class k{constructor(e){this.addressMap=new Map,this.latestConfig=null,this.timerStartTime=null,this.childBalancer=new u.ChildLoadBalancerHandler((0,o.createChildChannelControlHelper)(e,{createSubchannel:(t,r)=>{let n=e.createSubchannel(t,r),i=this.addressMap.get((0,h.subchannelAddressToString)(t)),s=new x(n,i);return(null==i?void 0:i.currentEjectionTimestamp)!==null&&s.eject(),null==i||i.subchannelWrappers.push(s),s},updateState:(t,r)=>{t===i.ConnectivityState.READY?e.updateState(t,new I(r,this.isCountingEnabled())):e.updateState(t,r)}})),this.ejectionTimer=setInterval(()=>{},0),clearInterval(this.ejectionTimer)}isCountingEnabled(){return null!==this.latestConfig&&(null!==this.latestConfig.getSuccessRateEjectionConfig()||null!==this.latestConfig.getFailurePercentageEjectionConfig())}getCurrentEjectionPercent(){let e=0;for(let t of this.addressMap.values())null!==t.currentEjectionTimestamp&&(e+=1);return 100*e/this.addressMap.size}runSuccessRateCheck(e){if(!this.latestConfig)return;let t=this.latestConfig.getSuccessRateEjectionConfig();if(!t)return;m("Running success rate check");let r=t.request_volume,n=0,i=[];for(let[e,t]of this.addressMap){let s=t.counter.getLastSuccesses(),a=t.counter.getLastFailures();m("Stats for "+e+": successes="+s+" failures="+a+" targetRequestVolume="+r),s+a>=r&&(n+=1,i.push(s/(s+a)))}if(m("Found "+n+" success rate candidates; currentEjectionPercent="+this.getCurrentEjectionPercent()+" successRates=["+i+"]"),n<t.minimum_hosts)return;let s=i.reduce((e,t)=>e+t)/i.length,a=0;for(let e of i){let t=e-s;a+=t*t}let o=Math.sqrt(a/i.length),l=s-o*(t.stdev_factor/1e3);for(let[n,i]of(m("stdev="+o+" ejectionThreshold="+l),this.addressMap.entries())){if(this.getCurrentEjectionPercent()>=this.latestConfig.getMaxEjectionPercent())break;let s=i.counter.getLastSuccesses(),a=i.counter.getLastFailures();if(s+a<r)continue;let o=s/(s+a);if(m("Checking candidate "+n+" successRate="+o),o<l){let r=100*Math.random();m("Candidate "+n+" randomNumber="+r+" enforcement_percentage="+t.enforcement_percentage),r<t.enforcement_percentage&&(m("Ejecting candidate "+n),this.eject(i,e))}}}runFailurePercentageCheck(e){if(!this.latestConfig)return;let t=this.latestConfig.getFailurePercentageEjectionConfig();if(!t)return;m("Running failure percentage check. threshold="+t.threshold+" request volume threshold="+t.request_volume);let r=0;for(let e of this.addressMap.values())e.counter.getLastSuccesses()+e.counter.getLastFailures()>=t.request_volume&&(r+=1);if(!(r<t.minimum_hosts))for(let[r,n]of this.addressMap.entries()){if(this.getCurrentEjectionPercent()>=this.latestConfig.getMaxEjectionPercent())break;let i=n.counter.getLastSuccesses(),s=n.counter.getLastFailures();if((m("Candidate successes="+i+" failures="+s),!(i+s<t.request_volume))&&100*s/(s+i)>t.threshold){let i=100*Math.random();m("Candidate "+r+" randomNumber="+i+" enforcement_percentage="+t.enforcement_percentage),i<t.enforcement_percentage&&(m("Ejecting candidate "+r),this.eject(n,e))}}}eject(e,t){for(let t of(e.currentEjectionTimestamp=new Date,e.ejectionTimeMultiplier+=1,e.subchannelWrappers))t.eject()}uneject(e){for(let t of(e.currentEjectionTimestamp=null,e.subchannelWrappers))t.uneject()}switchAllBuckets(){for(let e of this.addressMap.values())e.counter.switchBuckets()}startTimer(e){var t,r;this.ejectionTimer=setTimeout(()=>this.runChecks(),e),null==(r=(t=this.ejectionTimer).unref)||r.call(t)}runChecks(){let e=new Date;if(m("Ejection timer running"),this.switchAllBuckets(),this.latestConfig)for(let[t,r]of(this.timerStartTime=e,this.startTimer(this.latestConfig.getIntervalMs()),this.runSuccessRateCheck(e),this.runFailurePercentageCheck(e),this.addressMap.entries()))if(null===r.currentEjectionTimestamp)r.ejectionTimeMultiplier>0&&(r.ejectionTimeMultiplier-=1);else{let e=this.latestConfig.getBaseEjectionTimeMs(),n=this.latestConfig.getMaxEjectionTimeMs(),i=new Date(r.currentEjectionTimestamp.getTime());i.setMilliseconds(i.getMilliseconds()+Math.min(e*r.ejectionTimeMultiplier,Math.max(e,n))),i<new Date&&(m("Unejecting "+t),this.uneject(r))}}updateAddressList(e,t,r){if(!(t instanceof C))return;let n=new Set;for(let t of e)n.add((0,h.subchannelAddressToString)(t));for(let e of n)this.addressMap.has(e)||(m("Adding map entry for "+e),this.addressMap.set(e,{counter:new _,currentEjectionTimestamp:null,ejectionTimeMultiplier:0,subchannelWrappers:[]}));for(let e of this.addressMap.keys())n.has(e)||(m("Removing map entry for "+e),this.addressMap.delete(e));let i=(0,l.getFirstUsableConfig)(t.getChildPolicy(),!0);if(this.childBalancer.updateAddressList(e,i,r),t.getSuccessRateEjectionConfig()||t.getFailurePercentageEjectionConfig())if(this.timerStartTime){m("Previous timer existed. Replacing timer"),clearTimeout(this.ejectionTimer);let e=t.getIntervalMs()-(new Date().getTime()-this.timerStartTime.getTime());this.startTimer(e)}else m("Starting new timer"),this.timerStartTime=new Date,this.startTimer(t.getIntervalMs()),this.switchAllBuckets();else for(let e of(m("Counting disabled. Cancelling timer."),this.timerStartTime=null,clearTimeout(this.ejectionTimer),this.addressMap.values()))this.uneject(e),e.ejectionTimeMultiplier=0;this.latestConfig=t}exitIdle(){this.childBalancer.exitIdle()}resetBackoff(){this.childBalancer.resetBackoff()}destroy(){clearTimeout(this.ejectionTimer),this.childBalancer.destroy()}getTypeName(){return g}}t.OutlierDetectionLoadBalancer=k,t.setup=function(){y&&(0,o.registerLoadBalancerType)(g,k,C)}},3076:(e,t,r)=>{"use strict";e.exports=o;var n=r(77968);((o.prototype=Object.create(n.prototype)).constructor=o).className="Service";var i=r(71202),s=r(93107),a=r(27236);function o(e,t){n.call(this,e,t),this.methods={},this._methodsArray=null}function l(e){return e._methodsArray=null,e}o.fromJSON=function(e,t){var r=new o(e,t.options);if(t.methods)for(var n=Object.keys(t.methods),s=0;s<n.length;++s)r.add(i.fromJSON(n[s],t.methods[n[s]]));return t.nested&&r.addJSON(t.nested),r.comment=t.comment,r},o.prototype.toJSON=function(e){var t=n.prototype.toJSON.call(this,e),r=!!e&&!!e.keepComments;return s.toObject(["options",t&&t.options||void 0,"methods",n.arrayToJSON(this.methodsArray,e)||{},"nested",t&&t.nested||void 0,"comment",r?this.comment:void 0])},Object.defineProperty(o.prototype,"methodsArray",{get:function(){return this._methodsArray||(this._methodsArray=s.toArray(this.methods))}}),o.prototype.get=function(e){return this.methods[e]||n.prototype.get.call(this,e)},o.prototype.resolveAll=function(){for(var e=this.methodsArray,t=0;t<e.length;++t)e[t].resolve();return n.prototype.resolve.call(this)},o.prototype.add=function(e){if(this.get(e.name))throw Error("duplicate name '"+e.name+"' in "+this);return e instanceof i?(this.methods[e.name]=e,e.parent=this,l(this)):n.prototype.add.call(this,e)},o.prototype.remove=function(e){if(e instanceof i){if(this.methods[e.name]!==e)throw Error(e+" is not a member of "+this);return delete this.methods[e.name],e.parent=null,l(this)}return n.prototype.remove.call(this,e)},o.prototype.create=function(e,t,r){for(var n,i=new a.Service(e,t,r),o=0;o<this.methodsArray.length;++o){var l=s.lcFirst((n=this._methodsArray[o]).resolve().name).replace(/[^$\w_]/g,"");i[l]=s.codegen(["r","c"],s.isReserved(l)?l+"_":l)("return this.rpcCall(m,q,s,r,c)")({m:n,q:n.resolvedRequestType.ctor,s:n.resolvedResponseType.ctor})}return i}},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},3712:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getInterceptingCall=t.InterceptingCall=t.RequesterBuilder=t.ListenerBuilder=t.InterceptorConfigurationError=void 0;let n=r(86777),i=r(60070),s=r(71271),a=r(60776);class o extends Error{constructor(e){super(e),this.name="InterceptorConfigurationError",Error.captureStackTrace(this,o)}}t.InterceptorConfigurationError=o;class l{constructor(){this.metadata=void 0,this.message=void 0,this.status=void 0}withOnReceiveMetadata(e){return this.metadata=e,this}withOnReceiveMessage(e){return this.message=e,this}withOnReceiveStatus(e){return this.status=e,this}build(){return{onReceiveMetadata:this.metadata,onReceiveMessage:this.message,onReceiveStatus:this.status}}}t.ListenerBuilder=l;class u{constructor(){this.start=void 0,this.message=void 0,this.halfClose=void 0,this.cancel=void 0}withStart(e){return this.start=e,this}withSendMessage(e){return this.message=e,this}withHalfClose(e){return this.halfClose=e,this}withCancel(e){return this.cancel=e,this}build(){return{start:this.start,sendMessage:this.message,halfClose:this.halfClose,cancel:this.cancel}}}t.RequesterBuilder=u;let c={onReceiveMetadata:(e,t)=>{t(e)},onReceiveMessage:(e,t)=>{t(e)},onReceiveStatus:(e,t)=>{t(e)}},h={start:(e,t,r)=>{r(e,t)},sendMessage:(e,t)=>{t(e)},halfClose:e=>{e()},cancel:e=>{e()}};class d{constructor(e,t){var r,n,i,s;this.nextCall=e,this.processingMetadata=!1,this.pendingMessageContext=null,this.processingMessage=!1,this.pendingHalfClose=!1,t?this.requester={start:null!=(r=t.start)?r:h.start,sendMessage:null!=(n=t.sendMessage)?n:h.sendMessage,halfClose:null!=(i=t.halfClose)?i:h.halfClose,cancel:null!=(s=t.cancel)?s:h.cancel}:this.requester=h}cancelWithStatus(e,t){this.requester.cancel(()=>{this.nextCall.cancelWithStatus(e,t)})}getPeer(){return this.nextCall.getPeer()}processPendingMessage(){this.pendingMessageContext&&(this.nextCall.sendMessageWithContext(this.pendingMessageContext,this.pendingMessage),this.pendingMessageContext=null,this.pendingMessage=null)}processPendingHalfClose(){this.pendingHalfClose&&this.nextCall.halfClose()}start(e,t){var r,n,s,a,o,l;let u={onReceiveMetadata:null!=(n=null==(r=null==t?void 0:t.onReceiveMetadata)?void 0:r.bind(t))?n:e=>{},onReceiveMessage:null!=(a=null==(s=null==t?void 0:t.onReceiveMessage)?void 0:s.bind(t))?a:e=>{},onReceiveStatus:null!=(l=null==(o=null==t?void 0:t.onReceiveStatus)?void 0:o.bind(t))?l:e=>{}};this.processingMetadata=!0,this.requester.start(e,u,(e,t)=>{var r,n,s;let a;if(this.processingMetadata=!1,(0,i.isInterceptingListener)(t))a=t;else{let e={onReceiveMetadata:null!=(r=t.onReceiveMetadata)?r:c.onReceiveMetadata,onReceiveMessage:null!=(n=t.onReceiveMessage)?n:c.onReceiveMessage,onReceiveStatus:null!=(s=t.onReceiveStatus)?s:c.onReceiveStatus};a=new i.InterceptingListenerImpl(e,u)}this.nextCall.start(e,a),this.processPendingMessage(),this.processPendingHalfClose()})}sendMessageWithContext(e,t){this.processingMessage=!0,this.requester.sendMessage(t,r=>{this.processingMessage=!1,this.processingMetadata?(this.pendingMessageContext=e,this.pendingMessage=t):(this.nextCall.sendMessageWithContext(e,r),this.processPendingHalfClose())})}sendMessage(e){this.sendMessageWithContext({},e)}startRead(){this.nextCall.startRead()}halfClose(){this.requester.halfClose(()=>{this.processingMetadata||this.processingMessage?this.pendingHalfClose=!0:this.nextCall.halfClose()})}}function p(e,t,r){var n,i;let s=null!=(n=r.deadline)?n:1/0,a=r.host,o=null!=(i=r.parent)?i:null,l=r.propagate_flags,u=r.credentials,c=e.createCall(t,s,a,o,l);return u&&c.setCredentials(u),c}t.InterceptingCall=d;class f{constructor(e,t){this.call=e,this.methodDefinition=t}cancelWithStatus(e,t){this.call.cancelWithStatus(e,t)}getPeer(){return this.call.getPeer()}sendMessageWithContext(e,t){let r;try{r=this.methodDefinition.requestSerialize(t)}catch(e){this.call.cancelWithStatus(s.Status.INTERNAL,`Request message serialization failure: ${(0,a.getErrorMessage)(e)}`);return}this.call.sendMessageWithContext(e,r)}sendMessage(e){this.sendMessageWithContext({},e)}start(e,t){let r=null;this.call.start(e,{onReceiveMetadata:e=>{var r;null==(r=null==t?void 0:t.onReceiveMetadata)||r.call(t,e)},onReceiveMessage:e=>{var i;let o;try{o=this.methodDefinition.responseDeserialize(e)}catch(e){r={code:s.Status.INTERNAL,details:`Response message parsing error: ${(0,a.getErrorMessage)(e)}`,metadata:new n.Metadata},this.call.cancelWithStatus(r.code,r.details);return}null==(i=null==t?void 0:t.onReceiveMessage)||i.call(t,o)},onReceiveStatus:e=>{var n,i;r?null==(n=null==t?void 0:t.onReceiveStatus)||n.call(t,r):null==(i=null==t?void 0:t.onReceiveStatus)||i.call(t,e)}})}startRead(){this.call.startRead()}halfClose(){this.call.halfClose()}}class m extends f{constructor(e,t){super(e,t)}start(e,t){var r,n;let i=!1,s={onReceiveMetadata:null!=(n=null==(r=null==t?void 0:t.onReceiveMetadata)?void 0:r.bind(t))?n:e=>{},onReceiveMessage:e=>{var r;i=!0,null==(r=null==t?void 0:t.onReceiveMessage)||r.call(t,e)},onReceiveStatus:e=>{var r,n;i||null==(r=null==t?void 0:t.onReceiveMessage)||r.call(t,null),null==(n=null==t?void 0:t.onReceiveStatus)||n.call(t,e)}};super.start(e,s),this.call.startRead()}}class g extends f{}function y(e,t,r){let n=p(e,r.path,t);return r.responseStream?new g(n,r):new m(n,r)}t.getInterceptingCall=function(e,t,r,n){if(e.clientInterceptors.length>0&&e.clientInterceptorProviders.length>0)throw new o("Both interceptors and interceptor_providers were passed as options to the client constructor. Only one of these is allowed.");if(e.callInterceptors.length>0&&e.callInterceptorProviders.length>0)throw new o("Both interceptors and interceptor_providers were passed as call options. Only one of these is allowed.");let i=[];i=e.callInterceptors.length>0||e.callInterceptorProviders.length>0?[].concat(e.callInterceptors,e.callInterceptorProviders.map(e=>e(t))).filter(e=>e):[].concat(e.clientInterceptors,e.clientInterceptorProviders.map(e=>e(t))).filter(e=>e);let s=Object.assign({},r,{method_definition:t});return i.reduceRight((e,t)=>r=>t(r,e),e=>y(n,e,t))(s)}},4227:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Server=void 0;let n=r(73496),i=r(71271),s=r(17492),a=r(19420),o=r(5674),l=r(31359),u=r(43356),c=r(26786),h=r(66827),d=0x7fffffff,p=0x7fffffff,f=2e4,{HTTP2_HEADER_PATH:m}=n.constants,g="server";function y(){}function v(e){return{code:i.Status.UNIMPLEMENTED,details:`The server does not implement the method ${e}`}}function b(e,t){let r=v(t);switch(e){case"unary":return(e,t)=>{t(r,null)};case"clientStream":return(e,t)=>{t(r,null)};case"serverStream":return e=>{e.emit("error",r)};case"bidi":return e=>{e.emit("error",r)};default:throw Error(`Invalid handlerType ${e}`)}}class S{constructor(e){var t,r,n,i;this.http2ServerList=[],this.handlers=new Map,this.sessions=new Map,this.started=!1,this.shutdown=!1,this.serverAddressString="null",this.channelzEnabled=!0,this.channelzTrace=new h.ChannelzTrace,this.callTracker=new h.ChannelzCallTracker,this.listenerChildrenTracker=new h.ChannelzChildrenTracker,this.sessionChildrenTracker=new h.ChannelzChildrenTracker,this.options=null!=e?e:{},0===this.options["grpc.enable_channelz"]&&(this.channelzEnabled=!1),this.channelzRef=(0,h.registerChannelzServer)(()=>this.getChannelzInfo(),this.channelzEnabled),this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO","Server created"),this.maxConnectionAgeMs=null!=(t=this.options["grpc.max_connection_age_ms"])?t:d,this.maxConnectionAgeGraceMs=null!=(r=this.options["grpc.max_connection_age_grace_ms"])?r:d,this.keepaliveTimeMs=null!=(n=this.options["grpc.keepalive_time_ms"])?n:p,this.keepaliveTimeoutMs=null!=(i=this.options["grpc.keepalive_timeout_ms"])?i:f,this.trace("Server constructed")}getChannelzInfo(){return{trace:this.channelzTrace,callTracker:this.callTracker,listenerChildren:this.listenerChildrenTracker.getChildLists(),sessionChildren:this.sessionChildrenTracker.getChildLists()}}getChannelzSessionInfoGetter(e){return()=>{var t,r,n;let i,s=this.sessions.get(e),a=e.socket,o=a.remoteAddress?(0,u.stringToSubchannelAddress)(a.remoteAddress,a.remotePort):null,l=a.localAddress?(0,u.stringToSubchannelAddress)(a.localAddress,a.localPort):null;if(e.encrypted){let e=a,r=e.getCipher(),n=e.getCertificate(),s=e.getPeerCertificate();i={cipherSuiteStandardName:null!=(t=r.standardName)?t:null,cipherSuiteOtherName:r.standardName?null:r.name,localCertificate:n&&"raw"in n?n.raw:null,remoteCertificate:s&&"raw"in s?s.raw:null}}else i=null;return{remoteAddress:o,localAddress:l,security:i,remoteName:null,streamsStarted:s.streamTracker.callsStarted,streamsSucceeded:s.streamTracker.callsSucceeded,streamsFailed:s.streamTracker.callsFailed,messagesSent:s.messagesSent,messagesReceived:s.messagesReceived,keepAlivesSent:0,lastLocalStreamCreatedTimestamp:null,lastRemoteStreamCreatedTimestamp:s.streamTracker.lastCallStartedTimestamp,lastMessageSentTimestamp:s.lastMessageSentTimestamp,lastMessageReceivedTimestamp:s.lastMessageReceivedTimestamp,localFlowControlWindow:null!=(r=e.state.localWindowSize)?r:null,remoteFlowControlWindow:null!=(n=e.state.remoteWindowSize)?n:null}}}trace(e){l.trace(i.LogVerbosity.DEBUG,g,"("+this.channelzRef.id+") "+e)}addProtoService(){throw Error("Not implemented. Use addService() instead")}addService(e,t){if(null===e||"object"!=typeof e||null===t||"object"!=typeof t)throw Error("addService() requires two objects as arguments");let r=Object.keys(e);if(0===r.length)throw Error("Cannot add an empty service to a server");r.forEach(r=>{let n,i,s=e[r];n=s.requestStream?s.responseStream?"bidi":"clientStream":s.responseStream?"serverStream":"unary";let a=t[r];if(void 0===a&&"string"==typeof s.originalName&&(a=t[s.originalName]),i=void 0!==a?a.bind(t):b(n,r),!1===this.register(s.path,i,s.responseSerialize,s.requestDeserialize,n))throw Error(`Method handler for ${s.path} already provided.`)})}removeService(e){if(null===e||"object"!=typeof e)throw Error("removeService() requires object as argument");Object.keys(e).forEach(t=>{let r=e[t];this.unregister(r.path)})}bind(e,t){throw Error("Not implemented. Use bindAsync() instead")}bindAsync(e,t,r){if(!0===this.started)throw Error("server is already started");if(this.shutdown)throw Error("bindAsync called after shutdown");if("string"!=typeof e)throw TypeError("port must be a string");if(null===t||!(t instanceof a.ServerCredentials))throw TypeError("creds must be a ServerCredentials object");if("function"!=typeof r)throw TypeError("callback must be a function");let s=(0,c.parseUri)(e);if(null===s)throw Error(`Could not parse port "${e}"`);let d=(0,o.mapUriDefaultScheme)(s);if(null===d)throw Error(`Could not get a default scheme for port "${e}"`);let p={maxSendHeaderBlockLength:Number.MAX_SAFE_INTEGER};"grpc-node.max_session_memory"in this.options?p.maxSessionMemory=this.options["grpc-node.max_session_memory"]:p.maxSessionMemory=Number.MAX_SAFE_INTEGER,"grpc.max_concurrent_streams"in this.options&&(p.settings={maxConcurrentStreams:this.options["grpc.max_concurrent_streams"]});let f=(e,t)=>{process.nextTick(()=>r(e,t))},m=()=>{let e;if(t._isSecure()){let r=Object.assign(p,t._getSettings());r.enableTrace=1===this.options["grpc-node.tls_enable_trace"],(e=n.createSecureServer(r)).on("secureConnection",e=>{e.on("error",e=>{this.trace("An incoming TLS connection closed with error: "+e.message)})})}else e=n.createServer(p);return e.setTimeout(0,y),this._setupHandlers(e),e},g=(e,t,r)=>0===e.length?Promise.resolve({port:t,count:r}):Promise.all(e.map(e=>{let r;this.trace("Attempting to bind "+(0,u.subchannelAddressToString)(e)),r=(0,u.isTcpSubchannelAddress)(e)?{host:e.host,port:t}:e;let n=m();return new Promise((i,s)=>{let a=t=>{this.trace("Failed to bind "+(0,u.subchannelAddressToString)(e)+" with error "+t.message),i(t)};n.once("error",a),n.listen(r,()=>{let e;if(this.shutdown){n.close(),i(Error("bindAsync failed because server is shutdown"));return}let r=n.address();e="string"==typeof r?{path:r}:{host:r.address,port:r.port};let s=(0,h.registerChannelzSocket)((0,u.subchannelAddressToString)(e),()=>({localAddress:e,remoteAddress:null,security:null,remoteName:null,streamsStarted:0,streamsSucceeded:0,streamsFailed:0,messagesSent:0,messagesReceived:0,keepAlivesSent:0,lastLocalStreamCreatedTimestamp:null,lastRemoteStreamCreatedTimestamp:null,lastMessageSentTimestamp:null,lastMessageReceivedTimestamp:null,localFlowControlWindow:null,remoteFlowControlWindow:null}),this.channelzEnabled);this.channelzEnabled&&this.listenerChildrenTracker.refChild(s),this.http2ServerList.push({server:n,channelzRef:s}),this.trace("Successfully bound "+(0,u.subchannelAddressToString)(e)),i("port"in e?e.port:t),n.removeListener("error",a)})})})).then(e=>{let n=0;for(let r of e)if("number"==typeof r&&(n+=1,r!==t))throw Error("Invalid state: multiple port numbers added from single address");return{port:t,count:n+r}}),v=e=>{if(0===e.length)return Promise.resolve({port:0,count:0});let t=e[0],r=m();return new Promise((n,i)=>{let s=r=>{this.trace("Failed to bind "+(0,u.subchannelAddressToString)(t)+" with error "+r.message),n(v(e.slice(1)))};r.once("error",s),r.listen(t,()=>{if(this.shutdown){r.close(),n({port:0,count:0});return}let t=r.address(),i={host:t.address,port:t.port},a=(0,h.registerChannelzSocket)((0,u.subchannelAddressToString)(i),()=>({localAddress:i,remoteAddress:null,security:null,remoteName:null,streamsStarted:0,streamsSucceeded:0,streamsFailed:0,messagesSent:0,messagesReceived:0,keepAlivesSent:0,lastLocalStreamCreatedTimestamp:null,lastRemoteStreamCreatedTimestamp:null,lastMessageSentTimestamp:null,lastMessageReceivedTimestamp:null,localFlowControlWindow:null,remoteFlowControlWindow:null}),this.channelzEnabled);this.channelzEnabled&&this.listenerChildrenTracker.refChild(a),this.http2ServerList.push({server:r,channelzRef:a}),this.trace("Successfully bound "+(0,u.subchannelAddressToString)(i)),n(g(e.slice(1),t.port,1)),r.removeListener("error",s)})})},b={onSuccessfulResolution:(t,r,n)=>{let s;if(b.onSuccessfulResolution=()=>{},this.shutdown&&f(Error("bindAsync failed because server is shutdown"),0),0===t.length)return void f(Error(`No addresses resolved for port ${e}`),0);(s=(0,u.isTcpSubchannelAddress)(t[0])?0===t[0].port?v(t):g(t,t[0].port,0):g(t,1,0)).then(e=>{if(0===e.count){let e=`No address added out of total ${t.length} resolved`;l.log(i.LogVerbosity.ERROR,e),f(Error(e),0)}else e.count<t.length&&l.log(i.LogVerbosity.INFO,`WARNING Only ${e.count} addresses added out of total ${t.length} resolved`),f(null,e.port)},e=>{let r=`No address added out of total ${t.length} resolved`;l.log(i.LogVerbosity.ERROR,r),f(Error(r),0)})},onError:e=>{f(Error(e.details),0)}};(0,o.createResolver)(d,b,this.options).updateResolution()}forceShutdown(){for(let{server:e,channelzRef:t}of this.http2ServerList)e.listening&&e.close(()=>{this.channelzEnabled&&(this.listenerChildrenTracker.unrefChild(t),(0,h.unregisterChannelzRef)(t))});this.started=!1,this.shutdown=!0,this.sessions.forEach((e,t)=>{t.destroy(n.constants.NGHTTP2_CANCEL)}),this.sessions.clear(),this.channelzEnabled&&(0,h.unregisterChannelzRef)(this.channelzRef)}register(e,t,r,n,i){return!this.handlers.has(e)&&(this.handlers.set(e,{func:t,serialize:r,deserialize:n,type:i,path:e}),!0)}unregister(e){return this.handlers.delete(e)}start(){if(0===this.http2ServerList.length||this.http2ServerList.every(({server:e})=>!0!==e.listening))throw Error("server must be bound in order to start");if(!0===this.started)throw Error("server is already started");this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO","Starting"),this.started=!0}tryShutdown(e){let t=t=>{this.channelzEnabled&&(0,h.unregisterChannelzRef)(this.channelzRef),e(t)},r=0;function n(){0==--r&&t()}for(let{server:e,channelzRef:t}of(this.started=!1,this.shutdown=!0,this.http2ServerList))e.listening&&(r++,e.close(()=>{this.channelzEnabled&&(this.listenerChildrenTracker.unrefChild(t),(0,h.unregisterChannelzRef)(t)),n()}));this.sessions.forEach((e,t)=>{t.closed||(r+=1,t.close(n))}),0===r&&t()}addHttp2Port(){throw Error("Not yet implemented")}getChannelzRef(){return this.channelzRef}_verifyContentType(e,t){let r=t[n.constants.HTTP2_HEADER_CONTENT_TYPE];return"string"==typeof r&&!!r.startsWith("application/grpc")||(e.respond({[n.constants.HTTP2_HEADER_STATUS]:n.constants.HTTP_STATUS_UNSUPPORTED_MEDIA_TYPE},{endStream:!0}),!1)}_retrieveHandler(e){this.trace("Received call to method "+e+" at address "+this.serverAddressString);let t=this.handlers.get(e);return void 0===t?(this.trace("No handler registered for method "+e+". Sending UNIMPLEMENTED status."),null):t}_respondWithError(e,t,r=null){let n=new s.Http2ServerCallStream(t,null,this.options);void 0===e.code&&(e.code=i.Status.INTERNAL),this.channelzEnabled&&(this.callTracker.addCallFailed(),null==r||r.streamTracker.addCallFailed()),n.sendError(e)}_channelzHandler(e,t){let r=this.sessions.get(e.session);if(this.callTracker.addCallStarted(),null==r||r.streamTracker.addCallStarted(),!this._verifyContentType(e,t)){this.callTracker.addCallFailed(),null==r||r.streamTracker.addCallFailed();return}let n=t[m],a=this._retrieveHandler(n);if(!a)return void this._respondWithError(v(n),e,r);let o=new s.Http2ServerCallStream(e,a,this.options);o.once("callEnd",e=>{e===i.Status.OK?this.callTracker.addCallSucceeded():this.callTracker.addCallFailed()}),r&&(o.once("streamEnd",e=>{e?r.streamTracker.addCallSucceeded():r.streamTracker.addCallFailed()}),o.on("sendMessage",()=>{r.messagesSent+=1,r.lastMessageSentTimestamp=new Date}),o.on("receiveMessage",()=>{r.messagesReceived+=1,r.lastMessageReceivedTimestamp=new Date})),this._runHandlerForCall(o,a,t)||(this.callTracker.addCallFailed(),null==r||r.streamTracker.addCallFailed(),o.sendError({code:i.Status.INTERNAL,details:`Unknown handler type: ${a.type}`}))}_streamHandler(e,t){if(!0!==this._verifyContentType(e,t))return;let r=t[m],n=this._retrieveHandler(r);if(!n)return void this._respondWithError(v(r),e,null);let a=new s.Http2ServerCallStream(e,n,this.options);this._runHandlerForCall(a,n,t)||a.sendError({code:i.Status.INTERNAL,details:`Unknown handler type: ${n.type}`})}_runHandlerForCall(e,t,r){var n;let i=e.receiveMetadata(r),s=null!=(n=i.get("grpc-encoding")[0])?n:"identity";i.remove("grpc-encoding");let{type:a}=t;if("unary"===a)T(e,t,i,s);else if("clientStream"===a)w(e,t,i,s);else if("serverStream"===a)C(e,t,i,s);else{if("bidi"!==a)return!1;x(e,t,i,s)}return!0}_setupHandlers(e){if(null===e)return;let t=e.address(),r="null";t&&(r="string"==typeof t?t:t.address+":"+t.port),this.serverAddressString=r;let i=this.channelzEnabled?this._channelzHandler:this._streamHandler;e.on("stream",i.bind(this)),e.on("session",e=>{var t,r,i,s,a;if(!this.started)return void e.destroy();let o=(0,h.registerChannelzSocket)(null!=(t=e.socket.remoteAddress)?t:"unknown",this.getChannelzSessionInfoGetter(e),this.channelzEnabled),l={ref:o,streamTracker:new h.ChannelzCallTracker,messagesSent:0,messagesReceived:0,lastMessageSentTimestamp:null,lastMessageReceivedTimestamp:null};this.sessions.set(e,l);let u=e.socket.remoteAddress;this.channelzEnabled&&(this.channelzTrace.addTrace("CT_INFO","Connection established by client "+u),this.sessionChildrenTracker.refChild(o));let c=null,p=null,f=!1;if(this.maxConnectionAgeMs!==d){let t=this.maxConnectionAgeMs/10,s=Math.random()*t*2-t;c=null==(i=(r=setTimeout(()=>{var t,r;f=!0,this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO","Connection dropped by max connection age from "+u);try{e.goaway(n.constants.NGHTTP2_NO_ERROR,0x7fffffff,Buffer.from("max_age"))}catch(t){e.destroy();return}e.close(),this.maxConnectionAgeGraceMs!==d&&(p=null==(r=(t=setTimeout(()=>{e.destroy()},this.maxConnectionAgeGraceMs)).unref)?void 0:r.call(t))},this.maxConnectionAgeMs+s)).unref)?void 0:i.call(r)}let m=null==(a=(s=setInterval(()=>{var t,r;let n=null==(r=(t=setTimeout(()=>{f=!0,this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO","Connection dropped by keepalive timeout from "+u),e.close()},this.keepaliveTimeoutMs)).unref)?void 0:r.call(t);try{e.ping((e,t,r)=>{clearTimeout(n)})}catch(t){e.destroy()}},this.keepaliveTimeMs)).unref)?void 0:a.call(s);e.on("close",()=>{this.channelzEnabled&&(f||this.channelzTrace.addTrace("CT_INFO","Connection dropped by client "+u),this.sessionChildrenTracker.unrefChild(o),(0,h.unregisterChannelzRef)(o)),c&&clearTimeout(c),p&&clearTimeout(p),m&&clearTimeout(m),this.sessions.delete(e)})})}}async function T(e,t,r,n){try{let i=await e.receiveUnaryMessage(n);if(void 0===i||e.cancelled)return;let a=new s.ServerUnaryCallImpl(e,r,i);t.func(a,(t,r,n,i)=>{e.sendUnaryMessage(t,r,n,i)})}catch(t){e.sendError(t)}}function w(e,t,r,n){let i=new s.ServerReadableStreamImpl(e,r,t.deserialize,n);function a(t,r,n,s){i.destroy(),e.sendUnaryMessage(t,r,n,s)}e.cancelled||(i.on("error",a),t.func(i,a))}async function C(e,t,r,n){try{let i=await e.receiveUnaryMessage(n);if(void 0===i||e.cancelled)return;let a=new s.ServerWritableStreamImpl(e,r,t.serialize,i);t.func(a)}catch(t){e.sendError(t)}}function x(e,t,r,n){let i=new s.ServerDuplexStreamImpl(e,r,t.serialize,t.deserialize,n);e.cancelled||t.func(i)}t.Server=S},4719:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BaseSubchannelWrapper=void 0;class r{constructor(e){this.child=e}getConnectivityState(){return this.child.getConnectivityState()}addConnectivityStateListener(e){this.child.addConnectivityStateListener(e)}removeConnectivityStateListener(e){this.child.removeConnectivityStateListener(e)}startConnecting(){this.child.startConnecting()}getAddress(){return this.child.getAddress()}throttleKeepalive(e){this.child.throttleKeepalive(e)}ref(){this.child.ref()}unref(){this.child.unref()}getChannelzRef(){return this.child.getChannelzRef()}getRealSubchannel(){return this.child.getRealSubchannel()}realSubchannelEquals(e){return this.getRealSubchannel()===e.getRealSubchannel()}}t.BaseSubchannelWrapper=r},5674:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mapUriDefaultScheme=t.getDefaultAuthority=t.createResolver=t.registerDefaultScheme=t.registerResolver=void 0;let n=r(26786),i={},s=null;t.registerResolver=function(e,t){i[e]=t},t.registerDefaultScheme=function(e){s=e},t.createResolver=function(e,t,r){if(void 0!==e.scheme&&e.scheme in i)return new i[e.scheme](e,t,r);throw Error(`No resolver could be created for target ${(0,n.uriToString)(e)}`)},t.getDefaultAuthority=function(e){if(void 0!==e.scheme&&e.scheme in i)return i[e.scheme].getDefaultAuthority(e);throw Error(`Invalid target ${(0,n.uriToString)(e)}`)},t.mapUriDefaultScheme=function(e){if(void 0===e.scheme||!(e.scheme in i))if(null!==s)return{scheme:s,authority:void 0,path:(0,n.uriToString)(e)};else return null;return e}},7775:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Client=void 0;let n=r(24168),i=r(18453),s=r(40536),a=r(71271),o=r(86777),l=r(3712),u=Symbol(),c=Symbol(),h=Symbol(),d=Symbol();function p(e){return"function"==typeof e}function f(e){return e.stack.split("\n").slice(1).join("\n")}class m{constructor(e,t,r={}){var n,s;if(r=Object.assign({},r),this[c]=null!=(n=r.interceptors)?n:[],delete r.interceptors,this[h]=null!=(s=r.interceptor_providers)?s:[],delete r.interceptor_providers,this[c].length>0&&this[h].length>0)throw Error("Both interceptors and interceptor_providers were passed as options to the client constructor. Only one of these is allowed.");if(this[d]=r.callInvocationTransformer,delete r.callInvocationTransformer,r.channelOverride)this[u]=r.channelOverride;else if(r.channelFactoryOverride){let n=r.channelFactoryOverride;delete r.channelFactoryOverride,this[u]=n(e,t,r)}else this[u]=new i.ChannelImplementation(e,t,r)}close(){this[u].close()}getChannel(){return this[u]}waitForReady(e,t){let r=n=>{let i;if(n)return void t(Error("Failed to connect before the deadline"));try{i=this[u].getConnectivityState(!0)}catch(e){t(Error("The channel has been closed"));return}if(i===s.ConnectivityState.READY)t();else try{this[u].watchConnectivityState(i,e,r)}catch(e){t(Error("The channel has been closed"))}};setImmediate(r)}checkOptionalUnaryResponseArguments(e,t,r){if(p(e))return{metadata:new o.Metadata,options:{},callback:e};if(p(t))if(e instanceof o.Metadata)return{metadata:e,options:{},callback:t};else return{metadata:new o.Metadata,options:e,callback:t};if(!(e instanceof o.Metadata&&t instanceof Object&&p(r)))throw Error("Incorrect arguments passed");return{metadata:e,options:t,callback:r}}makeUnaryRequest(e,t,r,i,s,o,p){var m,g;let y=this.checkOptionalUnaryResponseArguments(s,o,p),v={path:e,requestStream:!1,responseStream:!1,requestSerialize:t,responseDeserialize:r},b={argument:i,metadata:y.metadata,call:new n.ClientUnaryCallImpl,channel:this[u],methodDefinition:v,callOptions:y.options,callback:y.callback};this[d]&&(b=this[d](b));let S=b.call,T={clientInterceptors:this[c],clientInterceptorProviders:this[h],callInterceptors:null!=(m=b.callOptions.interceptors)?m:[],callInterceptorProviders:null!=(g=b.callOptions.interceptor_providers)?g:[]},w=(0,l.getInterceptingCall)(T,b.methodDefinition,b.callOptions,b.channel);S.call=w;let C=null,x=!1,E=Error();return w.start(b.metadata,{onReceiveMetadata:e=>{S.emit("metadata",e)},onReceiveMessage(e){null!==C&&w.cancelWithStatus(a.Status.INTERNAL,"Too many responses received"),C=e},onReceiveStatus(e){if(!x){if(x=!0,e.code===a.Status.OK)if(null===C){let t=f(E);b.callback((0,n.callErrorFromStatus)({code:a.Status.INTERNAL,details:"No message received",metadata:e.metadata},t))}else b.callback(null,C);else{let t=f(E);b.callback((0,n.callErrorFromStatus)(e,t))}E=null,S.emit("status",e)}}}),w.sendMessage(i),w.halfClose(),S}makeClientStreamRequest(e,t,r,i,s,o){var p,m;let g=this.checkOptionalUnaryResponseArguments(i,s,o),y={path:e,requestStream:!0,responseStream:!1,requestSerialize:t,responseDeserialize:r},v={metadata:g.metadata,call:new n.ClientWritableStreamImpl(t),channel:this[u],methodDefinition:y,callOptions:g.options,callback:g.callback};this[d]&&(v=this[d](v));let b=v.call,S={clientInterceptors:this[c],clientInterceptorProviders:this[h],callInterceptors:null!=(p=v.callOptions.interceptors)?p:[],callInterceptorProviders:null!=(m=v.callOptions.interceptor_providers)?m:[]},T=(0,l.getInterceptingCall)(S,v.methodDefinition,v.callOptions,v.channel);b.call=T;let w=null,C=!1,x=Error();return T.start(v.metadata,{onReceiveMetadata:e=>{b.emit("metadata",e)},onReceiveMessage(e){null!==w&&T.cancelWithStatus(a.Status.INTERNAL,"Too many responses received"),w=e},onReceiveStatus(e){if(!C){if(C=!0,e.code===a.Status.OK)if(null===w){let t=f(x);v.callback((0,n.callErrorFromStatus)({code:a.Status.INTERNAL,details:"No message received",metadata:e.metadata},t))}else v.callback(null,w);else{let t=f(x);v.callback((0,n.callErrorFromStatus)(e,t))}x=null,b.emit("status",e)}}}),b}checkMetadataAndOptions(e,t){let r,n;return e instanceof o.Metadata?(r=e,n=t||{}):(n=e||{},r=new o.Metadata),{metadata:r,options:n}}makeServerStreamRequest(e,t,r,i,s,o){var p,m;let g=this.checkMetadataAndOptions(s,o),y={path:e,requestStream:!1,responseStream:!0,requestSerialize:t,responseDeserialize:r},v={argument:i,metadata:g.metadata,call:new n.ClientReadableStreamImpl(r),channel:this[u],methodDefinition:y,callOptions:g.options};this[d]&&(v=this[d](v));let b=v.call,S={clientInterceptors:this[c],clientInterceptorProviders:this[h],callInterceptors:null!=(p=v.callOptions.interceptors)?p:[],callInterceptorProviders:null!=(m=v.callOptions.interceptor_providers)?m:[]},T=(0,l.getInterceptingCall)(S,v.methodDefinition,v.callOptions,v.channel);b.call=T;let w=!1,C=Error();return T.start(v.metadata,{onReceiveMetadata(e){b.emit("metadata",e)},onReceiveMessage(e){b.push(e)},onReceiveStatus(e){if(!w){if(w=!0,b.push(null),e.code!==a.Status.OK){let t=f(C);b.emit("error",(0,n.callErrorFromStatus)(e,t))}C=null,b.emit("status",e)}}}),T.sendMessage(i),T.halfClose(),b}makeBidiStreamRequest(e,t,r,i,s){var o,p;let m=this.checkMetadataAndOptions(i,s),g={path:e,requestStream:!0,responseStream:!0,requestSerialize:t,responseDeserialize:r},y={metadata:m.metadata,call:new n.ClientDuplexStreamImpl(t,r),channel:this[u],methodDefinition:g,callOptions:m.options};this[d]&&(y=this[d](y));let v=y.call,b={clientInterceptors:this[c],clientInterceptorProviders:this[h],callInterceptors:null!=(o=y.callOptions.interceptors)?o:[],callInterceptorProviders:null!=(p=y.callOptions.interceptor_providers)?p:[]},S=(0,l.getInterceptingCall)(b,y.methodDefinition,y.callOptions,y.channel);v.call=S;let T=!1,w=Error();return S.start(y.metadata,{onReceiveMetadata(e){v.emit("metadata",e)},onReceiveMessage(e){v.push(e)},onReceiveStatus(e){if(!T){if(T=!0,v.push(null),e.code!==a.Status.OK){let t=f(w);v.emit("error",(0,n.callErrorFromStatus)(e,t))}w=null,v.emit("status",e)}}}),v}}t.Client=m},8707:function(e,t,r){"use strict";var n=t;function i(e,t,r){for(var n=Object.keys(t),i=0;i<n.length;++i)void 0!==e[n[i]]&&r||(e[n[i]]=t[n[i]]);return e}function s(e){function t(e,r){if(!(this instanceof t))return new t(e,r);Object.defineProperty(this,"message",{get:function(){return e}}),Error.captureStackTrace?Error.captureStackTrace(this,t):Object.defineProperty(this,"stack",{value:Error().stack||""}),r&&i(this,r)}return t.prototype=Object.create(Error.prototype,{constructor:{value:t,writable:!0,enumerable:!1,configurable:!0},name:{get:function(){return e},set:void 0,enumerable:!1,configurable:!0},toString:{value:function(){return this.name+": "+this.message},writable:!0,enumerable:!1,configurable:!0}}),t}n.asPromise=r(75108),n.base64=r(35108),n.EventEmitter=r(84553),n.float=r(13127),n.inquire=r(89644),n.utf8=r(61996),n.pool=r(83273),n.LongBits=r(31156),n.isNode=!!("undefined"!=typeof global&&global&&global.process&&global.process.versions&&global.process.versions.node),n.global=n.isNode&&global||"undefined"!=typeof window&&window||"undefined"!=typeof self&&self||this,n.emptyArray=Object.freeze?Object.freeze([]):[],n.emptyObject=Object.freeze?Object.freeze({}):{},n.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},n.isString=function(e){return"string"==typeof e||e instanceof String},n.isObject=function(e){return e&&"object"==typeof e},n.isset=n.isSet=function(e,t){var r=e[t];return!!(null!=r&&e.hasOwnProperty(t))&&("object"!=typeof r||(Array.isArray(r)?r.length:Object.keys(r).length)>0)},n.Buffer=function(){try{var e=n.inquire("buffer").Buffer;return e.prototype.utf8Write?e:null}catch(e){return null}}(),n._Buffer_from=null,n._Buffer_allocUnsafe=null,n.newBuffer=function(e){return"number"==typeof e?n.Buffer?n._Buffer_allocUnsafe(e):new n.Array(e):n.Buffer?n._Buffer_from(e):"undefined"==typeof Uint8Array?e:new Uint8Array(e)},n.Array="undefined"!=typeof Uint8Array?Uint8Array:Array,n.Long=n.global.dcodeIO&&n.global.dcodeIO.Long||n.global.Long||n.inquire("long"),n.key2Re=/^true|false|0|1$/,n.key32Re=/^-?(?:0|[1-9][0-9]*)$/,n.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,n.longToHash=function(e){return e?n.LongBits.from(e).toHash():n.LongBits.zeroHash},n.longFromHash=function(e,t){var r=n.LongBits.fromHash(e);return n.Long?n.Long.fromBits(r.lo,r.hi,t):r.toNumber(!!t)},n.merge=i,n.lcFirst=function(e){return e.charAt(0).toLowerCase()+e.substring(1)},n.newError=s,n.ProtocolError=s("ProtocolError"),n.oneOfGetter=function(e){for(var t={},r=0;r<e.length;++r)t[e[r]]=1;return function(){for(var e=Object.keys(this),r=e.length-1;r>-1;--r)if(1===t[e[r]]&&void 0!==this[e[r]]&&null!==this[e[r]])return e[r]}},n.oneOfSetter=function(e){return function(t){for(var r=0;r<e.length;++r)e[r]!==t&&delete this[e[r]]}},n.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},n._configure=function(){var e=n.Buffer;if(!e){n._Buffer_from=n._Buffer_allocUnsafe=null;return}n._Buffer_from=e.from!==Uint8Array.from&&e.from||function(t,r){return new e(t,r)},n._Buffer_allocUnsafe=e.allocUnsafe||function(t){return new e(t)}}},8920:(e,t,r)=>{"use strict";e.exports=i;var n=r(8707);function i(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)this[t[r]]=e[t[r]]}i.create=function(e){return this.$type.create(e)},i.encode=function(e,t){return this.$type.encode(e,t)},i.encodeDelimited=function(e,t){return this.$type.encodeDelimited(e,t)},i.decode=function(e){return this.$type.decode(e)},i.decodeDelimited=function(e){return this.$type.decodeDelimited(e)},i.verify=function(e){return this.$type.verify(e)},i.fromObject=function(e){return this.$type.fromObject(e)},i.toObject=function(e,t){return this.$type.toObject(e,t)},i.prototype.toJSON=function(){return this.$type.toObject(this,n.toJSONOptions)}},9227:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getDefaultRootsData=t.CIPHER_SUITES=void 0;let n=r(29021);t.CIPHER_SUITES=process.env.GRPC_SSL_CIPHER_SUITES;let i=process.env.GRPC_DEFAULT_SSL_ROOTS_FILE_PATH,s=null;t.getDefaultRootsData=function(){return i?(null===s&&(s=n.readFileSync(i)),s):null}},10504:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.extractAndSelectServiceConfig=t.validateServiceConfig=t.validateRetryThrottling=void 0;let n=r(21820),i=r(71271),s=r(86239),a=/^\d+(\.\d{1,9})?s$/,o="node";function l(e){if("service"in e&&""!==e.service){if("string"!=typeof e.service)throw Error(`Invalid method config name: invalid service: expected type string, got ${typeof e.service}`);if(!("method"in e)||""===e.method)return{service:e.service};if("string"!=typeof e.method)throw Error(`Invalid method config name: invalid method: expected type string, got ${typeof e.service}`);return{service:e.service,method:e.method}}if("method"in e&&void 0!==e.method)throw Error("Invalid method config name: method set with empty or unset service");return{}}function u(e){if(!("maxAttempts"in e)||!Number.isInteger(e.maxAttempts)||e.maxAttempts<2)throw Error("Invalid method config retry policy: maxAttempts must be an integer at least 2");if(!("initialBackoff"in e)||"string"!=typeof e.initialBackoff||!a.test(e.initialBackoff))throw Error("Invalid method config retry policy: initialBackoff must be a string consisting of a positive integer followed by s");if(!("maxBackoff"in e)||"string"!=typeof e.maxBackoff||!a.test(e.maxBackoff))throw Error("Invalid method config retry policy: maxBackoff must be a string consisting of a positive integer followed by s");if(!("backoffMultiplier"in e)||"number"!=typeof e.backoffMultiplier||e.backoffMultiplier<=0)throw Error("Invalid method config retry policy: backoffMultiplier must be a number greater than 0");if(!("retryableStatusCodes"in e&&Array.isArray(e.retryableStatusCodes)))throw Error("Invalid method config retry policy: retryableStatusCodes is required");if(0===e.retryableStatusCodes.length)throw Error("Invalid method config retry policy: retryableStatusCodes must be non-empty");for(let t of e.retryableStatusCodes)if("number"==typeof t){if(!Object.values(i.Status).includes(t))throw Error("Invalid method config retry policy: retryableStatusCodes value not in status code range")}else if("string"==typeof t){if(!Object.values(i.Status).includes(t.toUpperCase()))throw Error("Invalid method config retry policy: retryableStatusCodes value not a status code name")}else throw Error("Invalid method config retry policy: retryableStatusCodes value must be a string or number");return{maxAttempts:e.maxAttempts,initialBackoff:e.initialBackoff,maxBackoff:e.maxBackoff,backoffMultiplier:e.backoffMultiplier,retryableStatusCodes:e.retryableStatusCodes}}function c(e){if(!("maxAttempts"in e)||!Number.isInteger(e.maxAttempts)||e.maxAttempts<2)throw Error("Invalid method config hedging policy: maxAttempts must be an integer at least 2");if("hedgingDelay"in e&&("string"!=typeof e.hedgingDelay||!a.test(e.hedgingDelay)))throw Error("Invalid method config hedging policy: hedgingDelay must be a string consisting of a positive integer followed by s");if("nonFatalStatusCodes"in e&&Array.isArray(e.nonFatalStatusCodes))for(let t of e.nonFatalStatusCodes)if("number"==typeof t){if(!Object.values(i.Status).includes(t))throw Error("Invlid method config hedging policy: nonFatalStatusCodes value not in status code range")}else if("string"==typeof t){if(!Object.values(i.Status).includes(t.toUpperCase()))throw Error("Invlid method config hedging policy: nonFatalStatusCodes value not a status code name")}else throw Error("Invlid method config hedging policy: nonFatalStatusCodes value must be a string or number");let t={maxAttempts:e.maxAttempts};return e.hedgingDelay&&(t.hedgingDelay=e.hedgingDelay),e.nonFatalStatusCodes&&(t.nonFatalStatusCodes=e.nonFatalStatusCodes),t}function h(e){var t;let r={name:[]};if(!("name"in e)||!Array.isArray(e.name))throw Error("Invalid method config: invalid name array");for(let t of e.name)r.name.push(l(t));if("waitForReady"in e){if("boolean"!=typeof e.waitForReady)throw Error("Invalid method config: invalid waitForReady");r.waitForReady=e.waitForReady}if("timeout"in e)if("object"==typeof e.timeout){if(!("seconds"in e.timeout)||"number"!=typeof e.timeout.seconds)throw Error("Invalid method config: invalid timeout.seconds");if(!("nanos"in e.timeout)||"number"!=typeof e.timeout.nanos)throw Error("Invalid method config: invalid timeout.nanos");r.timeout=e.timeout}else if("string"==typeof e.timeout&&a.test(e.timeout)){let n=e.timeout.substring(0,e.timeout.length-1).split(".");r.timeout={seconds:0|n[0],nanos:(null!=(t=n[1])?t:0)|0}}else throw Error("Invalid method config: invalid timeout");if("maxRequestBytes"in e){if("number"!=typeof e.maxRequestBytes)throw Error("Invalid method config: invalid maxRequestBytes");r.maxRequestBytes=e.maxRequestBytes}if("maxResponseBytes"in e){if("number"!=typeof e.maxResponseBytes)throw Error("Invalid method config: invalid maxRequestBytes");r.maxResponseBytes=e.maxResponseBytes}if("retryPolicy"in e)if("hedgingPolicy"in e)throw Error("Invalid method config: retryPolicy and hedgingPolicy cannot both be specified");else r.retryPolicy=u(e.retryPolicy);else"hedgingPolicy"in e&&(r.hedgingPolicy=c(e.hedgingPolicy));return r}function d(e){if(!("maxTokens"in e)||"number"!=typeof e.maxTokens||e.maxTokens<=0||e.maxTokens>1e3)throw Error("Invalid retryThrottling: maxTokens must be a number in (0, 1000]");if(!("tokenRatio"in e)||"number"!=typeof e.tokenRatio||e.tokenRatio<=0)throw Error("Invalid retryThrottling: tokenRatio must be a number greater than 0");return{maxTokens:+e.maxTokens.toFixed(3),tokenRatio:+e.tokenRatio.toFixed(3)}}function p(e){let t={loadBalancingConfig:[],methodConfig:[]};if("loadBalancingPolicy"in e)if("string"==typeof e.loadBalancingPolicy)t.loadBalancingPolicy=e.loadBalancingPolicy;else throw Error("Invalid service config: invalid loadBalancingPolicy");if("loadBalancingConfig"in e)if(Array.isArray(e.loadBalancingConfig))for(let r of e.loadBalancingConfig)t.loadBalancingConfig.push((0,s.validateLoadBalancingConfig)(r));else throw Error("Invalid service config: invalid loadBalancingConfig");if("methodConfig"in e&&Array.isArray(e.methodConfig))for(let r of e.methodConfig)t.methodConfig.push(h(r));"retryThrottling"in e&&(t.retryThrottling=d(e.retryThrottling));let r=[];for(let e of t.methodConfig)for(let t of e.name){for(let e of r)if(t.service===e.service&&t.method===e.method)throw Error(`Invalid service config: duplicate name ${t.service}/${t.method}`);r.push(t)}return t}function f(e){if(!("serviceConfig"in e))throw Error("Invalid service config choice: missing service config");let t={serviceConfig:p(e.serviceConfig)};if("clientLanguage"in e)if(Array.isArray(e.clientLanguage))for(let r of(t.clientLanguage=[],e.clientLanguage))if("string"==typeof r)t.clientLanguage.push(r);else throw Error("Invalid service config choice: invalid clientLanguage");else throw Error("Invalid service config choice: invalid clientLanguage");if("clientHostname"in e)if(Array.isArray(e.clientHostname))for(let r of(t.clientHostname=[],e.clientHostname))if("string"==typeof r)t.clientHostname.push(r);else throw Error("Invalid service config choice: invalid clientHostname");else throw Error("Invalid service config choice: invalid clientHostname");if("percentage"in e)if("number"==typeof e.percentage&&0<=e.percentage&&e.percentage<=100)t.percentage=e.percentage;else throw Error("Invalid service config choice: invalid percentage");let r=["clientLanguage","percentage","clientHostname","serviceConfig"];for(let t in e)if(!r.includes(t))throw Error(`Invalid service config choice: unexpected field ${t}`);return t}function m(e,t){if(!Array.isArray(e))throw Error("Invalid service config list");for(let r of e){let e=f(r);if("number"!=typeof e.percentage||!(t>e.percentage)){if(Array.isArray(e.clientHostname)){let t=!1;for(let r of e.clientHostname)r===n.hostname()&&(t=!0);if(!t)continue}if(Array.isArray(e.clientLanguage)){let t=!1;for(let r of e.clientLanguage)r===o&&(t=!0);if(!t)continue}return e.serviceConfig}}throw Error("No matching service config found")}t.validateRetryThrottling=d,t.validateServiceConfig=p,t.extractAndSelectServiceConfig=function(e,t){for(let r of e)if(r.length>0&&r[0].startsWith("grpc_config="))return m(JSON.parse(r.join("").substring(12)),t);return null}},10788:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StatusBuilder=void 0;class r{constructor(){this.code=null,this.details=null,this.metadata=null}withCode(e){return this.code=e,this}withDetails(e){return this.details=e,this}withMetadata(e){return this.metadata=e,this}build(){let e={};return null!==this.code&&(e.code=this.code),null!==this.details&&(e.details=this.details),null!==this.metadata&&(e.metadata=this.metadata),e}}t.StatusBuilder=r},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},12630:(e,t,r)=>{"use strict";e.exports=a;var n=r(64824);((a.prototype=Object.create(n.prototype)).constructor=a).className="OneOf";var i=r(73267),s=r(93107);function a(e,t,r,i){if(Array.isArray(t)||(r=t,t=void 0),n.call(this,e,r),!(void 0===t||Array.isArray(t)))throw TypeError("fieldNames must be an Array");this.oneof=t||[],this.fieldsArray=[],this.comment=i}function o(e){if(e.parent)for(var t=0;t<e.fieldsArray.length;++t)e.fieldsArray[t].parent||e.parent.add(e.fieldsArray[t])}a.fromJSON=function(e,t){return new a(e,t.oneof,t.options,t.comment)},a.prototype.toJSON=function(e){var t=!!e&&!!e.keepComments;return s.toObject(["options",this.options,"oneof",this.oneof,"comment",t?this.comment:void 0])},a.prototype.add=function(e){if(!(e instanceof i))throw TypeError("field must be a Field");return e.parent&&e.parent!==this.parent&&e.parent.remove(e),this.oneof.push(e.name),this.fieldsArray.push(e),e.partOf=this,o(this),this},a.prototype.remove=function(e){if(!(e instanceof i))throw TypeError("field must be a Field");var t=this.fieldsArray.indexOf(e);if(t<0)throw Error(e+" is not a member of "+this);return this.fieldsArray.splice(t,1),(t=this.oneof.indexOf(e.name))>-1&&this.oneof.splice(t,1),e.partOf=null,this},a.prototype.onAdd=function(e){n.prototype.onAdd.call(this,e);for(var t=this,r=0;r<this.oneof.length;++r){var i=e.get(this.oneof[r]);i&&!i.partOf&&(i.partOf=t,t.fieldsArray.push(i))}o(this)},a.prototype.onRemove=function(e){for(var t,r=0;r<this.fieldsArray.length;++r)(t=this.fieldsArray[r]).parent&&t.parent.remove(t);n.prototype.onRemove.call(this,e)},a.d=function(){for(var e=Array(arguments.length),t=0;t<arguments.length;)e[t]=arguments[t++];return function(t,r){s.decorateType(t.constructor).add(new a(r,e)),Object.defineProperty(t,r,{get:s.oneOfGetter(e),set:s.oneOfSetter(e)})}}},13127:e=>{"use strict";function t(e){return"undefined"!=typeof Float32Array?!function(){var t=new Float32Array([-0]),r=new Uint8Array(t.buffer),n=128===r[3];function i(e,n,i){t[0]=e,n[i]=r[0],n[i+1]=r[1],n[i+2]=r[2],n[i+3]=r[3]}function s(e,n,i){t[0]=e,n[i]=r[3],n[i+1]=r[2],n[i+2]=r[1],n[i+3]=r[0]}function a(e,n){return r[0]=e[n],r[1]=e[n+1],r[2]=e[n+2],r[3]=e[n+3],t[0]}function o(e,n){return r[3]=e[n],r[2]=e[n+1],r[1]=e[n+2],r[0]=e[n+3],t[0]}e.writeFloatLE=n?i:s,e.writeFloatBE=n?s:i,e.readFloatLE=n?a:o,e.readFloatBE=n?o:a}():!function(){function t(e,t,r,n){var i=+(t<0);if(i&&(t=-t),0===t)e(1/t>0?0:0x80000000,r,n);else if(isNaN(t))e(0x7fc00000,r,n);else if(t>34028234663852886e22)e((i<<31|0x7f800000)>>>0,r,n);else if(t<11754943508222875e-54)e((i<<31|Math.round(t/1401298464324817e-60))>>>0,r,n);else{var s=Math.floor(Math.log(t)/Math.LN2),a=8388607&Math.round(t*Math.pow(2,-s)*8388608);e((i<<31|s+127<<23|a)>>>0,r,n)}}function a(e,t,r){var n=e(t,r),i=(n>>31)*2+1,s=n>>>23&255,a=8388607&n;return 255===s?a?NaN:1/0*i:0===s?1401298464324817e-60*i*a:i*Math.pow(2,s-150)*(a+8388608)}e.writeFloatLE=t.bind(null,r),e.writeFloatBE=t.bind(null,n),e.readFloatLE=a.bind(null,i),e.readFloatBE=a.bind(null,s)}(),"undefined"!=typeof Float64Array?!function(){var t=new Float64Array([-0]),r=new Uint8Array(t.buffer),n=128===r[7];function i(e,n,i){t[0]=e,n[i]=r[0],n[i+1]=r[1],n[i+2]=r[2],n[i+3]=r[3],n[i+4]=r[4],n[i+5]=r[5],n[i+6]=r[6],n[i+7]=r[7]}function s(e,n,i){t[0]=e,n[i]=r[7],n[i+1]=r[6],n[i+2]=r[5],n[i+3]=r[4],n[i+4]=r[3],n[i+5]=r[2],n[i+6]=r[1],n[i+7]=r[0]}function a(e,n){return r[0]=e[n],r[1]=e[n+1],r[2]=e[n+2],r[3]=e[n+3],r[4]=e[n+4],r[5]=e[n+5],r[6]=e[n+6],r[7]=e[n+7],t[0]}function o(e,n){return r[7]=e[n],r[6]=e[n+1],r[5]=e[n+2],r[4]=e[n+3],r[3]=e[n+4],r[2]=e[n+5],r[1]=e[n+6],r[0]=e[n+7],t[0]}e.writeDoubleLE=n?i:s,e.writeDoubleBE=n?s:i,e.readDoubleLE=n?a:o,e.readDoubleBE=n?o:a}():!function(){function t(e,t,r,n,i,s){var a,o=+(n<0);if(o&&(n=-n),0===n)e(0,i,s+t),e(1/n>0?0:0x80000000,i,s+r);else if(isNaN(n))e(0,i,s+t),e(0x7ff80000,i,s+r);else if(n>17976931348623157e292)e(0,i,s+t),e((o<<31|0x7ff00000)>>>0,i,s+r);else if(n<22250738585072014e-324)e((a=n/5e-324)>>>0,i,s+t),e((o<<31|a/0x100000000)>>>0,i,s+r);else{var l=Math.floor(Math.log(n)/Math.LN2);1024===l&&(l=1023),e(0x10000000000000*(a=n*Math.pow(2,-l))>>>0,i,s+t),e((o<<31|l+1023<<20|1048576*a&1048575)>>>0,i,s+r)}}function a(e,t,r,n,i){var s=e(n,i+t),a=e(n,i+r),o=(a>>31)*2+1,l=a>>>20&2047,u=0x100000000*(1048575&a)+s;return 2047===l?u?NaN:1/0*o:0===l?5e-324*o*u:o*Math.pow(2,l-1075)*(u+0x10000000000000)}e.writeDoubleLE=t.bind(null,r,0,4),e.writeDoubleBE=t.bind(null,n,4,0),e.readDoubleLE=a.bind(null,i,0,4),e.readDoubleBE=a.bind(null,s,4,0)}(),e}function r(e,t,r){t[r]=255&e,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24}function n(e,t,r){t[r]=e>>>24,t[r+1]=e>>>16&255,t[r+2]=e>>>8&255,t[r+3]=255&e}function i(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0}function s(e,t){return(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}e.exports=t(t)},16239:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getProxiedConnection=t.mapProxyName=void 0;let n=r(31359),i=r(71271),s=r(5674),a=r(81630),o=r(34631),l=r(31359),u=r(43356),c=r(26786),h=r(79551),d=r(44660),p="proxy";function f(e){l.trace(i.LogVerbosity.DEBUG,p,e)}function m(){let e,t="",r="";if(process.env.grpc_proxy)r="grpc_proxy",t=process.env.grpc_proxy;else if(process.env.https_proxy)r="https_proxy",t=process.env.https_proxy;else{if(!process.env.http_proxy)return{};r="http_proxy",t=process.env.http_proxy}try{e=new h.URL(t)}catch(e){return(0,n.log)(i.LogVerbosity.ERROR,`cannot parse value of "${r}" env var`),{}}if("http:"!==e.protocol)return(0,n.log)(i.LogVerbosity.ERROR,`"${e.protocol}" scheme not supported in proxy URI`),{};let s=null;e.username&&(e.password?((0,n.log)(i.LogVerbosity.INFO,"userinfo found in proxy URI"),s=`${e.username}:${e.password}`):s=e.username);let a=e.hostname,o=e.port;""===o&&(o="80");let l={address:`${a}:${o}`};return s&&(l.creds=s),f("Proxy server "+l.address+" set by environment variable "+r),l}function g(){let e=process.env.no_grpc_proxy,t="no_grpc_proxy";return(e||(e=process.env.no_proxy,t="no_proxy"),e)?(f("No proxy server list set by environment variable "+t),e.split(",")):[]}t.mapProxyName=function(e,t){var r;let n={target:e,extraOptions:{}};if((null!=(r=t["grpc.enable_http_proxy"])?r:1)===0||"unix"===e.scheme)return n;let i=m();if(!i.address)return n;let s=(0,c.splitHostPort)(e.path);if(!s)return n;let a=s.host;for(let t of g())if(t===a)return f("Not using proxy for target in no_proxy list: "+(0,c.uriToString)(e)),n;let o={"grpc.http_connect_target":(0,c.uriToString)(e)};return i.creds&&(o["grpc.http_connect_creds"]=i.creds),{target:{scheme:"dns",path:i.address},extraOptions:o}},t.getProxiedConnection=function(e,t,r){var l;if(!("grpc.http_connect_target"in t))return Promise.resolve({});let h=t["grpc.http_connect_target"],p=(0,c.parseUri)(h);if(null===p)return Promise.resolve({});let m=(0,c.splitHostPort)(p.path);if(null===m)return Promise.resolve({});let g=`${m.host}:${null!=(l=m.port)?l:d.DEFAULT_PORT}`,y={method:"CONNECT",path:g},v={Host:g};(0,u.isTcpSubchannelAddress)(e)?(y.host=e.host,y.port=e.port):y.socketPath=e.path,"grpc.http_connect_creds"in t&&(v["Proxy-Authorization"]="Basic "+Buffer.from(t["grpc.http_connect_creds"]).toString("base64")),y.headers=v;let b=(0,u.subchannelAddressToString)(e);return f("Using proxy "+b+" to connect to "+y.path),new Promise((e,t)=>{let l=a.request(y);l.once("connect",(a,u,h)=>{var d;if(l.removeAllListeners(),u.removeAllListeners(),200===a.statusCode)if(f("Successfully connected to "+y.path+" through proxy "+b),"secureContext"in r){let n=(0,s.getDefaultAuthority)(p),i=(0,c.splitHostPort)(n),a=null!=(d=null==i?void 0:i.host)?d:n,l=o.connect(Object.assign({host:a,servername:a,socket:u},r),()=>{f("Successfully established a TLS connection to "+y.path+" through proxy "+b),e({socket:l,realTarget:p})});l.on("error",e=>{f("Failed to establish a TLS connection to "+y.path+" through proxy "+b+" with error "+e.message),t()})}else f("Successfully established a plaintext connection to "+y.path+" through proxy "+b),e({socket:u,realTarget:p});else(0,n.log)(i.LogVerbosity.ERROR,"Failed to connect to "+y.path+" through proxy "+b+" with status "+a.statusCode),t()}),l.once("error",e=>{l.removeAllListeners(),(0,n.log)(i.LogVerbosity.ERROR,"Failed to connect to proxy "+b+" with error "+e.message),t()}),l.end()})}},16973:(e,t,r)=>{"use strict";e.exports=l;var n=r(32110),i=r(93107);function s(e,t){return e.name+": "+t+(e.repeated&&"array"!==t?"[]":e.map&&"object"!==t?"{k:"+e.keyType+"}":"")+" expected"}function a(e,t,r,i){if(t.resolvedType)if(t.resolvedType instanceof n){e("switch(%s){",i)("default:")("return%j",s(t,"enum value"));for(var a=Object.keys(t.resolvedType.values),o=0;o<a.length;++o)e("case %i:",t.resolvedType.values[a[o]]);e("break")("}")}else e("{")("var e=types[%i].verify(%s);",r,i)("if(e)")("return%j+e",t.name+".")("}");else switch(t.type){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":e("if(!util.isInteger(%s))",i)("return%j",s(t,"integer"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":e("if(!util.isInteger(%s)&&!(%s&&util.isInteger(%s.low)&&util.isInteger(%s.high)))",i,i,i,i)("return%j",s(t,"integer|Long"));break;case"float":case"double":e('if(typeof %s!=="number")',i)("return%j",s(t,"number"));break;case"bool":e('if(typeof %s!=="boolean")',i)("return%j",s(t,"boolean"));break;case"string":e("if(!util.isString(%s))",i)("return%j",s(t,"string"));break;case"bytes":e('if(!(%s&&typeof %s.length==="number"||util.isString(%s)))',i,i,i)("return%j",s(t,"buffer"))}return e}function o(e,t,r){switch(t.keyType){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":e("if(!util.key32Re.test(%s))",r)("return%j",s(t,"integer key"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":e("if(!util.key64Re.test(%s))",r)("return%j",s(t,"integer|Long key"));break;case"bool":e("if(!util.key2Re.test(%s))",r)("return%j",s(t,"boolean key"))}return e}function l(e){var t=i.codegen(["m"],e.name+"$verify")('if(typeof m!=="object"||m===null)')("return%j","object expected"),r=e.oneofsArray,n={};r.length&&t("var p={}");for(var l=0;l<e.fieldsArray.length;++l){var u=e._fieldsArray[l].resolve(),c="m"+i.safeProp(u.name);if(u.optional&&t("if(%s!=null&&m.hasOwnProperty(%j)){",c,u.name),u.map)t("if(!util.isObject(%s))",c)("return%j",s(u,"object"))("var k=Object.keys(%s)",c)("for(var i=0;i<k.length;++i){"),o(t,u,"k[i]"),a(t,u,l,c+"[k[i]]")("}");else if(u.repeated)t("if(!Array.isArray(%s))",c)("return%j",s(u,"array"))("for(var i=0;i<%s.length;++i){",c),a(t,u,l,c+"[i]")("}");else{if(u.partOf){var h=i.safeProp(u.partOf.name);1===n[u.partOf.name]&&t("if(p%s===1)",h)("return%j",u.partOf.name+": multiple values"),n[u.partOf.name]=1,t("p%s=1",h)}a(t,u,l,c)}u.optional&&t("}")}return t("return null")}},17061:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addAdminServicesToServer=t.registerAdminService=void 0;let r=[];t.registerAdminService=function(e,t){r.push({getServiceDefinition:e,getHandlers:t})},t.addAdminServicesToServer=function(e){for(let{getServiceDefinition:t,getHandlers:n}of r)e.addService(t(),n())}},17492:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Http2ServerCallStream=t.ServerDuplexStreamImpl=t.ServerWritableStreamImpl=t.ServerReadableStreamImpl=t.ServerUnaryCallImpl=void 0;let n=r(94735),i=r(73496),s=r(27910),a=r(74075),o=r(71271),l=r(86777),u=r(71037),c=r(31359),h=r(60776),d="server_call";function p(e){c.trace(o.LogVerbosity.DEBUG,d,e)}let f="grpc-message",m="grpc-status",g="grpc-timeout",y=/(\d{1,8})\s*([HMSmun])/,v={H:36e5,M:6e4,S:1e3,m:1,u:.001,n:1e-6},b={"grpc-accept-encoding":"identity,deflate,gzip","grpc-encoding":"identity"},S={[i.constants.HTTP2_HEADER_STATUS]:i.constants.HTTP_STATUS_OK,[i.constants.HTTP2_HEADER_CONTENT_TYPE]:"application/grpc+proto"},T={waitForTrailers:!0};class w extends n.EventEmitter{constructor(e,t,r){super(),this.call=e,this.metadata=t,this.request=r,this.cancelled=!1,this.call.setupSurfaceCall(this)}getPeer(){return this.call.getPeer()}sendMetadata(e){this.call.sendMetadata(e)}getDeadline(){return this.call.getDeadline()}getPath(){return this.call.getPath()}}t.ServerUnaryCallImpl=w;class C extends s.Readable{constructor(e,t,r,n){super({objectMode:!0}),this.call=e,this.metadata=t,this.deserialize=r,this.cancelled=!1,this.call.setupSurfaceCall(this),this.call.setupReadable(this,n)}_read(e){this.call.consumeUnpushedMessages(this)&&this.call.resume()}getPeer(){return this.call.getPeer()}sendMetadata(e){this.call.sendMetadata(e)}getDeadline(){return this.call.getDeadline()}getPath(){return this.call.getPath()}}t.ServerReadableStreamImpl=C;class x extends s.Writable{constructor(e,t,r,n){super({objectMode:!0}),this.call=e,this.metadata=t,this.serialize=r,this.request=n,this.cancelled=!1,this.trailingMetadata=new l.Metadata,this.call.setupSurfaceCall(this),this.on("error",e=>{this.call.sendError(e),this.end()})}getPeer(){return this.call.getPeer()}sendMetadata(e){this.call.sendMetadata(e)}getDeadline(){return this.call.getDeadline()}getPath(){return this.call.getPath()}_write(e,t,r){try{let t=this.call.serializeMessage(e);if(!this.call.write(t))return void this.call.once("drain",r)}catch(e){this.emit("error",{details:(0,h.getErrorMessage)(e),code:o.Status.INTERNAL})}r()}_final(e){this.call.sendStatus({code:o.Status.OK,details:"OK",metadata:this.trailingMetadata}),e(null)}end(e){return e&&(this.trailingMetadata=e),super.end()}}t.ServerWritableStreamImpl=x;class E extends s.Duplex{constructor(e,t,r,n,i){super({objectMode:!0}),this.call=e,this.metadata=t,this.serialize=r,this.deserialize=n,this.cancelled=!1,this.trailingMetadata=new l.Metadata,this.call.setupSurfaceCall(this),this.call.setupReadable(this,i),this.on("error",e=>{this.call.sendError(e),this.end()})}getPeer(){return this.call.getPeer()}sendMetadata(e){this.call.sendMetadata(e)}getDeadline(){return this.call.getDeadline()}getPath(){return this.call.getPath()}end(e){return e&&(this.trailingMetadata=e),super.end()}}t.ServerDuplexStreamImpl=E,E.prototype._read=C.prototype._read,E.prototype._write=x.prototype._write,E.prototype._final=x.prototype._final;class _ extends n.EventEmitter{constructor(e,t,r){super(),this.stream=e,this.handler=t,this.cancelled=!1,this.deadlineTimer=null,this.statusSent=!1,this.deadline=1/0,this.wantTrailers=!1,this.metadataSent=!1,this.canPush=!1,this.isPushPending=!1,this.bufferedMessages=[],this.messagesToPush=[],this.maxSendMessageSize=o.DEFAULT_MAX_SEND_MESSAGE_LENGTH,this.maxReceiveMessageSize=o.DEFAULT_MAX_RECEIVE_MESSAGE_LENGTH,this.stream.once("error",e=>{}),this.stream.once("close",()=>{var e;p("Request to method "+(null==(e=this.handler)?void 0:e.path)+" stream closed with rstCode "+this.stream.rstCode),!this.statusSent&&(this.cancelled=!0,this.emit("cancelled","cancelled"),this.emit("streamEnd",!1),this.sendStatus({code:o.Status.CANCELLED,details:"Cancelled by client",metadata:null}),this.deadlineTimer&&clearTimeout(this.deadlineTimer))}),this.stream.on("drain",()=>{this.emit("drain")}),"grpc.max_send_message_length"in r&&(this.maxSendMessageSize=r["grpc.max_send_message_length"]),"grpc.max_receive_message_length"in r&&(this.maxReceiveMessageSize=r["grpc.max_receive_message_length"])}checkCancelled(){return(this.stream.destroyed||this.stream.closed)&&(this.cancelled=!0),this.cancelled}getDecompressedMessage(e,t){let r=e.subarray(5);if("identity"===t)return r;if("deflate"!==t&&"gzip"!==t)return Promise.reject({code:o.Status.UNIMPLEMENTED,details:`Received message compressed with unsupported encoding "${t}"`});{let e;return e="deflate"===t?a.createInflate():a.createGunzip(),new Promise((t,n)=>{let i=0,s=[];e.on("data",t=>{s.push(t),i+=t.byteLength,-1!==this.maxReceiveMessageSize&&i>this.maxReceiveMessageSize&&(e.destroy(),n({code:o.Status.RESOURCE_EXHAUSTED,details:`Received message that decompresses to a size larger than ${this.maxReceiveMessageSize}`}))}),e.on("end",()=>{t(Buffer.concat(s))}),e.write(r),e.end()})}}sendMetadata(e){if(this.checkCancelled()||this.metadataSent)return;this.metadataSent=!0;let t=e?e.toHttp2Headers():null,r=Object.assign(Object.assign(Object.assign({},S),b),t);this.stream.respond(r,T)}receiveMetadata(e){let t=l.Metadata.fromHttp2Headers(e);c.isTracerEnabled(d)&&p("Request to "+this.handler.path+" received headers "+JSON.stringify(t.toJSON()));let r=t.get(g);if(r.length>0){let e=r[0].toString().match(y);if(null===e){let e=Error("Invalid deadline");return e.code=o.Status.OUT_OF_RANGE,this.sendError(e),t}let n=e[1]*v[e[2]]|0,i=new Date;this.deadline=i.setMilliseconds(i.getMilliseconds()+n),this.deadlineTimer=setTimeout(I,n,this),t.remove(g)}return t.remove(i.constants.HTTP2_HEADER_ACCEPT_ENCODING),t.remove(i.constants.HTTP2_HEADER_TE),t.remove(i.constants.HTTP2_HEADER_CONTENT_TYPE),t.remove("grpc-accept-encoding"),t}receiveUnaryMessage(e){return new Promise((t,r)=>{let{stream:n}=this,i=0,s=this,a=[],l=this.maxReceiveMessageSize;function u(e){if(i+=e.byteLength,-1!==l&&i>l){n.removeListener("data",u),n.removeListener("end",c),n.removeListener("error",c),r({code:o.Status.RESOURCE_EXHAUSTED,details:`Received message larger than max (${i} vs. ${l})`});return}a.push(e)}function c(l){if(n.removeListener("data",u),n.removeListener("end",c),n.removeListener("error",c),void 0!==l)return void r({code:o.Status.INTERNAL,details:l.message});if(0===i)return void r({code:o.Status.INTERNAL,details:"received empty unary message"});s.emit("receiveMessage");let h=Buffer.concat(a,i),d=1===h.readUInt8(0)?e:"identity",p=s.getDecompressedMessage(h,d);if(Buffer.isBuffer(p))return void t(s.deserializeMessageWithInternalError(p));p.then(e=>t(s.deserializeMessageWithInternalError(e)),t=>r(t.code?t:{code:o.Status.INTERNAL,details:`Received "grpc-encoding" header "${e}" but ${e} decompression failed`}))}this.stream.on("data",u),this.stream.on("end",c),this.stream.on("error",c)})}async deserializeMessageWithInternalError(e){try{return this.deserializeMessage(e)}catch(e){throw{details:(0,h.getErrorMessage)(e),code:o.Status.INTERNAL}}}serializeMessage(e){let t=this.handler.serialize(e),r=t.byteLength,n=Buffer.allocUnsafe(r+5);return n.writeUInt8(0,0),n.writeUInt32BE(r,1),t.copy(n,5),n}deserializeMessage(e){return this.handler.deserialize(e)}async sendUnaryMessage(e,t,r,n){if(!this.checkCancelled()){if(void 0===r&&(r=null),e){!Object.prototype.hasOwnProperty.call(e,"metadata")&&r&&(e.metadata=r),this.sendError(e);return}try{let e=this.serializeMessage(t);this.write(e),this.sendStatus({code:o.Status.OK,details:"OK",metadata:r})}catch(e){this.sendError({details:(0,h.getErrorMessage)(e),code:o.Status.INTERNAL})}}}sendStatus(e){var t,r;if(this.emit("callEnd",e.code),this.emit("streamEnd",e.code===o.Status.OK),!this.checkCancelled())if(p("Request to method "+(null==(t=this.handler)?void 0:t.path)+" ended with status code: "+o.Status[e.code]+" details: "+e.details),this.deadlineTimer&&clearTimeout(this.deadlineTimer),this.stream.headersSent)this.wantTrailers||(this.wantTrailers=!0,this.stream.once("wantTrailers",()=>{var t;let r=Object.assign({[m]:e.code,[f]:encodeURI(e.details)},null==(t=e.metadata)?void 0:t.toHttp2Headers());this.stream.sendTrailers(r),this.statusSent=!0}),this.stream.end());else{let t=Object.assign(Object.assign({[m]:e.code,[f]:encodeURI(e.details)},S),null==(r=e.metadata)?void 0:r.toHttp2Headers());this.stream.respond(t,{endStream:!0}),this.statusSent=!0}}sendError(e){let t={code:o.Status.UNKNOWN,details:"message"in e?e.message:"Unknown Error",metadata:"metadata"in e&&void 0!==e.metadata?e.metadata:null};"code"in e&&"number"==typeof e.code&&Number.isInteger(e.code)&&(t.code=e.code,"details"in e&&"string"==typeof e.details&&(t.details=e.details)),this.sendStatus(t)}write(e){if(!this.checkCancelled())return -1!==this.maxSendMessageSize&&e.length>this.maxSendMessageSize?void this.sendError({code:o.Status.RESOURCE_EXHAUSTED,details:`Sent message larger than max (${e.length} vs. ${this.maxSendMessageSize})`}):(this.sendMetadata(),this.emit("sendMessage"),this.stream.write(e))}resume(){this.stream.resume()}setupSurfaceCall(e){this.once("cancelled",t=>{e.cancelled=!0,e.emit("cancelled",t)}),this.once("callEnd",t=>e.emit("callEnd",t))}setupReadable(e,t){let r=new u.StreamDecoder(this.maxReceiveMessageSize),n=!1,i=!1,s=!1,a=async()=>{s||!n||i||(s=!0,await this.pushOrBufferMessage(e,null))};this.stream.on("data",async n=>{let s;try{s=r.write(n)}catch(e){this.sendError({code:o.Status.RESOURCE_EXHAUSTED,details:e.message});return}for(let r of(i=!0,this.stream.pause(),s)){let n;this.emit("receiveMessage");let i=1===r.readUInt8(0)?t:"identity";try{n=await this.getDecompressedMessage(r,i)}catch(e){this.sendError(e);return}if(!n)return;await this.pushOrBufferMessage(e,n)}i=!1,this.stream.resume(),await a()}),this.stream.once("end",async()=>{n=!0,await a()})}consumeUnpushedMessages(e){for(this.canPush=!0;this.messagesToPush.length>0;){let t=this.messagesToPush.shift(),r=e.push(t);if(null===t||!1===r){this.canPush=!1;break}}return this.canPush}async pushOrBufferMessage(e,t){this.isPushPending?this.bufferedMessages.push(t):await this.pushMessage(e,t)}async pushMessage(e,t){if(null===t){p("Received end of stream"),this.canPush?e.push(null):this.messagesToPush.push(null);return}p("Received message of length "+t.length),this.isPushPending=!0;try{let r=await this.deserializeMessage(t);this.canPush?e.push(r)||(this.canPush=!1,this.stream.pause()):this.messagesToPush.push(r)}catch(r){this.bufferedMessages.length=0;let t=(0,h.getErrorCode)(r);(null===t||t<o.Status.OK||t>o.Status.UNAUTHENTICATED)&&(t=o.Status.INTERNAL),e.emit("error",{details:(0,h.getErrorMessage)(r),code:t})}this.isPushPending=!1,this.bufferedMessages.length>0&&await this.pushMessage(e,this.bufferedMessages.shift())}getPeer(){var e;let t=null==(e=this.stream.session)?void 0:e.socket;return null!=t&&t.remoteAddress?t.remotePort?`${t.remoteAddress}:${t.remotePort}`:t.remoteAddress:"unknown"}getDeadline(){return this.deadline}getPath(){return this.handler.path}}function I(e){let t=Error("Deadline exceeded");t.code=o.Status.DEADLINE_EXCEEDED,e.sendError(t),e.cancelled=!0,e.emit("cancelled","deadline")}t.Http2ServerCallStream=_},17757:(e,t,r)=>{"use strict";e.exports=s;var n=r(75108),i=r(89644)("fs");function s(e,t,r){return("function"==typeof t?(r=t,t={}):t||(t={}),r)?!t.xhr&&i&&i.readFile?i.readFile(e,function(n,i){return n&&"undefined"!=typeof XMLHttpRequest?s.xhr(e,t,r):n?r(n):r(null,t.binary?i:i.toString("utf8"))}):s.xhr(e,t,r):n(s,this,e,t)}s.xhr=function(e,t,r){var n=new XMLHttpRequest;n.onreadystatechange=function(){if(4===n.readyState){if(0!==n.status&&200!==n.status)return r(Error("status "+n.status));if(t.binary){var e=n.response;if(!e){e=[];for(var i=0;i<n.responseText.length;++i)e.push(255&n.responseText.charCodeAt(i))}return r(null,"undefined"!=typeof Uint8Array?new Uint8Array(e):e)}return r(null,n.responseText)}},t.binary&&("overrideMimeType"in n&&n.overrideMimeType("text/plain; charset=x-user-defined"),n.responseType="arraybuffer"),n.open("GET",e),n.send()}},17858:(e,t,r)=>{"use strict";var n=t;function i(){n.util._configure(),n.Writer._configure(n.BufferWriter),n.Reader._configure(n.BufferReader)}n.build="minimal",n.Writer=r(96120),n.BufferWriter=r(54369),n.Reader=r(26996),n.BufferReader=r(75677),n.util=r(8707),n.rpc=r(27236),n.roots=r(46642),n.configure=i,i()},18453:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ChannelImplementation=void 0;let n=r(56070),i=r(88295);class s{constructor(e,t,r){if("string"!=typeof e)throw TypeError("Channel target must be a string");if(!(t instanceof n.ChannelCredentials))throw TypeError("Channel credentials must be a ChannelCredentials object");if(r&&"object"!=typeof r)throw TypeError("Channel options must be an object");this.internalChannel=new i.InternalChannel(e,t,r)}close(){this.internalChannel.close()}getTarget(){return this.internalChannel.getTarget()}getConnectivityState(e){return this.internalChannel.getConnectivityState(e)}watchConnectivityState(e,t,r){this.internalChannel.watchConnectivityState(e,t,r)}getChannelzRef(){return this.internalChannel.getChannelzRef()}createCall(e,t,r,n,i){if("string"!=typeof e)throw TypeError("Channel#createCall: method must be a string");if(!("number"==typeof t||t instanceof Date))throw TypeError("Channel#createCall: deadline must be a number or Date");return this.internalChannel.createCall(e,t,r,n,i)}}t.ChannelImplementation=s},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},19420:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ServerCredentials=void 0;let n=r(9227);class i{static createInsecure(){return new s}static createSsl(e,t,r=!1){if(null!==e&&!Buffer.isBuffer(e))throw TypeError("rootCerts must be null or a Buffer");if(!Array.isArray(t))throw TypeError("keyCertPairs must be an array");if("boolean"!=typeof r)throw TypeError("checkClientCertificate must be a boolean");let i=[],s=[];for(let e=0;e<t.length;e++){let r=t[e];if(null===r||"object"!=typeof r)throw TypeError(`keyCertPair[${e}] must be an object`);if(!Buffer.isBuffer(r.private_key))throw TypeError(`keyCertPair[${e}].private_key must be a Buffer`);if(!Buffer.isBuffer(r.cert_chain))throw TypeError(`keyCertPair[${e}].cert_chain must be a Buffer`);i.push(r.cert_chain),s.push(r.private_key)}return new a({ca:e||(0,n.getDefaultRootsData)()||void 0,cert:i,key:s,requestCert:r,ciphers:n.CIPHER_SUITES})}}t.ServerCredentials=i;class s extends i{_isSecure(){return!1}_getSettings(){return null}}class a extends i{constructor(e){super(),this.options=e}_isSecure(){return!0}_getSettings(){return this.options}}},19771:e=>{"use strict";e.exports=require("process")},20040:e=>{"use strict";e.exports=JSON.parse('{"nested":{"google":{"nested":{"protobuf":{"nested":{"FileDescriptorSet":{"fields":{"file":{"rule":"repeated","type":"FileDescriptorProto","id":1}}},"FileDescriptorProto":{"fields":{"name":{"type":"string","id":1},"package":{"type":"string","id":2},"dependency":{"rule":"repeated","type":"string","id":3},"publicDependency":{"rule":"repeated","type":"int32","id":10,"options":{"packed":false}},"weakDependency":{"rule":"repeated","type":"int32","id":11,"options":{"packed":false}},"messageType":{"rule":"repeated","type":"DescriptorProto","id":4},"enumType":{"rule":"repeated","type":"EnumDescriptorProto","id":5},"service":{"rule":"repeated","type":"ServiceDescriptorProto","id":6},"extension":{"rule":"repeated","type":"FieldDescriptorProto","id":7},"options":{"type":"FileOptions","id":8},"sourceCodeInfo":{"type":"SourceCodeInfo","id":9},"syntax":{"type":"string","id":12}}},"DescriptorProto":{"fields":{"name":{"type":"string","id":1},"field":{"rule":"repeated","type":"FieldDescriptorProto","id":2},"extension":{"rule":"repeated","type":"FieldDescriptorProto","id":6},"nestedType":{"rule":"repeated","type":"DescriptorProto","id":3},"enumType":{"rule":"repeated","type":"EnumDescriptorProto","id":4},"extensionRange":{"rule":"repeated","type":"ExtensionRange","id":5},"oneofDecl":{"rule":"repeated","type":"OneofDescriptorProto","id":8},"options":{"type":"MessageOptions","id":7},"reservedRange":{"rule":"repeated","type":"ReservedRange","id":9},"reservedName":{"rule":"repeated","type":"string","id":10}},"nested":{"ExtensionRange":{"fields":{"start":{"type":"int32","id":1},"end":{"type":"int32","id":2}}},"ReservedRange":{"fields":{"start":{"type":"int32","id":1},"end":{"type":"int32","id":2}}}}},"FieldDescriptorProto":{"fields":{"name":{"type":"string","id":1},"number":{"type":"int32","id":3},"label":{"type":"Label","id":4},"type":{"type":"Type","id":5},"typeName":{"type":"string","id":6},"extendee":{"type":"string","id":2},"defaultValue":{"type":"string","id":7},"oneofIndex":{"type":"int32","id":9},"jsonName":{"type":"string","id":10},"options":{"type":"FieldOptions","id":8}},"nested":{"Type":{"values":{"TYPE_DOUBLE":1,"TYPE_FLOAT":2,"TYPE_INT64":3,"TYPE_UINT64":4,"TYPE_INT32":5,"TYPE_FIXED64":6,"TYPE_FIXED32":7,"TYPE_BOOL":8,"TYPE_STRING":9,"TYPE_GROUP":10,"TYPE_MESSAGE":11,"TYPE_BYTES":12,"TYPE_UINT32":13,"TYPE_ENUM":14,"TYPE_SFIXED32":15,"TYPE_SFIXED64":16,"TYPE_SINT32":17,"TYPE_SINT64":18}},"Label":{"values":{"LABEL_OPTIONAL":1,"LABEL_REQUIRED":2,"LABEL_REPEATED":3}}}},"OneofDescriptorProto":{"fields":{"name":{"type":"string","id":1},"options":{"type":"OneofOptions","id":2}}},"EnumDescriptorProto":{"fields":{"name":{"type":"string","id":1},"value":{"rule":"repeated","type":"EnumValueDescriptorProto","id":2},"options":{"type":"EnumOptions","id":3}}},"EnumValueDescriptorProto":{"fields":{"name":{"type":"string","id":1},"number":{"type":"int32","id":2},"options":{"type":"EnumValueOptions","id":3}}},"ServiceDescriptorProto":{"fields":{"name":{"type":"string","id":1},"method":{"rule":"repeated","type":"MethodDescriptorProto","id":2},"options":{"type":"ServiceOptions","id":3}}},"MethodDescriptorProto":{"fields":{"name":{"type":"string","id":1},"inputType":{"type":"string","id":2},"outputType":{"type":"string","id":3},"options":{"type":"MethodOptions","id":4},"clientStreaming":{"type":"bool","id":5},"serverStreaming":{"type":"bool","id":6}}},"FileOptions":{"fields":{"javaPackage":{"type":"string","id":1},"javaOuterClassname":{"type":"string","id":8},"javaMultipleFiles":{"type":"bool","id":10},"javaGenerateEqualsAndHash":{"type":"bool","id":20,"options":{"deprecated":true}},"javaStringCheckUtf8":{"type":"bool","id":27},"optimizeFor":{"type":"OptimizeMode","id":9,"options":{"default":"SPEED"}},"goPackage":{"type":"string","id":11},"ccGenericServices":{"type":"bool","id":16},"javaGenericServices":{"type":"bool","id":17},"pyGenericServices":{"type":"bool","id":18},"deprecated":{"type":"bool","id":23},"ccEnableArenas":{"type":"bool","id":31},"objcClassPrefix":{"type":"string","id":36},"csharpNamespace":{"type":"string","id":37},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]],"reserved":[[38,38]],"nested":{"OptimizeMode":{"values":{"SPEED":1,"CODE_SIZE":2,"LITE_RUNTIME":3}}}},"MessageOptions":{"fields":{"messageSetWireFormat":{"type":"bool","id":1},"noStandardDescriptorAccessor":{"type":"bool","id":2},"deprecated":{"type":"bool","id":3},"mapEntry":{"type":"bool","id":7},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]],"reserved":[[8,8]]},"FieldOptions":{"fields":{"ctype":{"type":"CType","id":1,"options":{"default":"STRING"}},"packed":{"type":"bool","id":2},"jstype":{"type":"JSType","id":6,"options":{"default":"JS_NORMAL"}},"lazy":{"type":"bool","id":5},"deprecated":{"type":"bool","id":3},"weak":{"type":"bool","id":10},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]],"reserved":[[4,4]],"nested":{"CType":{"values":{"STRING":0,"CORD":1,"STRING_PIECE":2}},"JSType":{"values":{"JS_NORMAL":0,"JS_STRING":1,"JS_NUMBER":2}}}},"OneofOptions":{"fields":{"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]]},"EnumOptions":{"fields":{"allowAlias":{"type":"bool","id":2},"deprecated":{"type":"bool","id":3},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]]},"EnumValueOptions":{"fields":{"deprecated":{"type":"bool","id":1},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]]},"ServiceOptions":{"fields":{"deprecated":{"type":"bool","id":33},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]]},"MethodOptions":{"fields":{"deprecated":{"type":"bool","id":33},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]]},"UninterpretedOption":{"fields":{"name":{"rule":"repeated","type":"NamePart","id":2},"identifierValue":{"type":"string","id":3},"positiveIntValue":{"type":"uint64","id":4},"negativeIntValue":{"type":"int64","id":5},"doubleValue":{"type":"double","id":6},"stringValue":{"type":"bytes","id":7},"aggregateValue":{"type":"string","id":8}},"nested":{"NamePart":{"fields":{"namePart":{"rule":"required","type":"string","id":1},"isExtension":{"rule":"required","type":"bool","id":2}}}}},"SourceCodeInfo":{"fields":{"location":{"rule":"repeated","type":"Location","id":1}},"nested":{"Location":{"fields":{"path":{"rule":"repeated","type":"int32","id":1},"span":{"rule":"repeated","type":"int32","id":2},"leadingComments":{"type":"string","id":3},"trailingComments":{"type":"string","id":4},"leadingDetachedComments":{"rule":"repeated","type":"string","id":6}}}}},"GeneratedCodeInfo":{"fields":{"annotation":{"rule":"repeated","type":"Annotation","id":1}},"nested":{"Annotation":{"fields":{"path":{"rule":"repeated","type":"int32","id":1},"sourceFile":{"type":"string","id":2},"begin":{"type":"int32","id":3},"end":{"type":"int32","id":4}}}}}}}}}}}')},21135:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CompressionFilterFactory=t.CompressionFilter=void 0;let n=r(74075),i=r(68655),s=r(71271),a=r(40962),o=r(31359),l=e=>"number"==typeof e&&"string"==typeof i.CompressionAlgorithms[e];class u{async writeMessage(e,t){let r=e;t&&(r=await this.compressMessage(r));let n=Buffer.allocUnsafe(r.length+5);return n.writeUInt8(+!!t,0),n.writeUInt32BE(r.length,1),r.copy(n,5),n}async readMessage(e){let t=1===e.readUInt8(0),r=e.slice(5);return t&&(r=await this.decompressMessage(r)),r}}class c extends u{async compressMessage(e){return e}async writeMessage(e,t){let r=Buffer.allocUnsafe(e.length+5);return r.writeUInt8(0,0),r.writeUInt32BE(e.length,1),e.copy(r,5),r}decompressMessage(e){return Promise.reject(Error('Received compressed message but "grpc-encoding" header was identity'))}}class h extends u{constructor(e){super(),this.maxRecvMessageLength=e}compressMessage(e){return new Promise((t,r)=>{n.deflate(e,(e,n)=>{e?r(e):t(n)})})}decompressMessage(e){return new Promise((t,r)=>{let i=0,a=[],o=n.createInflate();o.on("data",e=>{a.push(e),i+=e.byteLength,-1!==this.maxRecvMessageLength&&i>this.maxRecvMessageLength&&(o.destroy(),r({code:s.Status.RESOURCE_EXHAUSTED,details:`Received message that decompresses to a size larger than ${this.maxRecvMessageLength}`}))}),o.on("end",()=>{t(Buffer.concat(a))}),o.write(e),o.end()})}}class d extends u{constructor(e){super(),this.maxRecvMessageLength=e}compressMessage(e){return new Promise((t,r)=>{n.gzip(e,(e,n)=>{e?r(e):t(n)})})}decompressMessage(e){return new Promise((t,r)=>{let i=0,a=[],o=n.createGunzip();o.on("data",e=>{a.push(e),i+=e.byteLength,-1!==this.maxRecvMessageLength&&i>this.maxRecvMessageLength&&(o.destroy(),r({code:s.Status.RESOURCE_EXHAUSTED,details:`Received message that decompresses to a size larger than ${this.maxRecvMessageLength}`}))}),o.on("end",()=>{t(Buffer.concat(a))}),o.write(e),o.end()})}}class p extends u{constructor(e){super(),this.compressionName=e}compressMessage(e){return Promise.reject(Error(`Received message compressed with unsupported compression method ${this.compressionName}`))}decompressMessage(e){return Promise.reject(Error(`Compression method not supported: ${this.compressionName}`))}}function f(e,t){switch(e){case"identity":return new c;case"deflate":return new h(t);case"gzip":return new d(t);default:return new p(e)}}class m extends a.BaseFilter{constructor(e,t){var r,n;super(),this.sharedFilterConfig=t,this.sendCompression=new c,this.receiveCompression=new c,this.currentCompressionAlgorithm="identity";let a=e["grpc.default_compression_algorithm"];if(this.maxReceiveMessageLength=null!=(r=e["grpc.max_receive_message_length"])?r:s.DEFAULT_MAX_RECEIVE_MESSAGE_LENGTH,void 0!==a)if(l(a)){let e=i.CompressionAlgorithms[a],r=null==(n=t.serverSupportedEncodingHeader)?void 0:n.split(",");(!r||r.includes(e))&&(this.currentCompressionAlgorithm=e,this.sendCompression=f(this.currentCompressionAlgorithm,-1))}else o.log(s.LogVerbosity.ERROR,`Invalid value provided for grpc.default_compression_algorithm option: ${a}`)}async sendMetadata(e){let t=await e;return t.set("grpc-accept-encoding","identity,deflate,gzip"),t.set("accept-encoding","identity"),"identity"===this.currentCompressionAlgorithm?t.remove("grpc-encoding"):t.set("grpc-encoding",this.currentCompressionAlgorithm),t}receiveMetadata(e){let t=e.get("grpc-encoding");if(t.length>0){let e=t[0];"string"==typeof e&&(this.receiveCompression=f(e,this.maxReceiveMessageLength))}e.remove("grpc-encoding");let r=e.get("grpc-accept-encoding")[0];return r&&(this.sharedFilterConfig.serverSupportedEncodingHeader=r,r.split(",").includes(this.currentCompressionAlgorithm)||(this.sendCompression=new c,this.currentCompressionAlgorithm="identity")),e.remove("grpc-accept-encoding"),e}async sendMessage(e){var t;let r,n=await e;return r=!(this.sendCompression instanceof c)&&((null!=(t=n.flags)?t:0)&2)==0,{message:await this.sendCompression.writeMessage(n.message,r),flags:n.flags}}async receiveMessage(e){return this.receiveCompression.readMessage(await e)}}t.CompressionFilter=m;class g{constructor(e,t){this.options=t,this.sharedFilterConfig={}}createFilter(){return new m(this.options,this.sharedFilterConfig)}}t.CompressionFilterFactory=g},21204:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>n});let n=(0,r(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/home/user/studio/src/app/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/user/studio/src/app/page.tsx","default")},21820:e=>{"use strict";e.exports=require("os")},24168:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ClientDuplexStreamImpl=t.ClientWritableStreamImpl=t.ClientReadableStreamImpl=t.ClientUnaryCallImpl=t.callErrorFromStatus=void 0;let n=r(94735),i=r(27910),s=r(71271);t.callErrorFromStatus=function(e,t){let r=`${e.code} ${s.Status[e.code]}: ${e.details}`,n=Error(r),i=`${n.stack}
for call at
${t}`;return Object.assign(Error(r),e,{stack:i})};class a extends n.EventEmitter{constructor(){super()}cancel(){var e;null==(e=this.call)||e.cancelWithStatus(s.Status.CANCELLED,"Cancelled on client")}getPeer(){var e,t;return null!=(t=null==(e=this.call)?void 0:e.getPeer())?t:"unknown"}}t.ClientUnaryCallImpl=a;class o extends i.Readable{constructor(e){super({objectMode:!0}),this.deserialize=e}cancel(){var e;null==(e=this.call)||e.cancelWithStatus(s.Status.CANCELLED,"Cancelled on client")}getPeer(){var e,t;return null!=(t=null==(e=this.call)?void 0:e.getPeer())?t:"unknown"}_read(e){var t;null==(t=this.call)||t.startRead()}}t.ClientReadableStreamImpl=o;class l extends i.Writable{constructor(e){super({objectMode:!0}),this.serialize=e}cancel(){var e;null==(e=this.call)||e.cancelWithStatus(s.Status.CANCELLED,"Cancelled on client")}getPeer(){var e,t;return null!=(t=null==(e=this.call)?void 0:e.getPeer())?t:"unknown"}_write(e,t,r){var n;let i={callback:r},s=Number(t);Number.isNaN(s)||(i.flags=s),null==(n=this.call)||n.sendMessageWithContext(i,e)}_final(e){var t;null==(t=this.call)||t.halfClose(),e()}}t.ClientWritableStreamImpl=l;class u extends i.Duplex{constructor(e,t){super({objectMode:!0}),this.serialize=e,this.deserialize=t}cancel(){var e;null==(e=this.call)||e.cancelWithStatus(s.Status.CANCELLED,"Cancelled on client")}getPeer(){var e,t;return null!=(t=null==(e=this.call)?void 0:e.getPeer())?t:"unknown"}_read(e){var t;null==(t=this.call)||t.startRead()}_write(e,t,r){var n;let i={callback:r},s=Number(t);Number.isNaN(s)||(i.flags=s),null==(n=this.call)||n.sendMessageWithContext(i,e)}_final(e){var t;null==(t=this.call)||t.halfClose(),e()}}t.ClientDuplexStreamImpl=u},24353:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Subchannel=void 0;let n=r(40536),i=r(50268),s=r(31359),a=r(71271),o=r(26786),l=r(43356),u=r(66827),c="subchannel",h=0x7fffffff;class d{constructor(e,t,r,s,a){var o;this.channelTarget=e,this.subchannelAddress=t,this.options=r,this.credentials=s,this.connector=a,this.connectivityState=n.ConnectivityState.IDLE,this.transport=null,this.continueConnecting=!1,this.stateListeners=new Set,this.refcount=0,this.channelzEnabled=!0,this.callTracker=new u.ChannelzCallTracker,this.childrenTracker=new u.ChannelzChildrenTracker,this.streamTracker=new u.ChannelzCallTracker;let c={initialDelay:r["grpc.initial_reconnect_backoff_ms"],maxDelay:r["grpc.max_reconnect_backoff_ms"]};this.backoffTimeout=new i.BackoffTimeout(()=>{this.handleBackoffTimer()},c),this.backoffTimeout.unref(),this.subchannelAddressString=(0,l.subchannelAddressToString)(t),this.keepaliveTime=null!=(o=r["grpc.keepalive_time_ms"])?o:-1,0===r["grpc.enable_channelz"]&&(this.channelzEnabled=!1),this.channelzTrace=new u.ChannelzTrace,this.channelzRef=(0,u.registerChannelzSubchannel)(this.subchannelAddressString,()=>this.getChannelzInfo(),this.channelzEnabled),this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO","Subchannel created"),this.trace("Subchannel constructed with options "+JSON.stringify(r,void 0,2))}getChannelzInfo(){return{state:this.connectivityState,trace:this.channelzTrace,callTracker:this.callTracker,children:this.childrenTracker.getChildLists(),target:this.subchannelAddressString}}trace(e){s.trace(a.LogVerbosity.DEBUG,c,"("+this.channelzRef.id+") "+this.subchannelAddressString+" "+e)}refTrace(e){s.trace(a.LogVerbosity.DEBUG,"subchannel_refcount","("+this.channelzRef.id+") "+this.subchannelAddressString+" "+e)}handleBackoffTimer(){this.continueConnecting?this.transitionToState([n.ConnectivityState.TRANSIENT_FAILURE],n.ConnectivityState.CONNECTING):this.transitionToState([n.ConnectivityState.TRANSIENT_FAILURE],n.ConnectivityState.IDLE)}startBackoff(){this.backoffTimeout.runOnce()}stopBackoff(){this.backoffTimeout.stop(),this.backoffTimeout.reset()}startConnectingInternal(){let e=this.options;if(e["grpc.keepalive_time_ms"]){let t=Math.min(this.keepaliveTime,h);e=Object.assign(Object.assign({},e),{"grpc.keepalive_time_ms":t})}this.connector.connect(this.subchannelAddress,this.credentials,e).then(e=>{this.transitionToState([n.ConnectivityState.CONNECTING],n.ConnectivityState.READY)?(this.transport=e,this.channelzEnabled&&this.childrenTracker.refChild(e.getChannelzRef()),e.addDisconnectListener(e=>{this.transitionToState([n.ConnectivityState.READY],n.ConnectivityState.IDLE),e&&this.keepaliveTime>0&&(this.keepaliveTime*=2,s.log(a.LogVerbosity.ERROR,`Connection to ${(0,o.uriToString)(this.channelTarget)} at ${this.subchannelAddressString} rejected by server because of excess pings. Increasing ping interval to ${this.keepaliveTime} ms`))})):e.shutdown()},e=>{this.transitionToState([n.ConnectivityState.CONNECTING],n.ConnectivityState.TRANSIENT_FAILURE,`${e}`)})}transitionToState(e,t,r){var i,s;if(-1===e.indexOf(this.connectivityState))return!1;this.trace(n.ConnectivityState[this.connectivityState]+" -> "+n.ConnectivityState[t]),this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO","Connectivity state change to "+n.ConnectivityState[t]);let a=this.connectivityState;switch(this.connectivityState=t,t){case n.ConnectivityState.READY:this.stopBackoff();break;case n.ConnectivityState.CONNECTING:this.startBackoff(),this.startConnectingInternal(),this.continueConnecting=!1;break;case n.ConnectivityState.TRANSIENT_FAILURE:this.channelzEnabled&&this.transport&&this.childrenTracker.unrefChild(this.transport.getChannelzRef()),null==(i=this.transport)||i.shutdown(),this.transport=null,this.backoffTimeout.isRunning()||process.nextTick(()=>{this.handleBackoffTimer()});break;case n.ConnectivityState.IDLE:this.channelzEnabled&&this.transport&&this.childrenTracker.unrefChild(this.transport.getChannelzRef()),null==(s=this.transport)||s.shutdown(),this.transport=null;break;default:throw Error(`Invalid state: unknown ConnectivityState ${t}`)}for(let e of this.stateListeners)e(this,a,t,this.keepaliveTime,r);return!0}ref(){this.refTrace("refcount "+this.refcount+" -> "+(this.refcount+1)),this.refcount+=1}unref(){this.refTrace("refcount "+this.refcount+" -> "+(this.refcount-1)),this.refcount-=1,0===this.refcount&&(this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO","Shutting down"),this.channelzEnabled&&(0,u.unregisterChannelzRef)(this.channelzRef),process.nextTick(()=>{this.transitionToState([n.ConnectivityState.CONNECTING,n.ConnectivityState.READY],n.ConnectivityState.IDLE)}))}unrefIfOneRef(){return 1===this.refcount&&(this.unref(),!0)}createCall(e,t,r,n){let i;if(!this.transport)throw Error("Cannot create call, subchannel not READY");return this.channelzEnabled?(this.callTracker.addCallStarted(),this.streamTracker.addCallStarted(),i={onCallEnd:e=>{e.code===a.Status.OK?this.callTracker.addCallSucceeded():this.callTracker.addCallFailed()}}):i={},this.transport.createCall(e,t,r,n,i)}startConnecting(){process.nextTick(()=>{this.transitionToState([n.ConnectivityState.IDLE],n.ConnectivityState.CONNECTING)||this.connectivityState!==n.ConnectivityState.TRANSIENT_FAILURE||(this.continueConnecting=!0)})}getConnectivityState(){return this.connectivityState}addConnectivityStateListener(e){this.stateListeners.add(e)}removeConnectivityStateListener(e){this.stateListeners.delete(e)}resetBackoff(){process.nextTick(()=>{this.backoffTimeout.reset(),this.transitionToState([n.ConnectivityState.TRANSIENT_FAILURE],n.ConnectivityState.CONNECTING)})}getAddress(){return this.subchannelAddressString}getChannelzRef(){return this.channelzRef}getRealSubchannel(){return this}realSubchannelEquals(e){return e.getRealSubchannel()===this}throttleKeepalive(e){e>this.keepaliveTime&&(this.keepaliveTime=e)}}t.Subchannel=d},25585:(e,t,r)=>{"use strict";e.exports=a;var n=r(73267);((a.prototype=Object.create(n.prototype)).constructor=a).className="MapField";var i=r(61810),s=r(93107);function a(e,t,r,i,a,o){if(n.call(this,e,t,i,void 0,void 0,a,o),!s.isString(r))throw TypeError("keyType must be a string");this.keyType=r,this.resolvedKeyType=null,this.map=!0}a.fromJSON=function(e,t){return new a(e,t.id,t.keyType,t.type,t.options,t.comment)},a.prototype.toJSON=function(e){var t=!!e&&!!e.keepComments;return s.toObject(["keyType",this.keyType,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",t?this.comment:void 0])},a.prototype.resolve=function(){if(this.resolved)return this;if(void 0===i.mapKey[this.keyType])throw Error("invalid key type: "+this.keyType);return n.prototype.resolve.call(this)},a.d=function(e,t,r){return"function"==typeof r?r=s.decorateType(r).name:r&&"object"==typeof r&&(r=s.decorateEnum(r).name),function(n,i){s.decorateType(n.constructor).add(new a(i,e,t,r))}}},26412:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deadlineToString=t.getRelativeTimeout=t.getDeadlineTimeoutString=t.minDeadline=void 0,t.minDeadline=function(...e){let t=1/0;for(let r of e){let e=r instanceof Date?r.getTime():r;e<t&&(t=e)}return t};let r=[["m",1],["S",1e3],["M",6e4],["H",36e5]];t.getDeadlineTimeoutString=function(e){let t=new Date().getTime();e instanceof Date&&(e=e.getTime());let n=Math.max(e-t,0);for(let[e,t]of r){let r=n/t;if(r<1e8)return String(Math.ceil(r))+e}throw Error("Deadline is too far in the future")};let n=0x7fffffff;t.getRelativeTimeout=function(e){let t=(e instanceof Date?e.getTime():e)-new Date().getTime();return t<0?0:t>n?1/0:t},t.deadlineToString=function(e){if(e instanceof Date)return e.toISOString();{let t=new Date(e);return Number.isNaN(t.getTime())?""+e:t.toISOString()}}},26786:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.uriToString=t.splitHostPort=t.parseUri=void 0;let r=/^(?:([A-Za-z0-9+.-]+):)?(?:\/\/([^/]*)\/)?(.+)$/;t.parseUri=function(e){let t=r.exec(e);return null===t?null:{scheme:t[1],authority:t[2],path:t[3]}};let n=/^\d+$/;t.splitHostPort=function(e){if(e.startsWith("[")){let t=e.indexOf("]");if(-1===t)return null;let r=e.substring(1,t);if(-1===r.indexOf(":"))return null;if(!(e.length>t+1))return{host:r};if(":"!==e[t+1])return null;{let i=e.substring(t+2);return n.test(i)?{host:r,port:+i}:null}}{let t=e.split(":");return 2!==t.length?{host:e}:n.test(t[1])?{host:t[0],port:+t[1]}:null}},t.uriToString=function(e){let t="";return void 0!==e.scheme&&(t+=e.scheme+":"),void 0!==e.authority&&(t+="//"+e.authority+"/"),t+=e.path}},26996:(e,t,r)=>{"use strict";e.exports=l;var n,i=r(8707),s=i.LongBits,a=i.utf8;function o(e,t){return RangeError("index out of range: "+e.pos+" + "+(t||1)+" > "+e.len)}function l(e){this.buf=e,this.pos=0,this.len=e.length}var u="undefined"!=typeof Uint8Array?function(e){if(e instanceof Uint8Array||Array.isArray(e))return new l(e);throw Error("illegal buffer")}:function(e){if(Array.isArray(e))return new l(e);throw Error("illegal buffer")},c=function(){return i.Buffer?function(e){return(l.create=function(e){return i.Buffer.isBuffer(e)?new n(e):u(e)})(e)}:u};function h(){var e=new s(0,0),t=0;if(this.len-this.pos>4){for(;t<4;++t)if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e;if(e.lo=(e.lo|(127&this.buf[this.pos])<<28)>>>0,e.hi=(e.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return e;t=0}else{for(;t<3;++t){if(this.pos>=this.len)throw o(this);if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e}return e.lo=(e.lo|(127&this.buf[this.pos++])<<7*t)>>>0,e}if(this.len-this.pos>4){for(;t<5;++t)if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}else for(;t<5;++t){if(this.pos>=this.len)throw o(this);if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}throw Error("invalid varint encoding")}function d(e,t){return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0}function p(){if(this.pos+8>this.len)throw o(this,8);return new s(d(this.buf,this.pos+=4),d(this.buf,this.pos+=4))}l.create=c(),l.prototype._slice=i.Array.prototype.subarray||i.Array.prototype.slice,l.prototype.uint32=function(){var e=0xffffffff;return function(){if(e=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128||(e=(e|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)||(e=(e|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)||(e=(e|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)||(e=(e|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128))return e;if((this.pos+=5)>this.len)throw this.pos=this.len,o(this,10);return e}}(),l.prototype.int32=function(){return 0|this.uint32()},l.prototype.sint32=function(){var e=this.uint32();return e>>>1^-(1&e)},l.prototype.bool=function(){return 0!==this.uint32()},l.prototype.fixed32=function(){if(this.pos+4>this.len)throw o(this,4);return d(this.buf,this.pos+=4)},l.prototype.sfixed32=function(){if(this.pos+4>this.len)throw o(this,4);return 0|d(this.buf,this.pos+=4)},l.prototype.float=function(){if(this.pos+4>this.len)throw o(this,4);var e=i.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e},l.prototype.double=function(){if(this.pos+8>this.len)throw o(this,4);var e=i.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e},l.prototype.bytes=function(){var e=this.uint32(),t=this.pos,r=this.pos+e;if(r>this.len)throw o(this,e);if(this.pos+=e,Array.isArray(this.buf))return this.buf.slice(t,r);if(t===r){var n=i.Buffer;return n?n.alloc(0):new this.buf.constructor(0)}return this._slice.call(this.buf,t,r)},l.prototype.string=function(){var e=this.bytes();return a.read(e,0,e.length)},l.prototype.skip=function(e){if("number"==typeof e){if(this.pos+e>this.len)throw o(this,e);this.pos+=e}else do if(this.pos>=this.len)throw o(this);while(128&this.buf[this.pos++]);return this},l.prototype.skipType=function(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(e=7&this.uint32());)this.skipType(e);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+e+" at offset "+this.pos)}return this},l._configure=function(e){n=e,l.create=c(),n._configure();var t=i.Long?"toLong":"toNumber";i.merge(l.prototype,{int64:function(){return h.call(this)[t](!1)},uint64:function(){return h.call(this)[t](!0)},sint64:function(){return h.call(this).zzDecode()[t](!1)},fixed64:function(){return p.call(this)[t](!0)},sfixed64:function(){return p.call(this)[t](!1)}})}},27236:(e,t,r)=>{"use strict";t.Service=r(86984)},27408:(e,t,r)=>{"use strict";e.exports=x,x.filename=null,x.defaults={keepCase:!1};var n=r(60158),i=r(82703),s=r(54351),a=r(73267),o=r(25585),l=r(12630),u=r(32110),c=r(3076),h=r(71202),d=r(61810),p=r(93107),f=/^[1-9][0-9]*$/,m=/^-?[1-9][0-9]*$/,g=/^0[x][0-9a-fA-F]+$/,y=/^-?0[x][0-9a-fA-F]+$/,v=/^0[0-7]+$/,b=/^-?0[0-7]+$/,S=/^(?![eE])[0-9]*(?:\.[0-9]*)?(?:[eE][+-]?[0-9]+)?$/,T=/^[a-zA-Z_][a-zA-Z_0-9]*$/,w=/^(?:\.?[a-zA-Z_][a-zA-Z_0-9]*)(?:\.[a-zA-Z_][a-zA-Z_0-9]*)*$/,C=/^(?:\.[a-zA-Z_][a-zA-Z_0-9]*)+$/;function x(e,t,r){t instanceof i||(r=t,t=new i),r||(r=x.defaults);var E,_,I,k,A,R=r.preferTrailingComment||!1,N=n(e,r.alternateCommentMode||!1),D=N.next,O=N.push,P=N.peek,M=N.skip,L=N.cmnt,B=!0,j=!1,F=t,V=r.keepCase?function(e){return e}:p.camelCase;function U(e,t,r){var n=x.filename;return r||(x.filename=null),Error("illegal "+(t||"token")+" '"+e+"' ("+(n?n+", ":"")+"line "+N.line+")")}function q(){var e,t=[];do{if('"'!==(e=D())&&"'"!==e)throw U(e);t.push(D()),M(e),e=P()}while('"'===e||"'"===e);return t.join("")}function z(e){var t=D();switch(t){case"'":case'"':return O(t),q();case"true":case"TRUE":return!0;case"false":case"FALSE":return!1}try{return G(t,!0)}catch(r){if(e&&w.test(t))return t;throw U(t,"value")}}function $(e,t){do t&&('"'===(r=P())||"'"===r)?e.push(q()):e.push([n=H(D()),M("to",!0)?H(D()):n]);while(M(",",!0));var r,n,i={options:void 0};i.setOption=function(e,t){void 0===this.options&&(this.options={}),this.options[e]=t},J(i,function(e){if("option"===e)es(i,e),M(";");else throw U(e)},function(){eu(i)})}function G(e,t){var r=1;switch("-"===e.charAt(0)&&(r=-1,e=e.substring(1)),e){case"inf":case"INF":case"Inf":return 1/0*r;case"nan":case"NAN":case"Nan":case"NaN":return NaN;case"0":return 0}if(f.test(e))return r*parseInt(e,10);if(g.test(e))return r*parseInt(e,16);if(v.test(e))return r*parseInt(e,8);if(S.test(e))return r*parseFloat(e);throw U(e,"number",t)}function H(e,t){switch(e){case"max":case"MAX":case"Max":return 0x1fffffff;case"0":return 0}if(!t&&"-"===e.charAt(0))throw U(e,"id");if(m.test(e))return parseInt(e,10);if(y.test(e))return parseInt(e,16);if(b.test(e))return parseInt(e,8);throw U(e,"id")}function K(){if(void 0!==_)throw U("package");if(_=D(),!w.test(_))throw U(_,"name");F=F.define(_),M(";")}function W(){var e,t=P();switch(t){case"weak":e=k||(k=[]),D();break;case"public":D();default:e=I||(I=[])}t=q(),M(";"),e.push(t)}function Q(){if(M("="),!(j="proto3"===(A=q()))&&"proto2"!==A)throw U(A,"syntax");t.setOption("syntax",A),M(";")}function Y(e,t){switch(t){case"option":return es(e,t),M(";"),!0;case"message":return X(e,t),!0;case"enum":return en(e,t),!0;case"service":return ec(e,t),!0;case"extend":return ed(e,t),!0}return!1}function J(e,t,r){var n,i=N.line;if(e&&("string"!=typeof e.comment&&(e.comment=L()),e.filename=x.filename),M("{",!0)){for(;"}"!==(n=D());)t(n);M(";",!0)}else r&&r(),M(";"),e&&("string"!=typeof e.comment||R)&&(e.comment=L(i)||e.comment)}function X(e,t){if(!T.test(t=D()))throw U(t,"type name");var r=new s(t);J(r,function(e){if(!Y(r,e))switch(e){case"map":et(r,e);break;case"required":case"repeated":Z(r,e);break;case"optional":j?Z(r,"proto3_optional"):Z(r,"optional");break;case"oneof":er(r,e);break;case"extensions":$(r.extensions||(r.extensions=[]));break;case"reserved":$(r.reserved||(r.reserved=[]),!0);break;default:if(!j||!w.test(e))throw U(e);O(e),Z(r,"optional")}}),e.add(r)}function Z(e,t,r){var n=D();if("group"===n)return void ee(e,t);for(;n.endsWith(".")||P().startsWith(".");)n+=D();if(!w.test(n))throw U(n,"type");var i=D();if(!T.test(i))throw U(i,"name");i=V(i),M("=");var s=new a(i,H(D()),n,t,r);if(J(s,function(e){if("option"===e)es(s,e),M(";");else throw U(e)},function(){eu(s)}),"proto3_optional"===t){var o=new l("_"+i);s.setOption("proto3_optional",!0),o.add(s),e.add(o)}else e.add(s);!j&&s.repeated&&(void 0!==d.packed[n]||void 0===d.basic[n])&&s.setOption("packed",!1,!0)}function ee(e,t){var r=D();if(!T.test(r))throw U(r,"name");var n=p.lcFirst(r);r===n&&(r=p.ucFirst(r)),M("=");var i=H(D()),o=new s(r);o.group=!0;var l=new a(n,i,r,t);l.filename=x.filename,J(o,function(e){switch(e){case"option":es(o,e),M(";");break;case"required":case"repeated":Z(o,e);break;case"optional":j?Z(o,"proto3_optional"):Z(o,"optional");break;case"message":X(o,e);break;case"enum":en(o,e);break;default:throw U(e)}}),e.add(o).add(l)}function et(e){M("<");var t=D();if(void 0===d.mapKey[t])throw U(t,"type");M(",");var r=D();if(!w.test(r))throw U(r,"type");M(">");var n=D();if(!T.test(n))throw U(n,"name");M("=");var i=new o(V(n),H(D()),t,r);J(i,function(e){if("option"===e)es(i,e),M(";");else throw U(e)},function(){eu(i)}),e.add(i)}function er(e,t){if(!T.test(t=D()))throw U(t,"name");var r=new l(V(t));J(r,function(e){"option"===e?(es(r,e),M(";")):(O(e),Z(r,"optional"))}),e.add(r)}function en(e,t){if(!T.test(t=D()))throw U(t,"name");var r=new u(t);J(r,function(e){switch(e){case"option":es(r,e),M(";");break;case"reserved":$(r.reserved||(r.reserved=[]),!0);break;default:ei(r,e)}}),e.add(r)}function ei(e,t){if(!T.test(t))throw U(t,"name");M("=");var r=H(D(),!0),n={options:void 0};n.setOption=function(e,t){void 0===this.options&&(this.options={}),this.options[e]=t},J(n,function(e){if("option"===e)es(n,e),M(";");else throw U(e)},function(){eu(n)}),e.add(t,r,n.comment,n.options)}function es(e,t){var r,n=M("(",!0);if(!w.test(t=D()))throw U(t,"name");var i=t,s=i;n&&(M(")"),s=i="("+i+")",t=P(),C.test(t)&&(r=t.slice(1),i+=t,D())),M("=");var a=ea(e,i);el(e,s,a,r)}function ea(e,t){if(M("{",!0)){for(var r={};!M("}",!0);){if(!T.test(E=D()))throw U(E,"name");if(null===E)throw U(E,"end of input");var n,i,s=E;if(M(":",!0),"{"===P())n=ea(e,t+"."+E);else if("["===P()){if(n=[],M("[",!0)){do i=z(!0),n.push(i);while(M(",",!0));M("]"),void 0!==i&&eo(e,t+"."+E,i)}}else n=z(!0),eo(e,t+"."+E,n);var a=r[s];a&&(n=[].concat(a).concat(n)),r[s]=n,M(",",!0),M(";",!0)}return r}var o=z(!0);return eo(e,t,o),o}function eo(e,t,r){e.setOption&&e.setOption(t,r)}function el(e,t,r,n){e.setParsedOption&&e.setParsedOption(t,r,n)}function eu(e){if(M("[",!0)){do es(e,"option");while(M(",",!0));M("]")}return e}function ec(e,t){if(!T.test(t=D()))throw U(t,"service name");var r=new c(t);J(r,function(e){if(!Y(r,e))if("rpc"===e)eh(r,e);else throw U(e)}),e.add(r)}function eh(e,t){var r=L(),n=t;if(!T.test(t=D()))throw U(t,"name");var i,s,a,o,l=t;if(M("("),M("stream",!0)&&(s=!0),!w.test(t=D())||(i=t,M(")"),M("returns"),M("("),M("stream",!0)&&(o=!0),!w.test(t=D())))throw U(t);a=t,M(")");var u=new h(l,n,i,a,s,o);u.comment=r,J(u,function(e){if("option"===e)es(u,e),M(";");else throw U(e)}),e.add(u)}function ed(e,t){if(!w.test(t=D()))throw U(t,"reference");var r=t;J(null,function(t){switch(t){case"required":case"repeated":Z(e,t,r);break;case"optional":j?Z(e,"proto3_optional",r):Z(e,"optional",r);break;default:if(!j||!w.test(t))throw U(t);O(t),Z(e,"optional",r)}})}for(;null!==(E=D());)switch(E){case"package":if(!B)throw U(E);K();break;case"import":if(!B)throw U(E);W();break;case"syntax":if(!B)throw U(E);Q();break;case"option":es(F,E),M(";");break;default:if(Y(F,E)){B=!1;continue}throw U(E)}return x.filename=null,{package:_,imports:I,weakImports:k,syntax:A,root:t}}},27603:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addCommonProtos=t.loadProtosWithOptionsSync=t.loadProtosWithOptions=void 0;let n=r(29021),i=r(33873),s=r(68474);function a(e,t){let r=e.resolvePath;e.resolvePath=(e,s)=>{if(i.isAbsolute(s))return s;for(let e of t){let t=i.join(e,s);try{return n.accessSync(t,n.constants.R_OK),t}catch(e){continue}}return process.emitWarning(`${s} not found in any of the include paths ${t}`),r(e,s)}}t.loadProtosWithOptions=async function(e,t){let r=new s.Root;if((t=t||{}).includeDirs){if(!Array.isArray(t.includeDirs))return Promise.reject(Error("The includeDirs option must be an array"));a(r,t.includeDirs)}let n=await r.load(e,t);return n.resolveAll(),n},t.loadProtosWithOptionsSync=function(e,t){let r=new s.Root;if((t=t||{}).includeDirs){if(!Array.isArray(t.includeDirs))throw Error("The includeDirs option must be an array");a(r,t.includeDirs)}let n=r.loadSync(e,t);return n.resolveAll(),n},t.addCommonProtos=function(){let e=r(82566),t=r(20040),n=r(56271),i=r(96138);s.common("api",e.nested.google.nested.protobuf.nested),s.common("descriptor",t.nested.google.nested.protobuf.nested),s.common("source_context",n.nested.google.nested.protobuf.nested),s.common("type",i.nested.google.nested.protobuf.nested)}},27910:e=>{"use strict";e.exports=require("stream")},28354:e=>{"use strict";e.exports=require("util")},28592:e=>{"use strict";e.exports={rE:"1.9.15"}},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},30015:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setup=t.RoundRobinLoadBalancer=void 0;let n=r(86239),i=r(40536),s=r(72910),a=r(43356),o=r(31359),l=r(71271),u="round_robin";function c(e){o.trace(l.LogVerbosity.DEBUG,u,e)}let h="round_robin";class d{getLoadBalancerName(){return h}constructor(){}toJsonObject(){return{[h]:{}}}static createFromJson(e){return new d}}class p{constructor(e,t=0){this.subchannelList=e,this.nextIndex=t}pick(e){let t=this.subchannelList[this.nextIndex];return this.nextIndex=(this.nextIndex+1)%this.subchannelList.length,{pickResultType:s.PickResultType.COMPLETE,subchannel:t,status:null,onCallStarted:null,onCallEnded:null}}peekNextSubchannel(){return this.subchannelList[this.nextIndex]}}class f{constructor(e){this.channelControlHelper=e,this.subchannels=[],this.currentState=i.ConnectivityState.IDLE,this.currentReadyPicker=null,this.lastError=null,this.subchannelStateListener=(e,t,r,n,s)=>{this.calculateAndUpdateState(),(r===i.ConnectivityState.TRANSIENT_FAILURE||r===i.ConnectivityState.IDLE)&&(s&&(this.lastError=s),this.channelControlHelper.requestReresolution(),e.startConnecting())}}countSubchannelsWithState(e){return this.subchannels.filter(t=>t.getConnectivityState()===e).length}calculateAndUpdateState(){if(this.countSubchannelsWithState(i.ConnectivityState.READY)>0){let e=this.subchannels.filter(e=>e.getConnectivityState()===i.ConnectivityState.READY),t=0;null!==this.currentReadyPicker&&(t=e.indexOf(this.currentReadyPicker.peekNextSubchannel()))<0&&(t=0),this.updateState(i.ConnectivityState.READY,new p(e,t))}else this.countSubchannelsWithState(i.ConnectivityState.CONNECTING)>0?this.updateState(i.ConnectivityState.CONNECTING,new s.QueuePicker(this)):this.countSubchannelsWithState(i.ConnectivityState.TRANSIENT_FAILURE)>0?this.updateState(i.ConnectivityState.TRANSIENT_FAILURE,new s.UnavailablePicker({details:`No connection established. Last error: ${this.lastError}`})):this.updateState(i.ConnectivityState.IDLE,new s.QueuePicker(this))}updateState(e,t){c(i.ConnectivityState[this.currentState]+" -> "+i.ConnectivityState[e]),e===i.ConnectivityState.READY?this.currentReadyPicker=t:this.currentReadyPicker=null,this.currentState=e,this.channelControlHelper.updateState(e,t)}resetSubchannelList(){for(let e of this.subchannels)e.removeConnectivityStateListener(this.subchannelStateListener),e.unref(),this.channelControlHelper.removeChannelzChild(e.getChannelzRef());this.subchannels=[]}updateAddressList(e,t){for(let t of(this.resetSubchannelList(),c("Connect to address list "+e.map(e=>(0,a.subchannelAddressToString)(e))),this.subchannels=e.map(e=>this.channelControlHelper.createSubchannel(e,{})),this.subchannels)){t.ref(),t.addConnectivityStateListener(this.subchannelStateListener),this.channelControlHelper.addChannelzChild(t.getChannelzRef());let e=t.getConnectivityState();(e===i.ConnectivityState.IDLE||e===i.ConnectivityState.TRANSIENT_FAILURE)&&t.startConnecting()}this.calculateAndUpdateState()}exitIdle(){for(let e of this.subchannels)e.startConnecting()}resetBackoff(){}destroy(){this.resetSubchannelList()}getTypeName(){return h}}t.RoundRobinLoadBalancer=f,t.setup=function(){(0,n.registerLoadBalancerType)(h,f,d)}},30847:(e,t,r)=>{"use strict";e.exports=o;var n=r(32110),i=r(61810),s=r(93107);function a(e,t,r,n){return t.resolvedType.group?e("types[%i].encode(%s,w.uint32(%i)).uint32(%i)",r,n,(t.id<<3|3)>>>0,(t.id<<3|4)>>>0):e("types[%i].encode(%s,w.uint32(%i).fork()).ldelim()",r,n,(t.id<<3|2)>>>0)}function o(e){for(var t,r,o=s.codegen(["m","w"],e.name+"$encode")("if(!w)")("w=Writer.create()"),l=e.fieldsArray.slice().sort(s.compareFieldsById),t=0;t<l.length;++t){var u=l[t].resolve(),c=e._fieldsArray.indexOf(u),h=u.resolvedType instanceof n?"int32":u.type,d=i.basic[h];r="m"+s.safeProp(u.name),u.map?(o("if(%s!=null&&Object.hasOwnProperty.call(m,%j)){",r,u.name)("for(var ks=Object.keys(%s),i=0;i<ks.length;++i){",r)("w.uint32(%i).fork().uint32(%i).%s(ks[i])",(u.id<<3|2)>>>0,8|i.mapKey[u.keyType],u.keyType),void 0===d?o("types[%i].encode(%s[ks[i]],w.uint32(18).fork()).ldelim().ldelim()",c,r):o(".uint32(%i).%s(%s[ks[i]]).ldelim()",16|d,h,r),o("}")("}")):u.repeated?(o("if(%s!=null&&%s.length){",r,r),u.packed&&void 0!==i.packed[h]?o("w.uint32(%i).fork()",(u.id<<3|2)>>>0)("for(var i=0;i<%s.length;++i)",r)("w.%s(%s[i])",h,r)("w.ldelim()"):(o("for(var i=0;i<%s.length;++i)",r),void 0===d?a(o,u,c,r+"[i]"):o("w.uint32(%i).%s(%s[i])",(u.id<<3|d)>>>0,h,r)),o("}")):(u.optional&&o("if(%s!=null&&Object.hasOwnProperty.call(m,%j))",r,u.name),void 0===d?a(o,u,c,r):o("w.uint32(%i).%s(%s)",(u.id<<3|d)>>>0,h,r))}return o("return w")}},31156:(e,t,r)=>{"use strict";e.exports=i;var n=r(8707);function i(e,t){this.lo=e>>>0,this.hi=t>>>0}var s=i.zero=new i(0,0);s.toNumber=function(){return 0},s.zzEncode=s.zzDecode=function(){return this},s.length=function(){return 1};var a=i.zeroHash="\0\0\0\0\0\0\0\0";i.fromNumber=function(e){if(0===e)return s;var t=e<0;t&&(e=-e);var r=e>>>0,n=(e-r)/0x100000000>>>0;return t&&(n=~n>>>0,r=~r>>>0,++r>0xffffffff&&(r=0,++n>0xffffffff&&(n=0))),new i(r,n)},i.from=function(e){if("number"==typeof e)return i.fromNumber(e);if(n.isString(e))if(!n.Long)return i.fromNumber(parseInt(e,10));else e=n.Long.fromString(e);return e.low||e.high?new i(e.low>>>0,e.high>>>0):s},i.prototype.toNumber=function(e){if(!e&&this.hi>>>31){var t=~this.lo+1>>>0,r=~this.hi>>>0;return t||(r=r+1>>>0),-(t+0x100000000*r)}return this.lo+0x100000000*this.hi},i.prototype.toLong=function(e){return n.Long?new n.Long(0|this.lo,0|this.hi,!!e):{low:0|this.lo,high:0|this.hi,unsigned:!!e}};var o=String.prototype.charCodeAt;i.fromHash=function(e){return e===a?s:new i((o.call(e,0)|o.call(e,1)<<8|o.call(e,2)<<16|o.call(e,3)<<24)>>>0,(o.call(e,4)|o.call(e,5)<<8|o.call(e,6)<<16|o.call(e,7)<<24)>>>0)},i.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},i.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this},i.prototype.zzDecode=function(){var e=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this},i.prototype.length=function(){var e=this.lo,t=(this.lo>>>28|this.hi<<4)>>>0,r=this.hi>>>24;return 0===r?0===t?e<16384?e<128?1:2:e<2097152?3:4:t<16384?t<128?5:6:t<2097152?7:8:r<128?9:10}},31359:(e,t,r)=>{"use strict";var n,i,s,a;Object.defineProperty(t,"__esModule",{value:!0}),t.isTracerEnabled=t.trace=t.log=t.setLoggerVerbosity=t.setLogger=t.getLogger=void 0;let o=r(71271),l=r(19771),u=r(28592).rE,c={error:(e,...t)=>{console.error("E "+e,...t)},info:(e,...t)=>{console.error("I "+e,...t)},debug:(e,...t)=>{console.error("D "+e,...t)}},h=o.LogVerbosity.ERROR;switch((null!=(i=null!=(n=process.env.GRPC_NODE_VERBOSITY)?n:process.env.GRPC_VERBOSITY)?i:"").toUpperCase()){case"DEBUG":h=o.LogVerbosity.DEBUG;break;case"INFO":h=o.LogVerbosity.INFO;break;case"ERROR":h=o.LogVerbosity.ERROR;break;case"NONE":h=o.LogVerbosity.NONE}t.getLogger=()=>c,t.setLogger=e=>{c=e},t.setLoggerVerbosity=e=>{h=e},t.log=(e,...t)=>{let r;if(e>=h){switch(e){case o.LogVerbosity.DEBUG:r=c.debug;break;case o.LogVerbosity.INFO:r=c.info;break;case o.LogVerbosity.ERROR:r=c.error}r||(r=c.error),r&&r.bind(c)(...t)}};let d=null!=(a=null!=(s=process.env.GRPC_NODE_TRACE)?s:process.env.GRPC_TRACE)?a:"",p=new Set,f=new Set;for(let e of d.split(","))e.startsWith("-")?f.add(e.substring(1)):p.add(e);let m=p.has("all");function g(e,r,n){y(r)&&(0,t.log)(e,new Date().toISOString()+" | v"+u+" "+l.pid+" | "+r+" | "+n)}function y(e){return!f.has(e)&&(m||p.has(e))}t.trace=g,t.isTracerEnabled=y},32110:(e,t,r)=>{"use strict";e.exports=a;var n=r(64824);((a.prototype=Object.create(n.prototype)).constructor=a).className="Enum";var i=r(77968),s=r(93107);function a(e,t,r,i,s,a){if(n.call(this,e,r),t&&"object"!=typeof t)throw TypeError("values must be an object");if(this.valuesById={},this.values=Object.create(this.valuesById),this.comment=i,this.comments=s||{},this.valuesOptions=a,this.reserved=void 0,t)for(var o=Object.keys(t),l=0;l<o.length;++l)"number"==typeof t[o[l]]&&(this.valuesById[this.values[o[l]]=t[o[l]]]=o[l])}a.fromJSON=function(e,t){var r=new a(e,t.values,t.options,t.comment,t.comments);return r.reserved=t.reserved,r},a.prototype.toJSON=function(e){var t=!!e&&!!e.keepComments;return s.toObject(["options",this.options,"valuesOptions",this.valuesOptions,"values",this.values,"reserved",this.reserved&&this.reserved.length?this.reserved:void 0,"comment",t?this.comment:void 0,"comments",t?this.comments:void 0])},a.prototype.add=function(e,t,r,n){if(!s.isString(e))throw TypeError("name must be a string");if(!s.isInteger(t))throw TypeError("id must be an integer");if(void 0!==this.values[e])throw Error("duplicate name '"+e+"' in "+this);if(this.isReservedId(t))throw Error("id "+t+" is reserved in "+this);if(this.isReservedName(e))throw Error("name '"+e+"' is reserved in "+this);if(void 0!==this.valuesById[t]){if(!(this.options&&this.options.allow_alias))throw Error("duplicate id "+t+" in "+this);this.values[e]=t}else this.valuesById[this.values[e]=t]=e;return n&&(void 0===this.valuesOptions&&(this.valuesOptions={}),this.valuesOptions[e]=n||null),this.comments[e]=r||null,this},a.prototype.remove=function(e){if(!s.isString(e))throw TypeError("name must be a string");var t=this.values[e];if(null==t)throw Error("name '"+e+"' does not exist in "+this);return delete this.valuesById[t],delete this.values[e],delete this.comments[e],this.valuesOptions&&delete this.valuesOptions[e],this},a.prototype.isReservedId=function(e){return i.isReservedId(this.reserved,e)},a.prototype.isReservedName=function(e){return i.isReservedName(this.reserved,e)}},33873:e=>{"use strict";e.exports=require("path")},34346:e=>{"use strict";e.exports=n;var t,r=/\/|\./;function n(e,t){r.test(e)||(e="google/protobuf/"+e+".proto",t={nested:{google:{nested:{protobuf:{nested:t}}}}}),n[e]=t}n("any",{Any:{fields:{type_url:{type:"string",id:1},value:{type:"bytes",id:2}}}}),n("duration",{Duration:t={fields:{seconds:{type:"int64",id:1},nanos:{type:"int32",id:2}}}}),n("timestamp",{Timestamp:t}),n("empty",{Empty:{fields:{}}}),n("struct",{Struct:{fields:{fields:{keyType:"string",type:"Value",id:1}}},Value:{oneofs:{kind:{oneof:["nullValue","numberValue","stringValue","boolValue","structValue","listValue"]}},fields:{nullValue:{type:"NullValue",id:1},numberValue:{type:"double",id:2},stringValue:{type:"string",id:3},boolValue:{type:"bool",id:4},structValue:{type:"Struct",id:5},listValue:{type:"ListValue",id:6}}},NullValue:{values:{NULL_VALUE:0}},ListValue:{fields:{values:{rule:"repeated",type:"Value",id:1}}}}),n("wrappers",{DoubleValue:{fields:{value:{type:"double",id:1}}},FloatValue:{fields:{value:{type:"float",id:1}}},Int64Value:{fields:{value:{type:"int64",id:1}}},UInt64Value:{fields:{value:{type:"uint64",id:1}}},Int32Value:{fields:{value:{type:"int32",id:1}}},UInt32Value:{fields:{value:{type:"uint32",id:1}}},BoolValue:{fields:{value:{type:"bool",id:1}}},StringValue:{fields:{value:{type:"string",id:1}}},BytesValue:{fields:{value:{type:"bytes",id:1}}}}),n("field_mask",{FieldMask:{fields:{paths:{rule:"repeated",type:"string",id:1}}}}),n.get=function(e){return n[e]||null}},34631:e=>{"use strict";e.exports=require("tls")},35108:(e,t)=>{"use strict";var r=t;r.length=function(e){var t=e.length;if(!t)return 0;for(var r=0;--t%4>1&&"="===e.charAt(t);)++r;return Math.ceil(3*e.length)/4-r};for(var n=Array(64),i=Array(123),s=0;s<64;)i[n[s]=s<26?s+65:s<52?s+71:s<62?s-4:s-59|43]=s++;r.encode=function(e,t,r){for(var i,s=null,a=[],o=0,l=0;t<r;){var u=e[t++];switch(l){case 0:a[o++]=n[u>>2],i=(3&u)<<4,l=1;break;case 1:a[o++]=n[i|u>>4],i=(15&u)<<2,l=2;break;case 2:a[o++]=n[i|u>>6],a[o++]=n[63&u],l=0}o>8191&&((s||(s=[])).push(String.fromCharCode.apply(String,a)),o=0)}return(l&&(a[o++]=n[i],a[o++]=61,1===l&&(a[o++]=61)),s)?(o&&s.push(String.fromCharCode.apply(String,a.slice(0,o))),s.join("")):String.fromCharCode.apply(String,a.slice(0,o))};var a="invalid encoding";r.decode=function(e,t,r){for(var n,s=r,o=0,l=0;l<e.length;){var u=e.charCodeAt(l++);if(61===u&&o>1)break;if(void 0===(u=i[u]))throw Error(a);switch(o){case 0:n=u,o=1;break;case 1:t[r++]=n<<2|(48&u)>>4,n=u,o=2;break;case 2:t[r++]=(15&n)<<4|(60&u)>>2,n=u,o=3;break;case 3:t[r++]=(3&n)<<6|u,o=0}}if(1===o)throw Error(a);return r-s},r.test=function(e){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)}},36142:(e,t,r)=>{"use strict";g={value:!0},g=g=g=g=g=g=g=g=g=g=g=g=g=g=g=g=g=g=g=g=g=g=g=t.ex=g=g=g=g=g=g=t.OS=t.z3=void 0;let n=r(37391);g={enumerable:!0,get:function(){return n.CallCredentials}};let i=r(18453);g={enumerable:!0,get:function(){return i.ChannelImplementation}};let s=r(68655);g={enumerable:!0,get:function(){return s.CompressionAlgorithms}};let a=r(40536);g={enumerable:!0,get:function(){return a.ConnectivityState}};let o=r(56070);g={enumerable:!0,get:function(){return o.ChannelCredentials}};let l=r(7775);g={enumerable:!0,get:function(){return l.Client}};let u=r(71271);g={enumerable:!0,get:function(){return u.LogVerbosity}},g={enumerable:!0,get:function(){return u.Status}},g={enumerable:!0,get:function(){return u.Propagate}};let c=r(31359),h=r(61480);Object.defineProperty(t,"ex",{enumerable:!0,get:function(){return h.loadPackageDefinition}}),g={enumerable:!0,get:function(){return h.makeClientConstructor}},g={enumerable:!0,get:function(){return h.makeClientConstructor}};let d=r(86777);Object.defineProperty(t,"OS",{enumerable:!0,get:function(){return d.Metadata}});let p=r(4227);g={enumerable:!0,get:function(){return p.Server}};let f=r(19420);g={enumerable:!0,get:function(){return f.ServerCredentials}};let m=r(10788);g={enumerable:!0,get:function(){return m.StatusBuilder}},t.z3={combineChannelCredentials:(e,...t)=>t.reduce((e,t)=>e.compose(t),e),combineCallCredentials:(e,...t)=>t.reduce((e,t)=>e.compose(t),e),createInsecure:o.ChannelCredentials.createInsecure,createSsl:o.ChannelCredentials.createSsl,createFromSecureContext:o.ChannelCredentials.createFromSecureContext,createFromMetadataGenerator:n.CallCredentials.createFromMetadataGenerator,createFromGoogleCredential:n.CallCredentials.createFromGoogleCredential,createEmpty:n.CallCredentials.createEmpty},g=e=>e.close(),g=(e,t,r)=>e.waitForReady(t,r),g=(e,t)=>{throw Error("Not available in this library. Use @grpc/proto-loader and loadPackageDefinition instead")},g=(e,t,r)=>{throw Error("Not available in this library. Use @grpc/proto-loader and loadPackageDefinition instead")},g=e=>{c.setLogger(e)},g=e=>{c.setLoggerVerbosity(e)};var g=e=>l.Client.prototype.getChannel.call(e),y=r(3712);g={enumerable:!0,get:function(){return y.ListenerBuilder}},g={enumerable:!0,get:function(){return y.RequesterBuilder}},g={enumerable:!0,get:function(){return y.InterceptingCall}},g={enumerable:!0,get:function(){return y.InterceptorConfigurationError}};var v=r(66827);g={enumerable:!0,get:function(){return v.getChannelzServiceDefinition}},g={enumerable:!0,get:function(){return v.getChannelzHandlers}};var b=r(17061);g={enumerable:!0,get:function(){return b.addAdminServicesToServer}},g=r(76250);let S=r(44660),T=r(85481),w=r(1470),C=r(37386),x=r(30015),E=r(1532),_=r(66827);(()=>{S.setup(),T.setup(),w.setup(),C.setup(),x.setup(),E.setup(),_.setup()})()},37366:e=>{"use strict";e.exports=require("dns")},37386:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setup=t.PickFirstLoadBalancer=t.shuffled=t.PickFirstLoadBalancingConfig=void 0;let n=r(86239),i=r(40536),s=r(72910),a=r(31359),o=r(71271),l="pick_first";function u(e){a.trace(o.LogVerbosity.DEBUG,l,e)}let c="pick_first",h=250;class d{constructor(e){this.shuffleAddressList=e}getLoadBalancerName(){return c}toJsonObject(){return{[c]:{shuffleAddressList:this.shuffleAddressList}}}getShuffleAddressList(){return this.shuffleAddressList}static createFromJson(e){if("shuffleAddressList"in e&&"boolean"!=typeof e.shuffleAddressList)throw Error("pick_first config field shuffleAddressList must be a boolean if provided");return new d(!0===e.shuffleAddressList)}}t.PickFirstLoadBalancingConfig=d;class p{constructor(e){this.subchannel=e}pick(e){return{pickResultType:s.PickResultType.COMPLETE,subchannel:this.subchannel,status:null,onCallStarted:null,onCallEnded:null}}}function f(e){let t=e.slice();for(let e=t.length-1;e>1;e--){let r=Math.floor(Math.random()*(e+1)),n=t[e];t[e]=t[r],t[r]=n}return t}t.shuffled=f;class m{constructor(e){this.channelControlHelper=e,this.children=[],this.currentState=i.ConnectivityState.IDLE,this.currentSubchannelIndex=0,this.currentPick=null,this.subchannelStateListener=(e,t,r,n,i)=>{this.onSubchannelStateUpdate(e,t,r,i)},this.triedAllSubchannels=!1,this.stickyTransientFailureMode=!1,this.requestedResolutionSinceLastUpdate=!1,this.lastError=null,this.latestAddressList=null,this.connectionDelayTimeout=setTimeout(()=>{},0),clearTimeout(this.connectionDelayTimeout)}allChildrenHaveReportedTF(){return this.children.every(e=>e.hasReportedTransientFailure)}calculateAndReportNewState(){this.currentPick?this.updateState(i.ConnectivityState.READY,new p(this.currentPick)):0===this.children.length?this.updateState(i.ConnectivityState.IDLE,new s.QueuePicker(this)):this.stickyTransientFailureMode?this.updateState(i.ConnectivityState.TRANSIENT_FAILURE,new s.UnavailablePicker({details:`No connection established. Last error: ${this.lastError}`})):this.updateState(i.ConnectivityState.CONNECTING,new s.QueuePicker(this))}requestReresolution(){this.requestedResolutionSinceLastUpdate=!0,this.channelControlHelper.requestReresolution()}maybeEnterStickyTransientFailureMode(){if(this.allChildrenHaveReportedTF()&&(this.requestedResolutionSinceLastUpdate||this.requestReresolution(),!this.stickyTransientFailureMode)){for(let{subchannel:e}of(this.stickyTransientFailureMode=!0,this.children))e.startConnecting();this.calculateAndReportNewState()}}removeCurrentPick(){if(null!==this.currentPick){let e=this.currentPick;this.currentPick=null,e.unref(),e.removeConnectivityStateListener(this.subchannelStateListener),this.channelControlHelper.removeChannelzChild(e.getChannelzRef())}}onSubchannelStateUpdate(e,t,r,n){var s;if(null==(s=this.currentPick)?void 0:s.realSubchannelEquals(e)){r!==i.ConnectivityState.READY&&(this.removeCurrentPick(),this.calculateAndReportNewState(),this.requestReresolution());return}for(let[t,s]of this.children.entries())if(e.realSubchannelEquals(s.subchannel)){r===i.ConnectivityState.READY&&this.pickSubchannel(s.subchannel),r===i.ConnectivityState.TRANSIENT_FAILURE&&(s.hasReportedTransientFailure=!0,n&&(this.lastError=n),this.maybeEnterStickyTransientFailureMode(),t===this.currentSubchannelIndex&&this.startNextSubchannelConnecting(t+1)),s.subchannel.startConnecting();return}}startNextSubchannelConnecting(e){if(clearTimeout(this.connectionDelayTimeout),!this.triedAllSubchannels){for(let[t,r]of this.children.entries())if(t>=e){let e=r.subchannel.getConnectivityState();if(e===i.ConnectivityState.IDLE||e===i.ConnectivityState.CONNECTING)return void this.startConnecting(t)}this.triedAllSubchannels=!0,this.maybeEnterStickyTransientFailureMode()}}startConnecting(e){var t,r;clearTimeout(this.connectionDelayTimeout),this.currentSubchannelIndex=e,this.children[e].subchannel.getConnectivityState()===i.ConnectivityState.IDLE&&(u("Start connecting to subchannel with address "+this.children[e].subchannel.getAddress()),process.nextTick(()=>{var t;null==(t=this.children[e])||t.subchannel.startConnecting()})),this.connectionDelayTimeout=null==(r=(t=setTimeout(()=>{this.startNextSubchannelConnecting(e+1)},h)).unref)?void 0:r.call(t)}pickSubchannel(e){this.currentPick&&e.realSubchannelEquals(this.currentPick)||(u("Pick subchannel with address "+e.getAddress()),this.stickyTransientFailureMode=!1,null!==this.currentPick&&(this.currentPick.unref(),this.channelControlHelper.removeChannelzChild(this.currentPick.getChannelzRef()),this.currentPick.removeConnectivityStateListener(this.subchannelStateListener)),this.currentPick=e,e.ref(),this.channelControlHelper.addChannelzChild(e.getChannelzRef()),this.resetSubchannelList(),clearTimeout(this.connectionDelayTimeout),this.calculateAndReportNewState())}updateState(e,t){u(i.ConnectivityState[this.currentState]+" -> "+i.ConnectivityState[e]),this.currentState=e,this.channelControlHelper.updateState(e,t)}resetSubchannelList(){for(let e of this.children)this.currentPick&&e.subchannel.realSubchannelEquals(this.currentPick)||e.subchannel.removeConnectivityStateListener(this.subchannelStateListener),e.subchannel.unref(),this.channelControlHelper.removeChannelzChild(e.subchannel.getChannelzRef());this.currentSubchannelIndex=0,this.children=[],this.triedAllSubchannels=!1,this.requestedResolutionSinceLastUpdate=!1}connectToAddressList(e){let t=e.map(e=>({subchannel:this.channelControlHelper.createSubchannel(e,{}),hasReportedTransientFailure:!1}));for(let{subchannel:e}of t)e.ref(),this.channelControlHelper.addChannelzChild(e.getChannelzRef());for(let{subchannel:e}of(this.resetSubchannelList(),this.children=t,this.children))if(e.addConnectivityStateListener(this.subchannelStateListener),e.getConnectivityState()===i.ConnectivityState.READY)return void this.pickSubchannel(e);for(let e of this.children)e.subchannel.getConnectivityState()===i.ConnectivityState.TRANSIENT_FAILURE&&(e.hasReportedTransientFailure=!0);this.startNextSubchannelConnecting(0),this.calculateAndReportNewState()}updateAddressList(e,t){t instanceof d&&(t.getShuffleAddressList()&&(e=f(e)),this.latestAddressList=e,this.connectToAddressList(e))}exitIdle(){this.currentState===i.ConnectivityState.IDLE&&this.latestAddressList&&this.connectToAddressList(this.latestAddressList)}resetBackoff(){}destroy(){this.resetSubchannelList(),this.removeCurrentPick()}getTypeName(){return c}}t.PickFirstLoadBalancer=m,t.setup=function(){(0,n.registerLoadBalancerType)(c,m,d),(0,n.registerDefaultLoadBalancerType)(c)}},37391:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CallCredentials=void 0;let n=r(86777);function i(e){return"getRequestHeaders"in e&&"function"==typeof e.getRequestHeaders}class s{static createFromMetadataGenerator(e){return new o(e)}static createFromGoogleCredential(e){return s.createFromMetadataGenerator((t,r)=>{let s;(s=i(e)?e.getRequestHeaders(t.service_url):new Promise((r,n)=>{e.getRequestMetadata(t.service_url,(e,t)=>e?void n(e):t?void r(t):void n(Error("Headers not set by metadata plugin")))})).then(e=>{let t=new n.Metadata;for(let r of Object.keys(e))t.add(r,e[r]);r(null,t)},e=>{r(e)})})}static createEmpty(){return new l}}t.CallCredentials=s;class a extends s{constructor(e){super(),this.creds=e}async generateMetadata(e){let t=new n.Metadata;for(let r of(await Promise.all(this.creds.map(t=>t.generateMetadata(e)))))t.merge(r);return t}compose(e){return new a(this.creds.concat([e]))}_equals(e){return this===e||e instanceof a&&this.creds.every((t,r)=>t._equals(e.creds[r]))}}class o extends s{constructor(e){super(),this.metadataGenerator=e}generateMetadata(e){return new Promise((t,r)=>{this.metadataGenerator(e,(e,n)=>{void 0!==n?t(n):r(e)})})}compose(e){return new a([this,e])}_equals(e){return this===e||e instanceof o&&this.metadataGenerator===e.metadataGenerator}}class l extends s{generateMetadata(e){return Promise.resolve(new n.Metadata)}compose(e){return e}_equals(e){return e instanceof l}}},40536:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.ConnectivityState=void 0,function(e){e[e.IDLE=0]="IDLE",e[e.CONNECTING=1]="CONNECTING",e[e.READY=2]="READY",e[e.TRANSIENT_FAILURE=3]="TRANSIENT_FAILURE",e[e.SHUTDOWN=4]="SHUTDOWN"}(r||(t.ConnectivityState=r={}))},40962:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BaseFilter=void 0;class r{async sendMetadata(e){return e}receiveMetadata(e){return e}async sendMessage(e){return e}async receiveMessage(e){return e}receiveTrailers(e){return e}}t.BaseFilter=r},43356:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.stringToSubchannelAddress=t.subchannelAddressToString=t.subchannelAddressEqual=t.isTcpSubchannelAddress=void 0;let n=r(91645);function i(e){return"port"in e}t.isTcpSubchannelAddress=i,t.subchannelAddressEqual=function(e,t){return!e&&!t||!!e&&!!t&&(i(e)?i(t)&&e.host===t.host&&e.port===t.port:!i(t)&&e.path===t.path)},t.subchannelAddressToString=function(e){return i(e)?e.host+":"+e.port:e.path};let s=443;t.stringToSubchannelAddress=function(e,t){return(0,n.isIP)(e)?{host:e,port:null!=t?t:s}:{path:e}}},44660:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setup=t.DEFAULT_PORT=void 0;let n=r(5674),i=r(37366),s=r(28354),a=r(10504),o=r(71271),l=r(86777),u=r(31359),c=r(71271),h=r(26786),d=r(91645),p=r(50268),f="dns_resolver";function m(e){u.trace(c.LogVerbosity.DEBUG,f,e)}t.DEFAULT_PORT=443;let g=3e4,y=s.promisify(i.resolveTxt),v=s.promisify(i.lookup);function b(...e){let t=[];for(let r=0;r<Math.max.apply(null,e.map(e=>e.length));r++)for(let n of e)r<n.length&&t.push(n[r]);return t}class S{constructor(e,r,n){var i,s,a;this.target=e,this.listener=r,this.pendingLookupPromise=null,this.pendingTxtPromise=null,this.latestLookupResult=null,this.latestServiceConfig=null,this.latestServiceConfigError=null,this.continueResolving=!1,this.isNextResolutionTimerRunning=!1,this.isServiceConfigEnabled=!0,this.returnedIpResult=!1,m("Resolver constructed for target "+(0,h.uriToString)(e));let u=(0,h.splitHostPort)(e.path);null===u?(this.ipResult=null,this.dnsHostname=null,this.port=null):(0,d.isIPv4)(u.host)||(0,d.isIPv6)(u.host)?(this.ipResult=[{host:u.host,port:null!=(i=u.port)?i:t.DEFAULT_PORT}],this.dnsHostname=null,this.port=null):(this.ipResult=null,this.dnsHostname=u.host,this.port=null!=(s=u.port)?s:t.DEFAULT_PORT),this.percentage=100*Math.random(),1===n["grpc.service_config_disable_resolution"]&&(this.isServiceConfigEnabled=!1),this.defaultResolutionError={code:o.Status.UNAVAILABLE,details:`Name resolution failed for target ${(0,h.uriToString)(this.target)}`,metadata:new l.Metadata};let c={initialDelay:n["grpc.initial_reconnect_backoff_ms"],maxDelay:n["grpc.max_reconnect_backoff_ms"]};this.backoff=new p.BackoffTimeout(()=>{this.continueResolving&&this.startResolutionWithBackoff()},c),this.backoff.unref(),this.minTimeBetweenResolutionsMs=null!=(a=n["grpc.dns_min_time_between_resolutions_ms"])?a:g,this.nextResolutionTimer=setTimeout(()=>{},0),clearTimeout(this.nextResolutionTimer)}startResolution(){if(null!==this.ipResult){this.returnedIpResult||(m("Returning IP address for target "+(0,h.uriToString)(this.target)),setImmediate(()=>{this.listener.onSuccessfulResolution(this.ipResult,null,null,null,{})}),this.returnedIpResult=!0),this.backoff.stop(),this.backoff.reset(),this.stopNextResolutionTimer();return}if(null===this.dnsHostname)m("Failed to parse DNS address "+(0,h.uriToString)(this.target)),setImmediate(()=>{this.listener.onError({code:o.Status.UNAVAILABLE,details:`Failed to parse DNS address ${(0,h.uriToString)(this.target)}`,metadata:new l.Metadata})}),this.stopNextResolutionTimer();else{if(null!==this.pendingLookupPromise)return;m("Looking up DNS hostname "+this.dnsHostname),this.latestLookupResult=null;let e=this.dnsHostname;this.pendingLookupPromise=v(e,{all:!0}),this.pendingLookupPromise.then(e=>{if(null===this.pendingLookupPromise)return;this.pendingLookupPromise=null,this.backoff.reset(),this.backoff.stop();let t=e.filter(e=>4===e.family),r=e.filter(e=>6===e.family);this.latestLookupResult=b(r,t).map(e=>({host:e.address,port:+this.port}));let n="["+this.latestLookupResult.map(e=>e.host+":"+e.port).join(",")+"]";if(m("Resolved addresses for target "+(0,h.uriToString)(this.target)+": "+n),0===this.latestLookupResult.length)return void this.listener.onError(this.defaultResolutionError);this.listener.onSuccessfulResolution(this.latestLookupResult,this.latestServiceConfig,this.latestServiceConfigError,null,{})},e=>{null!==this.pendingLookupPromise&&(m("Resolution error for target "+(0,h.uriToString)(this.target)+": "+e.message),this.pendingLookupPromise=null,this.stopNextResolutionTimer(),this.listener.onError(this.defaultResolutionError))}),this.isServiceConfigEnabled&&null===this.pendingTxtPromise&&(this.pendingTxtPromise=y(e),this.pendingTxtPromise.then(e=>{if(null!==this.pendingTxtPromise){this.pendingTxtPromise=null;try{this.latestServiceConfig=(0,a.extractAndSelectServiceConfig)(e,this.percentage)}catch(e){this.latestServiceConfigError={code:o.Status.UNAVAILABLE,details:`Parsing service config failed with error ${e.message}`,metadata:new l.Metadata}}null!==this.latestLookupResult&&this.listener.onSuccessfulResolution(this.latestLookupResult,this.latestServiceConfig,this.latestServiceConfigError,null,{})}},e=>{}))}}startNextResolutionTimer(){var e,t;clearTimeout(this.nextResolutionTimer),this.nextResolutionTimer=null==(t=(e=setTimeout(()=>{this.stopNextResolutionTimer(),this.continueResolving&&this.startResolutionWithBackoff()},this.minTimeBetweenResolutionsMs)).unref)?void 0:t.call(e),this.isNextResolutionTimerRunning=!0}stopNextResolutionTimer(){clearTimeout(this.nextResolutionTimer),this.isNextResolutionTimerRunning=!1}startResolutionWithBackoff(){null===this.pendingLookupPromise&&(this.continueResolving=!1,this.backoff.runOnce(),this.startNextResolutionTimer(),this.startResolution())}updateResolution(){null===this.pendingLookupPromise&&(this.isNextResolutionTimerRunning||this.backoff.isRunning()?(this.isNextResolutionTimerRunning?m('resolution update delayed by "min time between resolutions" rate limit'):m("resolution update delayed by backoff timer until "+this.backoff.getEndTime().toISOString()),this.continueResolving=!0):this.startResolutionWithBackoff())}destroy(){this.continueResolving=!1,this.backoff.reset(),this.backoff.stop(),this.stopNextResolutionTimer(),this.pendingLookupPromise=null,this.pendingTxtPromise=null,this.latestLookupResult=null,this.latestServiceConfig=null,this.latestServiceConfigError=null,this.returnedIpResult=!1}static getDefaultAuthority(e){return e.path}}t.setup=function(){(0,n.registerResolver)("dns",S),(0,n.registerDefaultScheme)("dns")}},46642:e=>{"use strict";e.exports={}},47099:e=>{var t=1/0,r="[object Symbol]",n=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,i=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,s="\ud800-\udfff",a="\\u0300-\\u036f\\ufe20-\\ufe23",o="\\u20d0-\\u20f0",l="\\u2700-\\u27bf",u="a-z\\xdf-\\xf6\\xf8-\\xff",c="A-Z\\xc0-\\xd6\\xd8-\\xde",h="\\ufe0e\\ufe0f",d="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",p="[']",f="["+s+"]",m="["+d+"]",g="["+a+o+"]",y="\\d+",v="["+l+"]",b="["+u+"]",S="[^"+s+d+y+l+u+c+"]",T="\ud83c[\udffb-\udfff]",w="[^"+s+"]",C="(?:\ud83c[\udde6-\uddff]){2}",x="[\ud800-\udbff][\udc00-\udfff]",E="["+c+"]",_="\\u200d",I="(?:"+b+"|"+S+")",k="(?:"+E+"|"+S+")",A="(?:"+p+"(?:d|ll|m|re|s|t|ve))?",R="(?:"+p+"(?:D|LL|M|RE|S|T|VE))?",N="(?:"+g+"|"+T+")?",D="["+h+"]?",O="(?:"+_+"(?:"+[w,C,x].join("|")+")"+D+N+")*",P=D+N+O,M="(?:"+[v,C,x].join("|")+")"+P,L="(?:"+[w+g+"?",g,C,x,f].join("|")+")",B=RegExp(p,"g"),j=RegExp(g,"g"),F=RegExp(T+"(?="+T+")|"+L+P,"g"),V=RegExp([E+"?"+b+"+"+A+"(?="+[m,E,"$"].join("|")+")",k+"+"+R+"(?="+[m,E+I,"$"].join("|")+")",E+"?"+I+"+"+A,E+"+"+R,y,M].join("|"),"g"),U=RegExp("["+_+s+a+o+h+"]"),q=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,z={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"ss"},$="object"==typeof global&&global&&global.Object===Object&&global,G="object"==typeof self&&self&&self.Object===Object&&self,H=$||G||Function("return this")();function K(e,t,r,n){var i=-1,s=e?e.length:0;for(n&&s&&(r=e[++i]);++i<s;)r=t(r,e[i],i,e);return r}function W(e){return e.split("")}function Q(e){return e.match(n)||[]}var Y=function(e){return function(t){return null==e?void 0:e[t]}}(z);function J(e){return U.test(e)}function X(e){return q.test(e)}function Z(e){return J(e)?ee(e):W(e)}function ee(e){return e.match(F)||[]}function et(e){return e.match(V)||[]}var er=Object.prototype.toString,en=H.Symbol,ei=en?en.prototype:void 0,es=ei?ei.toString:void 0;function ea(e,t,r){var n=-1,i=e.length;t<0&&(t=-t>i?0:i+t),(r=r>i?i:r)<0&&(r+=i),i=t>r?0:r-t>>>0,t>>>=0;for(var s=Array(i);++n<i;)s[n]=e[n+t];return s}function eo(e){if("string"==typeof e)return e;if(eh(e))return es?es.call(e):"";var r=e+"";return"0"==r&&1/e==-t?"-0":r}function el(e,t,r){var n=e.length;return r=void 0===r?n:r,!t&&r>=n?e:ea(e,t,r)}function eu(e){return function(t){var r=J(t=ed(t))?Z(t):void 0,n=r?r[0]:t.charAt(0),i=r?el(r,1).join(""):t.slice(1);return n[e]()+i}}function ec(e){return!!e&&"object"==typeof e}function eh(e){return"symbol"==typeof e||ec(e)&&er.call(e)==r}function ed(e){return null==e?"":eo(e)}var ep=function(e){return function(t){return K(ey(em(t).replace(B,"")),e,"")}}(function(e,t,r){return t=t.toLowerCase(),e+(r?ef(t):t)});function ef(e){return eg(ed(e).toLowerCase())}function em(e){return(e=ed(e))&&e.replace(i,Y).replace(j,"")}var eg=eu("toUpperCase");function ey(e,t,r){return(e=ed(e),void 0===(t=r?void 0:t))?X(e)?et(e):Q(e):e.match(t)||[]}e.exports=ep},50268:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BackoffTimeout=void 0;let r=1e3,n=1.6,i=12e4,s=.2;function a(e,t){return Math.random()*(t-e)+e}class o{constructor(e,t){this.callback=e,this.initialDelay=r,this.multiplier=n,this.maxDelay=i,this.jitter=s,this.running=!1,this.hasRef=!0,this.startTime=new Date,this.endTime=new Date,t&&(t.initialDelay&&(this.initialDelay=t.initialDelay),t.multiplier&&(this.multiplier=t.multiplier),t.jitter&&(this.jitter=t.jitter),t.maxDelay&&(this.maxDelay=t.maxDelay)),this.nextDelay=this.initialDelay,this.timerId=setTimeout(()=>{},0),clearTimeout(this.timerId)}runTimer(e){var t,r;this.endTime=this.startTime,this.endTime.setMilliseconds(this.endTime.getMilliseconds()+this.nextDelay),clearTimeout(this.timerId),this.timerId=setTimeout(()=>{this.callback(),this.running=!1},e),this.hasRef||null==(r=(t=this.timerId).unref)||r.call(t)}runOnce(){this.running=!0,this.startTime=new Date,this.runTimer(this.nextDelay);let e=Math.min(this.nextDelay*this.multiplier,this.maxDelay),t=e*this.jitter;this.nextDelay=e+a(-t,t)}stop(){clearTimeout(this.timerId),this.running=!1}reset(){if(this.nextDelay=this.initialDelay,this.running){let e=new Date,t=this.startTime;t.setMilliseconds(t.getMilliseconds()+this.nextDelay),clearTimeout(this.timerId),e<t?this.runTimer(t.getTime()-e.getTime()):this.running=!1}}isRunning(){return this.running}ref(){var e,t;this.hasRef=!0,null==(t=(e=this.timerId).ref)||t.call(e)}unref(){var e,t;this.hasRef=!1,null==(t=(e=this.timerId).unref)||t.call(e)}getEndTime(){return this.endTime}}t.BackoffTimeout=o},54003:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FilterStackFactory=t.FilterStack=void 0;class r{constructor(e){this.filters=e}sendMetadata(e){let t=e;for(let e=0;e<this.filters.length;e++)t=this.filters[e].sendMetadata(t);return t}receiveMetadata(e){let t=e;for(let e=this.filters.length-1;e>=0;e--)t=this.filters[e].receiveMetadata(t);return t}sendMessage(e){let t=e;for(let e=0;e<this.filters.length;e++)t=this.filters[e].sendMessage(t);return t}receiveMessage(e){let t=e;for(let e=this.filters.length-1;e>=0;e--)t=this.filters[e].receiveMessage(t);return t}receiveTrailers(e){let t=e;for(let e=this.filters.length-1;e>=0;e--)t=this.filters[e].receiveTrailers(t);return t}push(e){this.filters.unshift(...e)}getFilters(){return this.filters}}t.FilterStack=r;class n{constructor(e){this.factories=e}push(e){this.factories.unshift(...e)}clone(){return new n([...this.factories])}createFilter(){return new r(this.factories.map(e=>e.createFilter()))}}t.FilterStackFactory=n},54351:(e,t,r)=>{"use strict";e.exports=v;var n=r(77968);((v.prototype=Object.create(n.prototype)).constructor=v).className="Type";var i=r(32110),s=r(12630),a=r(73267),o=r(25585),l=r(3076),u=r(8920),c=r(26996),h=r(96120),d=r(93107),p=r(30847),f=r(62823),m=r(16973),g=r(97659),y=r(63695);function v(e,t){n.call(this,e,t),this.fields={},this.oneofs=void 0,this.extensions=void 0,this.reserved=void 0,this.group=void 0,this._fieldsById=null,this._fieldsArray=null,this._oneofsArray=null,this._ctor=null}function b(e){return e._fieldsById=e._fieldsArray=e._oneofsArray=null,delete e.encode,delete e.decode,delete e.verify,e}Object.defineProperties(v.prototype,{fieldsById:{get:function(){if(this._fieldsById)return this._fieldsById;this._fieldsById={};for(var e=Object.keys(this.fields),t=0;t<e.length;++t){var r=this.fields[e[t]],n=r.id;if(this._fieldsById[n])throw Error("duplicate id "+n+" in "+this);this._fieldsById[n]=r}return this._fieldsById}},fieldsArray:{get:function(){return this._fieldsArray||(this._fieldsArray=d.toArray(this.fields))}},oneofsArray:{get:function(){return this._oneofsArray||(this._oneofsArray=d.toArray(this.oneofs))}},ctor:{get:function(){return this._ctor||(this.ctor=v.generateConstructor(this)())},set:function(e){var t=e.prototype;t instanceof u||((e.prototype=new u).constructor=e,d.merge(e.prototype,t)),e.$type=e.prototype.$type=this,d.merge(e,u,!0),this._ctor=e;for(var r=0;r<this.fieldsArray.length;++r)this._fieldsArray[r].resolve();var n={};for(r=0;r<this.oneofsArray.length;++r)n[this._oneofsArray[r].resolve().name]={get:d.oneOfGetter(this._oneofsArray[r].oneof),set:d.oneOfSetter(this._oneofsArray[r].oneof)};r&&Object.defineProperties(e.prototype,n)}}}),v.generateConstructor=function(e){for(var t,r=d.codegen(["p"],e.name),n=0;n<e.fieldsArray.length;++n)(t=e._fieldsArray[n]).map?r("this%s={}",d.safeProp(t.name)):t.repeated&&r("this%s=[]",d.safeProp(t.name));return r("if(p)for(var ks=Object.keys(p),i=0;i<ks.length;++i)if(p[ks[i]]!=null)")("this[ks[i]]=p[ks[i]]")},v.fromJSON=function(e,t){var r=new v(e,t.options);r.extensions=t.extensions,r.reserved=t.reserved;for(var u=Object.keys(t.fields),c=0;c<u.length;++c)r.add((void 0!==t.fields[u[c]].keyType?o.fromJSON:a.fromJSON)(u[c],t.fields[u[c]]));if(t.oneofs)for(u=Object.keys(t.oneofs),c=0;c<u.length;++c)r.add(s.fromJSON(u[c],t.oneofs[u[c]]));if(t.nested)for(u=Object.keys(t.nested),c=0;c<u.length;++c){var h=t.nested[u[c]];r.add((void 0!==h.id?a.fromJSON:void 0!==h.fields?v.fromJSON:void 0!==h.values?i.fromJSON:void 0!==h.methods?l.fromJSON:n.fromJSON)(u[c],h))}return t.extensions&&t.extensions.length&&(r.extensions=t.extensions),t.reserved&&t.reserved.length&&(r.reserved=t.reserved),t.group&&(r.group=!0),t.comment&&(r.comment=t.comment),r},v.prototype.toJSON=function(e){var t=n.prototype.toJSON.call(this,e),r=!!e&&!!e.keepComments;return d.toObject(["options",t&&t.options||void 0,"oneofs",n.arrayToJSON(this.oneofsArray,e),"fields",n.arrayToJSON(this.fieldsArray.filter(function(e){return!e.declaringField}),e)||{},"extensions",this.extensions&&this.extensions.length?this.extensions:void 0,"reserved",this.reserved&&this.reserved.length?this.reserved:void 0,"group",this.group||void 0,"nested",t&&t.nested||void 0,"comment",r?this.comment:void 0])},v.prototype.resolveAll=function(){for(var e=this.fieldsArray,t=0;t<e.length;)e[t++].resolve();var r=this.oneofsArray;for(t=0;t<r.length;)r[t++].resolve();return n.prototype.resolveAll.call(this)},v.prototype.get=function(e){return this.fields[e]||this.oneofs&&this.oneofs[e]||this.nested&&this.nested[e]||null},v.prototype.add=function(e){if(this.get(e.name))throw Error("duplicate name '"+e.name+"' in "+this);if(e instanceof a&&void 0===e.extend){if(this._fieldsById?this._fieldsById[e.id]:this.fieldsById[e.id])throw Error("duplicate id "+e.id+" in "+this);if(this.isReservedId(e.id))throw Error("id "+e.id+" is reserved in "+this);if(this.isReservedName(e.name))throw Error("name '"+e.name+"' is reserved in "+this);return e.parent&&e.parent.remove(e),this.fields[e.name]=e,e.message=this,e.onAdd(this),b(this)}return e instanceof s?(this.oneofs||(this.oneofs={}),this.oneofs[e.name]=e,e.onAdd(this),b(this)):n.prototype.add.call(this,e)},v.prototype.remove=function(e){if(e instanceof a&&void 0===e.extend){if(!this.fields||this.fields[e.name]!==e)throw Error(e+" is not a member of "+this);return delete this.fields[e.name],e.parent=null,e.onRemove(this),b(this)}if(e instanceof s){if(!this.oneofs||this.oneofs[e.name]!==e)throw Error(e+" is not a member of "+this);return delete this.oneofs[e.name],e.parent=null,e.onRemove(this),b(this)}return n.prototype.remove.call(this,e)},v.prototype.isReservedId=function(e){return n.isReservedId(this.reserved,e)},v.prototype.isReservedName=function(e){return n.isReservedName(this.reserved,e)},v.prototype.create=function(e){return new this.ctor(e)},v.prototype.setup=function(){for(var e=this.fullName,t=[],r=0;r<this.fieldsArray.length;++r)t.push(this._fieldsArray[r].resolve().resolvedType);this.encode=p(this)({Writer:h,types:t,util:d}),this.decode=f(this)({Reader:c,types:t,util:d}),this.verify=m(this)({types:t,util:d}),this.fromObject=g.fromObject(this)({types:t,util:d}),this.toObject=g.toObject(this)({types:t,util:d});var n=y[e];if(n){var i=Object.create(this);i.fromObject=this.fromObject,this.fromObject=n.fromObject.bind(i),i.toObject=this.toObject,this.toObject=n.toObject.bind(i)}return this},v.prototype.encode=function(e,t){return this.setup().encode(e,t)},v.prototype.encodeDelimited=function(e,t){return this.encode(e,t&&t.len?t.fork():t).ldelim()},v.prototype.decode=function(e,t){return this.setup().decode(e,t)},v.prototype.decodeDelimited=function(e){return e instanceof c||(e=c.create(e)),this.decode(e,e.uint32())},v.prototype.verify=function(e){return this.setup().verify(e)},v.prototype.fromObject=function(e){return this.setup().fromObject(e)},v.prototype.toObject=function(e,t){return this.setup().toObject(e,t)},v.d=function(e){return function(t){d.decorateType(t,e)}}},54369:(e,t,r)=>{"use strict";e.exports=s;var n=r(96120);(s.prototype=Object.create(n.prototype)).constructor=s;var i=r(8707);function s(){n.call(this)}function a(e,t,r){e.length<40?i.utf8.write(e,t,r):t.utf8Write?t.utf8Write(e,r):t.write(e,r)}s._configure=function(){s.alloc=i._Buffer_allocUnsafe,s.writeBytesBuffer=i.Buffer&&i.Buffer.prototype instanceof Uint8Array&&"set"===i.Buffer.prototype.set.name?function(e,t,r){t.set(e,r)}:function(e,t,r){if(e.copy)e.copy(t,r,0,e.length);else for(var n=0;n<e.length;)t[r++]=e[n++]}},s.prototype.bytes=function(e){i.isString(e)&&(e=i._Buffer_from(e,"base64"));var t=e.length>>>0;return this.uint32(t),t&&this._push(s.writeBytesBuffer,t,e),this},s.prototype.string=function(e){var t=i.Buffer.byteLength(e);return this.uint32(t),t&&this._push(a,t,e),this},s._configure()},55511:e=>{"use strict";e.exports=require("crypto")},56061:(e,t)=>{var r,n=function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=null;try{t=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function r(e,t,r){this.low=0|e,this.high=0|t,this.unsigned=!!r}function n(e){return!0===(e&&e.__isLong__)}function i(e){var t=Math.clz32(e&-e);return e?31-t:t}r.prototype.__isLong__,Object.defineProperty(r.prototype,"__isLong__",{value:!0}),r.isLong=n;var s={},a={};function o(e,t){var r,n,i;if(t)return(e>>>=0,(i=0<=e&&e<256)&&(n=a[e]))?n:(r=u(e,0,!0),i&&(a[e]=r),r);return(e|=0,(i=-128<=e&&e<128)&&(n=s[e]))?n:(r=u(e,e<0?-1:0,!1),i&&(s[e]=r),r)}function l(e,t){if(isNaN(e))return t?v:y;if(t){if(e<0)return v;if(e>=f)return C}else{if(e<=-m)return x;if(e+1>=m)return w}return e<0?l(-e,t).neg():u(e%p|0,e/p|0,t)}function u(e,t,n){return new r(e,t,n)}r.fromInt=o,r.fromNumber=l,r.fromBits=u;var c=Math.pow;function h(e,t,r){if(0===e.length)throw Error("empty string");if("number"==typeof t?(r=t,t=!1):t=!!t,"NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return t?v:y;if((r=r||10)<2||36<r)throw RangeError("radix");if((n=e.indexOf("-"))>0)throw Error("interior hyphen");if(0===n)return h(e.substring(1),t,r).neg();for(var n,i=l(c(r,8)),s=y,a=0;a<e.length;a+=8){var o=Math.min(8,e.length-a),u=parseInt(e.substring(a,a+o),r);if(o<8){var d=l(c(r,o));s=s.mul(d).add(l(u))}else s=(s=s.mul(i)).add(l(u))}return s.unsigned=t,s}function d(e,t){return"number"==typeof e?l(e,t):"string"==typeof e?h(e,t):u(e.low,e.high,"boolean"==typeof t?t:e.unsigned)}r.fromString=h,r.fromValue=d;var p=0x100000000,f=0xffffffffffffffff,m=0x8000000000000000,g=o(0x1000000),y=o(0);r.ZERO=y;var v=o(0,!0);r.UZERO=v;var b=o(1);r.ONE=b;var S=o(1,!0);r.UONE=S;var T=o(-1);r.NEG_ONE=T;var w=u(-1,0x7fffffff,!1);r.MAX_VALUE=w;var C=u(-1,-1,!0);r.MAX_UNSIGNED_VALUE=C;var x=u(0,-0x80000000,!1);r.MIN_VALUE=x;var E=r.prototype;return E.toInt=function(){return this.unsigned?this.low>>>0:this.low},E.toNumber=function(){return this.unsigned?(this.high>>>0)*p+(this.low>>>0):this.high*p+(this.low>>>0)},E.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(!this.eq(x))return"-"+this.neg().toString(e);else{var t=l(e),r=this.div(t),n=r.mul(t).sub(this);return r.toString(e)+n.toInt().toString(e)}for(var i=l(c(e,6),this.unsigned),s=this,a="";;){var o=s.div(i),u=(s.sub(o.mul(i)).toInt()>>>0).toString(e);if((s=o).isZero())return u+a;for(;u.length<6;)u="0"+u;a=""+u+a}},E.getHighBits=function(){return this.high},E.getHighBitsUnsigned=function(){return this.high>>>0},E.getLowBits=function(){return this.low},E.getLowBitsUnsigned=function(){return this.low>>>0},E.getNumBitsAbs=function(){if(this.isNegative())return this.eq(x)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;t>0&&(e&1<<t)==0;t--);return 0!=this.high?t+33:t+1},E.isSafeInteger=function(){var e=this.high>>21;return!e||!this.unsigned&&-1===e&&(0!==this.low||-2097152!==this.high)},E.isZero=function(){return 0===this.high&&0===this.low},E.eqz=E.isZero,E.isNegative=function(){return!this.unsigned&&this.high<0},E.isPositive=function(){return this.unsigned||this.high>=0},E.isOdd=function(){return(1&this.low)==1},E.isEven=function(){return(1&this.low)==0},E.equals=function(e){return n(e)||(e=d(e)),(this.unsigned===e.unsigned||this.high>>>31!=1||e.high>>>31!=1)&&this.high===e.high&&this.low===e.low},E.eq=E.equals,E.notEquals=function(e){return!this.eq(e)},E.neq=E.notEquals,E.ne=E.notEquals,E.lessThan=function(e){return 0>this.comp(e)},E.lt=E.lessThan,E.lessThanOrEqual=function(e){return 0>=this.comp(e)},E.lte=E.lessThanOrEqual,E.le=E.lessThanOrEqual,E.greaterThan=function(e){return this.comp(e)>0},E.gt=E.greaterThan,E.greaterThanOrEqual=function(e){return this.comp(e)>=0},E.gte=E.greaterThanOrEqual,E.ge=E.greaterThanOrEqual,E.compare=function(e){if(n(e)||(e=d(e)),this.eq(e))return 0;var t=this.isNegative(),r=e.isNegative();return t&&!r?-1:!t&&r?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},E.comp=E.compare,E.negate=function(){return!this.unsigned&&this.eq(x)?x:this.not().add(b)},E.neg=E.negate,E.add=function(e){n(e)||(e=d(e));var t,r,i=this.high>>>16,s=65535&this.high,a=this.low>>>16,o=65535&this.low,l=e.high>>>16,c=65535&e.high,h=e.low>>>16,p=65535&e.low,f=0,m=0;return t=0+((r=0+(o+p))>>>16),r&=65535,t+=a+h,m+=t>>>16,t&=65535,m+=s+c,f+=m>>>16,m&=65535,f+=i+l,u(t<<16|r,(f&=65535)<<16|m,this.unsigned)},E.subtract=function(e){return n(e)||(e=d(e)),this.add(e.neg())},E.sub=E.subtract,E.multiply=function(e){if(this.isZero())return this;if(n(e)||(e=d(e)),t)return u(t.mul(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned);if(e.isZero())return this.unsigned?v:y;if(this.eq(x))return e.isOdd()?x:y;if(e.eq(x))return this.isOdd()?x:y;if(this.isNegative())if(e.isNegative())return this.neg().mul(e.neg());else return this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(g)&&e.lt(g))return l(this.toNumber()*e.toNumber(),this.unsigned);var r,i,s=this.high>>>16,a=65535&this.high,o=this.low>>>16,c=65535&this.low,h=e.high>>>16,p=65535&e.high,f=e.low>>>16,m=65535&e.low,b=0,S=0;return r=0+((i=0+c*m)>>>16),i&=65535,r+=o*m,S+=r>>>16,r&=65535,r+=c*f,S+=r>>>16,r&=65535,S+=a*m,b+=S>>>16,S&=65535,S+=o*f,b+=S>>>16,S&=65535,S+=c*p,b+=S>>>16,S&=65535,b+=s*m+a*f+o*p+c*h,u(r<<16|i,(b&=65535)<<16|S,this.unsigned)},E.mul=E.multiply,E.divide=function(e){if(n(e)||(e=d(e)),e.isZero())throw Error("division by zero");if(t){var r,i,s;return this.unsigned||-0x80000000!==this.high||-1!==e.low||-1!==e.high?u((this.unsigned?t.div_u:t.div_s)(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned):this}if(this.isZero())return this.unsigned?v:y;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return v;if(e.gt(this.shru(1)))return S;s=v}else{if(this.eq(x))if(e.eq(b)||e.eq(T))return x;else return e.eq(x)?b:(r=this.shr(1).div(e).shl(1)).eq(y)?e.isNegative()?b:T:(i=this.sub(e.mul(r)),s=r.add(i.div(e)));if(e.eq(x))return this.unsigned?v:y;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();s=y}for(i=this;i.gte(e);){for(var a=Math.ceil(Math.log(r=Math.max(1,Math.floor(i.toNumber()/e.toNumber())))/Math.LN2),o=a<=48?1:c(2,a-48),h=l(r),p=h.mul(e);p.isNegative()||p.gt(i);)r-=o,p=(h=l(r,this.unsigned)).mul(e);h.isZero()&&(h=b),s=s.add(h),i=i.sub(p)}return s},E.div=E.divide,E.modulo=function(e){return(n(e)||(e=d(e)),t)?u((this.unsigned?t.rem_u:t.rem_s)(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned):this.sub(this.div(e).mul(e))},E.mod=E.modulo,E.rem=E.modulo,E.not=function(){return u(~this.low,~this.high,this.unsigned)},E.countLeadingZeros=function(){return this.high?Math.clz32(this.high):Math.clz32(this.low)+32},E.clz=E.countLeadingZeros,E.countTrailingZeros=function(){return this.low?i(this.low):i(this.high)+32},E.ctz=E.countTrailingZeros,E.and=function(e){return n(e)||(e=d(e)),u(this.low&e.low,this.high&e.high,this.unsigned)},E.or=function(e){return n(e)||(e=d(e)),u(this.low|e.low,this.high|e.high,this.unsigned)},E.xor=function(e){return n(e)||(e=d(e)),u(this.low^e.low,this.high^e.high,this.unsigned)},E.shiftLeft=function(e){return(n(e)&&(e=e.toInt()),0==(e&=63))?this:e<32?u(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):u(0,this.low<<e-32,this.unsigned)},E.shl=E.shiftLeft,E.shiftRight=function(e){return(n(e)&&(e=e.toInt()),0==(e&=63))?this:e<32?u(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):u(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},E.shr=E.shiftRight,E.shiftRightUnsigned=function(e){return(n(e)&&(e=e.toInt()),0==(e&=63))?this:e<32?u(this.low>>>e|this.high<<32-e,this.high>>>e,this.unsigned):32===e?u(this.high,0,this.unsigned):u(this.high>>>e-32,0,this.unsigned)},E.shru=E.shiftRightUnsigned,E.shr_u=E.shiftRightUnsigned,E.rotateLeft=function(e){var t;return(n(e)&&(e=e.toInt()),0==(e&=63))?this:32===e?u(this.high,this.low,this.unsigned):e<32?(t=32-e,u(this.low<<e|this.high>>>t,this.high<<e|this.low>>>t,this.unsigned)):(e-=32,t=32-e,u(this.high<<e|this.low>>>t,this.low<<e|this.high>>>t,this.unsigned))},E.rotl=E.rotateLeft,E.rotateRight=function(e){var t;return(n(e)&&(e=e.toInt()),0==(e&=63))?this:32===e?u(this.high,this.low,this.unsigned):e<32?(t=32-e,u(this.high<<t|this.low>>>e,this.low<<t|this.high>>>e,this.unsigned)):(e-=32,t=32-e,u(this.low<<t|this.high>>>e,this.high<<t|this.low>>>e,this.unsigned))},E.rotr=E.rotateRight,E.toSigned=function(){return this.unsigned?u(this.low,this.high,!1):this},E.toUnsigned=function(){return this.unsigned?this:u(this.low,this.high,!0)},E.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},E.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]},E.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,255&e,t>>>24,t>>>16&255,t>>>8&255,255&t]},r.fromBytes=function(e,t,n){return n?r.fromBytesLE(e,t):r.fromBytesBE(e,t)},r.fromBytesLE=function(e,t){return new r(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)},r.fromBytesBE=function(e,t){return new r(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)},"function"==typeof BigInt&&(r.fromBigInt=function(e,t){return u(Number(BigInt.asIntN(32,e)),Number(BigInt.asIntN(32,e>>BigInt(32))),t)},r.fromValue=function(e,t){return"bigint"==typeof e?fromBigInt(e,t):d(e,t)},E.toBigInt=function(){var e=BigInt(this.low>>>0);return BigInt(this.unsigned?this.high>>>0:this.high)<<BigInt(32)|e}),e.default=r,"default"in e?e.default:e}({});void 0===(r=(function(){return n}).apply(t,[]))||(e.exports=r)},56070:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ChannelCredentials=void 0;let n=r(34631),i=r(37391),s=r(9227);function a(e,t){if(e&&!(e instanceof Buffer))throw TypeError(`${t}, if provided, must be a Buffer.`)}class o{constructor(e){this.callCredentials=e||i.CallCredentials.createEmpty()}_getCallCredentials(){return this.callCredentials}static createSsl(e,t,r,i){var o;if(a(e,"Root certificate"),a(t,"Private key"),a(r,"Certificate chain"),t&&!r)throw Error("Private key must be given with accompanying certificate chain");if(!t&&r)throw Error("Certificate chain must be given with accompanying private key");return new u((0,n.createSecureContext)({ca:null!=(o=null!=e?e:(0,s.getDefaultRootsData)())?o:void 0,key:null!=t?t:void 0,cert:null!=r?r:void 0,ciphers:s.CIPHER_SUITES}),null!=i?i:{})}static createFromSecureContext(e,t){return new u(e,null!=t?t:{})}static createInsecure(){return new l}}t.ChannelCredentials=o;class l extends o{constructor(e){super(e)}compose(e){throw Error("Cannot compose insecure credentials")}_getConnectionOptions(){return null}_isSecure(){return!1}_equals(e){return e instanceof l}}class u extends o{constructor(e,t){super(),this.secureContext=e,this.verifyOptions=t,this.connectionOptions={secureContext:e},(null==t?void 0:t.checkServerIdentity)&&(this.connectionOptions.checkServerIdentity=t.checkServerIdentity)}compose(e){return new c(this,this.callCredentials.compose(e))}_getConnectionOptions(){return Object.assign({},this.connectionOptions)}_isSecure(){return!0}_equals(e){return this===e||e instanceof u&&this.secureContext===e.secureContext&&this.verifyOptions.checkServerIdentity===e.verifyOptions.checkServerIdentity}}class c extends o{constructor(e,t){super(t),this.channelCredentials=e}compose(e){let t=this.callCredentials.compose(e);return new c(this.channelCredentials,t)}_getConnectionOptions(){return this.channelCredentials._getConnectionOptions()}_isSecure(){return!0}_equals(e){return this===e||e instanceof c&&this.channelCredentials._equals(e.channelCredentials)&&this.callCredentials._equals(e.callCredentials)}}},56271:e=>{"use strict";e.exports=JSON.parse('{"nested":{"google":{"nested":{"protobuf":{"nested":{"SourceContext":{"fields":{"fileName":{"type":"string","id":1}}}}}}}}}')},57354:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.channelOptionsEqual=t.recognizedOptions=void 0,t.recognizedOptions={"grpc.ssl_target_name_override":!0,"grpc.primary_user_agent":!0,"grpc.secondary_user_agent":!0,"grpc.default_authority":!0,"grpc.keepalive_time_ms":!0,"grpc.keepalive_timeout_ms":!0,"grpc.keepalive_permit_without_calls":!0,"grpc.service_config":!0,"grpc.max_concurrent_streams":!0,"grpc.initial_reconnect_backoff_ms":!0,"grpc.max_reconnect_backoff_ms":!0,"grpc.use_local_subchannel_pool":!0,"grpc.max_send_message_length":!0,"grpc.max_receive_message_length":!0,"grpc.enable_http_proxy":!0,"grpc.enable_channelz":!0,"grpc.dns_min_time_between_resolutions_ms":!0,"grpc.enable_retries":!0,"grpc.per_rpc_retry_buffer_size":!0,"grpc.retry_buffer_size":!0,"grpc.max_connection_age_ms":!0,"grpc.max_connection_age_grace_ms":!0,"grpc-node.max_session_memory":!0,"grpc.service_config_disable_resolution":!0,"grpc.client_idle_timeout_ms":!0,"grpc-node.tls_enable_trace":!0},t.channelOptionsEqual=function(e,t){let r=Object.keys(e).sort(),n=Object.keys(t).sort();if(r.length!==n.length)return!1;for(let i=0;i<r.length;i+=1)if(r[i]!==n[i]||e[r[i]]!==t[n[i]])return!1;return!0}},57521:(e,t,r)=>{Promise.resolve().then(r.bind(r,81395))},58546:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ResolvingCall=void 0;let n=r(71271),i=r(26412),s=r(86777),a=r(31359),o=r(73911),l="resolving_call";class u{constructor(e,t,r,s,a,o){this.channel=e,this.method=t,this.filterStackFactory=s,this.credentials=a,this.callNumber=o,this.child=null,this.readPending=!1,this.pendingMessage=null,this.pendingHalfClose=!1,this.ended=!1,this.readFilterPending=!1,this.writeFilterPending=!1,this.pendingChildStatus=null,this.metadata=null,this.listener=null,this.statusWatchers=[],this.deadlineTimer=setTimeout(()=>{},0),this.filterStack=null,this.deadline=r.deadline,this.host=r.host,r.parentCall&&(r.flags&n.Propagate.CANCELLATION&&r.parentCall.on("cancelled",()=>{this.cancelWithStatus(n.Status.CANCELLED,"Cancelled by parent call")}),r.flags&n.Propagate.DEADLINE&&(this.trace("Propagating deadline from parent: "+r.parentCall.getDeadline()),this.deadline=(0,i.minDeadline)(this.deadline,r.parentCall.getDeadline()))),this.trace("Created"),this.runDeadlineTimer()}trace(e){a.trace(n.LogVerbosity.DEBUG,l,"["+this.callNumber+"] "+e)}runDeadlineTimer(){clearTimeout(this.deadlineTimer),this.trace("Deadline: "+(0,i.deadlineToString)(this.deadline));let e=(0,i.getRelativeTimeout)(this.deadline);if(e!==1/0){this.trace("Deadline will be reached in "+e+"ms");let t=()=>{this.cancelWithStatus(n.Status.DEADLINE_EXCEEDED,"Deadline exceeded")};e<=0?process.nextTick(t):this.deadlineTimer=setTimeout(t,e)}}outputStatus(e){if(!this.ended){this.ended=!0,this.filterStack||(this.filterStack=this.filterStackFactory.createFilter()),clearTimeout(this.deadlineTimer);let t=this.filterStack.receiveTrailers(e);this.trace("ended with status: code="+t.code+' details="'+t.details+'"'),this.statusWatchers.forEach(e=>e(t)),process.nextTick(()=>{var e;null==(e=this.listener)||e.onReceiveStatus(t)})}}sendMessageOnChild(e,t){if(!this.child)throw Error("sendMessageonChild called with child not populated");let r=this.child;this.writeFilterPending=!0,this.filterStack.sendMessage(Promise.resolve({message:t,flags:e.flags})).then(t=>{this.writeFilterPending=!1,r.sendMessageWithContext(e,t.message),this.pendingHalfClose&&r.halfClose()},e=>{this.cancelWithStatus(e.code,e.details)})}getConfig(){if(this.ended)return;if(!this.metadata||!this.listener)throw Error("getConfig called before start");let e=this.channel.getConfig(this.method,this.metadata);if("NONE"===e.type)return void this.channel.queueCallForConfig(this);if("ERROR"===e.type)return void(this.metadata.getOptions().waitForReady?this.channel.queueCallForConfig(this):this.outputStatus(e.error));let t=e.config;if(t.status!==n.Status.OK){let{code:e,details:r}=(0,o.restrictControlPlaneStatusCode)(t.status,"Failed to route call to method "+this.method);this.outputStatus({code:e,details:r,metadata:new s.Metadata});return}if(t.methodConfig.timeout){let e=new Date;e.setSeconds(e.getSeconds()+t.methodConfig.timeout.seconds),e.setMilliseconds(e.getMilliseconds()+t.methodConfig.timeout.nanos/1e6),this.deadline=(0,i.minDeadline)(this.deadline,e),this.runDeadlineTimer()}this.filterStackFactory.push(t.dynamicFilterFactories),this.filterStack=this.filterStackFactory.createFilter(),this.filterStack.sendMetadata(Promise.resolve(this.metadata)).then(e=>{this.child=this.channel.createInnerCall(t,this.method,this.host,this.credentials,this.deadline),this.trace("Created child ["+this.child.getCallNumber()+"]"),this.child.start(e,{onReceiveMetadata:e=>{this.trace("Received metadata"),this.listener.onReceiveMetadata(this.filterStack.receiveMetadata(e))},onReceiveMessage:e=>{this.trace("Received message"),this.readFilterPending=!0,this.filterStack.receiveMessage(e).then(e=>{this.trace("Finished filtering received message"),this.readFilterPending=!1,this.listener.onReceiveMessage(e),this.pendingChildStatus&&this.outputStatus(this.pendingChildStatus)},e=>{this.cancelWithStatus(e.code,e.details)})},onReceiveStatus:e=>{this.trace("Received status"),this.readFilterPending?this.pendingChildStatus=e:this.outputStatus(e)}}),this.readPending&&this.child.startRead(),this.pendingMessage?this.sendMessageOnChild(this.pendingMessage.context,this.pendingMessage.message):this.pendingHalfClose&&this.child.halfClose()},e=>{this.outputStatus(e)})}reportResolverError(e){var t;(null==(t=this.metadata)?void 0:t.getOptions().waitForReady)?this.channel.queueCallForConfig(this):this.outputStatus(e)}cancelWithStatus(e,t){var r;this.trace("cancelWithStatus code: "+e+' details: "'+t+'"'),null==(r=this.child)||r.cancelWithStatus(e,t),this.outputStatus({code:e,details:t,metadata:new s.Metadata})}getPeer(){var e,t;return null!=(t=null==(e=this.child)?void 0:e.getPeer())?t:this.channel.getTarget()}start(e,t){this.trace("start called"),this.metadata=e.clone(),this.listener=t,this.getConfig()}sendMessageWithContext(e,t){this.trace("write() called with message of length "+t.length),this.child?this.sendMessageOnChild(e,t):this.pendingMessage={context:e,message:t}}startRead(){this.trace("startRead called"),this.child?this.child.startRead():this.readPending=!0}halfClose(){this.trace("halfClose called"),this.child&&!this.writeFilterPending?this.child.halfClose():this.pendingHalfClose=!0}setCredentials(e){this.credentials=this.credentials.compose(e)}addStatusWatcher(e){this.statusWatchers.push(e)}getCallNumber(){return this.callNumber}}t.ResolvingCall=u},60070:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InterceptingListenerImpl=t.isInterceptingListener=void 0,t.isInterceptingListener=function(e){return void 0!==e.onReceiveMetadata&&1===e.onReceiveMetadata.length};class r{constructor(e,t){this.listener=e,this.nextListener=t,this.processingMetadata=!1,this.hasPendingMessage=!1,this.processingMessage=!1,this.pendingStatus=null}processPendingMessage(){this.hasPendingMessage&&(this.nextListener.onReceiveMessage(this.pendingMessage),this.pendingMessage=null,this.hasPendingMessage=!1)}processPendingStatus(){this.pendingStatus&&this.nextListener.onReceiveStatus(this.pendingStatus)}onReceiveMetadata(e){this.processingMetadata=!0,this.listener.onReceiveMetadata(e,e=>{this.processingMetadata=!1,this.nextListener.onReceiveMetadata(e),this.processPendingMessage(),this.processPendingStatus()})}onReceiveMessage(e){this.processingMessage=!0,this.listener.onReceiveMessage(e,e=>{this.processingMessage=!1,this.processingMetadata?(this.pendingMessage=e,this.hasPendingMessage=!0):(this.nextListener.onReceiveMessage(e),this.processPendingStatus())})}onReceiveStatus(e){this.listener.onReceiveStatus(e,e=>{this.processingMetadata||this.processingMessage?this.pendingStatus=e:this.nextListener.onReceiveStatus(e)})}}t.InterceptingListenerImpl=r},60158:e=>{"use strict";e.exports=h;var t=/[\s{}=;:[\],'"()<>]/g,r=/(?:"([^"\\]*(?:\\.[^"\\]*)*)")/g,n=/(?:'([^'\\]*(?:\\.[^'\\]*)*)')/g,i=/^ *[*/]+ */,s=/^\s*\*?\/*/,a=/\n/g,o=/\s/,l=/\\(.?)/g,u={0:"\0",r:"\r",n:"\n",t:"	"};function c(e){return e.replace(l,function(e,t){switch(t){case"\\":case"":return t;default:return u[t]||""}})}function h(e,l){e=e.toString();var u=0,h=e.length,d=1,p=0,f={},m=[],g=null;function y(e){return Error("illegal "+e+" (line "+d+")")}function v(){var t="'"===g?n:r;t.lastIndex=u-1;var i=t.exec(e);if(!i)throw y("string");return u=t.lastIndex,x(g),g=null,c(i[1])}function b(t){return e.charAt(t)}function S(t,r,n){var o,u={type:e.charAt(t++),lineEmpty:!1,leading:n},c=t-(l?2:3);do if(--c<0||"\n"===(o=e.charAt(c))){u.lineEmpty=!0;break}while(" "===o||"	"===o);for(var h=e.substring(t,r).split(a),m=0;m<h.length;++m)h[m]=h[m].replace(l?s:i,"").trim();u.text=h.join("\n").trim(),f[d]=u,p=d}function T(t){var r=w(t),n=e.substring(t,r);return/^\s*\/\//.test(n)}function w(e){for(var t=e;t<h&&"\n"!==b(t);)t++;return t}function C(){if(m.length>0)return m.shift();if(g)return v();var r,n,i,s,a,c=0===u;do{if(u===h)return null;for(r=!1;o.test(i=b(u));)if("\n"===i&&(c=!0,++d),++u===h)return null;if("/"===b(u)){if(++u===h)throw y("comment");if("/"===b(u))if(l){if(s=u,a=!1,T(u-1)){a=!0;do if((u=w(u))===h||(u++,!c))break;while(T(u))}else u=Math.min(h,w(u)+1);a&&(S(s,u,c),c=!0),d++,r=!0}else{for(a="/"===b(s=u+1);"\n"!==b(++u);)if(u===h)return null;++u,a&&(S(s,u-1,c),c=!0),++d,r=!0}else{if("*"!==(i=b(u)))return"/";s=u+1,a=l||"*"===b(s);do{if("\n"===i&&++d,++u===h)throw y("comment");n=i,i=b(u)}while("*"!==n||"/"!==i);++u,a&&(S(s,u-2,c),c=!0),r=!0}}}while(r);var p=u;if(t.lastIndex=0,!t.test(b(p++)))for(;p<h&&!t.test(b(p));)++p;var f=e.substring(u,u=p);return('"'===f||"'"===f)&&(g=f),f}function x(e){m.push(e)}function E(){if(!m.length){var e=C();if(null===e)return null;x(e)}return m[0]}function _(e,t){var r=E();if(r===e)return C(),!0;if(!t)throw y("token '"+r+"', '"+e+"' expected");return!1}function I(e){var t,r=null;return void 0===e?(t=f[d-1],delete f[d-1],t&&(l||"*"===t.type||t.lineEmpty)&&(r=t.leading?t.text:null)):(p<e&&E(),t=f[e],delete f[e],t&&!t.lineEmpty&&(l||"/"===t.type)&&(r=t.leading?null:t.text)),r}return Object.defineProperty({next:C,peek:E,push:x,skip:_,cmnt:I},"line",{get:function(){return d}})}h.unescape=c},60776:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getErrorCode=t.getErrorMessage=void 0,t.getErrorMessage=function(e){return e instanceof Error?e.message:String(e)},t.getErrorCode=function(e){return"object"==typeof e&&null!==e&&"code"in e&&"number"==typeof e.code?e.code:null}},61480:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.loadPackageDefinition=t.makeClientConstructor=void 0;let n=r(7775),i={unary:n.Client.prototype.makeUnaryRequest,server_stream:n.Client.prototype.makeServerStreamRequest,client_stream:n.Client.prototype.makeClientStreamRequest,bidi:n.Client.prototype.makeBidiStreamRequest};function s(e){return["__proto__","prototype","constructor"].includes(e)}function a(e,t,r){r||(r={});class a extends n.Client{}return Object.keys(e).forEach(t=>{let r;if(s(t))return;let n=e[t];if("string"==typeof t&&"$"===t.charAt(0))throw Error("Method names cannot start with $");r=n.requestStream?n.responseStream?"bidi":"client_stream":n.responseStream?"server_stream":"unary";let l=n.requestSerialize,u=n.responseDeserialize,c=o(i[r],n.path,l,u);a.prototype[t]=c,Object.assign(a.prototype[t],n),n.originalName&&!s(n.originalName)&&(a.prototype[n.originalName]=a.prototype[t])}),a.service=e,a.serviceName=t,a}function o(e,t,r,n){return function(...i){return e.call(this,t,r,n,...i)}}function l(e){return"format"in e}t.makeClientConstructor=a,t.loadPackageDefinition=function(e){let t={};for(let r in e)if(Object.prototype.hasOwnProperty.call(e,r)){let n=e[r],i=r.split(".");if(i.some(e=>s(e)))continue;let o=i[i.length-1],u=t;for(let e of i.slice(0,-1))u[e]||(u[e]={}),u=u[e];l(n)?u[o]=n:u[o]=a(n,o,{})}return t}},61614:(e,t,r)=>{"use strict";var n=r(68474);e.exports=t=n.descriptor=n.Root.fromJSON(r(20040)).lookup(".google.protobuf");var i=n.Namespace,s=n.Root,a=n.Enum,o=n.Type,l=n.Field,u=n.MapField,c=n.OneOf,h=n.Service,d=n.Method;function p(e,r,n){var u=t.FileDescriptorProto.create({name:e.filename||(e.fullName.substring(1).replace(/\./g,"_")||"root")+".proto"});n&&(u.syntax=n),e instanceof s||(u.package=e.fullName.substring(1));for(var c,d=0;d<e.nestedArray.length;++d)(c=e._nestedArray[d])instanceof o?u.messageType.push(c.toDescriptor(n)):c instanceof a?u.enumType.push(c.toDescriptor()):c instanceof l?u.extension.push(c.toDescriptor(n)):c instanceof h?u.service.push(c.toDescriptor()):c instanceof i&&p(c,r,n);u.options=x(e.options,t.FileOptions),u.messageType.length+u.enumType.length+u.extension.length+u.service.length&&r.push(u)}s.fromDescriptor=function(e){"number"==typeof e.length&&(e=t.FileDescriptorSet.decode(e));var r=new s;if(e.file)for(var n,i,u,c=0;c<e.file.length;++c){if(i=r,(n=e.file[c]).package&&n.package.length&&(i=r.define(n.package)),n.name&&n.name.length&&r.files.push(i.filename=n.name),n.messageType)for(u=0;u<n.messageType.length;++u)i.add(o.fromDescriptor(n.messageType[u],n.syntax));if(n.enumType)for(u=0;u<n.enumType.length;++u)i.add(a.fromDescriptor(n.enumType[u]));if(n.extension)for(u=0;u<n.extension.length;++u)i.add(l.fromDescriptor(n.extension[u]));if(n.service)for(u=0;u<n.service.length;++u)i.add(h.fromDescriptor(n.service[u]));var d=C(n.options,t.FileOptions);if(d){var p=Object.keys(d);for(u=0;u<p.length;++u)i.setOption(p[u],d[p[u]])}}return r},s.prototype.toDescriptor=function(e){var r=t.FileDescriptorSet.create();return p(this,r.file,e),r};var f=0;o.fromDescriptor=function(e,r){"number"==typeof e.length&&(e=t.DescriptorProto.decode(e));var n,i=new o(e.name.length?e.name:"Type"+f++,C(e.options,t.MessageOptions));if(e.oneofDecl)for(n=0;n<e.oneofDecl.length;++n)i.add(c.fromDescriptor(e.oneofDecl[n]));if(e.field)for(n=0;n<e.field.length;++n){var s=l.fromDescriptor(e.field[n],r);i.add(s),e.field[n].hasOwnProperty("oneofIndex")&&i.oneofsArray[e.field[n].oneofIndex].add(s)}if(e.extension)for(n=0;n<e.extension.length;++n)i.add(l.fromDescriptor(e.extension[n],r));if(e.nestedType)for(n=0;n<e.nestedType.length;++n)i.add(o.fromDescriptor(e.nestedType[n],r)),e.nestedType[n].options&&e.nestedType[n].options.mapEntry&&i.setOption("map_entry",!0);if(e.enumType)for(n=0;n<e.enumType.length;++n)i.add(a.fromDescriptor(e.enumType[n]));if(e.extensionRange&&e.extensionRange.length)for(n=0,i.extensions=[];n<e.extensionRange.length;++n)i.extensions.push([e.extensionRange[n].start,e.extensionRange[n].end]);if(e.reservedRange&&e.reservedRange.length||e.reservedName&&e.reservedName.length){if(i.reserved=[],e.reservedRange)for(n=0;n<e.reservedRange.length;++n)i.reserved.push([e.reservedRange[n].start,e.reservedRange[n].end]);if(e.reservedName)for(n=0;n<e.reservedName.length;++n)i.reserved.push(e.reservedName[n])}return i},o.prototype.toDescriptor=function(e){var r,n,i=t.DescriptorProto.create({name:this.name});for(n=0;n<this.fieldsArray.length;++n)if(i.field.push(r=this._fieldsArray[n].toDescriptor(e)),this._fieldsArray[n]instanceof u){var s=w(this._fieldsArray[n].keyType,this._fieldsArray[n].resolvedKeyType),c=w(this._fieldsArray[n].type,this._fieldsArray[n].resolvedType),h=11===c||14===c?this._fieldsArray[n].resolvedType&&E(this.parent,this._fieldsArray[n].resolvedType)||this._fieldsArray[n].type:void 0;i.nestedType.push(t.DescriptorProto.create({name:r.typeName,field:[t.FieldDescriptorProto.create({name:"key",number:1,label:1,type:s}),t.FieldDescriptorProto.create({name:"value",number:2,label:1,type:c,typeName:h})],options:t.MessageOptions.create({mapEntry:!0})}))}for(n=0;n<this.oneofsArray.length;++n)i.oneofDecl.push(this._oneofsArray[n].toDescriptor());for(n=0;n<this.nestedArray.length;++n)this._nestedArray[n]instanceof l?i.field.push(this._nestedArray[n].toDescriptor(e)):this._nestedArray[n]instanceof o?i.nestedType.push(this._nestedArray[n].toDescriptor(e)):this._nestedArray[n]instanceof a&&i.enumType.push(this._nestedArray[n].toDescriptor());if(this.extensions)for(n=0;n<this.extensions.length;++n)i.extensionRange.push(t.DescriptorProto.ExtensionRange.create({start:this.extensions[n][0],end:this.extensions[n][1]}));if(this.reserved)for(n=0;n<this.reserved.length;++n)"string"==typeof this.reserved[n]?i.reservedName.push(this.reserved[n]):i.reservedRange.push(t.DescriptorProto.ReservedRange.create({start:this.reserved[n][0],end:this.reserved[n][1]}));return i.options=x(this.options,t.MessageOptions),i};var m=/^(?![eE])[0-9]*(?:\.[0-9]*)?(?:[eE][+-]?[0-9]+)?$/;l.fromDescriptor=function(e,r){if("number"==typeof e.length&&(e=t.DescriptorProto.decode(e)),"number"!=typeof e.number)throw Error("missing field id");switch(n=e.typeName&&e.typeName.length?e.typeName:S(e.type),e.label){case 1:i=void 0;break;case 2:i="required";break;case 3:i="repeated";break;default:throw Error("illegal label: "+e.label)}var n,i,s=e.extendee;void 0!==e.extendee&&(s=s.length?s:void 0);var a=new l(e.name.length?e.name:"field"+e.number,e.number,n,i,s);if(a.options=C(e.options,t.FieldOptions),e.defaultValue&&e.defaultValue.length){var o=e.defaultValue;switch(o){case"true":case"TRUE":o=!0;break;case"false":case"FALSE":o=!1;break;default:m.exec(o)&&(o=parseInt(o))}a.setOption("default",o)}return T(e.type)&&("proto3"===r?e.options&&!e.options.packed&&a.setOption("packed",!1):e.options&&e.options.packed||a.setOption("packed",!1)),a},l.prototype.toDescriptor=function(e){var r=t.FieldDescriptorProto.create({name:this.name,number:this.id});if(this.map)r.type=11,r.typeName=n.util.ucFirst(this.name),r.label=3;else{switch(r.type=w(this.type,this.resolve().resolvedType)){case 10:case 11:case 14:r.typeName=this.resolvedType?E(this.parent,this.resolvedType):this.type}switch(this.rule){case"repeated":r.label=3;break;case"required":r.label=2;break;default:r.label=1}}if(r.extendee=this.extensionField?this.extensionField.parent.fullName:this.extend,this.partOf&&(r.oneofIndex=this.parent.oneofsArray.indexOf(this.partOf))<0)throw Error("missing oneof");return this.options&&(r.options=x(this.options,t.FieldOptions),null!=this.options.default&&(r.defaultValue=String(this.options.default))),"proto3"===e?this.packed||((r.options||(r.options=t.FieldOptions.create())).packed=!1):this.packed&&((r.options||(r.options=t.FieldOptions.create())).packed=!0),r};var g=0;a.fromDescriptor=function(e){"number"==typeof e.length&&(e=t.EnumDescriptorProto.decode(e));var r={};if(e.value)for(var n=0;n<e.value.length;++n){var i=e.value[n].name,s=e.value[n].number||0;r[i&&i.length?i:"NAME"+s]=s}return new a(e.name&&e.name.length?e.name:"Enum"+g++,r,C(e.options,t.EnumOptions))},a.prototype.toDescriptor=function(){for(var e=[],r=0,n=Object.keys(this.values);r<n.length;++r)e.push(t.EnumValueDescriptorProto.create({name:n[r],number:this.values[n[r]]}));return t.EnumDescriptorProto.create({name:this.name,value:e,options:x(this.options,t.EnumOptions)})};var y=0;c.fromDescriptor=function(e){return"number"==typeof e.length&&(e=t.OneofDescriptorProto.decode(e)),new c(e.name&&e.name.length?e.name:"oneof"+y++)},c.prototype.toDescriptor=function(){return t.OneofDescriptorProto.create({name:this.name})};var v=0;h.fromDescriptor=function(e){"number"==typeof e.length&&(e=t.ServiceDescriptorProto.decode(e));var r=new h(e.name&&e.name.length?e.name:"Service"+v++,C(e.options,t.ServiceOptions));if(e.method)for(var n=0;n<e.method.length;++n)r.add(d.fromDescriptor(e.method[n]));return r},h.prototype.toDescriptor=function(){for(var e=[],r=0;r<this.methodsArray.length;++r)e.push(this._methodsArray[r].toDescriptor());return t.ServiceDescriptorProto.create({name:this.name,method:e,options:x(this.options,t.ServiceOptions)})};var b=0;function S(e){switch(e){case 1:return"double";case 2:return"float";case 3:return"int64";case 4:return"uint64";case 5:return"int32";case 6:return"fixed64";case 7:return"fixed32";case 8:return"bool";case 9:return"string";case 12:return"bytes";case 13:return"uint32";case 15:return"sfixed32";case 16:return"sfixed64";case 17:return"sint32";case 18:return"sint64"}throw Error("illegal type: "+e)}function T(e){switch(e){case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 13:case 14:case 15:case 16:case 17:case 18:return!0}return!1}function w(e,t){switch(e){case"double":return 1;case"float":return 2;case"int64":return 3;case"uint64":return 4;case"int32":return 5;case"fixed64":return 6;case"fixed32":return 7;case"bool":return 8;case"string":return 9;case"bytes":return 12;case"uint32":return 13;case"sfixed32":return 15;case"sfixed64":return 16;case"sint32":return 17;case"sint64":return 18}if(t instanceof a)return 14;if(t instanceof o)return t.group?10:11;throw Error("illegal type: "+e)}function C(e,t){if(e){for(var r,i,s,o=[],l=0;l<t.fieldsArray.length;++l)"uninterpretedOption"!==(i=(r=t._fieldsArray[l]).name)&&e.hasOwnProperty(i)&&(s=e[i],r.resolvedType instanceof a&&"number"==typeof s&&void 0!==r.resolvedType.valuesById[s]&&(s=r.resolvedType.valuesById[s]),o.push(_(i),s));return o.length?n.util.toObject(o):void 0}}function x(e,t){if(e){for(var r,i,s=[],a=0,o=Object.keys(e);a<o.length;++a)if(i=e[r=o[a]],"default"!==r){var l=t.fields[r];(l||(l=t.fields[r=n.util.camelCase(r)]))&&s.push(r,i)}return s.length?t.fromObject(n.util.toObject(s)):void 0}}function E(e,t){var r=e.fullName.split("."),n=t.fullName.split("."),a=0,o=0,l=n.length-1;if(!(e instanceof s)&&t instanceof i)for(;a<r.length&&o<l&&r[a]===n[o];){var u=t.lookup(r[a++],!0);if(null!==u&&u!==t)break;++o}else for(;a<r.length&&o<l&&r[a]===n[o];++a,++o);return n.slice(o).join(".")}function _(e){return e.substring(0,1)+e.substring(1).replace(/([A-Z])(?=[a-z]|$)/g,function(e,t){return"_"+t.toLowerCase()})}d.fromDescriptor=function(e){return"number"==typeof e.length&&(e=t.MethodDescriptorProto.decode(e)),new d(e.name&&e.name.length?e.name:"Method"+b++,"rpc",e.inputType,e.outputType,!!e.clientStreaming,!!e.serverStreaming,C(e.options,t.MethodOptions))},d.prototype.toDescriptor=function(){return t.MethodDescriptorProto.create({name:this.name,inputType:this.resolvedRequestType?this.resolvedRequestType.fullName:this.requestType,outputType:this.resolvedResponseType?this.resolvedResponseType.fullName:this.responseType,clientStreaming:this.requestStream,serverStreaming:this.responseStream,options:x(this.options,t.MethodOptions)})}},61810:(e,t,r)=>{"use strict";var n=t,i=r(93107),s=["double","float","int32","uint32","sint32","fixed32","sfixed32","int64","uint64","sint64","fixed64","sfixed64","bool","string","bytes"];function a(e,t){var r=0,n={};for(t|=0;r<e.length;)n[s[r+t]]=e[r++];return n}n.basic=a([1,5,0,0,0,5,5,0,0,0,1,1,0,2,2]),n.defaults=a([0,0,0,0,0,0,0,0,0,0,0,0,!1,"",i.emptyArray,null]),n.long=a([0,0,0,1,1],7),n.mapKey=a([0,0,0,5,5,0,0,0,1,1,0,2],2),n.packed=a([1,5,0,0,0,5,5,0,0,0,1,1,0])},61996:(e,t)=>{"use strict";var r=t;r.length=function(e){for(var t=0,r=0,n=0;n<e.length;++n)(r=e.charCodeAt(n))<128?t+=1:r<2048?t+=2:(64512&r)==55296&&(64512&e.charCodeAt(n+1))==56320?(++n,t+=4):t+=3;return t},r.read=function(e,t,r){if(r-t<1)return"";for(var n,i=null,s=[],a=0;t<r;)(n=e[t++])<128?s[a++]=n:n>191&&n<224?s[a++]=(31&n)<<6|63&e[t++]:n>239&&n<365?(n=((7&n)<<18|(63&e[t++])<<12|(63&e[t++])<<6|63&e[t++])-65536,s[a++]=55296+(n>>10),s[a++]=56320+(1023&n)):s[a++]=(15&n)<<12|(63&e[t++])<<6|63&e[t++],a>8191&&((i||(i=[])).push(String.fromCharCode.apply(String,s)),a=0);return i?(a&&i.push(String.fromCharCode.apply(String,s.slice(0,a))),i.join("")):String.fromCharCode.apply(String,s.slice(0,a))},r.write=function(e,t,r){for(var n,i,s=r,a=0;a<e.length;++a)(n=e.charCodeAt(a))<128?t[r++]=n:(n<2048?t[r++]=n>>6|192:((64512&n)==55296&&(64512&(i=e.charCodeAt(a+1)))==56320?(n=65536+((1023&n)<<10)+(1023&i),++a,t[r++]=n>>18|240,t[r++]=n>>12&63|128):t[r++]=n>>12|224,t[r++]=n>>6&63|128),t[r++]=63&n|128);return r-s}},62823:(e,t,r)=>{"use strict";e.exports=o;var n=r(32110),i=r(61810),s=r(93107);function a(e){return"missing required '"+e.name+"'"}function o(e){var t=s.codegen(["r","l"],e.name+"$decode")("if(!(r instanceof Reader))")("r=Reader.create(r)")("var c=l===undefined?r.len:r.pos+l,m=new this.ctor"+(e.fieldsArray.filter(function(e){return e.map}).length?",k,value":""))("while(r.pos<c){")("var t=r.uint32()");e.group&&t("if((t&7)===4)")("break"),t("switch(t>>>3){");for(var r=0;r<e.fieldsArray.length;++r){var o=e._fieldsArray[r].resolve(),l=o.resolvedType instanceof n?"int32":o.type,u="m"+s.safeProp(o.name);t("case %i: {",o.id),o.map?(t("if(%s===util.emptyObject)",u)("%s={}",u)("var c2 = r.uint32()+r.pos"),void 0!==i.defaults[o.keyType]?t("k=%j",i.defaults[o.keyType]):t("k=null"),void 0!==i.defaults[l]?t("value=%j",i.defaults[l]):t("value=null"),t("while(r.pos<c2){")("var tag2=r.uint32()")("switch(tag2>>>3){")("case 1: k=r.%s(); break",o.keyType)("case 2:"),void 0===i.basic[l]?t("value=types[%i].decode(r,r.uint32())",r):t("value=r.%s()",l),t("break")("default:")("r.skipType(tag2&7)")("break")("}")("}"),t(void 0!==i.long[o.keyType]?'%s[typeof k==="object"?util.longToHash(k):k]=value':"%s[k]=value",u)):o.repeated?(t("if(!(%s&&%s.length))",u,u)("%s=[]",u),void 0!==i.packed[l]&&t("if((t&7)===2){")("var c2=r.uint32()+r.pos")("while(r.pos<c2)")("%s.push(r.%s())",u,l)("}else"),void 0===i.basic[l]?t(o.resolvedType.group?"%s.push(types[%i].decode(r))":"%s.push(types[%i].decode(r,r.uint32()))",u,r):t("%s.push(r.%s())",u,l)):void 0===i.basic[l]?t(o.resolvedType.group?"%s=types[%i].decode(r)":"%s=types[%i].decode(r,r.uint32())",u,r):t("%s=r.%s()",u,l),t("break")("}")}for(t("default:")("r.skipType(t&7)")("break")("}")("}"),r=0;r<e._fieldsArray.length;++r){var c=e._fieldsArray[r];c.required&&t("if(!m.hasOwnProperty(%j))",c.name)("throw util.ProtocolError(%j,{instance:m})",a(c))}return t("return m")}},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},63695:(e,t,r)=>{"use strict";var n=t,i=r(8920);n[".google.protobuf.Any"]={fromObject:function(e){if(e&&e["@type"]){var t=e["@type"].substring(e["@type"].lastIndexOf("/")+1),r=this.lookup(t);if(r){var n="."===e["@type"].charAt(0)?e["@type"].slice(1):e["@type"];return -1===n.indexOf("/")&&(n="/"+n),this.create({type_url:n,value:r.encode(r.fromObject(e)).finish()})}}return this.fromObject(e)},toObject:function(e,t){var r="type.googleapis.com/",n="",s="";if(t&&t.json&&e.type_url&&e.value){s=e.type_url.substring(e.type_url.lastIndexOf("/")+1),n=e.type_url.substring(0,e.type_url.lastIndexOf("/")+1);var a=this.lookup(s);a&&(e=a.decode(e.value))}if(!(e instanceof this.ctor)&&e instanceof i){var o=e.$type.toObject(e,t),l="."===e.$type.fullName[0]?e.$type.fullName.slice(1):e.$type.fullName;return""===n&&(n=r),s=n+l,o["@type"]=s,o}return this.toObject(e,t)}}},64824:(e,t,r)=>{"use strict";e.exports=s,s.className="ReflectionObject";var n,i=r(93107);function s(e,t){if(!i.isString(e))throw TypeError("name must be a string");if(t&&!i.isObject(t))throw TypeError("options must be an object");this.options=t,this.parsedOptions=null,this.name=e,this.parent=null,this.resolved=!1,this.comment=null,this.filename=null}Object.defineProperties(s.prototype,{root:{get:function(){for(var e=this;null!==e.parent;)e=e.parent;return e}},fullName:{get:function(){for(var e=[this.name],t=this.parent;t;)e.unshift(t.name),t=t.parent;return e.join(".")}}}),s.prototype.toJSON=function(){throw Error()},s.prototype.onAdd=function(e){this.parent&&this.parent!==e&&this.parent.remove(this),this.parent=e,this.resolved=!1;var t=e.root;t instanceof n&&t._handleAdd(this)},s.prototype.onRemove=function(e){var t=e.root;t instanceof n&&t._handleRemove(this),this.parent=null,this.resolved=!1},s.prototype.resolve=function(){return this.resolved||this.root instanceof n&&(this.resolved=!0),this},s.prototype.getOption=function(e){if(this.options)return this.options[e]},s.prototype.setOption=function(e,t,r){return r&&this.options&&void 0!==this.options[e]||((this.options||(this.options={}))[e]=t),this},s.prototype.setParsedOption=function(e,t,r){this.parsedOptions||(this.parsedOptions=[]);var n=this.parsedOptions;if(r){var s=n.find(function(t){return Object.prototype.hasOwnProperty.call(t,e)});if(s){var a=s[e];i.setProperty(a,r,t)}else(s={})[e]=i.setProperty({},r,t),n.push(s)}else{var o={};o[e]=t,n.push(o)}return this},s.prototype.setOptions=function(e,t){if(e)for(var r=Object.keys(e),n=0;n<r.length;++n)this.setOption(r[n],e[r[n]],t);return this},s.prototype.toString=function(){var e=this.constructor.className,t=this.fullName;return t.length?e+" "+t:e},s._configure=function(e){n=e}},66683:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RetryingCall=t.MessageBufferTracker=t.RetryThrottler=void 0;let n=r(71271),i=r(86777),s=r(31359),a="retrying_call";class o{constructor(e,t,r){this.maxTokens=e,this.tokenRatio=t,r?this.tokens=r.tokens*(e/r.maxTokens):this.tokens=e}addCallSucceeded(){this.tokens=Math.max(this.tokens+this.tokenRatio,this.maxTokens)}addCallFailed(){this.tokens=Math.min(this.tokens-1,0)}canRetryCall(){return this.tokens>this.maxTokens/2}}t.RetryThrottler=o;class l{constructor(e,t){this.totalLimit=e,this.limitPerCall=t,this.totalAllocated=0,this.allocatedPerCall=new Map}allocate(e,t){var r;let n=null!=(r=this.allocatedPerCall.get(t))?r:0;return!(this.limitPerCall-n<e)&&!(this.totalLimit-this.totalAllocated<e)&&(this.allocatedPerCall.set(t,n+e),this.totalAllocated+=e,!0)}free(e,t){var r;if(this.totalAllocated<e)throw Error(`Invalid buffer allocation state: call ${t} freed ${e} > total allocated ${this.totalAllocated}`);this.totalAllocated-=e;let n=null!=(r=this.allocatedPerCall.get(t))?r:0;if(n<e)throw Error(`Invalid buffer allocation state: call ${t} freed ${e} > allocated for call ${n}`);this.allocatedPerCall.set(t,n-e)}freeAll(e){var t;let r=null!=(t=this.allocatedPerCall.get(e))?t:0;if(this.totalAllocated<r)throw Error(`Invalid buffer allocation state: call ${e} allocated ${r} > total allocated ${this.totalAllocated}`);this.totalAllocated-=r,this.allocatedPerCall.delete(e)}}t.MessageBufferTracker=l;let u="grpc-previous-rpc-attempts";class c{constructor(e,t,r,n,i,s,a,o,l){if(this.channel=e,this.callConfig=t,this.methodName=r,this.host=n,this.credentials=i,this.deadline=s,this.callNumber=a,this.bufferTracker=o,this.retryThrottler=l,this.listener=null,this.initialMetadata=null,this.underlyingCalls=[],this.writeBuffer=[],this.writeBufferOffset=0,this.readStarted=!1,this.transparentRetryUsed=!1,this.attempts=0,this.hedgingTimer=null,this.committedCallIndex=null,this.initialRetryBackoffSec=0,this.nextRetryBackoffSec=0,t.methodConfig.retryPolicy){this.state="RETRY";let e=t.methodConfig.retryPolicy;this.nextRetryBackoffSec=this.initialRetryBackoffSec=Number(e.initialBackoff.substring(0,e.initialBackoff.length-1))}else t.methodConfig.hedgingPolicy?this.state="HEDGING":this.state="TRANSPARENT_ONLY"}getCallNumber(){return this.callNumber}trace(e){s.trace(n.LogVerbosity.DEBUG,a,"["+this.callNumber+"] "+e)}reportStatus(e){this.trace("ended with status: code="+e.code+' details="'+e.details+'"'),this.bufferTracker.freeAll(this.callNumber),this.writeBufferOffset=this.writeBufferOffset+this.writeBuffer.length,this.writeBuffer=[],process.nextTick(()=>{var t;null==(t=this.listener)||t.onReceiveStatus({code:e.code,details:e.details,metadata:e.metadata})})}cancelWithStatus(e,t){for(let{call:r}of(this.trace("cancelWithStatus code: "+e+' details: "'+t+'"'),this.reportStatus({code:e,details:t,metadata:new i.Metadata}),this.underlyingCalls))r.cancelWithStatus(e,t)}getPeer(){return null!==this.committedCallIndex?this.underlyingCalls[this.committedCallIndex].call.getPeer():"unknown"}getBufferEntry(e){var t;return null!=(t=this.writeBuffer[e-this.writeBufferOffset])?t:{entryType:"FREED",allocated:!1}}getNextBufferIndex(){return this.writeBufferOffset+this.writeBuffer.length}clearSentMessages(){if("COMMITTED"!==this.state)return;let e=this.underlyingCalls[this.committedCallIndex].nextMessageToSend;for(let t=this.writeBufferOffset;t<e;t++){let e=this.getBufferEntry(t);e.allocated&&this.bufferTracker.free(e.message.message.length,this.callNumber)}this.writeBuffer=this.writeBuffer.slice(e-this.writeBufferOffset),this.writeBufferOffset=e}commitCall(e){if("COMMITTED"!==this.state&&"COMPLETED"!==this.underlyingCalls[e].state){this.trace("Committing call ["+this.underlyingCalls[e].call.getCallNumber()+"] at index "+e),this.state="COMMITTED",this.committedCallIndex=e;for(let t=0;t<this.underlyingCalls.length;t++)t!==e&&"COMPLETED"!==this.underlyingCalls[t].state&&(this.underlyingCalls[t].state="COMPLETED",this.underlyingCalls[t].call.cancelWithStatus(n.Status.CANCELLED,"Discarded in favor of other hedged attempt"));this.clearSentMessages()}}commitCallWithMostMessages(){if("COMMITTED"===this.state)return;let e=-1,t=-1;for(let[r,n]of this.underlyingCalls.entries())"ACTIVE"===n.state&&n.nextMessageToSend>e&&(e=n.nextMessageToSend,t=r);-1===t?this.state="TRANSPARENT_ONLY":this.commitCall(t)}isStatusCodeInList(e,t){return e.some(e=>e===t||e.toString().toLowerCase()===n.Status[t].toLowerCase())}getNextRetryBackoffMs(){var e;let t=null==(e=this.callConfig)?void 0:e.methodConfig.retryPolicy;if(!t)return 0;let r=Math.random()*this.nextRetryBackoffSec*1e3,n=Number(t.maxBackoff.substring(0,t.maxBackoff.length-1));return this.nextRetryBackoffSec=Math.min(this.nextRetryBackoffSec*t.backoffMultiplier,n),r}maybeRetryCall(e,t){let r;if("RETRY"!==this.state)return void t(!1);let n=this.callConfig.methodConfig.retryPolicy;if(this.attempts>=Math.min(n.maxAttempts,5))return void t(!1);if(null===e)r=this.getNextRetryBackoffMs();else if(e<0){this.state="TRANSPARENT_ONLY",t(!1);return}else r=e,this.nextRetryBackoffSec=this.initialRetryBackoffSec;setTimeout(()=>{var e,r;if("RETRY"!==this.state)return void t(!1);(null==(r=null==(e=this.retryThrottler)?void 0:e.canRetryCall())||r)&&(t(!0),this.attempts+=1,this.startNewAttempt())},r)}countActiveCalls(){let e=0;for(let t of this.underlyingCalls)(null==t?void 0:t.state)==="ACTIVE"&&(e+=1);return e}handleProcessedStatus(e,t,r){var n,i,s;switch(this.state){case"COMMITTED":case"TRANSPARENT_ONLY":this.commitCall(t),this.reportStatus(e);break;case"HEDGING":if(this.isStatusCodeInList(null!=(n=this.callConfig.methodConfig.hedgingPolicy.nonFatalStatusCodes)?n:[],e.code)){let n;if(null==(i=this.retryThrottler)||i.addCallFailed(),null===r)n=0;else if(r<0){this.state="TRANSPARENT_ONLY",this.commitCall(t),this.reportStatus(e);return}else n=r;setTimeout(()=>{this.maybeStartHedgingAttempt(),0===this.countActiveCalls()&&(this.commitCall(t),this.reportStatus(e))},n)}else this.commitCall(t),this.reportStatus(e);break;case"RETRY":this.isStatusCodeInList(this.callConfig.methodConfig.retryPolicy.retryableStatusCodes,e.code)?(null==(s=this.retryThrottler)||s.addCallFailed(),this.maybeRetryCall(r,r=>{r||(this.commitCall(t),this.reportStatus(e))})):(this.commitCall(t),this.reportStatus(e))}}getPushback(e){let t=e.get("grpc-retry-pushback-ms");if(0===t.length)return null;try{return parseInt(t[0])}catch(e){return -1}}handleChildStatus(e,t){var r;if("COMPLETED"===this.underlyingCalls[t].state)return;if(this.trace("state="+this.state+" handling status with progress "+e.progress+" from child ["+this.underlyingCalls[t].call.getCallNumber()+"] in state "+this.underlyingCalls[t].state),this.underlyingCalls[t].state="COMPLETED",e.code===n.Status.OK){null==(r=this.retryThrottler)||r.addCallSucceeded(),this.commitCall(t),this.reportStatus(e);return}if("COMMITTED"===this.state)return void this.reportStatus(e);let i=this.getPushback(e.metadata);switch(e.progress){case"NOT_STARTED":this.startNewAttempt();break;case"REFUSED":this.transparentRetryUsed?this.handleProcessedStatus(e,t,i):(this.transparentRetryUsed=!0,this.startNewAttempt());break;case"DROP":this.commitCall(t),this.reportStatus(e);break;case"PROCESSED":this.handleProcessedStatus(e,t,i)}}maybeStartHedgingAttempt(){if("HEDGING"!==this.state||!this.callConfig.methodConfig.hedgingPolicy)return;let e=this.callConfig.methodConfig.hedgingPolicy;this.attempts>=Math.min(e.maxAttempts,5)||(this.attempts+=1,this.startNewAttempt(),this.maybeStartHedgingTimer())}maybeStartHedgingTimer(){var e,t,r;if(this.hedgingTimer&&clearTimeout(this.hedgingTimer),"HEDGING"!==this.state||!this.callConfig.methodConfig.hedgingPolicy)return;let n=this.callConfig.methodConfig.hedgingPolicy;if(this.attempts>=Math.min(n.maxAttempts,5))return;let i=null!=(e=n.hedgingDelay)?e:"0s",s=Number(i.substring(0,i.length-1));this.hedgingTimer=setTimeout(()=>{this.maybeStartHedgingAttempt()},1e3*s),null==(r=(t=this.hedgingTimer).unref)||r.call(t)}startNewAttempt(){let e=this.channel.createLoadBalancingCall(this.callConfig,this.methodName,this.host,this.credentials,this.deadline);this.trace("Created child call ["+e.getCallNumber()+"] for attempt "+this.attempts);let t=this.underlyingCalls.length;this.underlyingCalls.push({state:"ACTIVE",call:e,nextMessageToSend:0});let r=this.attempts-1,n=this.initialMetadata.clone();r>0&&n.set(u,`${r}`);let i=!1;e.start(n,{onReceiveMetadata:n=>{this.trace("Received metadata from child ["+e.getCallNumber()+"]"),this.commitCall(t),i=!0,r>0&&n.set(u,`${r}`),"ACTIVE"===this.underlyingCalls[t].state&&this.listener.onReceiveMetadata(n)},onReceiveMessage:r=>{this.trace("Received message from child ["+e.getCallNumber()+"]"),this.commitCall(t),"ACTIVE"===this.underlyingCalls[t].state&&this.listener.onReceiveMessage(r)},onReceiveStatus:n=>{this.trace("Received status from child ["+e.getCallNumber()+"]"),!i&&r>0&&n.metadata.set(u,`${r}`),this.handleChildStatus(n,t)}}),this.sendNextChildMessage(t),this.readStarted&&e.startRead()}start(e,t){this.trace("start called"),this.listener=t,this.initialMetadata=e,this.attempts+=1,this.startNewAttempt(),this.maybeStartHedgingTimer()}handleChildWriteCompleted(e){var t,r;let n=this.underlyingCalls[e],i=n.nextMessageToSend;null==(r=(t=this.getBufferEntry(i)).callback)||r.call(t),this.clearSentMessages(),n.nextMessageToSend+=1,this.sendNextChildMessage(e)}sendNextChildMessage(e){let t=this.underlyingCalls[e];if("COMPLETED"!==t.state&&this.getBufferEntry(t.nextMessageToSend)){let r=this.getBufferEntry(t.nextMessageToSend);switch(r.entryType){case"MESSAGE":t.call.sendMessageWithContext({callback:t=>{this.handleChildWriteCompleted(e)}},r.message.message);break;case"HALF_CLOSE":t.nextMessageToSend+=1,t.call.halfClose()}}}sendMessageWithContext(e,t){var r;this.trace("write() called with message of length "+t.length);let n={message:t,flags:e.flags},i=this.getNextBufferIndex(),s={entryType:"MESSAGE",message:n,allocated:this.bufferTracker.allocate(t.length,this.callNumber)};if(this.writeBuffer.push(s),s.allocated)for(let[n,s]of(null==(r=e.callback)||r.call(e),this.underlyingCalls.entries()))"ACTIVE"===s.state&&s.nextMessageToSend===i&&s.call.sendMessageWithContext({callback:e=>{this.handleChildWriteCompleted(n)}},t);else{if(this.commitCallWithMostMessages(),null===this.committedCallIndex)return;let r=this.underlyingCalls[this.committedCallIndex];s.callback=e.callback,"ACTIVE"===r.state&&r.nextMessageToSend===i&&r.call.sendMessageWithContext({callback:e=>{this.handleChildWriteCompleted(this.committedCallIndex)}},t)}}startRead(){for(let e of(this.trace("startRead called"),this.readStarted=!0,this.underlyingCalls))(null==e?void 0:e.state)==="ACTIVE"&&e.call.startRead()}halfClose(){this.trace("halfClose called");let e=this.getNextBufferIndex();for(let t of(this.writeBuffer.push({entryType:"HALF_CLOSE",allocated:!1}),this.underlyingCalls))(null==t?void 0:t.state)==="ACTIVE"&&t.nextMessageToSend===e&&(t.nextMessageToSend+=1,t.call.halfClose())}setCredentials(e){throw Error("Method not implemented.")}getMethod(){return this.methodName}getHost(){return this.host}}t.RetryingCall=c},66771:(e,t,r)=>{"use strict";var n=e.exports=r(89374);n.build="full",n.tokenize=r(60158),n.parse=r(27408),n.common=r(34346),n.Root._configure(n.Type,n.parse,n.common)},66827:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setup=t.getChannelzServiceDefinition=t.getChannelzHandlers=t.unregisterChannelzRef=t.registerChannelzSocket=t.registerChannelzServer=t.registerChannelzSubchannel=t.registerChannelzChannel=t.ChannelzCallTracker=t.ChannelzChildrenTracker=t.ChannelzTrace=void 0;let n=r(91645),i=r(40536),s=r(71271),a=r(43356),o=r(17061),l=r(61480);function u(e){return{channel_id:e.id,name:e.name}}function c(e){return{subchannel_id:e.id,name:e.name}}function h(e){return{server_id:e.id}}function d(e){return{socket_id:e.id,name:e.name}}let p=32;class f{constructor(){this.events=[],this.eventsLogged=0,this.creationTimestamp=new Date}addTrace(e,t,r){let n=new Date;this.events.push({description:t,severity:e,timestamp:n,childChannel:(null==r?void 0:r.kind)==="channel"?r:void 0,childSubchannel:(null==r?void 0:r.kind)==="subchannel"?r:void 0}),this.events.length>=2*p&&(this.events=this.events.slice(p)),this.eventsLogged+=1}getTraceMessage(){return{creation_timestamp:I(this.creationTimestamp),num_events_logged:this.eventsLogged,events:this.events.map(e=>({description:e.description,severity:e.severity,timestamp:I(e.timestamp),channel_ref:e.childChannel?u(e.childChannel):null,subchannel_ref:e.childSubchannel?c(e.childSubchannel):null}))}}}t.ChannelzTrace=f;class m{constructor(){this.channelChildren=new Map,this.subchannelChildren=new Map,this.socketChildren=new Map}refChild(e){var t,r,n;switch(e.kind){case"channel":{let r=null!=(t=this.channelChildren.get(e.id))?t:{ref:e,count:0};r.count+=1,this.channelChildren.set(e.id,r);break}case"subchannel":{let t=null!=(r=this.subchannelChildren.get(e.id))?r:{ref:e,count:0};t.count+=1,this.subchannelChildren.set(e.id,t);break}case"socket":{let t=null!=(n=this.socketChildren.get(e.id))?n:{ref:e,count:0};t.count+=1,this.socketChildren.set(e.id,t)}}}unrefChild(e){switch(e.kind){case"channel":{let t=this.channelChildren.get(e.id);void 0!==t&&(t.count-=1,0===t.count?this.channelChildren.delete(e.id):this.channelChildren.set(e.id,t));break}case"subchannel":{let t=this.subchannelChildren.get(e.id);void 0!==t&&(t.count-=1,0===t.count?this.subchannelChildren.delete(e.id):this.subchannelChildren.set(e.id,t));break}case"socket":{let t=this.socketChildren.get(e.id);void 0!==t&&(t.count-=1,0===t.count?this.socketChildren.delete(e.id):this.socketChildren.set(e.id,t))}}}getChildLists(){let e=[];for(let{ref:t}of this.channelChildren.values())e.push(t);let t=[];for(let{ref:e}of this.subchannelChildren.values())t.push(e);let r=[];for(let{ref:e}of this.socketChildren.values())r.push(e);return{channels:e,subchannels:t,sockets:r}}}t.ChannelzChildrenTracker=m;class g{constructor(){this.callsStarted=0,this.callsSucceeded=0,this.callsFailed=0,this.lastCallStartedTimestamp=null}addCallStarted(){this.callsStarted+=1,this.lastCallStartedTimestamp=new Date}addCallSucceeded(){this.callsSucceeded+=1}addCallFailed(){this.callsFailed+=1}}t.ChannelzCallTracker=g;let y=1;function v(){return y++}let b=[],S=[],T=[],w=[];function C(e){let t=Number.parseInt(e,16);return[t/256|0,t%256]}function x(e){return""===e?[]:[].concat(...e.split(":").map(e=>C(e)))}function E(e){if((0,n.isIPv4)(e))return Buffer.from(Uint8Array.from(e.split(".").map(e=>Number.parseInt(e))));if(!(0,n.isIPv6)(e))return null;{let t,r,n=e.indexOf("::");-1===n?(t=e,r=""):(t=e.substring(0,n),r=e.substring(n+2));let i=Buffer.from(x(t)),s=Buffer.from(x(r)),a=Buffer.alloc(16-i.length-s.length,0);return Buffer.concat([i,a,s])}}function _(e){switch(e){case i.ConnectivityState.CONNECTING:return{state:"CONNECTING"};case i.ConnectivityState.IDLE:return{state:"IDLE"};case i.ConnectivityState.READY:return{state:"READY"};case i.ConnectivityState.SHUTDOWN:return{state:"SHUTDOWN"};case i.ConnectivityState.TRANSIENT_FAILURE:return{state:"TRANSIENT_FAILURE"};default:return{state:"UNKNOWN"}}}function I(e){if(!e)return null;let t=e.getTime();return{seconds:t/1e3|0,nanos:t%1e3*1e6}}function k(e){let t=e.getInfo();return{ref:u(e.ref),data:{target:t.target,state:_(t.state),calls_started:t.callTracker.callsStarted,calls_succeeded:t.callTracker.callsSucceeded,calls_failed:t.callTracker.callsFailed,last_call_started_timestamp:I(t.callTracker.lastCallStartedTimestamp),trace:t.trace.getTraceMessage()},channel_ref:t.children.channels.map(e=>u(e)),subchannel_ref:t.children.subchannels.map(e=>c(e))}}function A(e,t){let r=Number.parseInt(e.request.channel_id),n=b[r];if(void 0===n)return void t({code:s.Status.NOT_FOUND,details:"No channel data found for id "+r});t(null,{channel:k(n)})}function R(e,t){let r=Number.parseInt(e.request.max_results),n=[],i=Number.parseInt(e.request.start_channel_id);for(;i<b.length;i++){let e=b[i];if(void 0!==e&&(n.push(k(e)),n.length>=r))break}t(null,{channel:n,end:i>=T.length})}function N(e){let t=e.getInfo();return{ref:h(e.ref),data:{calls_started:t.callTracker.callsStarted,calls_succeeded:t.callTracker.callsSucceeded,calls_failed:t.callTracker.callsFailed,last_call_started_timestamp:I(t.callTracker.lastCallStartedTimestamp),trace:t.trace.getTraceMessage()},listen_socket:t.listenerChildren.sockets.map(e=>d(e))}}function D(e,t){let r=Number.parseInt(e.request.server_id),n=T[r];if(void 0===n)return void t({code:s.Status.NOT_FOUND,details:"No server data found for id "+r});t(null,{server:N(n)})}function O(e,t){let r=Number.parseInt(e.request.max_results),n=[],i=Number.parseInt(e.request.start_server_id);for(;i<T.length;i++){let e=T[i];if(void 0!==e&&(n.push(N(e)),n.length>=r))break}t(null,{server:n,end:i>=T.length})}function P(e,t){let r=Number.parseInt(e.request.subchannel_id),n=S[r];if(void 0===n)return void t({code:s.Status.NOT_FOUND,details:"No subchannel data found for id "+r});let i=n.getInfo();t(null,{subchannel:{ref:c(n.ref),data:{target:i.target,state:_(i.state),calls_started:i.callTracker.callsStarted,calls_succeeded:i.callTracker.callsSucceeded,calls_failed:i.callTracker.callsFailed,last_call_started_timestamp:I(i.callTracker.lastCallStartedTimestamp),trace:i.trace.getTraceMessage()},socket_ref:i.children.sockets.map(e=>d(e))}})}function M(e){var t;return(0,a.isTcpSubchannelAddress)(e)?{address:"tcpip_address",tcpip_address:{ip_address:null!=(t=E(e.host))?t:void 0,port:e.port}}:{address:"uds_address",uds_address:{filename:e.path}}}function L(e,t){var r,n,i,a,o;let l=Number.parseInt(e.request.socket_id),u=w[l];if(void 0===u)return void t({code:s.Status.NOT_FOUND,details:"No socket data found for id "+l});let c=u.getInfo(),h=c.security?{model:"tls",tls:{cipher_suite:c.security.cipherSuiteStandardName?"standard_name":"other_name",standard_name:null!=(r=c.security.cipherSuiteStandardName)?r:void 0,other_name:null!=(n=c.security.cipherSuiteOtherName)?n:void 0,local_certificate:null!=(i=c.security.localCertificate)?i:void 0,remote_certificate:null!=(a=c.security.remoteCertificate)?a:void 0}}:null;t(null,{socket:{ref:d(u.ref),local:c.localAddress?M(c.localAddress):null,remote:c.remoteAddress?M(c.remoteAddress):null,remote_name:null!=(o=c.remoteName)?o:void 0,security:h,data:{keep_alives_sent:c.keepAlivesSent,streams_started:c.streamsStarted,streams_succeeded:c.streamsSucceeded,streams_failed:c.streamsFailed,last_local_stream_created_timestamp:I(c.lastLocalStreamCreatedTimestamp),last_remote_stream_created_timestamp:I(c.lastRemoteStreamCreatedTimestamp),messages_received:c.messagesReceived,messages_sent:c.messagesSent,last_message_received_timestamp:I(c.lastMessageReceivedTimestamp),last_message_sent_timestamp:I(c.lastMessageSentTimestamp),local_flow_control_window:c.localFlowControlWindow?{value:c.localFlowControlWindow}:null,remote_flow_control_window:c.remoteFlowControlWindow?{value:c.remoteFlowControlWindow}:null}}})}function B(e,t){let r=Number.parseInt(e.request.server_id),n=T[r];if(void 0===n)return void t({code:s.Status.NOT_FOUND,details:"No server data found for id "+r});let i=Number.parseInt(e.request.start_socket_id),a=Number.parseInt(e.request.max_results),o=n.getInfo().sessionChildren.sockets.sort((e,t)=>e.id-t.id),l=[],u=0;for(;u<o.length&&(!(o[u].id>=i)||(l.push(d(o[u])),!(l.length>=a)));u++);t(null,{socket_ref:l,end:u>=o.length})}function j(){return{GetChannel:A,GetTopChannels:R,GetServer:D,GetServers:O,GetSubchannel:P,GetSocket:L,GetServerSockets:B}}t.registerChannelzChannel=function(e,t,r){let n=v(),i={id:n,name:e,kind:"channel"};return r&&(b[n]={ref:i,getInfo:t}),i},t.registerChannelzSubchannel=function(e,t,r){let n=v(),i={id:n,name:e,kind:"subchannel"};return r&&(S[n]={ref:i,getInfo:t}),i},t.registerChannelzServer=function(e,t){let r=v(),n={id:r,kind:"server"};return t&&(T[r]={ref:n,getInfo:e}),n},t.registerChannelzSocket=function(e,t,r){let n=v(),i={id:n,name:e,kind:"socket"};return r&&(w[n]={ref:i,getInfo:t}),i},t.unregisterChannelzRef=function(e){switch(e.kind){case"channel":delete b[e.id];return;case"subchannel":delete S[e.id];return;case"server":delete T[e.id];return;case"socket":delete w[e.id];return}},t.getChannelzHandlers=j;let F=null;function V(){if(F)return F;let e=(0,r(97587).Yi)("channelz.proto",{keepCase:!0,longs:String,enums:String,defaults:!0,oneofs:!0,includeDirs:[`${__dirname}/../../proto`]});return F=(0,l.loadPackageDefinition)(e).grpc.channelz.v1.Channelz.service}t.getChannelzServiceDefinition=V,t.setup=function(){(0,o.registerAdminService)(V,j)}},67146:(e,t,r)=>{"use strict";r.d(t,{Sheet:()=>u,SheetContent:()=>f,SheetTrigger:()=>c});var n=r(60687),i=r(43210),s=r(81303),a=r(24224),o=r(78726),l=r(4780);let u=s.bL,c=s.l9;s.bm;let h=s.ZL,d=i.forwardRef(({className:e,...t},r)=>(0,n.jsx)(s.hJ,{className:(0,l.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:r}));d.displayName=s.hJ.displayName;let p=(0,a.F)("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),f=i.forwardRef(({side:e="right",className:t,children:r,...i},a)=>(0,n.jsxs)(h,{children:[(0,n.jsx)(d,{}),(0,n.jsxs)(s.UC,{ref:a,className:(0,l.cn)(p({side:e}),t),...i,children:[r,(0,n.jsxs)(s.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[(0,n.jsx)(o.A,{className:"h-4 w-4"}),(0,n.jsx)("span",{className:"sr-only",children:"Close"})]})]})]}));f.displayName=s.UC.displayName,i.forwardRef(({className:e,...t},r)=>(0,n.jsx)(s.hE,{ref:r,className:(0,l.cn)("text-lg font-semibold text-foreground",e),...t})).displayName=s.hE.displayName,i.forwardRef(({className:e,...t},r)=>(0,n.jsx)(s.VY,{ref:r,className:(0,l.cn)("text-sm text-muted-foreground",e),...t})).displayName=s.VY.displayName},67249:(e,t,r)=>{Promise.resolve().then(r.bind(r,21204))},68474:(e,t,r)=>{"use strict";e.exports=r(66771)},68655:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.CompressionAlgorithms=void 0,function(e){e[e.identity=0]="identity",e[e.deflate=1]="deflate",e[e.gzip=2]="gzip"}(r||(t.CompressionAlgorithms=r={}))},70603:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Http2SubchannelConnector=void 0;let n=r(73496),i=r(34631),s=r(66827),a=r(71271),o=r(16239),l=r(31359),u=r(5674),c=r(43356),h=r(26786),d=r(91645),p=r(93474),f=r(81260),m="transport",g="transport_flowctrl",y=r(28592).rE,{HTTP2_HEADER_AUTHORITY:v,HTTP2_HEADER_CONTENT_TYPE:b,HTTP2_HEADER_METHOD:S,HTTP2_HEADER_PATH:T,HTTP2_HEADER_TE:w,HTTP2_HEADER_USER_AGENT:C}=n.constants,x=2e4,E=Buffer.from("too_many_pings","ascii");class _{constructor(e,t,r,i){this.session=e,this.options=r,this.remoteName=i,this.keepaliveTimeMs=-1,this.keepaliveTimeoutMs=x,this.keepaliveTimerId=null,this.pendingSendKeepalivePing=!1,this.keepaliveTimeoutId=null,this.keepaliveWithoutCalls=!1,this.activeCalls=new Set,this.disconnectListeners=[],this.disconnectHandled=!1,this.channelzEnabled=!0,this.streamTracker=new s.ChannelzCallTracker,this.keepalivesSent=0,this.messagesSent=0,this.messagesReceived=0,this.lastMessageSentTimestamp=null,this.lastMessageReceivedTimestamp=null,this.subchannelAddressString=(0,c.subchannelAddressToString)(t),0===r["grpc.enable_channelz"]&&(this.channelzEnabled=!1),this.channelzRef=(0,s.registerChannelzSocket)(this.subchannelAddressString,()=>this.getChannelzInfo(),this.channelzEnabled),this.userAgent=[r["grpc.primary_user_agent"],`grpc-node-js/${y}`,r["grpc.secondary_user_agent"]].filter(e=>e).join(" "),"grpc.keepalive_time_ms"in r&&(this.keepaliveTimeMs=r["grpc.keepalive_time_ms"]),"grpc.keepalive_timeout_ms"in r&&(this.keepaliveTimeoutMs=r["grpc.keepalive_timeout_ms"]),"grpc.keepalive_permit_without_calls"in r?this.keepaliveWithoutCalls=1===r["grpc.keepalive_permit_without_calls"]:this.keepaliveWithoutCalls=!1,e.once("close",()=>{this.trace("session closed"),this.stopKeepalivePings(),this.handleDisconnect()}),e.once("goaway",(e,t,r)=>{let i=!1;e===n.constants.NGHTTP2_ENHANCE_YOUR_CALM&&r&&r.equals(E)&&(i=!0),this.trace("connection closed by GOAWAY with code "+e+" and data "+(null==r?void 0:r.toString())),this.reportDisconnectToOwner(i)}),e.once("error",e=>{this.trace("connection closed with error "+e.message)}),l.isTracerEnabled(m)&&(e.on("remoteSettings",t=>{this.trace("new settings received"+(this.session!==e?" on the old connection":"")+": "+JSON.stringify(t))}),e.on("localSettings",t=>{this.trace("local settings acknowledged by remote"+(this.session!==e?" on the old connection":"")+": "+JSON.stringify(t))})),this.keepaliveWithoutCalls&&this.maybeStartKeepalivePingTimer()}getChannelzInfo(){var e,t,r;let n,i=this.session.socket,s=i.remoteAddress?(0,c.stringToSubchannelAddress)(i.remoteAddress,i.remotePort):null,a=i.localAddress?(0,c.stringToSubchannelAddress)(i.localAddress,i.localPort):null;if(this.session.encrypted){let t=i,r=t.getCipher(),s=t.getCertificate(),a=t.getPeerCertificate();n={cipherSuiteStandardName:null!=(e=r.standardName)?e:null,cipherSuiteOtherName:r.standardName?null:r.name,localCertificate:s&&"raw"in s?s.raw:null,remoteCertificate:a&&"raw"in a?a.raw:null}}else n=null;return{remoteAddress:s,localAddress:a,security:n,remoteName:this.remoteName,streamsStarted:this.streamTracker.callsStarted,streamsSucceeded:this.streamTracker.callsSucceeded,streamsFailed:this.streamTracker.callsFailed,messagesSent:this.messagesSent,messagesReceived:this.messagesReceived,keepAlivesSent:this.keepalivesSent,lastLocalStreamCreatedTimestamp:this.streamTracker.lastCallStartedTimestamp,lastRemoteStreamCreatedTimestamp:null,lastMessageSentTimestamp:this.lastMessageSentTimestamp,lastMessageReceivedTimestamp:this.lastMessageReceivedTimestamp,localFlowControlWindow:null!=(t=this.session.state.localWindowSize)?t:null,remoteFlowControlWindow:null!=(r=this.session.state.remoteWindowSize)?r:null}}trace(e){l.trace(a.LogVerbosity.DEBUG,m,"("+this.channelzRef.id+") "+this.subchannelAddressString+" "+e)}keepaliveTrace(e){l.trace(a.LogVerbosity.DEBUG,"keepalive","("+this.channelzRef.id+") "+this.subchannelAddressString+" "+e)}flowControlTrace(e){l.trace(a.LogVerbosity.DEBUG,g,"("+this.channelzRef.id+") "+this.subchannelAddressString+" "+e)}internalsTrace(e){l.trace(a.LogVerbosity.DEBUG,"transport_internals","("+this.channelzRef.id+") "+this.subchannelAddressString+" "+e)}reportDisconnectToOwner(e){this.disconnectHandled||(this.disconnectHandled=!0,this.disconnectListeners.forEach(t=>t(e)))}handleDisconnect(){this.reportDisconnectToOwner(!1),setImmediate(()=>{for(let e of this.activeCalls)e.onDisconnect()})}addDisconnectListener(e){this.disconnectListeners.push(e)}clearKeepaliveTimer(){this.keepaliveTimerId&&(clearTimeout(this.keepaliveTimerId),this.keepaliveTimerId=null)}clearKeepaliveTimeout(){this.keepaliveTimeoutId&&(clearTimeout(this.keepaliveTimeoutId),this.keepaliveTimeoutId=null)}canSendPing(){return this.keepaliveTimeMs>0&&(this.keepaliveWithoutCalls||this.activeCalls.size>0)}maybeSendPing(){var e,t;if(this.clearKeepaliveTimer(),!this.canSendPing()){this.pendingSendKeepalivePing=!0;return}this.channelzEnabled&&(this.keepalivesSent+=1),this.keepaliveTrace("Sending ping with timeout "+this.keepaliveTimeoutMs+"ms"),this.keepaliveTimeoutId||(this.keepaliveTimeoutId=setTimeout(()=>{this.keepaliveTrace("Ping timeout passed without response"),this.handleDisconnect()},this.keepaliveTimeoutMs),null==(t=(e=this.keepaliveTimeoutId).unref)||t.call(e));try{this.session.ping((e,t,r)=>{e&&(this.keepaliveTrace("Ping failed with error "+e.message),this.handleDisconnect()),this.keepaliveTrace("Received ping response"),this.clearKeepaliveTimeout(),this.maybeStartKeepalivePingTimer()})}catch(e){this.handleDisconnect()}}maybeStartKeepalivePingTimer(){var e,t;this.canSendPing()&&(this.pendingSendKeepalivePing?(this.pendingSendKeepalivePing=!1,this.maybeSendPing()):this.keepaliveTimerId||this.keepaliveTimeoutId||(this.keepaliveTrace("Starting keepalive timer for "+this.keepaliveTimeMs+"ms"),this.keepaliveTimerId=null==(t=(e=setTimeout(()=>{this.maybeSendPing()},this.keepaliveTimeMs)).unref)?void 0:t.call(e)))}stopKeepalivePings(){this.keepaliveTimerId&&(clearTimeout(this.keepaliveTimerId),this.keepaliveTimerId=null),this.clearKeepaliveTimeout()}removeActiveCall(e){this.activeCalls.delete(e),0===this.activeCalls.size&&this.session.unref()}addActiveCall(e){this.activeCalls.add(e),1===this.activeCalls.size&&(this.session.ref(),this.keepaliveWithoutCalls||this.maybeStartKeepalivePingTimer())}createCall(e,t,r,n,i){let s,a,o,l=e.toHttp2Headers();l[v]=t,l[C]=this.userAgent,l[b]="application/grpc",l[S]="POST",l[T]=r,l[w]="trailers";try{s=this.session.request(l)}catch(e){throw this.handleDisconnect(),e}return this.flowControlTrace("local window size: "+this.session.state.localWindowSize+" remote window size: "+this.session.state.remoteWindowSize),this.internalsTrace("session.closed="+this.session.closed+" session.destroyed="+this.session.destroyed+" session.socket.destroyed="+this.session.socket.destroyed),this.channelzEnabled?(this.streamTracker.addCallStarted(),a={addMessageSent:()=>{var e;this.messagesSent+=1,this.lastMessageSentTimestamp=new Date,null==(e=i.addMessageSent)||e.call(i)},addMessageReceived:()=>{var e;this.messagesReceived+=1,this.lastMessageReceivedTimestamp=new Date,null==(e=i.addMessageReceived)||e.call(i)},onCallEnd:e=>{var t;null==(t=i.onCallEnd)||t.call(i,e),this.removeActiveCall(o)},onStreamEnd:e=>{var t;e?this.streamTracker.addCallSucceeded():this.streamTracker.addCallFailed(),null==(t=i.onStreamEnd)||t.call(i,e)}}):a={addMessageSent:()=>{var e;null==(e=i.addMessageSent)||e.call(i)},addMessageReceived:()=>{var e;null==(e=i.addMessageReceived)||e.call(i)},onCallEnd:e=>{var t;null==(t=i.onCallEnd)||t.call(i,e),this.removeActiveCall(o)},onStreamEnd:e=>{var t;null==(t=i.onStreamEnd)||t.call(i,e)}},o=new p.Http2SubchannelCall(s,a,n,this,(0,f.getNextCallNumber)()),this.addActiveCall(o),o}getChannelzRef(){return this.channelzRef}getPeerName(){return this.subchannelAddressString}getOptions(){return this.options}shutdown(){this.session.close(),(0,s.unregisterChannelzRef)(this.channelzRef)}}class I{constructor(e){this.channelTarget=e,this.session=null,this.isShutdown=!1}trace(e){l.trace(a.LogVerbosity.DEBUG,m,(0,h.uriToString)(this.channelTarget)+" "+e)}createSession(e,t,r,s){return this.isShutdown?Promise.reject():new Promise((a,o)=>{var l,p,f;let m;s.realTarget?(m=(0,h.uriToString)(s.realTarget),this.trace("creating HTTP/2 session through proxy to "+(0,h.uriToString)(s.realTarget))):(m=null,this.trace("creating HTTP/2 session to "+(0,c.subchannelAddressToString)(e)));let g=(0,u.getDefaultAuthority)(null!=(l=s.realTarget)?l:this.channelTarget),y=t._getConnectionOptions()||{};y.maxSendHeaderBlockLength=Number.MAX_SAFE_INTEGER,"grpc-node.max_session_memory"in r?y.maxSessionMemory=r["grpc-node.max_session_memory"]:y.maxSessionMemory=Number.MAX_SAFE_INTEGER;let v="http://";if("secureContext"in y){if(v="https://",r["grpc.ssl_target_name_override"]){let e=r["grpc.ssl_target_name_override"];y.checkServerIdentity=(t,r)=>(0,i.checkServerIdentity)(e,r),y.servername=e}else{let e=null!=(f=null==(p=(0,h.splitHostPort)(g))?void 0:p.host)?f:"localhost";y.servername=e}s.socket&&(y.createConnection=(e,t)=>s.socket)}else y.createConnection=(t,r)=>s.socket?s.socket:d.connect(e);y=Object.assign(Object.assign(Object.assign({},y),e),{enableTrace:1===r["grpc-node.tls_enable_trace"]});let b=n.connect(v+g,y);this.session=b;let S="Failed to connect";b.unref(),b.once("connect",()=>{b.removeAllListeners(),a(new _(b,e,r,m)),this.session=null}),b.once("close",()=>{this.session=null,setImmediate(()=>{o(`${S} (${new Date().toISOString()})`)})}),b.once("error",e=>{S=e.message,this.trace("connection failed with error "+S)})})}connect(e,t,r){var n,s;if(this.isShutdown)return Promise.reject();let a=t._getConnectionOptions()||{};if("secureContext"in a){if(a.ALPNProtocols=["h2"],r["grpc.ssl_target_name_override"]){let e=r["grpc.ssl_target_name_override"];a.checkServerIdentity=(t,r)=>(0,i.checkServerIdentity)(e,r),a.servername=e}else if("grpc.http_connect_target"in r){let e=(0,u.getDefaultAuthority)(null!=(n=(0,h.parseUri)(r["grpc.http_connect_target"]))?n:{path:"localhost"}),t=(0,h.splitHostPort)(e);a.servername=null!=(s=null==t?void 0:t.host)?s:e}r["grpc-node.tls_enable_trace"]&&(a.enableTrace=!0)}return(0,o.getProxiedConnection)(e,r,a).then(n=>this.createSession(e,t,r,n))}shutdown(){var e;this.isShutdown=!0,null==(e=this.session)||e.close(),this.session=null}}t.Http2SubchannelConnector=I},71037:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.StreamDecoder=void 0,function(e){e[e.NO_DATA=0]="NO_DATA",e[e.READING_SIZE=1]="READING_SIZE",e[e.READING_MESSAGE=2]="READING_MESSAGE"}(r||(r={}));class n{constructor(e){this.maxReadMessageLength=e,this.readState=r.NO_DATA,this.readCompressFlag=Buffer.alloc(1),this.readPartialSize=Buffer.alloc(4),this.readSizeRemaining=4,this.readMessageSize=0,this.readPartialMessage=[],this.readMessageRemaining=0}write(e){let t,n=0,i=[];for(;n<e.length;)switch(this.readState){case r.NO_DATA:this.readCompressFlag=e.slice(n,n+1),n+=1,this.readState=r.READING_SIZE,this.readPartialSize.fill(0),this.readSizeRemaining=4,this.readMessageSize=0,this.readMessageRemaining=0,this.readPartialMessage=[];break;case r.READING_SIZE:if(t=Math.min(e.length-n,this.readSizeRemaining),e.copy(this.readPartialSize,4-this.readSizeRemaining,n,n+t),this.readSizeRemaining-=t,n+=t,0===this.readSizeRemaining){if(this.readMessageSize=this.readPartialSize.readUInt32BE(0),-1!==this.maxReadMessageLength&&this.readMessageSize>this.maxReadMessageLength)throw Error(`Received message larger than max (${this.readMessageSize} vs ${this.maxReadMessageLength})`);if(this.readMessageRemaining=this.readMessageSize,this.readMessageRemaining>0)this.readState=r.READING_MESSAGE;else{let e=Buffer.concat([this.readCompressFlag,this.readPartialSize],5);this.readState=r.NO_DATA,i.push(e)}}break;case r.READING_MESSAGE:if(t=Math.min(e.length-n,this.readMessageRemaining),this.readPartialMessage.push(e.slice(n,n+t)),this.readMessageRemaining-=t,n+=t,0===this.readMessageRemaining){let e=[this.readCompressFlag,this.readPartialSize].concat(this.readPartialMessage),t=Buffer.concat(e,this.readMessageSize+5);this.readState=r.NO_DATA,i.push(t)}break;default:throw Error("Unexpected read state")}return i}}t.StreamDecoder=n},71140:(e,t)=>{"use strict";var r=t,n=r.isAbsolute=function(e){return/^(?:\/|\w+:)/.test(e)},i=r.normalize=function(e){var t=(e=e.replace(/\\/g,"/").replace(/\/{2,}/g,"/")).split("/"),r=n(e),i="";r&&(i=t.shift()+"/");for(var s=0;s<t.length;)".."===t[s]?s>0&&".."!==t[s-1]?t.splice(--s,2):r?t.splice(s,1):++s:"."===t[s]?t.splice(s,1):++s;return i+t.join("/")};r.resolve=function(e,t,r){return(r||(t=i(t)),n(t))?t:(r||(e=i(e)),(e=e.replace(/(?:\/|^)[^/]+$/,"")).length?i(e+"/"+t):t)}},71202:(e,t,r)=>{"use strict";e.exports=s;var n=r(64824);((s.prototype=Object.create(n.prototype)).constructor=s).className="Method";var i=r(93107);function s(e,t,r,s,a,o,l,u,c){if(i.isObject(a)?(l=a,a=o=void 0):i.isObject(o)&&(l=o,o=void 0),!(void 0===t||i.isString(t)))throw TypeError("type must be a string");if(!i.isString(r))throw TypeError("requestType must be a string");if(!i.isString(s))throw TypeError("responseType must be a string");n.call(this,e,l),this.type=t||"rpc",this.requestType=r,this.requestStream=!!a||void 0,this.responseType=s,this.responseStream=!!o||void 0,this.resolvedRequestType=null,this.resolvedResponseType=null,this.comment=u,this.parsedOptions=c}s.fromJSON=function(e,t){return new s(e,t.type,t.requestType,t.responseType,t.requestStream,t.responseStream,t.options,t.comment,t.parsedOptions)},s.prototype.toJSON=function(e){var t=!!e&&!!e.keepComments;return i.toObject(["type","rpc"!==this.type&&this.type||void 0,"requestType",this.requestType,"requestStream",this.requestStream,"responseType",this.responseType,"responseStream",this.responseStream,"options",this.options,"comment",t?this.comment:void 0,"parsedOptions",this.parsedOptions])},s.prototype.resolve=function(){return this.resolved?this:(this.resolvedRequestType=this.parent.lookupType(this.requestType),this.resolvedResponseType=this.parent.lookupType(this.responseType),n.prototype.resolve.call(this))}},71271:(e,t)=>{"use strict";var r,n,i;Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_MAX_RECEIVE_MESSAGE_LENGTH=t.DEFAULT_MAX_SEND_MESSAGE_LENGTH=t.Propagate=t.LogVerbosity=t.Status=void 0,function(e){e[e.OK=0]="OK",e[e.CANCELLED=1]="CANCELLED",e[e.UNKNOWN=2]="UNKNOWN",e[e.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",e[e.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",e[e.NOT_FOUND=5]="NOT_FOUND",e[e.ALREADY_EXISTS=6]="ALREADY_EXISTS",e[e.PERMISSION_DENIED=7]="PERMISSION_DENIED",e[e.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",e[e.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",e[e.ABORTED=10]="ABORTED",e[e.OUT_OF_RANGE=11]="OUT_OF_RANGE",e[e.UNIMPLEMENTED=12]="UNIMPLEMENTED",e[e.INTERNAL=13]="INTERNAL",e[e.UNAVAILABLE=14]="UNAVAILABLE",e[e.DATA_LOSS=15]="DATA_LOSS",e[e.UNAUTHENTICATED=16]="UNAUTHENTICATED"}(r||(t.Status=r={})),function(e){e[e.DEBUG=0]="DEBUG",e[e.INFO=1]="INFO",e[e.ERROR=2]="ERROR",e[e.NONE=3]="NONE"}(n||(t.LogVerbosity=n={})),function(e){e[e.DEADLINE=1]="DEADLINE",e[e.CENSUS_STATS_CONTEXT=2]="CENSUS_STATS_CONTEXT",e[e.CENSUS_TRACING_CONTEXT=4]="CENSUS_TRACING_CONTEXT",e[e.CANCELLATION=8]="CANCELLATION",e[e.DEFAULTS=65535]="DEFAULTS"}(i||(t.Propagate=i={})),t.DEFAULT_MAX_SEND_MESSAGE_LENGTH=-1,t.DEFAULT_MAX_RECEIVE_MESSAGE_LENGTH=4194304},71309:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ResolvingLoadBalancer=void 0;let n=r(86239),i=r(10504),s=r(40536),a=r(5674),o=r(72910),l=r(50268),u=r(71271),c=r(86777),h=r(31359),d=r(71271),p=r(26786),f=r(72309),m="resolving_load_balancer";function g(e){h.trace(d.LogVerbosity.DEBUG,m,e)}let y=["SERVICE_AND_METHOD","SERVICE","EMPTY"];function v(e,t,r,n){for(let i of r.name)switch(n){case"EMPTY":if(!i.service&&!i.method)return!0;break;case"SERVICE":if(i.service===e&&!i.method)return!0;break;case"SERVICE_AND_METHOD":if(i.service===e&&i.method===t)return!0}return!1}function b(e,t,r,n){for(let i of r)if(v(e,t,i,n))return i;return null}function S(e){return function(t,r){var n,i;let s=t.split("/").filter(e=>e.length>0),a=null!=(n=s[0])?n:"",o=null!=(i=s[1])?i:"";if(e&&e.methodConfig)for(let t of y){let r=b(a,o,e.methodConfig,t);if(r)return{methodConfig:r,pickInformation:{},status:u.Status.OK,dynamicFilterFactories:[]}}return{methodConfig:{name:[]},pickInformation:{},status:u.Status.OK,dynamicFilterFactories:[]}}}class T{constructor(e,t,r,h,d){this.target=e,this.channelControlHelper=t,this.onSuccessfulResolution=h,this.onFailedResolution=d,this.latestChildState=s.ConnectivityState.IDLE,this.latestChildPicker=new o.QueuePicker(this),this.currentState=s.ConnectivityState.IDLE,this.previousServiceConfig=null,this.continueResolving=!1,r["grpc.service_config"]?this.defaultServiceConfig=(0,i.validateServiceConfig)(JSON.parse(r["grpc.service_config"])):this.defaultServiceConfig={loadBalancingConfig:[],methodConfig:[]},this.updateState(s.ConnectivityState.IDLE,new o.QueuePicker(this)),this.childLoadBalancer=new f.ChildLoadBalancerHandler({createSubchannel:t.createSubchannel.bind(t),requestReresolution:()=>{this.backoffTimeout.isRunning()?(g("requestReresolution delayed by backoff timer until "+this.backoffTimeout.getEndTime().toISOString()),this.continueResolving=!0):this.updateResolution()},updateState:(e,t)=>{this.latestChildState=e,this.latestChildPicker=t,this.updateState(e,t)},addChannelzChild:t.addChannelzChild.bind(t),removeChannelzChild:t.removeChannelzChild.bind(t)}),this.innerResolver=(0,a.createResolver)(e,{onSuccessfulResolution:(e,t,r,i,s)=>{var a;this.backoffTimeout.stop(),this.backoffTimeout.reset();let o=null;null===t?null===r?(this.previousServiceConfig=null,o=this.defaultServiceConfig):null===this.previousServiceConfig?this.handleResolutionFailure(r):o=this.previousServiceConfig:(o=t,this.previousServiceConfig=t);let l=null!=(a=null==o?void 0:o.loadBalancingConfig)?a:[],h=(0,n.getFirstUsableConfig)(l,!0);if(null===h)return void this.handleResolutionFailure({code:u.Status.UNAVAILABLE,details:"All load balancer options in service config are not compatible",metadata:new c.Metadata});this.childLoadBalancer.updateAddressList(e,h,s);let d=null!=o?o:this.defaultServiceConfig;this.onSuccessfulResolution(d,null!=i?i:S(d))},onError:e=>{this.handleResolutionFailure(e)}},r);let p={initialDelay:r["grpc.initial_reconnect_backoff_ms"],maxDelay:r["grpc.max_reconnect_backoff_ms"]};this.backoffTimeout=new l.BackoffTimeout(()=>{this.continueResolving?(this.updateResolution(),this.continueResolving=!1):this.updateState(this.latestChildState,this.latestChildPicker)},p),this.backoffTimeout.unref()}updateResolution(){this.innerResolver.updateResolution(),this.currentState===s.ConnectivityState.IDLE&&this.updateState(s.ConnectivityState.CONNECTING,new o.QueuePicker(this)),this.backoffTimeout.runOnce()}updateState(e,t){g((0,p.uriToString)(this.target)+" "+s.ConnectivityState[this.currentState]+" -> "+s.ConnectivityState[e]),e===s.ConnectivityState.IDLE&&(t=new o.QueuePicker(this)),this.currentState=e,this.channelControlHelper.updateState(e,t)}handleResolutionFailure(e){this.latestChildState===s.ConnectivityState.IDLE&&(this.updateState(s.ConnectivityState.TRANSIENT_FAILURE,new o.UnavailablePicker(e)),this.onFailedResolution(e))}exitIdle(){(this.currentState===s.ConnectivityState.IDLE||this.currentState===s.ConnectivityState.TRANSIENT_FAILURE)&&(this.backoffTimeout.isRunning()?this.continueResolving=!0:this.updateResolution()),this.childLoadBalancer.exitIdle()}updateAddressList(e,t){throw Error("updateAddressList not supported on ResolvingLoadBalancer")}resetBackoff(){this.backoffTimeout.reset(),this.childLoadBalancer.resetBackoff()}destroy(){this.childLoadBalancer.destroy(),this.innerResolver.destroy(),this.backoffTimeout.reset(),this.backoffTimeout.stop(),this.latestChildState=s.ConnectivityState.IDLE,this.latestChildPicker=new o.QueuePicker(this),this.currentState=s.ConnectivityState.IDLE,this.previousServiceConfig=null,this.continueResolving=!1}getTypeName(){return"resolving_load_balancer"}}t.ResolvingLoadBalancer=T},72309:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ChildLoadBalancerHandler=void 0;let n=r(86239),i=r(40536),s="child_load_balancer_helper";class a{constructor(e){this.channelControlHelper=e,this.currentChild=null,this.pendingChild=null,this.latestConfig=null,this.ChildPolicyHelper=class{constructor(e){this.parent=e,this.child=null}createSubchannel(e,t){return this.parent.channelControlHelper.createSubchannel(e,t)}updateState(e,t){var r;if(this.calledByPendingChild()){if(e===i.ConnectivityState.CONNECTING)return;null==(r=this.parent.currentChild)||r.destroy(),this.parent.currentChild=this.parent.pendingChild,this.parent.pendingChild=null}else if(!this.calledByCurrentChild())return;this.parent.channelControlHelper.updateState(e,t)}requestReresolution(){var e;let t=null!=(e=this.parent.pendingChild)?e:this.parent.currentChild;this.child===t&&this.parent.channelControlHelper.requestReresolution()}setChild(e){this.child=e}addChannelzChild(e){this.parent.channelControlHelper.addChannelzChild(e)}removeChannelzChild(e){this.parent.channelControlHelper.removeChannelzChild(e)}calledByPendingChild(){return this.child===this.parent.pendingChild}calledByCurrentChild(){return this.child===this.parent.currentChild}}}configUpdateRequiresNewPolicyInstance(e,t){return e.getLoadBalancerName()!==t.getLoadBalancerName()}updateAddressList(e,t,r){let i;if(null===this.currentChild||null===this.latestConfig||this.configUpdateRequiresNewPolicyInstance(this.latestConfig,t)){let e=new this.ChildPolicyHelper(this),r=(0,n.createLoadBalancer)(t,e);e.setChild(r),null===this.currentChild?(this.currentChild=r,i=this.currentChild):(this.pendingChild&&this.pendingChild.destroy(),this.pendingChild=r,i=this.pendingChild)}else i=null===this.pendingChild?this.currentChild:this.pendingChild;this.latestConfig=t,i.updateAddressList(e,t,r)}exitIdle(){this.currentChild&&(this.currentChild.exitIdle(),this.pendingChild&&this.pendingChild.exitIdle())}resetBackoff(){this.currentChild&&(this.currentChild.resetBackoff(),this.pendingChild&&this.pendingChild.resetBackoff())}destroy(){this.currentChild&&(this.currentChild.destroy(),this.currentChild=null),this.pendingChild&&(this.pendingChild.destroy(),this.pendingChild=null)}getTypeName(){return s}}t.ChildLoadBalancerHandler=a},72910:(e,t,r)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.QueuePicker=t.UnavailablePicker=t.PickResultType=void 0;let i=r(86777),s=r(71271);!function(e){e[e.COMPLETE=0]="COMPLETE",e[e.QUEUE=1]="QUEUE",e[e.TRANSIENT_FAILURE=2]="TRANSIENT_FAILURE",e[e.DROP=3]="DROP"}(n||(t.PickResultType=n={}));class a{constructor(e){this.status=Object.assign({code:s.Status.UNAVAILABLE,details:"No connection established",metadata:new i.Metadata},e)}pick(e){return{pickResultType:n.TRANSIENT_FAILURE,subchannel:null,status:this.status,onCallStarted:null,onCallEnded:null}}}t.UnavailablePicker=a;class o{constructor(e){this.loadBalancer=e,this.calledExitIdle=!1}pick(e){return this.calledExitIdle||(process.nextTick(()=>{this.loadBalancer.exitIdle()}),this.calledExitIdle=!0),{pickResultType:n.QUEUE,subchannel:null,status:null,onCallStarted:null,onCallEnded:null}}}t.QueuePicker=o},73267:(e,t,r)=>{"use strict";e.exports=u;var n,i=r(64824);((u.prototype=Object.create(i.prototype)).constructor=u).className="Field";var s=r(32110),a=r(61810),o=r(93107),l=/^required|optional|repeated$/;function u(e,t,r,n,s,u,c){if(o.isObject(n)?(c=s,u=n,n=s=void 0):o.isObject(s)&&(c=u,u=s,s=void 0),i.call(this,e,u),!o.isInteger(t)||t<0)throw TypeError("id must be a non-negative integer");if(!o.isString(r))throw TypeError("type must be a string");if(void 0!==n&&!l.test(n=n.toString().toLowerCase()))throw TypeError("rule must be a string rule");if(void 0!==s&&!o.isString(s))throw TypeError("extend must be a string");"proto3_optional"===n&&(n="optional"),this.rule=n&&"optional"!==n?n:void 0,this.type=r,this.id=t,this.extend=s||void 0,this.required="required"===n,this.optional=!this.required,this.repeated="repeated"===n,this.map=!1,this.message=null,this.partOf=null,this.typeDefault=null,this.defaultValue=null,this.long=!!o.Long&&void 0!==a.long[r],this.bytes="bytes"===r,this.resolvedType=null,this.extensionField=null,this.declaringField=null,this._packed=null,this.comment=c}u.fromJSON=function(e,t){return new u(e,t.id,t.type,t.rule,t.extend,t.options,t.comment)},Object.defineProperty(u.prototype,"packed",{get:function(){return null===this._packed&&(this._packed=!1!==this.getOption("packed")),this._packed}}),u.prototype.setOption=function(e,t,r){return"packed"===e&&(this._packed=null),i.prototype.setOption.call(this,e,t,r)},u.prototype.toJSON=function(e){var t=!!e&&!!e.keepComments;return o.toObject(["rule","optional"!==this.rule&&this.rule||void 0,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",t?this.comment:void 0])},u.prototype.resolve=function(){if(this.resolved)return this;if(void 0===(this.typeDefault=a.defaults[this.type])?(this.resolvedType=(this.declaringField?this.declaringField.parent:this.parent).lookupTypeOrEnum(this.type),this.resolvedType instanceof n?this.typeDefault=null:this.typeDefault=this.resolvedType.values[Object.keys(this.resolvedType.values)[0]]):this.options&&this.options.proto3_optional&&(this.typeDefault=null),this.options&&null!=this.options.default&&(this.typeDefault=this.options.default,this.resolvedType instanceof s&&"string"==typeof this.typeDefault&&(this.typeDefault=this.resolvedType.values[this.typeDefault])),this.options&&(!0!==this.options.packed&&(void 0===this.options.packed||!this.resolvedType||this.resolvedType instanceof s)||delete this.options.packed,Object.keys(this.options).length||(this.options=void 0)),this.long)this.typeDefault=o.Long.fromNumber(this.typeDefault,"u"===this.type.charAt(0)),Object.freeze&&Object.freeze(this.typeDefault);else if(this.bytes&&"string"==typeof this.typeDefault){var e;o.base64.test(this.typeDefault)?o.base64.decode(this.typeDefault,e=o.newBuffer(o.base64.length(this.typeDefault)),0):o.utf8.write(this.typeDefault,e=o.newBuffer(o.utf8.length(this.typeDefault)),0),this.typeDefault=e}return this.map?this.defaultValue=o.emptyObject:this.repeated?this.defaultValue=o.emptyArray:this.defaultValue=this.typeDefault,this.parent instanceof n&&(this.parent.ctor.prototype[this.name]=this.defaultValue),i.prototype.resolve.call(this)},u.d=function(e,t,r,n){return"function"==typeof t?t=o.decorateType(t).name:t&&"object"==typeof t&&(t=o.decorateEnum(t).name),function(i,s){o.decorateType(i.constructor).add(new u(s,e,t,r,{default:n}))}},u._configure=function(e){n=e}},73496:e=>{"use strict";e.exports=require("http2")},73911:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.restrictControlPlaneStatusCode=void 0;let n=r(71271),i=[n.Status.OK,n.Status.INVALID_ARGUMENT,n.Status.NOT_FOUND,n.Status.ALREADY_EXISTS,n.Status.FAILED_PRECONDITION,n.Status.ABORTED,n.Status.OUT_OF_RANGE,n.Status.DATA_LOSS];t.restrictControlPlaneStatusCode=function(e,t){return i.includes(e)?{code:n.Status.INTERNAL,details:`Invalid status from control plane: ${e} ${n.Status[e]} ${t}`}:{code:e,details:t}}},74075:e=>{"use strict";e.exports=require("zlib")},75108:e=>{"use strict";e.exports=function e(e,t){for(var r=Array(arguments.length-1),n=0,i=2,s=!0;i<arguments.length;)r[n++]=arguments[i++];return new Promise(function(i,a){r[n]=function(e){if(s)if(s=!1,e)a(e);else{for(var t=Array(arguments.length-1),r=0;r<t.length;)t[r++]=arguments[r];i.apply(null,t)}};try{e.apply(t||null,r)}catch(e){s&&(s=!1,a(e))}})}},75677:(e,t,r)=>{"use strict";e.exports=s;var n=r(26996);(s.prototype=Object.create(n.prototype)).constructor=s;var i=r(8707);function s(e){n.call(this,e)}s._configure=function(){i.Buffer&&(s.prototype._slice=i.Buffer.prototype.slice)},s.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))},s._configure()},76250:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OutlierDetectionLoadBalancingConfig=t.BaseSubchannelWrapper=t.registerAdminService=t.FilterStackFactory=t.BaseFilter=t.PickResultType=t.QueuePicker=t.UnavailablePicker=t.ChildLoadBalancerHandler=t.subchannelAddressToString=t.validateLoadBalancingConfig=t.getFirstUsableConfig=t.registerLoadBalancerType=t.createChildChannelControlHelper=t.BackoffTimeout=t.durationToMs=t.uriToString=t.createResolver=t.registerResolver=t.log=t.trace=void 0;var n=r(31359);Object.defineProperty(t,"trace",{enumerable:!0,get:function(){return n.trace}}),Object.defineProperty(t,"log",{enumerable:!0,get:function(){return n.log}});var i=r(5674);Object.defineProperty(t,"registerResolver",{enumerable:!0,get:function(){return i.registerResolver}}),Object.defineProperty(t,"createResolver",{enumerable:!0,get:function(){return i.createResolver}});var s=r(26786);Object.defineProperty(t,"uriToString",{enumerable:!0,get:function(){return s.uriToString}});var a=r(80324);Object.defineProperty(t,"durationToMs",{enumerable:!0,get:function(){return a.durationToMs}});var o=r(50268);Object.defineProperty(t,"BackoffTimeout",{enumerable:!0,get:function(){return o.BackoffTimeout}});var l=r(86239);Object.defineProperty(t,"createChildChannelControlHelper",{enumerable:!0,get:function(){return l.createChildChannelControlHelper}}),Object.defineProperty(t,"registerLoadBalancerType",{enumerable:!0,get:function(){return l.registerLoadBalancerType}}),Object.defineProperty(t,"getFirstUsableConfig",{enumerable:!0,get:function(){return l.getFirstUsableConfig}}),Object.defineProperty(t,"validateLoadBalancingConfig",{enumerable:!0,get:function(){return l.validateLoadBalancingConfig}});var u=r(43356);Object.defineProperty(t,"subchannelAddressToString",{enumerable:!0,get:function(){return u.subchannelAddressToString}});var c=r(72309);Object.defineProperty(t,"ChildLoadBalancerHandler",{enumerable:!0,get:function(){return c.ChildLoadBalancerHandler}});var h=r(72910);Object.defineProperty(t,"UnavailablePicker",{enumerable:!0,get:function(){return h.UnavailablePicker}}),Object.defineProperty(t,"QueuePicker",{enumerable:!0,get:function(){return h.QueuePicker}}),Object.defineProperty(t,"PickResultType",{enumerable:!0,get:function(){return h.PickResultType}});var d=r(40962);Object.defineProperty(t,"BaseFilter",{enumerable:!0,get:function(){return d.BaseFilter}});var p=r(54003);Object.defineProperty(t,"FilterStackFactory",{enumerable:!0,get:function(){return p.FilterStackFactory}});var f=r(17061);Object.defineProperty(t,"registerAdminService",{enumerable:!0,get:function(){return f.registerAdminService}});var m=r(4719);Object.defineProperty(t,"BaseSubchannelWrapper",{enumerable:!0,get:function(){return m.BaseSubchannelWrapper}});var g=r(1532);Object.defineProperty(t,"OutlierDetectionLoadBalancingConfig",{enumerable:!0,get:function(){return g.OutlierDetectionLoadBalancingConfig}})},76631:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LoadBalancingCall=void 0;let n=r(40536),i=r(71271),s=r(26412),a=r(86777),o=r(72910),l=r(26786),u=r(31359),c=r(73911),h=r(73496),d="load_balancing_call";class p{constructor(e,t,r,n,i,s,a){var o,u;this.channel=e,this.callConfig=t,this.methodName=r,this.host=n,this.credentials=i,this.deadline=s,this.callNumber=a,this.child=null,this.readPending=!1,this.pendingMessage=null,this.pendingHalfClose=!1,this.ended=!1,this.metadata=null,this.listener=null,this.onCallEnded=null;let c=this.methodName.split("/"),h="";c.length>=2&&(h=c[1]);let d=null!=(u=null==(o=(0,l.splitHostPort)(this.host))?void 0:o.host)?u:"localhost";this.serviceUrl=`https://${d}/${h}`}trace(e){u.trace(i.LogVerbosity.DEBUG,d,"["+this.callNumber+"] "+e)}outputStatus(e,t){var r,n;if(!this.ended){this.ended=!0,this.trace("ended with status: code="+e.code+' details="'+e.details+'"');let i=Object.assign(Object.assign({},e),{progress:t});null==(r=this.listener)||r.onReceiveStatus(i),null==(n=this.onCallEnded)||n.call(this,i.code)}}doPick(){var e,t;if(this.ended)return;if(!this.metadata)throw Error("doPick called before start");this.trace("Pick called");let r=this.channel.doPick(this.metadata,this.callConfig.pickInformation),l=r.subchannel?"("+r.subchannel.getChannelzRef().id+") "+r.subchannel.getAddress():""+r.subchannel;switch(this.trace("Pick result: "+o.PickResultType[r.pickResultType]+" subchannel: "+l+" status: "+(null==(e=r.status)?void 0:e.code)+" "+(null==(t=r.status)?void 0:t.details)),r.pickResultType){case o.PickResultType.COMPLETE:this.credentials.generateMetadata({service_url:this.serviceUrl}).then(e=>{var t,o,u;if(this.ended)return void this.trace("Credentials metadata generation finished after call ended");let c=this.metadata.clone();if(c.merge(e),c.get("authorization").length>1&&this.outputStatus({code:i.Status.INTERNAL,details:'"authorization" metadata cannot have multiple values',metadata:new a.Metadata},"PROCESSED"),r.subchannel.getConnectivityState()!==n.ConnectivityState.READY){this.trace("Picked subchannel "+l+" has state "+n.ConnectivityState[r.subchannel.getConnectivityState()]+" after getting credentials metadata. Retrying pick"),this.doPick();return}this.deadline!==1/0&&c.set("grpc-timeout",(0,s.getDeadlineTimeoutString)(this.deadline));try{this.child=r.subchannel.getRealSubchannel().createCall(c,this.host,this.methodName,{onReceiveMetadata:e=>{this.trace("Received metadata"),this.listener.onReceiveMetadata(e)},onReceiveMessage:e=>{this.trace("Received message"),this.listener.onReceiveMessage(e)},onReceiveStatus:e=>{this.trace("Received status"),e.rstCode===h.constants.NGHTTP2_REFUSED_STREAM?this.outputStatus(e,"REFUSED"):this.outputStatus(e,"PROCESSED")}})}catch(e){this.trace("Failed to start call on picked subchannel "+l+" with error "+e.message),this.outputStatus({code:i.Status.INTERNAL,details:"Failed to start HTTP/2 stream with error "+e.message,metadata:new a.Metadata},"NOT_STARTED");return}null==(o=(t=this.callConfig).onCommitted)||o.call(t),null==(u=r.onCallStarted)||u.call(r),this.onCallEnded=r.onCallEnded,this.trace("Created child call ["+this.child.getCallNumber()+"]"),this.readPending&&this.child.startRead(),this.pendingMessage&&this.child.sendMessageWithContext(this.pendingMessage.context,this.pendingMessage.message),this.pendingHalfClose&&this.child.halfClose()},e=>{let{code:t,details:r}=(0,c.restrictControlPlaneStatusCode)("number"==typeof e.code?e.code:i.Status.UNKNOWN,`Getting metadata from plugin failed with error: ${e.message}`);this.outputStatus({code:t,details:r,metadata:new a.Metadata},"PROCESSED")});break;case o.PickResultType.DROP:let{code:u,details:d}=(0,c.restrictControlPlaneStatusCode)(r.status.code,r.status.details);setImmediate(()=>{this.outputStatus({code:u,details:d,metadata:r.status.metadata},"DROP")});break;case o.PickResultType.TRANSIENT_FAILURE:if(this.metadata.getOptions().waitForReady)this.channel.queueCallForPick(this);else{let{code:e,details:t}=(0,c.restrictControlPlaneStatusCode)(r.status.code,r.status.details);setImmediate(()=>{this.outputStatus({code:e,details:t,metadata:r.status.metadata},"PROCESSED")})}break;case o.PickResultType.QUEUE:this.channel.queueCallForPick(this)}}cancelWithStatus(e,t){var r;this.trace("cancelWithStatus code: "+e+' details: "'+t+'"'),null==(r=this.child)||r.cancelWithStatus(e,t),this.outputStatus({code:e,details:t,metadata:new a.Metadata},"PROCESSED")}getPeer(){var e,t;return null!=(t=null==(e=this.child)?void 0:e.getPeer())?t:this.channel.getTarget()}start(e,t){this.trace("start called"),this.listener=t,this.metadata=e,this.doPick()}sendMessageWithContext(e,t){this.trace("write() called with message of length "+t.length),this.child?this.child.sendMessageWithContext(e,t):this.pendingMessage={context:e,message:t}}startRead(){this.trace("startRead called"),this.child?this.child.startRead():this.readPending=!0}halfClose(){this.trace("halfClose called"),this.child?this.child.halfClose():this.pendingHalfClose=!0}setCredentials(e){throw Error("Method not implemented.")}getCallNumber(){return this.callNumber}}t.LoadBalancingCall=p},77968:(e,t,r)=>{"use strict";e.exports=h;var n,i,s,a=r(64824);((h.prototype=Object.create(a.prototype)).constructor=h).className="Namespace";var o=r(73267),l=r(93107),u=r(12630);function c(e,t){if(e&&e.length){for(var r={},n=0;n<e.length;++n)r[e[n].name]=e[n].toJSON(t);return r}}function h(e,t){a.call(this,e,t),this.nested=void 0,this._nestedArray=null}function d(e){return e._nestedArray=null,e}h.fromJSON=function(e,t){return new h(e,t.options).addJSON(t.nested)},h.arrayToJSON=c,h.isReservedId=function(e,t){if(e){for(var r=0;r<e.length;++r)if("string"!=typeof e[r]&&e[r][0]<=t&&e[r][1]>t)return!0}return!1},h.isReservedName=function(e,t){if(e){for(var r=0;r<e.length;++r)if(e[r]===t)return!0}return!1},Object.defineProperty(h.prototype,"nestedArray",{get:function(){return this._nestedArray||(this._nestedArray=l.toArray(this.nested))}}),h.prototype.toJSON=function(e){return l.toObject(["options",this.options,"nested",c(this.nestedArray,e)])},h.prototype.addJSON=function(e){var t=this;if(e)for(var r,a=Object.keys(e),l=0;l<a.length;++l)r=e[a[l]],t.add((void 0!==r.fields?n.fromJSON:void 0!==r.values?s.fromJSON:void 0!==r.methods?i.fromJSON:void 0!==r.id?o.fromJSON:h.fromJSON)(a[l],r));return this},h.prototype.get=function(e){return this.nested&&this.nested[e]||null},h.prototype.getEnum=function(e){if(this.nested&&this.nested[e]instanceof s)return this.nested[e].values;throw Error("no such enum: "+e)},h.prototype.add=function(e){if(!(e instanceof o&&void 0!==e.extend||e instanceof n||e instanceof u||e instanceof s||e instanceof i||e instanceof h))throw TypeError("object must be a valid nested object");if(this.nested){var t=this.get(e.name);if(t)if(t instanceof h&&e instanceof h&&!(t instanceof n||t instanceof i)){for(var r=t.nestedArray,a=0;a<r.length;++a)e.add(r[a]);this.remove(t),this.nested||(this.nested={}),e.setOptions(t.options,!0)}else throw Error("duplicate name '"+e.name+"' in "+this)}else this.nested={};return this.nested[e.name]=e,e.onAdd(this),d(this)},h.prototype.remove=function(e){if(!(e instanceof a))throw TypeError("object must be a ReflectionObject");if(e.parent!==this)throw Error(e+" is not a member of "+this);return delete this.nested[e.name],Object.keys(this.nested).length||(this.nested=void 0),e.onRemove(this),d(this)},h.prototype.define=function(e,t){if(l.isString(e))e=e.split(".");else if(!Array.isArray(e))throw TypeError("illegal path");if(e&&e.length&&""===e[0])throw Error("path must be relative");for(var r=this;e.length>0;){var n=e.shift();if(r.nested&&r.nested[n]){if(!((r=r.nested[n])instanceof h))throw Error("path conflicts with non-namespace objects")}else r.add(r=new h(n))}return t&&r.addJSON(t),r},h.prototype.resolveAll=function(){for(var e=this.nestedArray,t=0;t<e.length;)e[t]instanceof h?e[t++].resolveAll():e[t++].resolve();return this.resolve()},h.prototype.lookup=function(e,t,r){if("boolean"==typeof t?(r=t,t=void 0):t&&!Array.isArray(t)&&(t=[t]),l.isString(e)&&e.length){if("."===e)return this.root;e=e.split(".")}else if(!e.length)return this;if(""===e[0])return this.root.lookup(e.slice(1),t);var n=this.get(e[0]);if(n){if(1===e.length){if(!t||t.indexOf(n.constructor)>-1)return n}else if(n instanceof h&&(n=n.lookup(e.slice(1),t,!0)))return n}else for(var i=0;i<this.nestedArray.length;++i)if(this._nestedArray[i]instanceof h&&(n=this._nestedArray[i].lookup(e,t,!0)))return n;return null===this.parent||r?null:this.parent.lookup(e,t)},h.prototype.lookupType=function(e){var t=this.lookup(e,[n]);if(!t)throw Error("no such type: "+e);return t},h.prototype.lookupEnum=function(e){var t=this.lookup(e,[s]);if(!t)throw Error("no such Enum '"+e+"' in "+this);return t},h.prototype.lookupTypeOrEnum=function(e){var t=this.lookup(e,[n,s]);if(!t)throw Error("no such Type or Enum '"+e+"' in "+this);return t},h.prototype.lookupService=function(e){var t=this.lookup(e,[i]);if(!t)throw Error("no such Service '"+e+"' in "+this);return t},h._configure=function(e,t,r){n=e,i=t,s=r}},79551:e=>{"use strict";e.exports=require("url")},80324:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isDuration=t.durationToMs=t.msToDuration=void 0,t.msToDuration=function(e){return{seconds:e/1e3|0,nanos:e%1e3*1e6|0}},t.durationToMs=function(e){return 1e3*e.seconds+e.nanos/1e6|0},t.isDuration=function(e){return"number"==typeof e.seconds&&"number"==typeof e.nanos}},81260:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getNextCallNumber=void 0;let r=0;t.getNextCallNumber=function(){return r++}},81395:(e,t,r)=>{"use strict";let n,i,s;r.r(t),r.d(t,{default:()=>RT});var a,o,l,u,c,h,d,p=r(60687),f=r(64681),m=r(85814),g=r.n(m);function y(){let e="/login/auth.html",t="/chat/?id=hyP1f247eFPotrOgqnW8OpQuyz23";return(0,p.jsxs)("section",{id:"inicio",className:"relative flex min-h-[calc(100vh-4rem)] items-center overflow-hidden",children:[(0,p.jsx)("div",{"aria-hidden":"true",className:"absolute inset-0 -z-20",style:{backgroundImage:"url('https://firebasestorage.googleapis.com/v0/b/cb-vempreender.firebasestorage.app/o/Imagens%20LP%2FHero%20Chatbot%20Vempreender.webp?alt=media&token=cf25148f-5399-4976-bb7e-f9347ba1428f')",backgroundPosition:"center",backgroundRepeat:"no-repeat",backgroundSize:"cover",backgroundAttachment:"fixed"}}),(0,p.jsx)("div",{"aria-hidden":"true",className:"absolute inset-0 -z-10 bg-background/70"}),(0,p.jsx)("div",{className:"container relative mx-auto flex h-full flex-grow items-center justify-center px-4 md:px-24",children:(0,p.jsxs)("div",{className:"relative mx-auto max-w-3xl text-center",children:[(0,p.jsx)("div",{"aria-hidden":"true",className:"absolute inset-x-0 -top-8 -bottom-8 z-0",children:(0,p.jsx)("div",{className:"h-full w-full rounded-full bg-background/70 blur-3xl"})}),(0,p.jsxs)("div",{className:"relative z-10 p-4 sm:p-8",children:[(0,p.jsx)("h1",{className:"font-headline text-4xl font-semibold tracking-tight text-white sm:text-5xl lg:text-6xl",children:"Atender bem vende mais."}),(0,p.jsx)("p",{className:"mt-6 text-3xl font-medium leading-tight text-white sm:text-4xl lg:text-5xl",children:"Transforme um bom atendimento em vendas."}),(0,p.jsx)("p",{className:"mt-6 text-xl font-normal text-white sm:text-2xl",children:"Sua chance de venda vai embora se um novo cliente n\xe3o \xe9 bem atendido. Com Vempreender voc\xea tem um Atendente com Intelig\xeancia Artificial que conversa com todo novo cliente como se fosse voc\xea. Ele explica seus servi\xe7os, tira as d\xfavidas e ajuda a separar curiosos de clientes."}),(0,p.jsxs)("div",{className:"mt-8 flex flex-col items-center justify-center gap-4 sm:flex-row sm:gap-x-6",children:[(0,p.jsx)(f.$,{asChild:!0,size:"lg",className:"w-full text-base font-bold shadow-lg shadow-primary/20 transition-all hover:scale-105 hover:shadow-xl hover:shadow-primary/30 sm:w-auto",children:(0,p.jsx)(g(),{href:e,target:"_blank",rel:"noopener noreferrer",children:"Teste Gr\xe1tis por 10 Dias"})}),(0,p.jsx)(f.$,{variant:"ghost",size:"lg",className:"group w-full border-[1.5px] border-primary font-bold text-white transition-all sm:w-auto",asChild:!0,children:(0,p.jsx)(g(),{href:t,target:"_blank",rel:"noopener noreferrer",children:"Saiba Mais"})})]})]})]})})]})}var v=r(82614);let b=[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M9 13a4.5 4.5 0 0 0 3-4",key:"10igwf"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M12 13h4",key:"1ku699"}],["path",{d:"M12 18h6a2 2 0 0 1 2 2v1",key:"105ag5"}],["path",{d:"M12 8h8",key:"1lhi5i"}],["path",{d:"M16 8V5a2 2 0 0 1 2-2",key:"u6izg6"}],["circle",{cx:"16",cy:"13",r:".5",key:"ry7gng"}],["circle",{cx:"18",cy:"3",r:".5",key:"1aiba7"}],["circle",{cx:"20",cy:"21",r:".5",key:"yhc1fs"}],["circle",{cx:"20",cy:"8",r:".5",key:"1e43v0"}]],S=(0,v.A)("BrainCircuit",b),T=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],w=(0,v.A)("Copy",T),C=[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]],x=(0,v.A)("Rocket",C),E=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],_=(0,v.A)("Clock",E),I=[["path",{d:"M21 7.5V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h3.5",key:"1osxxc"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M3 10h5",key:"r794hk"}],["path",{d:"M17.5 17.5 16 16.3V14",key:"akvzfd"}],["circle",{cx:"16",cy:"16",r:"6",key:"qoo3c4"}]],k=(0,v.A)("CalendarClock",I),A=[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]],R=(0,v.A)("MessageCircle",A);var N=r(43210),D=r.n(N),O=r(4780);let P=N.forwardRef(({className:e,...t},r)=>(0,p.jsx)("div",{ref:r,className:(0,O.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));P.displayName="Card";let M=N.forwardRef(({className:e,...t},r)=>(0,p.jsx)("div",{ref:r,className:(0,O.cn)("flex flex-col space-y-1.5 p-6",e),...t}));M.displayName="CardHeader";let L=N.forwardRef(({className:e,...t},r)=>(0,p.jsx)("div",{ref:r,className:(0,O.cn)("text-2xl font-semibold leading-none tracking-tight",e),...t}));L.displayName="CardTitle";let B=N.forwardRef(({className:e,...t},r)=>(0,p.jsx)("div",{ref:r,className:(0,O.cn)("text-sm text-muted-foreground",e),...t}));B.displayName="CardDescription";let j=N.forwardRef(({className:e,...t},r)=>(0,p.jsx)("div",{ref:r,className:(0,O.cn)("p-6 pt-0",e),...t}));j.displayName="CardContent",N.forwardRef(({className:e,...t},r)=>(0,p.jsx)("div",{ref:r,className:(0,O.cn)("flex items-center p-6 pt-0",e),...t})).displayName="CardFooter";let F=[{icon:(0,p.jsx)(S,{className:"h-8 w-8 text-primary"}),title:"Foque no Seu Trabalho!",description:"Deixe o Vempreender conversar e tirar d\xfavidas dos seus clientes. Voc\xea foca no que realmente importa, que \xe9 o seu trabalho. E voc\xea retorna o contato no seu tempo."},{icon:(0,p.jsx)(w,{className:"h-8 w-8 text-primary"}),title:"Seu clone digital",description:"Nossa IA aprende com voc\xea para atender usando seu conhecimento, gerando confian\xe7a com conversas humanizadas. Fa\xe7a do atendimento seu melhor vendedor."},{icon:(0,p.jsx)(x,{className:"h-8 w-8 text-primary"}),title:"Vender",description:"Nossa IA aplica t\xe9cnicas de Vendas, Persuas\xe3o e Quebra de Obje\xe7\xf5es \xe0s respostas, gerando uma conversa envolvente pra te ajudar a vender mais."},{icon:(0,p.jsx)(_,{className:"h-8 w-8 text-primary"}),title:"N\xe3o perca tempo.",description:"Divulgue seu link na Bio do Instagram, no Linktree e onde mais quiser. Ao clicar no link, seu novo cliente vai conversar com um Agente IA que sabe tudo sobre o seu neg\xf3cio."},{icon:(0,p.jsx)(k,{className:"h-8 w-8 text-primary"}),title:"Atendimento 24/7",description:"Seu neg\xf3cio dispon\xedvel 24 horas por dia, 7 dias por semana. N\xe3o perca mais clientes por demora no atendimento. Vempreender est\xe1 sempre online."},{icon:(0,p.jsx)(R,{className:"h-8 w-8 text-primary"}),title:"Whatsapp Livre",description:"O Vempreender recebe os novos clientes (e curiosos) no chat. E no seu Whatsapp voc\xea s\xf3 conversa com os potenciais clientes, sem perder tempo com curiosos."}];function V(){return(0,p.jsx)("section",{id:"solucoes",className:"py-5 md:py-8 bg-background overflow-x-hidden",children:(0,p.jsxs)("div",{className:"container mx-auto px-4 md:px-24",children:[(0,p.jsxs)("div",{className:"mx-auto max-w-3xl text-center",children:[(0,p.jsx)("h2",{className:"font-headline text-3xl font-medium tracking-tight text-foreground sm:text-4xl lg:text-5xl",children:"Um bom atendimento cativa clientes!"}),(0,p.jsx)("p",{className:"mt-10 text-xl font-normal text-muted-foreground/80 sm:text-2xl",children:"Cada cliente \xe9 vital. Vempreender \xe9 seu aliado para transformar o atendimento em resultados reais. Um Agente IA que realmente conversa com seu cliente."})]}),(0,p.jsx)("div",{className:"mt-12 grid grid-cols-1 gap-8 md:grid-cols-2 lg:grid-cols-3",children:F.map(e=>(0,p.jsxs)(P,{className:"transform-gpu bg-white/5 backdrop-blur-lg transition-all duration-300 hover:-translate-y-2 hover:shadow-2xl hover:shadow-primary/10 border-border",children:[(0,p.jsxs)(M,{className:"flex flex-col items-start gap-4",children:[e.icon,(0,p.jsx)(L,{className:"font-headline text-xl font-medium",children:e.title})]}),(0,p.jsx)(j,{children:(0,p.jsx)("p",{className:"text-muted-foreground text-lg",children:e.description})})]},e.title))})]})})}var U=r(30474);function q(e){if("undefined"==typeof Proxy)return e;let t=new Map;return new Proxy((...t)=>e(...t),{get:(r,n)=>"create"===n?e:(t.has(n)||t.set(n,e(n)),t.get(n))})}function z(e){return null!==e&&"object"==typeof e&&"function"==typeof e.start}let $=e=>Array.isArray(e);function G(e,t){if(!Array.isArray(t))return!1;let r=t.length;if(r!==e.length)return!1;for(let n=0;n<r;n++)if(t[n]!==e[n])return!1;return!0}function H(e){return"string"==typeof e||Array.isArray(e)}function K(e){let t=[{},{}];return null==e||e.values.forEach((e,r)=>{t[0][r]=e.get(),t[1][r]=e.getVelocity()}),t}function W(e,t,r,n){if("function"==typeof t){let[i,s]=K(n);t=t(void 0!==r?r:e.custom,i,s)}if("string"==typeof t&&(t=e.variants&&e.variants[t]),"function"==typeof t){let[i,s]=K(n);t=t(void 0!==r?r:e.custom,i,s)}return t}function Q(e,t,r){let n=e.getProps();return W(n,t,void 0!==r?r:n.custom,e)}let Y=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],J=["initial",...Y];function X(e){let t;return()=>(void 0===t&&(t=e()),t)}let Z=X(()=>void 0!==window.ScrollTimeline);class ee{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>"finished"in e?e.finished:e))}getAll(e){return this.animations[0][e]}setAll(e,t){for(let r=0;r<this.animations.length;r++)this.animations[r][e]=t}attachTimeline(e,t){let r=this.animations.map(r=>Z()&&r.attachTimeline?r.attachTimeline(e):"function"==typeof t?t(r):void 0);return()=>{r.forEach((e,t)=>{e&&e(),this.animations[t].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let t=0;t<this.animations.length;t++)e=Math.max(e,this.animations[t].duration);return e}runAll(e){this.animations.forEach(t=>t[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class et extends ee{then(e,t){return Promise.all(this.animations).then(e).catch(t)}}function er(e,t){return e?e[t]||e.default||e:void 0}let en=2e4;function ei(e){let t=0,r=50,n=e.next(t);for(;!n.done&&t<en;)t+=r,n=e.next(t);return t>=en?1/0:t}function es(e){return"function"==typeof e}function ea(e,t){e.timeline=t,e.onfinish=null}let eo=e=>Array.isArray(e)&&"number"==typeof e[0],el={linearEasing:void 0},eu=function(e,t){let r=X(e);return()=>{var e;return null!=(e=el[t])?e:r()}}(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch(e){return!1}return!0},"linearEasing"),ec=(e,t,r)=>{let n=t-e;return 0===n?1:(r-e)/n},eh=(e,t,r=10)=>{let n="",i=Math.max(Math.round(t/r),2);for(let t=0;t<i;t++)n+=e(ec(0,i-1,t))+", ";return`linear(${n.substring(0,n.length-2)})`};function ed(e){return!!("function"==typeof e&&eu()||!e||"string"==typeof e&&(e in ef||eu())||eo(e)||Array.isArray(e)&&e.every(ed))}let ep=([e,t,r,n])=>`cubic-bezier(${e}, ${t}, ${r}, ${n})`,ef={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:ep([0,.65,.55,1]),circOut:ep([.55,0,1,.45]),backIn:ep([.31,.01,.66,-.59]),backOut:ep([.33,1.53,.69,.99])};function em(e,t){if(e)return"function"==typeof e&&eu()?eh(e,t):eo(e)?ep(e):Array.isArray(e)?e.map(e=>em(e,t)||ef.easeOut):ef[e]}let eg={x:!1,y:!1};function ey(){return eg.x||eg.y}function ev(e,t,r){var n;if(e instanceof Element)return[e];if("string"==typeof e){let i=document;t&&(i=t.current);let s=null!=(n=null==r?void 0:r[e])?n:i.querySelectorAll(e);return s?Array.from(s):[]}return Array.from(e)}function eb(e,t){let r=ev(e),n=new AbortController;return[r,{passive:!0,...t,signal:n.signal},()=>n.abort()]}function eS(e){return t=>{"touch"===t.pointerType||ey()||e(t)}}function eT(e,t,r={}){let[n,i,s]=eb(e,r),a=eS(e=>{let{target:r}=e,n=t(e);if("function"!=typeof n||!r)return;let s=eS(e=>{n(e),r.removeEventListener("pointerleave",s)});r.addEventListener("pointerleave",s,i)});return n.forEach(e=>{e.addEventListener("pointerenter",a,i)}),s}let ew=(e,t)=>!!t&&(e===t||ew(e,t.parentElement)),eC=e=>"mouse"===e.pointerType?"number"!=typeof e.button||e.button<=0:!1!==e.isPrimary,ex=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function eE(e){return ex.has(e.tagName)||-1!==e.tabIndex}let e_=new WeakSet;function eI(e){return t=>{"Enter"===t.key&&e(t)}}function ek(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}let eA=(e,t)=>{let r=e.currentTarget;if(!r)return;let n=eI(()=>{if(e_.has(r))return;ek(r,"down");let e=eI(()=>{ek(r,"up")}),n=()=>ek(r,"cancel");r.addEventListener("keyup",e,t),r.addEventListener("blur",n,t)});r.addEventListener("keydown",n,t),r.addEventListener("blur",()=>r.removeEventListener("keydown",n),t)};function eR(e){return eC(e)&&!ey()}function eN(e,t,r={}){let[n,i,s]=eb(e,r),a=e=>{let n=e.currentTarget;if(!eR(e)||e_.has(n))return;e_.add(n);let s=t(e),a=(e,t)=>{window.removeEventListener("pointerup",o),window.removeEventListener("pointercancel",l),eR(e)&&e_.has(n)&&(e_.delete(n),"function"==typeof s&&s(e,{success:t}))},o=e=>{a(e,r.useGlobalTarget||ew(n,e.target))},l=e=>{a(e,!1)};window.addEventListener("pointerup",o,i),window.addEventListener("pointercancel",l,i)};return n.forEach(e=>{eE(e)||null!==e.getAttribute("tabindex")||(e.tabIndex=0),(r.useGlobalTarget?window:e).addEventListener("pointerdown",a,i),e.addEventListener("focus",e=>eA(e,i),i)}),s}let eD=e=>1e3*e,eO=e=>e/1e3,eP=e=>e;function eM(e,t=100,r){let n=r({...e,keyframes:[0,t]}),i=Math.min(ei(n),en);return{type:"keyframes",ease:e=>n.next(i*e).value/t,duration:eO(i)}}let eL="easeOut";function eB(e){var t;if(es(e.type)){let t=eM(e,100,e.type);e.ease=eu()?t.ease:eL,e.duration=eD(t.duration),e.type="keyframes"}else e.duration=eD(null!=(t=e.duration)?t:.3),e.ease=e.ease||eL}function ej(e){if("x"===e||"y"===e)if(eg[e])return null;else return eg[e]=!0,()=>{eg[e]=!1};return eg.x||eg.y?null:(eg.x=eg.y=!0,()=>{eg.x=eg.y=!1})}let eF=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],eV=new Set(eF),eU=new Set(["width","height","top","left","right","bottom",...eF]),eq=e=>!!(e&&"object"==typeof e&&e.mix&&e.toValue),ez=e=>$(e)?e[e.length-1]||0:e,e$={skipAnimations:!1,useManualTiming:!1};function eG(e){let t=new Set,r=new Set,n=!1,i=!1,s=new WeakSet,a={delta:0,timestamp:0,isProcessing:!1};function o(t){s.has(t)&&(l.schedule(t),e()),t(a)}let l={schedule:(e,i=!1,a=!1)=>{let o=a&&n?t:r;return i&&s.add(e),o.has(e)||o.add(e),e},cancel:e=>{r.delete(e),s.delete(e)},process:e=>{if(a=e,n){i=!0;return}n=!0,[t,r]=[r,t],t.forEach(o),t.clear(),n=!1,i&&(i=!1,l.process(e))}};return l}let eH=["read","resolveKeyframes","update","preRender","render","postRender"],eK=40;function eW(e,t){let r=!1,n=!0,i={delta:0,timestamp:0,isProcessing:!1},s=()=>r=!0,a=eH.reduce((e,t)=>(e[t]=eG(s),e),{}),{read:o,resolveKeyframes:l,update:u,preRender:c,render:h,postRender:d}=a,p=()=>{let s=e$.useManualTiming?i.timestamp:performance.now();r=!1,i.delta=n?1e3/60:Math.max(Math.min(s-i.timestamp,eK),1),i.timestamp=s,i.isProcessing=!0,o.process(i),l.process(i),u.process(i),c.process(i),h.process(i),d.process(i),i.isProcessing=!1,r&&t&&(n=!1,e(p))},f=()=>{r=!0,n=!0,i.isProcessing||e(p)};return{schedule:eH.reduce((e,t)=>{let n=a[t];return e[t]=(e,t=!1,i=!1)=>(r||f(),n.schedule(e,t,i)),e},{}),cancel:e=>{for(let t=0;t<eH.length;t++)a[eH[t]].cancel(e)},state:i,steps:a}}let{schedule:eQ,cancel:eY,state:eJ,steps:eX}=eW("undefined"!=typeof requestAnimationFrame?requestAnimationFrame:eP,!0);function eZ(){n=void 0}let e0={now:()=>(void 0===n&&e0.set(eJ.isProcessing||e$.useManualTiming?eJ.timestamp:performance.now()),n),set:e=>{n=e,queueMicrotask(eZ)}};function e1(e,t){-1===e.indexOf(t)&&e.push(t)}function e2(e,t){let r=e.indexOf(t);r>-1&&e.splice(r,1)}class e3{constructor(){this.subscriptions=[]}add(e){return e1(this.subscriptions,e),()=>e2(this.subscriptions,e)}notify(e,t,r){let n=this.subscriptions.length;if(n)if(1===n)this.subscriptions[0](e,t,r);else for(let i=0;i<n;i++){let n=this.subscriptions[i];n&&n(e,t,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function e6(e,t){return t?1e3/t*e:0}let e4=30,e5=e=>!isNaN(parseFloat(e)),e8={current:void 0};class e7{constructor(e,t={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(e,t=!0)=>{let r=e0.now();this.updatedAt!==r&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(e),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),t&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){this.current=e,this.updatedAt=e0.now(),null===this.canTrackVelocity&&void 0!==e&&(this.canTrackVelocity=e5(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new e3);let r=this.events[e].add(t);return"change"===e?()=>{r(),eQ.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(let e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e,t=!0){t&&this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e,t)}setWithVelocity(e,t,r){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return e8.current&&e8.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){let e=e0.now();if(!this.canTrackVelocity||void 0===this.prevFrameValue||e-this.updatedAt>e4)return 0;let t=Math.min(this.updatedAt-this.prevUpdatedAt,e4);return e6(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function e9(e,t){return new e7(e,t)}function te(e,t,r){e.hasValue(t)?e.getValue(t).set(r):e.addValue(t,e9(r))}function tt(e,t){let{transitionEnd:r={},transition:n={},...i}=Q(e,t)||{};for(let t in i={...i,...r}){let r=ez(i[t]);te(e,t,r)}}let tr=e=>!!(e&&e.getVelocity);function tn(e){return!!(tr(e)&&e.add)}function ti(e,t){let r=e.getValue("willChange");if(tn(r))return r.add(t)}let ts=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),ta="data-"+ts("framerAppearId");function to(e){return e.props[ta]}let tl={current:!1},tu=(e,t,r)=>(((1-3*r+3*t)*e+(3*r-6*t))*e+3*t)*e,tc=1e-7,th=12;function td(e,t,r,n,i){let s,a,o=0;do(s=tu(a=t+(r-t)/2,n,i)-e)>0?r=a:t=a;while(Math.abs(s)>tc&&++o<th);return a}function tp(e,t,r,n){if(e===t&&r===n)return eP;let i=t=>td(t,0,1,e,r);return e=>0===e||1===e?e:tu(i(e),t,n)}let tf=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,tm=e=>t=>1-e(1-t),tg=tp(.33,1.53,.69,.99),ty=tm(tg),tv=tf(ty),tb=e=>(e*=2)<1?.5*ty(e):.5*(2-Math.pow(2,-10*(e-1))),tS=e=>1-Math.sin(Math.acos(e)),tT=tm(tS),tw=tf(tS),tC=e=>/^0[^.\s]+$/u.test(e);function tx(e){return"number"==typeof e?0===e:null===e||"none"===e||"0"===e||tC(e)}let tE=(e,t,r)=>r>t?t:r<e?e:r,t_={test:e=>"number"==typeof e,parse:parseFloat,transform:e=>e},tI={...t_,transform:e=>tE(0,1,e)},tk={...t_,default:1},tA=e=>Math.round(1e5*e)/1e5,tR=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function tN(e){return null==e}let tD=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,tO=(e,t)=>r=>!!("string"==typeof r&&tD.test(r)&&r.startsWith(e)||t&&!tN(r)&&Object.prototype.hasOwnProperty.call(r,t)),tP=(e,t,r)=>n=>{if("string"!=typeof n)return n;let[i,s,a,o]=n.match(tR);return{[e]:parseFloat(i),[t]:parseFloat(s),[r]:parseFloat(a),alpha:void 0!==o?parseFloat(o):1}},tM=e=>tE(0,255,e),tL={...t_,transform:e=>Math.round(tM(e))},tB={test:tO("rgb","red"),parse:tP("red","green","blue"),transform:({red:e,green:t,blue:r,alpha:n=1})=>"rgba("+tL.transform(e)+", "+tL.transform(t)+", "+tL.transform(r)+", "+tA(tI.transform(n))+")"};function tj(e){let t="",r="",n="",i="";return e.length>5?(t=e.substring(1,3),r=e.substring(3,5),n=e.substring(5,7),i=e.substring(7,9)):(t=e.substring(1,2),r=e.substring(2,3),n=e.substring(3,4),i=e.substring(4,5),t+=t,r+=r,n+=n,i+=i),{red:parseInt(t,16),green:parseInt(r,16),blue:parseInt(n,16),alpha:i?parseInt(i,16)/255:1}}let tF={test:tO("#"),parse:tj,transform:tB.transform},tV=e=>({test:t=>"string"==typeof t&&t.endsWith(e)&&1===t.split(" ").length,parse:parseFloat,transform:t=>`${t}${e}`}),tU=tV("deg"),tq=tV("%"),tz=tV("px"),t$=tV("vh"),tG=tV("vw"),tH={...tq,parse:e=>tq.parse(e)/100,transform:e=>tq.transform(100*e)},tK={test:tO("hsl","hue"),parse:tP("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:r,alpha:n=1})=>"hsla("+Math.round(e)+", "+tq.transform(tA(t))+", "+tq.transform(tA(r))+", "+tA(tI.transform(n))+")"},tW={test:e=>tB.test(e)||tF.test(e)||tK.test(e),parse:e=>tB.test(e)?tB.parse(e):tK.test(e)?tK.parse(e):tF.parse(e),transform:e=>"string"==typeof e?e:e.hasOwnProperty("red")?tB.transform(e):tK.transform(e)},tQ=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu,tY="number",tJ="color",tX="var",tZ="var(",t0="${}",t1=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function t2(e){let t=e.toString(),r=[],n={color:[],number:[],var:[]},i=[],s=0,a=t.replace(t1,e=>(tW.test(e)?(n.color.push(s),i.push(tJ),r.push(tW.parse(e))):e.startsWith(tZ)?(n.var.push(s),i.push(tX),r.push(e)):(n.number.push(s),i.push(tY),r.push(parseFloat(e))),++s,t0)).split(t0);return{values:r,split:a,indexes:n,types:i}}function t3(e){return t2(e).values}function t6(e){let{split:t,types:r}=t2(e),n=t.length;return e=>{let i="";for(let s=0;s<n;s++)if(i+=t[s],void 0!==e[s]){let t=r[s];t===tY?i+=tA(e[s]):t===tJ?i+=tW.transform(e[s]):i+=e[s]}return i}}let t4=e=>"number"==typeof e?0:e;function t5(e){let t=t3(e);return t6(e)(t.map(t4))}let t8={test:function(e){var t,r;return isNaN(e)&&"string"==typeof e&&((null==(t=e.match(tR))?void 0:t.length)||0)+((null==(r=e.match(tQ))?void 0:r.length)||0)>0},parse:t3,createTransformer:t6,getAnimatableNone:t5},t7=new Set(["brightness","contrast","saturate","opacity"]);function t9(e){let[t,r]=e.slice(0,-1).split("(");if("drop-shadow"===t)return e;let[n]=r.match(tR)||[];if(!n)return e;let i=r.replace(n,""),s=+!!t7.has(t);return n!==r&&(s*=100),t+"("+s+i+")"}let re=/\b([a-z-]*)\(.*?\)/gu,rt={...t8,getAnimatableNone:e=>{let t=e.match(re);return t?t.map(t9).join(" "):e}},rr={borderWidth:tz,borderTopWidth:tz,borderRightWidth:tz,borderBottomWidth:tz,borderLeftWidth:tz,borderRadius:tz,radius:tz,borderTopLeftRadius:tz,borderTopRightRadius:tz,borderBottomRightRadius:tz,borderBottomLeftRadius:tz,width:tz,maxWidth:tz,height:tz,maxHeight:tz,top:tz,right:tz,bottom:tz,left:tz,padding:tz,paddingTop:tz,paddingRight:tz,paddingBottom:tz,paddingLeft:tz,margin:tz,marginTop:tz,marginRight:tz,marginBottom:tz,marginLeft:tz,backgroundPositionX:tz,backgroundPositionY:tz},rn={rotate:tU,rotateX:tU,rotateY:tU,rotateZ:tU,scale:tk,scaleX:tk,scaleY:tk,scaleZ:tk,skew:tU,skewX:tU,skewY:tU,distance:tz,translateX:tz,translateY:tz,translateZ:tz,x:tz,y:tz,z:tz,perspective:tz,transformPerspective:tz,opacity:tI,originX:tH,originY:tH,originZ:tz},ri={...t_,transform:Math.round},rs={...rr,...rn,zIndex:ri,size:tz,fillOpacity:tI,strokeOpacity:tI,numOctaves:ri},ra={...rs,color:tW,backgroundColor:tW,outlineColor:tW,fill:tW,stroke:tW,borderColor:tW,borderTopColor:tW,borderRightColor:tW,borderBottomColor:tW,borderLeftColor:tW,filter:rt,WebkitFilter:rt},ro=e=>ra[e];function rl(e,t){let r=ro(e);return r!==rt&&(r=t8),r.getAnimatableNone?r.getAnimatableNone(t):void 0}let ru=new Set(["auto","none","0"]);function rc(e,t,r){let n,i=0;for(;i<e.length&&!n;){let t=e[i];"string"==typeof t&&!ru.has(t)&&t2(t).values.length&&(n=e[i]),i++}if(n&&r)for(let i of t)e[i]=rl(r,n)}let rh=e=>e===t_||e===tz,rd=(e,t)=>parseFloat(e.split(", ")[t]),rp=(e,t)=>(r,{transform:n})=>{if("none"===n||!n)return 0;let i=n.match(/^matrix3d\((.+)\)$/u);if(i)return rd(i[1],t);{let t=n.match(/^matrix\((.+)\)$/u);return t?rd(t[1],e):0}},rf=new Set(["x","y","z"]),rm=eF.filter(e=>!rf.has(e));function rg(e){let t=[];return rm.forEach(r=>{let n=e.getValue(r);void 0!==n&&(t.push([r,n.get()]),n.set(+!!r.startsWith("scale")))}),t}let ry={width:({x:e},{paddingLeft:t="0",paddingRight:r="0"})=>e.max-e.min-parseFloat(t)-parseFloat(r),height:({y:e},{paddingTop:t="0",paddingBottom:r="0"})=>e.max-e.min-parseFloat(t)-parseFloat(r),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:rp(4,13),y:rp(5,14)};ry.translateX=ry.x,ry.translateY=ry.y;let rv=new Set,rb=!1,rS=!1;function rT(){if(rS){let e=Array.from(rv).filter(e=>e.needsMeasurement),t=new Set(e.map(e=>e.element)),r=new Map;t.forEach(e=>{let t=rg(e);t.length&&(r.set(e,t),e.render())}),e.forEach(e=>e.measureInitialState()),t.forEach(e=>{e.render();let t=r.get(e);t&&t.forEach(([t,r])=>{var n;null==(n=e.getValue(t))||n.set(r)})}),e.forEach(e=>e.measureEndState()),e.forEach(e=>{void 0!==e.suspendedScrollY&&window.scrollTo(0,e.suspendedScrollY)})}rS=!1,rb=!1,rv.forEach(e=>e.complete()),rv.clear()}function rw(){rv.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(rS=!0)})}function rC(){rw(),rT()}class rx{constructor(e,t,r,n,i,s=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=r,this.motionValue=n,this.element=i,this.isAsync=s}scheduleResolve(){this.isScheduled=!0,this.isAsync?(rv.add(this),rb||(rb=!0,eQ.read(rw),eQ.resolveKeyframes(rT))):(this.readKeyframes(),this.complete())}readKeyframes(){let{unresolvedKeyframes:e,name:t,element:r,motionValue:n}=this;for(let i=0;i<e.length;i++)if(null===e[i])if(0===i){let i=null==n?void 0:n.get(),s=e[e.length-1];if(void 0!==i)e[0]=i;else if(r&&t){let n=r.readValue(t,s);null!=n&&(e[0]=n)}void 0===e[0]&&(e[0]=s),n&&void 0===i&&n.set(e[0])}else e[i]=e[i-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),rv.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,rv.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}let rE=eP,r_=eP,rI=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e),rk=e=>t=>"string"==typeof t&&t.startsWith(e),rA=rk("--"),rR=rk("var(--"),rN=e=>!!rR(e)&&rD.test(e.split("/*")[0].trim()),rD=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,rO=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function rP(e){let t=rO.exec(e);if(!t)return[,];let[,r,n,i]=t;return[`--${null!=r?r:n}`,i]}let rM=4;function rL(e,t,r=1){r_(r<=rM,`Max CSS variable fallback depth detected in property "${e}". This may indicate a circular fallback dependency.`);let[n,i]=rP(e);if(!n)return;let s=window.getComputedStyle(t).getPropertyValue(n);if(s){let e=s.trim();return rI(e)?parseFloat(e):e}return rN(i)?rL(i,t,r+1):i}let rB=e=>t=>t.test(e),rj=[t_,tz,tq,tU,tG,t$,{test:e=>"auto"===e,parse:e=>e}],rF=e=>rj.find(rB(e));class rV extends rx{constructor(e,t,r,n,i){super(e,t,r,n,i,!0)}readKeyframes(){let{unresolvedKeyframes:e,element:t,name:r}=this;if(!t||!t.current)return;super.readKeyframes();for(let r=0;r<e.length;r++){let n=e[r];if("string"==typeof n&&rN(n=n.trim())){let i=rL(n,t.current);void 0!==i&&(e[r]=i),r===e.length-1&&(this.finalKeyframe=n)}}if(this.resolveNoneKeyframes(),!eU.has(r)||2!==e.length)return;let[n,i]=e,s=rF(n),a=rF(i);if(s!==a)if(rh(s)&&rh(a))for(let t=0;t<e.length;t++){let r=e[t];"string"==typeof r&&(e[t]=parseFloat(r))}else this.needsMeasurement=!0}resolveNoneKeyframes(){let{unresolvedKeyframes:e,name:t}=this,r=[];for(let t=0;t<e.length;t++)tx(e[t])&&r.push(t);r.length&&rc(e,r,t)}measureInitialState(){let{element:e,unresolvedKeyframes:t,name:r}=this;if(!e||!e.current)return;"height"===r&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=ry[r](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;let n=t[t.length-1];void 0!==n&&e.getValue(r,n).jump(n,!1)}measureEndState(){var e;let{element:t,name:r,unresolvedKeyframes:n}=this;if(!t||!t.current)return;let i=t.getValue(r);i&&i.jump(this.measuredOrigin,!1);let s=n.length-1,a=n[s];n[s]=ry[r](t.measureViewportBox(),window.getComputedStyle(t.current)),null!==a&&void 0===this.finalKeyframe&&(this.finalKeyframe=a),(null==(e=this.removedTransforms)?void 0:e.length)&&this.removedTransforms.forEach(([e,r])=>{t.getValue(e).set(r)}),this.resolveNoneKeyframes()}}let rU=(e,t)=>"zIndex"!==t&&!!("number"==typeof e||Array.isArray(e)||"string"==typeof e&&(t8.test(e)||"0"===e)&&!e.startsWith("url("));function rq(e){let t=e[0];if(1===e.length)return!0;for(let r=0;r<e.length;r++)if(e[r]!==t)return!0}function rz(e,t,r,n){let i=e[0];if(null===i)return!1;if("display"===t||"visibility"===t)return!0;let s=e[e.length-1],a=rU(i,t),o=rU(s,t);return rE(a===o,`You are trying to animate ${t} from "${i}" to "${s}". ${i} is not an animatable value - to enable this animation set ${i} to a value animatable to ${s} via the \`style\` property.`),!!a&&!!o&&(rq(e)||("spring"===r||es(r))&&n)}let r$=e=>null!==e;function rG(e,{repeat:t,repeatType:r="loop"},n){let i=e.filter(r$),s=t&&"loop"!==r&&t%2==1?0:i.length-1;return s&&void 0!==n?n:i[s]}let rH=40;class rK{constructor({autoplay:e=!0,delay:t=0,type:r="keyframes",repeat:n=0,repeatDelay:i=0,repeatType:s="loop",...a}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=e0.now(),this.options={autoplay:e,delay:t,type:r,repeat:n,repeatDelay:i,repeatType:s,...a},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt&&this.resolvedAt-this.createdAt>rH?this.resolvedAt:this.createdAt}get resolved(){return this._resolved||this.hasAttemptedResolve||rC(),this._resolved}onKeyframesResolved(e,t){this.resolvedAt=e0.now(),this.hasAttemptedResolve=!0;let{name:r,type:n,velocity:i,delay:s,onComplete:a,onUpdate:o,isGenerator:l}=this.options;if(!l&&!rz(e,r,n,i))if(tl.current||!s){o&&o(rG(e,this.options,t)),a&&a(),this.resolveFinishedPromise();return}else this.options.duration=0;let u=this.initPlayback(e,t);!1!==u&&(this._resolved={keyframes:e,finalKeyframe:t,...u},this.onPostResolved())}onPostResolved(){}then(e,t){return this.currentFinishedPromise.then(e,t)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}let rW=(e,t,r)=>e+(t-e)*r;function rQ(e,t,r){return(r<0&&(r+=1),r>1&&(r-=1),r<1/6)?e+(t-e)*6*r:r<.5?t:r<2/3?e+(t-e)*(2/3-r)*6:e}function rY({hue:e,saturation:t,lightness:r,alpha:n}){e/=360,r/=100;let i=0,s=0,a=0;if(t/=100){let n=r<.5?r*(1+t):r+t-r*t,o=2*r-n;i=rQ(o,n,e+1/3),s=rQ(o,n,e),a=rQ(o,n,e-1/3)}else i=s=a=r;return{red:Math.round(255*i),green:Math.round(255*s),blue:Math.round(255*a),alpha:n}}function rJ(e,t){return r=>r>0?t:e}let rX=(e,t,r)=>{let n=e*e,i=r*(t*t-n)+n;return i<0?0:Math.sqrt(i)},rZ=[tF,tB,tK],r0=e=>rZ.find(t=>t.test(e));function r1(e){let t=r0(e);if(rE(!!t,`'${e}' is not an animatable color. Use the equivalent color code instead.`),!t)return!1;let r=t.parse(e);return t===tK&&(r=rY(r)),r}let r2=(e,t)=>{let r=r1(e),n=r1(t);if(!r||!n)return rJ(e,t);let i={...r};return e=>(i.red=rX(r.red,n.red,e),i.green=rX(r.green,n.green,e),i.blue=rX(r.blue,n.blue,e),i.alpha=rW(r.alpha,n.alpha,e),tB.transform(i))},r3=(e,t)=>r=>t(e(r)),r6=(...e)=>e.reduce(r3),r4=new Set(["none","hidden"]);function r5(e,t){return r4.has(e)?r=>r<=0?e:t:r=>r>=1?t:e}function r8(e,t){return r=>rW(e,t,r)}function r7(e){return"number"==typeof e?r8:"string"==typeof e?rN(e)?rJ:tW.test(e)?r2:nr:Array.isArray(e)?r9:"object"==typeof e?tW.test(e)?r2:ne:rJ}function r9(e,t){let r=[...e],n=r.length,i=e.map((e,r)=>r7(e)(e,t[r]));return e=>{for(let t=0;t<n;t++)r[t]=i[t](e);return r}}function ne(e,t){let r={...e,...t},n={};for(let i in r)void 0!==e[i]&&void 0!==t[i]&&(n[i]=r7(e[i])(e[i],t[i]));return e=>{for(let t in n)r[t]=n[t](e);return r}}function nt(e,t){var r;let n=[],i={color:0,var:0,number:0};for(let s=0;s<t.values.length;s++){let a=t.types[s],o=e.indexes[a][i[a]],l=null!=(r=e.values[o])?r:0;n[s]=l,i[a]++}return n}let nr=(e,t)=>{let r=t8.createTransformer(t),n=t2(e),i=t2(t);return n.indexes.var.length===i.indexes.var.length&&n.indexes.color.length===i.indexes.color.length&&n.indexes.number.length>=i.indexes.number.length?r4.has(e)&&!i.values.length||r4.has(t)&&!n.values.length?r5(e,t):r6(r9(nt(n,i),i.values),r):(rE(!0,`Complex values '${e}' and '${t}' too different to mix. Ensure all colors are of the same type, and that each contains the same quantity of number and color values. Falling back to instant transition.`),rJ(e,t))};function nn(e,t,r){return"number"==typeof e&&"number"==typeof t&&"number"==typeof r?rW(e,t,r):r7(e)(e,t)}let ni=5;function ns(e,t,r){let n=Math.max(t-ni,0);return e6(r-e(n),t-n)}let na={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},no=.001;function nl({duration:e=na.duration,bounce:t=na.bounce,velocity:r=na.velocity,mass:n=na.mass}){let i,s;rE(e<=eD(na.maxDuration),"Spring duration must be 10 seconds or less");let a=1-t;a=tE(na.minDamping,na.maxDamping,a),e=tE(na.minDuration,na.maxDuration,eO(e)),a<1?(i=t=>{let n=t*a,i=n*e;return no-(n-r)/nh(t,a)*Math.exp(-i)},s=t=>{let n=t*a*e,s=n*r+r,o=Math.pow(a,2)*Math.pow(t,2)*e,l=Math.exp(-n),u=nh(Math.pow(t,2),a);return(s-o)*l*(-i(t)+no>0?-1:1)/u}):(i=t=>-no+Math.exp(-t*e)*((t-r)*e+1),s=t=>e*e*(r-t)*Math.exp(-t*e));let o=nc(i,s,5/e);if(e=eD(e),isNaN(o))return{stiffness:na.stiffness,damping:na.damping,duration:e};{let t=Math.pow(o,2)*n;return{stiffness:t,damping:2*a*Math.sqrt(n*t),duration:e}}}let nu=12;function nc(e,t,r){let n=r;for(let r=1;r<nu;r++)n-=e(n)/t(n);return n}function nh(e,t){return e*Math.sqrt(1-t*t)}let nd=["duration","bounce"],np=["stiffness","damping","mass"];function nf(e,t){return t.some(t=>void 0!==e[t])}function nm(e){let t={velocity:na.velocity,stiffness:na.stiffness,damping:na.damping,mass:na.mass,isResolvedFromDuration:!1,...e};if(!nf(e,np)&&nf(e,nd))if(e.visualDuration){let r=2*Math.PI/(1.2*e.visualDuration),n=r*r,i=2*tE(.05,1,1-(e.bounce||0))*Math.sqrt(n);t={...t,mass:na.mass,stiffness:n,damping:i}}else{let r=nl(e);(t={...t,...r,mass:na.mass}).isResolvedFromDuration=!0}return t}function ng(e=na.visualDuration,t=na.bounce){let r,n="object"!=typeof e?{visualDuration:e,keyframes:[0,1],bounce:t}:e,{restSpeed:i,restDelta:s}=n,a=n.keyframes[0],o=n.keyframes[n.keyframes.length-1],l={done:!1,value:a},{stiffness:u,damping:c,mass:h,duration:d,velocity:p,isResolvedFromDuration:f}=nm({...n,velocity:-eO(n.velocity||0)}),m=p||0,g=c/(2*Math.sqrt(u*h)),y=o-a,v=eO(Math.sqrt(u/h)),b=5>Math.abs(y);if(i||(i=b?na.restSpeed.granular:na.restSpeed.default),s||(s=b?na.restDelta.granular:na.restDelta.default),g<1){let e=nh(v,g);r=t=>o-Math.exp(-g*v*t)*((m+g*v*y)/e*Math.sin(e*t)+y*Math.cos(e*t))}else if(1===g)r=e=>o-Math.exp(-v*e)*(y+(m+v*y)*e);else{let e=v*Math.sqrt(g*g-1);r=t=>{let r=Math.exp(-g*v*t),n=Math.min(e*t,300);return o-r*((m+g*v*y)*Math.sinh(n)+e*y*Math.cosh(n))/e}}let S={calculatedDuration:f&&d||null,next:e=>{let t=r(e);if(f)l.done=e>=d;else{let n=0;g<1&&(n=0===e?eD(m):ns(r,e,t));let a=Math.abs(o-t)<=s;l.done=Math.abs(n)<=i&&a}return l.value=l.done?o:t,l},toString:()=>{let e=Math.min(ei(S),en),t=eh(t=>S.next(e*t).value,e,30);return e+"ms "+t}};return S}function ny({keyframes:e,velocity:t=0,power:r=.8,timeConstant:n=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:a,min:o,max:l,restDelta:u=.5,restSpeed:c}){let h,d,p=e[0],f={done:!1,value:p},m=e=>void 0!==o&&e<o||void 0!==l&&e>l,g=e=>void 0===o?l:void 0===l||Math.abs(o-e)<Math.abs(l-e)?o:l,y=r*t,v=p+y,b=void 0===a?v:a(v);b!==v&&(y=b-p);let S=e=>-y*Math.exp(-e/n),T=e=>b+S(e),w=e=>{let t=S(e),r=T(e);f.done=Math.abs(t)<=u,f.value=f.done?b:r},C=e=>{m(f.value)&&(h=e,d=ng({keyframes:[f.value,g(f.value)],velocity:ns(T,e,f.value),damping:i,stiffness:s,restDelta:u,restSpeed:c}))};return C(0),{calculatedDuration:null,next:e=>{let t=!1;return(d||void 0!==h||(t=!0,w(e),C(e)),void 0!==h&&e>=h)?d.next(e-h):(t||w(e),f)}}}let nv=tp(.42,0,1,1),nb=tp(0,0,.58,1),nS=tp(.42,0,.58,1),nT=e=>Array.isArray(e)&&"number"!=typeof e[0],nw={linear:eP,easeIn:nv,easeInOut:nS,easeOut:nb,circIn:tS,circInOut:tw,circOut:tT,backIn:ty,backInOut:tv,backOut:tg,anticipate:tb},nC=e=>{if(eo(e)){r_(4===e.length,"Cubic bezier arrays must contain four numerical values.");let[t,r,n,i]=e;return tp(t,r,n,i)}return"string"==typeof e?(r_(void 0!==nw[e],`Invalid easing type '${e}'`),nw[e]):e};function nx(e,t,r){let n=[],i=r||nn,s=e.length-1;for(let r=0;r<s;r++){let s=i(e[r],e[r+1]);t&&(s=r6(Array.isArray(t)?t[r]||eP:t,s)),n.push(s)}return n}function nE(e,t,{clamp:r=!0,ease:n,mixer:i}={}){let s=e.length;if(r_(s===t.length,"Both input and output ranges must be the same length"),1===s)return()=>t[0];if(2===s&&t[0]===t[1])return()=>t[1];let a=e[0]===e[1];e[0]>e[s-1]&&(e=[...e].reverse(),t=[...t].reverse());let o=nx(t,n,i),l=o.length,u=r=>{if(a&&r<e[0])return t[0];let n=0;if(l>1)for(;n<e.length-2&&!(r<e[n+1]);n++);let i=ec(e[n],e[n+1],r);return o[n](i)};return r?t=>u(tE(e[0],e[s-1],t)):u}function n_(e,t){let r=e[e.length-1];for(let n=1;n<=t;n++){let i=ec(0,t,n);e.push(rW(r,1,i))}}function nI(e){let t=[0];return n_(t,e.length-1),t}function nk(e,t){return e.map(e=>e*t)}function nA(e,t){return e.map(()=>t||nS).splice(0,e.length-1)}function nR({duration:e=300,keyframes:t,times:r,ease:n="easeInOut"}){let i=nT(n)?n.map(nC):nC(n),s={done:!1,value:t[0]},a=nE(nk(r&&r.length===t.length?r:nI(t),e),t,{ease:Array.isArray(i)?i:nA(t,i)});return{calculatedDuration:e,next:t=>(s.value=a(t),s.done=t>=e,s)}}let nN=e=>{let t=({timestamp:t})=>e(t);return{start:()=>eQ.update(t,!0),stop:()=>eY(t),now:()=>eJ.isProcessing?eJ.timestamp:e0.now()}},nD={decay:ny,inertia:ny,tween:nR,keyframes:nR,spring:ng},nO=e=>e/100;class nP extends rK{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,"idle"===this.state)return;this.teardown();let{onStop:e}=this.options;e&&e()};let{name:t,motionValue:r,element:n,keyframes:i}=this.options,s=(null==n?void 0:n.KeyframeResolver)||rx,a=(e,t)=>this.onKeyframesResolved(e,t);this.resolver=new s(i,a,t,r,n),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){let t,r,{type:n="keyframes",repeat:i=0,repeatDelay:s=0,repeatType:a,velocity:o=0}=this.options,l=es(n)?n:nD[n]||nR;l!==nR&&"number"!=typeof e[0]&&(t=r6(nO,nn(e[0],e[1])),e=[0,100]);let u=l({...this.options,keyframes:e});"mirror"===a&&(r=l({...this.options,keyframes:[...e].reverse(),velocity:-o})),null===u.calculatedDuration&&(u.calculatedDuration=ei(u));let{calculatedDuration:c}=u,h=c+s,d=h*(i+1)-s;return{generator:u,mirroredGenerator:r,mapPercentToKeyframes:t,calculatedDuration:c,resolvedDuration:h,totalDuration:d}}onPostResolved(){let{autoplay:e=!0}=this.options;this.play(),"paused"!==this.pendingPlayState&&e?this.state=this.pendingPlayState:this.pause()}tick(e,t=!1){let{resolved:r}=this;if(!r){let{keyframes:e}=this.options;return{done:!0,value:e[e.length-1]}}let{finalKeyframe:n,generator:i,mirroredGenerator:s,mapPercentToKeyframes:a,keyframes:o,calculatedDuration:l,totalDuration:u,resolvedDuration:c}=r;if(null===this.startTime)return i.next(0);let{delay:h,repeat:d,repeatType:p,repeatDelay:f,onUpdate:m}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-u/this.speed,this.startTime)),t?this.currentTime=e:null!==this.holdTime?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;let g=this.currentTime-h*(this.speed>=0?1:-1),y=this.speed>=0?g<0:g>u;this.currentTime=Math.max(g,0),"finished"===this.state&&null===this.holdTime&&(this.currentTime=u);let v=this.currentTime,b=i;if(d){let e=Math.min(this.currentTime,u)/c,t=Math.floor(e),r=e%1;!r&&e>=1&&(r=1),1===r&&t--,(t=Math.min(t,d+1))%2&&("reverse"===p?(r=1-r,f&&(r-=f/c)):"mirror"===p&&(b=s)),v=tE(0,1,r)*c}let S=y?{done:!1,value:o[0]}:b.next(v);a&&(S.value=a(S.value));let{done:T}=S;y||null===l||(T=this.speed>=0?this.currentTime>=u:this.currentTime<=0);let w=null===this.holdTime&&("finished"===this.state||"running"===this.state&&T);return w&&void 0!==n&&(S.value=rG(o,this.options,n)),m&&m(S.value),w&&this.finish(),S}get duration(){let{resolved:e}=this;return e?eO(e.calculatedDuration):0}get time(){return eO(this.currentTime)}set time(e){e=eD(e),this.currentTime=e,null!==this.holdTime||0===this.speed?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){let t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=eO(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;let{driver:e=nN,onPlay:t,startTime:r}=this.options;this.driver||(this.driver=e(e=>this.tick(e))),t&&t();let n=this.driver.now();null!==this.holdTime?this.startTime=n-this.holdTime:this.startTime?"finished"===this.state&&(this.startTime=n):this.startTime=null!=r?r:this.calcStartTime(),"finished"===this.state&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=null!=(e=this.currentTime)?e:0}complete(){"running"!==this.state&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";let{onComplete:e}=this.options;e&&e()}cancel(){null!==this.cancelTime&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}let nM=new Set(["opacity","clipPath","filter","transform"]);function nL(e,t,r,{delay:n=0,duration:i=300,repeat:s=0,repeatType:a="loop",ease:o="easeInOut",times:l}={}){let u={[t]:r};l&&(u.offset=l);let c=em(o,i);return Array.isArray(c)&&(u.easing=c),e.animate(u,{delay:n,duration:i,easing:Array.isArray(c)?"linear":c,fill:"both",iterations:s+1,direction:"reverse"===a?"alternate":"normal"})}let nB=X(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),nj=10,nF=2e4;function nV(e){return es(e.type)||"spring"===e.type||!ed(e.ease)}function nU(e,t){let r=new nP({...t,keyframes:e,repeat:0,delay:0,isGenerator:!0}),n={done:!1,value:e[0]},i=[],s=0;for(;!n.done&&s<nF;)i.push((n=r.sample(s)).value),s+=nj;return{times:void 0,keyframes:i,duration:s-nj,ease:"linear"}}let nq={anticipate:tb,backInOut:tv,circInOut:tw};function nz(e){return e in nq}class n$ extends rK{constructor(e){super(e);let{name:t,motionValue:r,element:n,keyframes:i}=this.options;this.resolver=new rV(i,(e,t)=>this.onKeyframesResolved(e,t),t,r,n),this.resolver.scheduleResolve()}initPlayback(e,t){let{duration:r=300,times:n,ease:i,type:s,motionValue:a,name:o,startTime:l}=this.options;if(!a.owner||!a.owner.current)return!1;if("string"==typeof i&&eu()&&nz(i)&&(i=nq[i]),nV(this.options)){let{onComplete:t,onUpdate:a,motionValue:o,element:l,...u}=this.options,c=nU(e,u);1===(e=c.keyframes).length&&(e[1]=e[0]),r=c.duration,n=c.times,i=c.ease,s="keyframes"}let u=nL(a.owner.current,o,e,{...this.options,duration:r,times:n,ease:i});return u.startTime=null!=l?l:this.calcStartTime(),this.pendingTimeline?(ea(u,this.pendingTimeline),this.pendingTimeline=void 0):u.onfinish=()=>{let{onComplete:r}=this.options;a.set(rG(e,this.options,t)),r&&r(),this.cancel(),this.resolveFinishedPromise()},{animation:u,duration:r,times:n,type:s,ease:i,keyframes:e}}get duration(){let{resolved:e}=this;if(!e)return 0;let{duration:t}=e;return eO(t)}get time(){let{resolved:e}=this;if(!e)return 0;let{animation:t}=e;return eO(t.currentTime||0)}set time(e){let{resolved:t}=this;if(!t)return;let{animation:r}=t;r.currentTime=eD(e)}get speed(){let{resolved:e}=this;if(!e)return 1;let{animation:t}=e;return t.playbackRate}set speed(e){let{resolved:t}=this;if(!t)return;let{animation:r}=t;r.playbackRate=e}get state(){let{resolved:e}=this;if(!e)return"idle";let{animation:t}=e;return t.playState}get startTime(){let{resolved:e}=this;if(!e)return null;let{animation:t}=e;return t.startTime}attachTimeline(e){if(this._resolved){let{resolved:t}=this;if(!t)return eP;let{animation:r}=t;ea(r,e)}else this.pendingTimeline=e;return eP}play(){if(this.isStopped)return;let{resolved:e}=this;if(!e)return;let{animation:t}=e;"finished"===t.playState&&this.updateFinishedPromise(),t.play()}pause(){let{resolved:e}=this;if(!e)return;let{animation:t}=e;t.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,"idle"===this.state)return;this.resolveFinishedPromise(),this.updateFinishedPromise();let{resolved:e}=this;if(!e)return;let{animation:t,keyframes:r,duration:n,type:i,ease:s,times:a}=e;if("idle"===t.playState||"finished"===t.playState)return;if(this.time){let{motionValue:e,onUpdate:t,onComplete:o,element:l,...u}=this.options,c=new nP({...u,keyframes:r,duration:n,type:i,ease:s,times:a,isGenerator:!0}),h=eD(this.time);e.setWithVelocity(c.sample(h-nj).value,c.sample(h).value,nj)}let{onStop:o}=this.options;o&&o(),this.cancel()}complete(){let{resolved:e}=this;e&&e.animation.finish()}cancel(){let{resolved:e}=this;e&&e.animation.cancel()}static supports(e){let{motionValue:t,name:r,repeatDelay:n,repeatType:i,damping:s,type:a}=e;if(!t||!t.owner||!(t.owner.current instanceof HTMLElement))return!1;let{onUpdate:o,transformTemplate:l}=t.owner.getProps();return nB()&&r&&nM.has(r)&&!o&&!l&&!n&&"mirror"!==i&&0!==s&&"inertia"!==a}}let nG={type:"spring",stiffness:500,damping:25,restSpeed:10},nH=e=>({type:"spring",stiffness:550,damping:0===e?2*Math.sqrt(550):30,restSpeed:10}),nK={type:"keyframes",duration:.8},nW={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},nQ=(e,{keyframes:t})=>t.length>2?nK:eV.has(e)?e.startsWith("scale")?nH(t[1]):nG:nW;function nY({when:e,delay:t,delayChildren:r,staggerChildren:n,staggerDirection:i,repeat:s,repeatType:a,repeatDelay:o,from:l,elapsed:u,...c}){return!!Object.keys(c).length}let nJ=(e,t,r,n={},i,s)=>a=>{let o=er(n,e)||{},l=o.delay||n.delay||0,{elapsed:u=0}=n;u-=eD(l);let c={keyframes:Array.isArray(r)?r:[null,r],ease:"easeOut",velocity:t.getVelocity(),...o,delay:-u,onUpdate:e=>{t.set(e),o.onUpdate&&o.onUpdate(e)},onComplete:()=>{a(),o.onComplete&&o.onComplete()},name:e,motionValue:t,element:s?void 0:i};nY(o)||(c={...c,...nQ(e,c)}),c.duration&&(c.duration=eD(c.duration)),c.repeatDelay&&(c.repeatDelay=eD(c.repeatDelay)),void 0!==c.from&&(c.keyframes[0]=c.from);let h=!1;if(!1!==c.type&&(0!==c.duration||c.repeatDelay)||(c.duration=0,0===c.delay&&(h=!0)),(tl.current||e$.skipAnimations)&&(h=!0,c.duration=0,c.delay=0),h&&!s&&void 0!==t.get()){let e=rG(c.keyframes,o);if(void 0!==e)return eQ.update(()=>{c.onUpdate(e),c.onComplete()}),new et([])}return!s&&n$.supports(c)?new n$(c):new nP(c)};function nX({protectedKeys:e,needsAnimating:t},r){let n=e.hasOwnProperty(r)&&!0!==t[r];return t[r]=!1,n}function nZ(e,t,{delay:r=0,transitionOverride:n,type:i}={}){var s;let{transition:a=e.getDefaultTransition(),transitionEnd:o,...l}=t;n&&(a=n);let u=[],c=i&&e.animationState&&e.animationState.getState()[i];for(let t in l){let n=e.getValue(t,null!=(s=e.latestValues[t])?s:null),i=l[t];if(void 0===i||c&&nX(c,t))continue;let o={delay:r,...er(a||{},t)},h=!1;if(window.MotionHandoffAnimation){let r=to(e);if(r){let e=window.MotionHandoffAnimation(r,t,eQ);null!==e&&(o.startTime=e,h=!0)}}ti(e,t),n.start(nJ(t,n,i,e.shouldReduceMotion&&eU.has(t)?{type:!1}:o,e,h));let d=n.animation;d&&u.push(d)}return o&&Promise.all(u).then(()=>{eQ.update(()=>{o&&tt(e,o)})}),u}function n0(e,t,r={}){var n;let i=Q(e,t,"exit"===r.type?null==(n=e.presenceContext)?void 0:n.custom:void 0),{transition:s=e.getDefaultTransition()||{}}=i||{};r.transitionOverride&&(s=r.transitionOverride);let a=i?()=>Promise.all(nZ(e,i,r)):()=>Promise.resolve(),o=e.variantChildren&&e.variantChildren.size?(n=0)=>{let{delayChildren:i=0,staggerChildren:a,staggerDirection:o}=s;return n1(e,t,i+n,a,o,r)}:()=>Promise.resolve(),{when:l}=s;if(!l)return Promise.all([a(),o(r.delay)]);{let[e,t]="beforeChildren"===l?[a,o]:[o,a];return e().then(()=>t())}}function n1(e,t,r=0,n=0,i=1,s){let a=[],o=(e.variantChildren.size-1)*n,l=1===i?(e=0)=>e*n:(e=0)=>o-e*n;return Array.from(e.variantChildren).sort(n2).forEach((e,n)=>{e.notify("AnimationStart",t),a.push(n0(e,t,{...s,delay:r+l(n)}).then(()=>e.notify("AnimationComplete",t)))}),Promise.all(a)}function n2(e,t){return e.sortNodePosition(t)}function n3(e,t,r={}){let n;if(e.notify("AnimationStart",t),Array.isArray(t))n=Promise.all(t.map(t=>n0(e,t,r)));else if("string"==typeof t)n=n0(e,t,r);else{let i="function"==typeof t?Q(e,t,r.custom):t;n=Promise.all(nZ(e,i,r))}return n.then(()=>{e.notify("AnimationComplete",t)})}let n6=J.length;function n4(e){if(!e)return;if(!e.isControllingVariants){let t=e.parent&&n4(e.parent)||{};return void 0!==e.props.initial&&(t.initial=e.props.initial),t}let t={};for(let r=0;r<n6;r++){let n=J[r],i=e.props[n];(H(i)||!1===i)&&(t[n]=i)}return t}let n5=[...Y].reverse(),n8=Y.length;function n7(e){return t=>Promise.all(t.map(({animation:t,options:r})=>n3(e,t,r)))}function n9(e){let t=n7(e),r=ir(),n=!0,i=t=>(r,n)=>{var i;let s=Q(e,n,"exit"===t?null==(i=e.presenceContext)?void 0:i.custom:void 0);if(s){let{transition:e,transitionEnd:t,...n}=s;r={...r,...n,...t}}return r};function s(s){let{props:a}=e,o=n4(e.parent)||{},l=[],u=new Set,c={},h=1/0;for(let t=0;t<n8;t++){let d=n5[t],p=r[d],f=void 0!==a[d]?a[d]:o[d],m=H(f),g=d===s?p.isActive:null;!1===g&&(h=t);let y=f===o[d]&&f!==a[d]&&m;if(y&&n&&e.manuallyAnimateOnMount&&(y=!1),p.protectedKeys={...c},!p.isActive&&null===g||!f&&!p.prevProp||z(f)||"boolean"==typeof f)continue;let v=ie(p.prevProp,f),b=v||d===s&&p.isActive&&!y&&m||t>h&&m,S=!1,T=Array.isArray(f)?f:[f],w=T.reduce(i(d),{});!1===g&&(w={});let{prevResolvedValues:C={}}=p,x={...C,...w},E=t=>{b=!0,u.has(t)&&(S=!0,u.delete(t)),p.needsAnimating[t]=!0;let r=e.getValue(t);r&&(r.liveStyle=!1)};for(let e in x){let t=w[e],r=C[e];if(c.hasOwnProperty(e))continue;let n=!1;(n=$(t)&&$(r)?!G(t,r):t!==r)?null!=t?E(e):u.add(e):void 0!==t&&u.has(e)?E(e):p.protectedKeys[e]=!0}p.prevProp=f,p.prevResolvedValues=w,p.isActive&&(c={...c,...w}),n&&e.blockInitialAnimation&&(b=!1);let _=!(y&&v)||S;b&&_&&l.push(...T.map(e=>({animation:e,options:{type:d}})))}if(u.size){let t={};u.forEach(r=>{let n=e.getBaseTarget(r),i=e.getValue(r);i&&(i.liveStyle=!0),t[r]=null!=n?n:null}),l.push({animation:t})}let d=!!l.length;return n&&(!1===a.initial||a.initial===a.animate)&&!e.manuallyAnimateOnMount&&(d=!1),n=!1,d?t(l):Promise.resolve()}function a(t,n){var i;if(r[t].isActive===n)return Promise.resolve();null==(i=e.variantChildren)||i.forEach(e=>{var r;return null==(r=e.animationState)?void 0:r.setActive(t,n)}),r[t].isActive=n;let a=s(t);for(let e in r)r[e].protectedKeys={};return a}return{animateChanges:s,setActive:a,setAnimateFunction:function(r){t=r(e)},getState:()=>r,reset:()=>{r=ir(),n=!0}}}function ie(e,t){return"string"==typeof t?t!==e:!!Array.isArray(t)&&!G(t,e)}function it(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function ir(){return{animate:it(!0),whileInView:it(),whileHover:it(),whileTap:it(),whileDrag:it(),whileFocus:it(),exit:it()}}class ii{constructor(e){this.isMounted=!1,this.node=e}update(){}}class is extends ii{constructor(e){super(e),e.animationState||(e.animationState=n9(e))}updateAnimationControlsSubscription(){let{animate:e}=this.node.getProps();z(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){let{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),null==(e=this.unmountControls)||e.call(this)}}let ia=0;class io extends ii{constructor(){super(...arguments),this.id=ia++}update(){if(!this.node.presenceContext)return;let{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;let n=this.node.animationState.setActive("exit",!e);t&&!e&&n.then(()=>t(this.id))}mount(){let{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}let il={animation:{Feature:is},exit:{Feature:io}};function iu(e,t,r,n={passive:!0}){return e.addEventListener(t,r,n),()=>e.removeEventListener(t,r)}function ic(e){return{point:{x:e.pageX,y:e.pageY}}}let ih=e=>t=>eC(t)&&e(t,ic(t));function id(e,t,r,n){return iu(e,t,ih(r),n)}let ip=(e,t)=>Math.abs(e-t);function im(e,t){return Math.sqrt(ip(e.x,t.x)**2+ip(e.y,t.y)**2)}class ig{constructor(e,t,{transformPagePoint:r,contextWindow:n,dragSnapToOrigin:i=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;let e=ib(this.lastMoveEventInfo,this.history),t=null!==this.startEvent,r=im(e.offset,{x:0,y:0})>=3;if(!t&&!r)return;let{point:n}=e,{timestamp:i}=eJ;this.history.push({...n,timestamp:i});let{onStart:s,onMove:a}=this.handlers;t||(s&&s(this.lastMoveEvent,e),this.startEvent=this.lastMoveEvent),a&&a(this.lastMoveEvent,e)},this.handlePointerMove=(e,t)=>{this.lastMoveEvent=e,this.lastMoveEventInfo=iy(t,this.transformPagePoint),eQ.update(this.updatePoint,!0)},this.handlePointerUp=(e,t)=>{this.end();let{onEnd:r,onSessionEnd:n,resumeAnimation:i}=this.handlers;if(this.dragSnapToOrigin&&i&&i(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;let s=ib("pointercancel"===e.type?this.lastMoveEventInfo:iy(t,this.transformPagePoint),this.history);this.startEvent&&r&&r(e,s),n&&n(e,s)},!eC(e))return;this.dragSnapToOrigin=i,this.handlers=t,this.transformPagePoint=r,this.contextWindow=n||window;let s=iy(ic(e),this.transformPagePoint),{point:a}=s,{timestamp:o}=eJ;this.history=[{...a,timestamp:o}];let{onSessionStart:l}=t;l&&l(e,ib(s,this.history)),this.removeListeners=r6(id(this.contextWindow,"pointermove",this.handlePointerMove),id(this.contextWindow,"pointerup",this.handlePointerUp),id(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),eY(this.updatePoint)}}function iy(e,t){return t?{point:t(e.point)}:e}function iv(e,t){return{x:e.x-t.x,y:e.y-t.y}}function ib({point:e},t){return{point:e,delta:iv(e,iT(t)),offset:iv(e,iS(t)),velocity:iw(t,.1)}}function iS(e){return e[0]}function iT(e){return e[e.length-1]}function iw(e,t){if(e.length<2)return{x:0,y:0};let r=e.length-1,n=null,i=iT(e);for(;r>=0&&(n=e[r],!(i.timestamp-n.timestamp>eD(t)));)r--;if(!n)return{x:0,y:0};let s=eO(i.timestamp-n.timestamp);if(0===s)return{x:0,y:0};let a={x:(i.x-n.x)/s,y:(i.y-n.y)/s};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}function iC(e){return e&&"object"==typeof e&&Object.prototype.hasOwnProperty.call(e,"current")}let ix=.9999,iE=1.0001,i_=-.01,iI=.01;function ik(e){return e.max-e.min}function iA(e,t,r){return Math.abs(e-t)<=r}function iR(e,t,r,n=.5){e.origin=n,e.originPoint=rW(t.min,t.max,e.origin),e.scale=ik(r)/ik(t),e.translate=rW(r.min,r.max,e.origin)-e.originPoint,(e.scale>=ix&&e.scale<=iE||isNaN(e.scale))&&(e.scale=1),(e.translate>=i_&&e.translate<=iI||isNaN(e.translate))&&(e.translate=0)}function iN(e,t,r,n){iR(e.x,t.x,r.x,n?n.originX:void 0),iR(e.y,t.y,r.y,n?n.originY:void 0)}function iD(e,t,r){e.min=r.min+t.min,e.max=e.min+ik(t)}function iO(e,t,r){iD(e.x,t.x,r.x),iD(e.y,t.y,r.y)}function iP(e,t,r){e.min=t.min-r.min,e.max=e.min+ik(t)}function iM(e,t,r){iP(e.x,t.x,r.x),iP(e.y,t.y,r.y)}function iL(e,{min:t,max:r},n){return void 0!==t&&e<t?e=n?rW(t,e,n.min):Math.max(e,t):void 0!==r&&e>r&&(e=n?rW(r,e,n.max):Math.min(e,r)),e}function iB(e,t,r){return{min:void 0!==t?e.min+t:void 0,max:void 0!==r?e.max+r-(e.max-e.min):void 0}}function ij(e,{top:t,left:r,bottom:n,right:i}){return{x:iB(e.x,r,i),y:iB(e.y,t,n)}}function iF(e,t){let r=t.min-e.min,n=t.max-e.max;return t.max-t.min<e.max-e.min&&([r,n]=[n,r]),{min:r,max:n}}function iV(e,t){return{x:iF(e.x,t.x),y:iF(e.y,t.y)}}function iU(e,t){let r=.5,n=ik(e),i=ik(t);return i>n?r=ec(t.min,t.max-n,e.min):n>i&&(r=ec(e.min,e.max-i,t.min)),tE(0,1,r)}function iq(e,t){let r={};return void 0!==t.min&&(r.min=t.min-e.min),void 0!==t.max&&(r.max=t.max-e.min),r}let iz=.35;function i$(e=iz){return!1===e?e=0:!0===e&&(e=iz),{x:iG(e,"left","right"),y:iG(e,"top","bottom")}}function iG(e,t,r){return{min:iH(e,t),max:iH(e,r)}}function iH(e,t){return"number"==typeof e?e:e[t]||0}let iK=()=>({translate:0,scale:1,origin:0,originPoint:0}),iW=()=>({x:iK(),y:iK()}),iQ=()=>({min:0,max:0}),iY=()=>({x:iQ(),y:iQ()});function iJ(e){return[e("x"),e("y")]}function iX({top:e,left:t,right:r,bottom:n}){return{x:{min:t,max:r},y:{min:e,max:n}}}function iZ({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function i0(e,t){if(!t)return e;let r=t({x:e.left,y:e.top}),n=t({x:e.right,y:e.bottom});return{top:r.y,left:r.x,bottom:n.y,right:n.x}}function i1(e){return void 0===e||1===e}function i2({scale:e,scaleX:t,scaleY:r}){return!i1(e)||!i1(t)||!i1(r)}function i3(e){return i2(e)||i6(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function i6(e){return i4(e.x)||i4(e.y)}function i4(e){return e&&"0%"!==e}function i5(e,t,r){let n=t*(e-r);return r+n}function i8(e,t,r,n,i){return void 0!==i&&(e=i5(e,i,n)),i5(e,r,n)+t}function i7(e,t=0,r=1,n,i){e.min=i8(e.min,t,r,n,i),e.max=i8(e.max,t,r,n,i)}function i9(e,{x:t,y:r}){i7(e.x,t.translate,t.scale,t.originPoint),i7(e.y,r.translate,r.scale,r.originPoint)}let se=.999999999999,st=1.0000000000001;function sr(e,t,r,n=!1){let i,s,a=r.length;if(a){t.x=t.y=1;for(let o=0;o<a;o++){s=(i=r[o]).projectionDelta;let{visualElement:a}=i.options;(!a||!a.props.style||"contents"!==a.props.style.display)&&(n&&i.options.layoutScroll&&i.scroll&&i!==i.root&&ss(e,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),s&&(t.x*=s.x.scale,t.y*=s.y.scale,i9(e,s)),n&&i3(i.latestValues)&&ss(e,i.latestValues))}t.x<st&&t.x>se&&(t.x=1),t.y<st&&t.y>se&&(t.y=1)}}function sn(e,t){e.min=e.min+t,e.max=e.max+t}function si(e,t,r,n,i=.5){let s=rW(e.min,e.max,i);i7(e,t,r,s,n)}function ss(e,t){si(e.x,t.x,t.scaleX,t.scale,t.originX),si(e.y,t.y,t.scaleY,t.scale,t.originY)}function sa(e,t){return iX(i0(e.getBoundingClientRect(),t))}function so(e,t,r){let n=sa(e,r),{scroll:i}=t;return i&&(sn(n.x,i.offset.x),sn(n.y,i.offset.y)),n}let sl=({current:e})=>e?e.ownerDocument.defaultView:null,su=new WeakMap;class sc{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=iY(),this.visualElement=e}start(e,{snapToCursor:t=!1}={}){let{presenceContext:r}=this.visualElement;if(r&&!1===r.isPresent)return;let n=e=>{let{dragSnapToOrigin:r}=this.getProps();r?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(ic(e).point)},i=(e,t)=>{let{drag:r,dragPropagation:n,onDragStart:i}=this.getProps();if(r&&!n&&(this.openDragLock&&this.openDragLock(),this.openDragLock=ej(r),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),iJ(e=>{let t=this.getAxisMotionValue(e).get()||0;if(tq.test(t)){let{projection:r}=this.visualElement;if(r&&r.layout){let n=r.layout.layoutBox[e];n&&(t=ik(n)*(parseFloat(t)/100))}}this.originPoint[e]=t}),i&&eQ.postRender(()=>i(e,t)),ti(this.visualElement,"transform");let{animationState:s}=this.visualElement;s&&s.setActive("whileDrag",!0)},s=(e,t)=>{let{dragPropagation:r,dragDirectionLock:n,onDirectionLock:i,onDrag:s}=this.getProps();if(!r&&!this.openDragLock)return;let{offset:a}=t;if(n&&null===this.currentDirection){this.currentDirection=sd(a),null!==this.currentDirection&&i&&i(this.currentDirection);return}this.updateAxis("x",t.point,a),this.updateAxis("y",t.point,a),this.visualElement.render(),s&&s(e,t)},a=(e,t)=>this.stop(e,t),o=()=>iJ(e=>{var t;return"paused"===this.getAnimationState(e)&&(null==(t=this.getAxisMotionValue(e).animation)?void 0:t.play())}),{dragSnapToOrigin:l}=this.getProps();this.panSession=new ig(e,{onSessionStart:n,onStart:i,onMove:s,onSessionEnd:a,resumeAnimation:o},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:l,contextWindow:sl(this.visualElement)})}stop(e,t){let r=this.isDragging;if(this.cancel(),!r)return;let{velocity:n}=t;this.startAnimation(n);let{onDragEnd:i}=this.getProps();i&&eQ.postRender(()=>i(e,t))}cancel(){this.isDragging=!1;let{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;let{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,r){let{drag:n}=this.getProps();if(!r||!sh(e,n,this.currentDirection))return;let i=this.getAxisMotionValue(e),s=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(s=iL(s,this.constraints[e],this.elastic[e])),i.set(s)}resolveConstraints(){var e;let{dragConstraints:t,dragElastic:r}=this.getProps(),n=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):null==(e=this.visualElement.projection)?void 0:e.layout,i=this.constraints;t&&iC(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&n?this.constraints=ij(n.layoutBox,t):this.constraints=!1,this.elastic=i$(r),i!==this.constraints&&n&&this.constraints&&!this.hasMutatedConstraints&&iJ(e=>{!1!==this.constraints&&this.getAxisMotionValue(e)&&(this.constraints[e]=iq(n.layoutBox[e],this.constraints[e]))})}resolveRefConstraints(){let{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!iC(e))return!1;let r=e.current;r_(null!==r,"If `dragConstraints` is set as a React ref, that ref must be passed to another component's `ref` prop.");let{projection:n}=this.visualElement;if(!n||!n.layout)return!1;let i=so(r,n.root,this.visualElement.getTransformPagePoint()),s=iV(n.layout.layoutBox,i);if(t){let e=t(iZ(s));this.hasMutatedConstraints=!!e,e&&(s=iX(e))}return s}startAnimation(e){let{drag:t,dragMomentum:r,dragElastic:n,dragTransition:i,dragSnapToOrigin:s,onDragTransitionEnd:a}=this.getProps(),o=this.constraints||{};return Promise.all(iJ(a=>{if(!sh(a,t,this.currentDirection))return;let l=o&&o[a]||{};s&&(l={min:0,max:0});let u=n?200:1e6,c=n?40:1e7,h={type:"inertia",velocity:r?e[a]:0,bounceStiffness:u,bounceDamping:c,timeConstant:750,restDelta:1,restSpeed:10,...i,...l};return this.startAxisValueAnimation(a,h)})).then(a)}startAxisValueAnimation(e,t){let r=this.getAxisMotionValue(e);return ti(this.visualElement,e),r.start(nJ(e,r,0,t,this.visualElement,!1))}stopAnimation(){iJ(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){iJ(e=>{var t;return null==(t=this.getAxisMotionValue(e).animation)?void 0:t.pause()})}getAnimationState(e){var t;return null==(t=this.getAxisMotionValue(e).animation)?void 0:t.state}getAxisMotionValue(e){let t=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps();return r[t]||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){iJ(t=>{let{drag:r}=this.getProps();if(!sh(t,r,this.currentDirection))return;let{projection:n}=this.visualElement,i=this.getAxisMotionValue(t);if(n&&n.layout){let{min:r,max:s}=n.layout.layoutBox[t];i.set(e[t]-rW(r,s,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;let{drag:e,dragConstraints:t}=this.getProps(),{projection:r}=this.visualElement;if(!iC(t)||!r||!this.constraints)return;this.stopAnimation();let n={x:0,y:0};iJ(e=>{let t=this.getAxisMotionValue(e);if(t&&!1!==this.constraints){let r=t.get();n[e]=iU({min:r,max:r},this.constraints[e])}});let{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),iJ(t=>{if(!sh(t,e,null))return;let r=this.getAxisMotionValue(t),{min:i,max:s}=this.constraints[t];r.set(rW(i,s,n[t]))})}addListeners(){if(!this.visualElement.current)return;su.set(this.visualElement,this);let e=id(this.visualElement.current,"pointerdown",e=>{let{drag:t,dragListener:r=!0}=this.getProps();t&&r&&this.start(e)}),t=()=>{let{dragConstraints:e}=this.getProps();iC(e)&&e.current&&(this.constraints=this.resolveRefConstraints())},{projection:r}=this.visualElement,n=r.addEventListener("measure",t);r&&!r.layout&&(r.root&&r.root.updateScroll(),r.updateLayout()),eQ.read(t);let i=iu(window,"resize",()=>this.scalePositionWithinConstraints()),s=r.addEventListener("didUpdate",({delta:e,hasLayoutChanged:t})=>{this.isDragging&&t&&(iJ(t=>{let r=this.getAxisMotionValue(t);r&&(this.originPoint[t]+=e[t].translate,r.set(r.get()+e[t].translate))}),this.visualElement.render())});return()=>{i(),e(),n(),s&&s()}}getProps(){let e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:r=!1,dragPropagation:n=!1,dragConstraints:i=!1,dragElastic:s=iz,dragMomentum:a=!0}=e;return{...e,drag:t,dragDirectionLock:r,dragPropagation:n,dragConstraints:i,dragElastic:s,dragMomentum:a}}}function sh(e,t,r){return(!0===t||t===e)&&(null===r||r===e)}function sd(e,t=10){let r=null;return Math.abs(e.y)>t?r="y":Math.abs(e.x)>t&&(r="x"),r}class sp extends ii{constructor(e){super(e),this.removeGroupControls=eP,this.removeListeners=eP,this.controls=new sc(e)}mount(){let{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||eP}unmount(){this.removeGroupControls(),this.removeListeners()}}let sf=e=>(t,r)=>{e&&eQ.postRender(()=>e(t,r))};class sm extends ii{constructor(){super(...arguments),this.removePointerDownListener=eP}onPointerDown(e){this.session=new ig(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:sl(this.node)})}createPanHandlers(){let{onPanSessionStart:e,onPanStart:t,onPan:r,onPanEnd:n}=this.node.getProps();return{onSessionStart:sf(e),onStart:sf(t),onMove:r,onEnd:(e,t)=>{delete this.session,n&&eQ.postRender(()=>n(e,t))}}}mount(){this.removePointerDownListener=id(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}let sg=(0,N.createContext)(null);function sy(e=!0){let t=(0,N.useContext)(sg);if(null===t)return[!0,null];let{isPresent:r,onExitComplete:n,register:i}=t,s=(0,N.useId)();(0,N.useEffect)(()=>{e&&i(s)},[e]);let a=(0,N.useCallback)(()=>e&&n&&n(s),[s,n,e]);return!r&&n?[!1,a]:[!0]}let sv=(0,N.createContext)({}),sb=(0,N.createContext)({}),sS={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function sT(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}let sw={correct:(e,t)=>{if(!t.target)return e;if("string"==typeof e)if(!tz.test(e))return e;else e=parseFloat(e);let r=sT(e,t.target.x),n=sT(e,t.target.y);return`${r}% ${n}%`}},sC={correct:(e,{treeScale:t,projectionDelta:r})=>{let n=e,i=t8.parse(e);if(i.length>5)return n;let s=t8.createTransformer(e),a=+("number"!=typeof i[0]),o=r.x.scale*t.x,l=r.y.scale*t.y;i[0+a]/=o,i[1+a]/=l;let u=rW(o,l,.5);return"number"==typeof i[2+a]&&(i[2+a]/=u),"number"==typeof i[3+a]&&(i[3+a]/=u),s(i)}},sx={};function sE(e){Object.assign(sx,e)}let{schedule:s_,cancel:sI}=eW(queueMicrotask,!1);class sk extends N.Component{componentDidMount(){let{visualElement:e,layoutGroup:t,switchLayoutGroup:r,layoutId:n}=this.props,{projection:i}=e;sE(sR),i&&(t.group&&t.group.add(i),r&&r.register&&n&&r.register(i),i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),sS.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){let{layoutDependency:t,visualElement:r,drag:n,isPresent:i}=this.props,s=r.projection;return s&&(s.isPresent=i,n||e.layoutDependency!==t||void 0===t?s.willUpdate():this.safeToRemove(),e.isPresent!==i&&(i?s.promote():s.relegate()||eQ.postRender(()=>{let e=s.getStack();e&&e.members.length||this.safeToRemove()}))),null}componentDidUpdate(){let{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),s_.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){let{visualElement:e,layoutGroup:t,switchLayoutGroup:r}=this.props,{projection:n}=e;n&&(n.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(n),r&&r.deregister&&r.deregister(n))}safeToRemove(){let{safeToRemove:e}=this.props;e&&e()}render(){return null}}function sA(e){let[t,r]=sy(),n=(0,N.useContext)(sv);return(0,p.jsx)(sk,{...e,layoutGroup:n,switchLayoutGroup:(0,N.useContext)(sb),isPresent:t,safeToRemove:r})}let sR={borderRadius:{...sw,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:sw,borderTopRightRadius:sw,borderBottomLeftRadius:sw,borderBottomRightRadius:sw,boxShadow:sC};function sN(e,t,r){let n=tr(e)?e:e9(e);return n.start(nJ("",n,t,r)),n.animation}function sD(e){return e instanceof SVGElement&&"svg"!==e.tagName}let sO=(e,t)=>e.depth-t.depth;class sP{constructor(){this.children=[],this.isDirty=!1}add(e){e1(this.children,e),this.isDirty=!0}remove(e){e2(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(sO),this.isDirty=!1,this.children.forEach(e)}}function sM(e,t){let r=e0.now(),n=({timestamp:i})=>{let s=i-r;s>=t&&(eY(n),e(s-t))};return eQ.read(n,!0),()=>eY(n)}function sL(e){let t=tr(e)?e.get():e;return eq(t)?t.toValue():t}let sB=["TopLeft","TopRight","BottomLeft","BottomRight"],sj=sB.length,sF=e=>"string"==typeof e?parseFloat(e):e,sV=e=>"number"==typeof e||tz.test(e);function sU(e,t,r,n,i,s){i?(e.opacity=rW(0,void 0!==r.opacity?r.opacity:1,sz(n)),e.opacityExit=rW(void 0!==t.opacity?t.opacity:1,0,s$(n))):s&&(e.opacity=rW(void 0!==t.opacity?t.opacity:1,void 0!==r.opacity?r.opacity:1,n));for(let i=0;i<sj;i++){let s=`border${sB[i]}Radius`,a=sq(t,s),o=sq(r,s);(void 0!==a||void 0!==o)&&(a||(a=0),o||(o=0),0===a||0===o||sV(a)===sV(o)?(e[s]=Math.max(rW(sF(a),sF(o),n),0),(tq.test(o)||tq.test(a))&&(e[s]+="%")):e[s]=o)}(t.rotate||r.rotate)&&(e.rotate=rW(t.rotate||0,r.rotate||0,n))}function sq(e,t){return void 0!==e[t]?e[t]:e.borderRadius}let sz=sG(0,.5,tT),s$=sG(.5,.95,eP);function sG(e,t,r){return n=>n<e?0:n>t?1:r(ec(e,t,n))}function sH(e,t){e.min=t.min,e.max=t.max}function sK(e,t){sH(e.x,t.x),sH(e.y,t.y)}function sW(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function sQ(e,t,r,n,i){return e-=t,e=i5(e,1/r,n),void 0!==i&&(e=i5(e,1/i,n)),e}function sY(e,t=0,r=1,n=.5,i,s=e,a=e){if(tq.test(t)&&(t=parseFloat(t),t=rW(a.min,a.max,t/100)-a.min),"number"!=typeof t)return;let o=rW(s.min,s.max,n);e===s&&(o-=t),e.min=sQ(e.min,t,r,o,i),e.max=sQ(e.max,t,r,o,i)}function sJ(e,t,[r,n,i],s,a){sY(e,t[r],t[n],t[i],t.scale,s,a)}let sX=["x","scaleX","originX"],sZ=["y","scaleY","originY"];function s0(e,t,r,n){sJ(e.x,t,sX,r?r.x:void 0,n?n.x:void 0),sJ(e.y,t,sZ,r?r.y:void 0,n?n.y:void 0)}function s1(e){return 0===e.translate&&1===e.scale}function s2(e){return s1(e.x)&&s1(e.y)}function s3(e,t){return e.min===t.min&&e.max===t.max}function s6(e,t){return s3(e.x,t.x)&&s3(e.y,t.y)}function s4(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function s5(e,t){return s4(e.x,t.x)&&s4(e.y,t.y)}function s8(e){return ik(e.x)/ik(e.y)}function s7(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class s9{constructor(){this.members=[]}add(e){e1(this.members,e),e.scheduleRender()}remove(e){if(e2(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){let e=this.members[this.members.length-1];e&&this.promote(e)}}relegate(e){let t,r=this.members.findIndex(t=>e===t);if(0===r)return!1;for(let e=r;e>=0;e--){let r=this.members[e];if(!1!==r.isPresent){t=r;break}}return!!t&&(this.promote(t),!0)}promote(e,t){let r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,t&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);let{crossfade:n}=e.options;!1===n&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{let{options:t,resumingFrom:r}=e;t.onExitComplete&&t.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function ae(e,t,r){let n="",i=e.x.translate/t.x,s=e.y.translate/t.y,a=(null==r?void 0:r.z)||0;if((i||s||a)&&(n=`translate3d(${i}px, ${s}px, ${a}px) `),(1!==t.x||1!==t.y)&&(n+=`scale(${1/t.x}, ${1/t.y}) `),r){let{transformPerspective:e,rotate:t,rotateX:i,rotateY:s,skewX:a,skewY:o}=r;e&&(n=`perspective(${e}px) ${n}`),t&&(n+=`rotate(${t}deg) `),i&&(n+=`rotateX(${i}deg) `),s&&(n+=`rotateY(${s}deg) `),a&&(n+=`skewX(${a}deg) `),o&&(n+=`skewY(${o}deg) `)}let o=e.x.scale*t.x,l=e.y.scale*t.y;return(1!==o||1!==l)&&(n+=`scale(${o}, ${l})`),n||"none"}let at={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},ar="undefined"!=typeof window&&void 0!==window.MotionDebug,an=["","X","Y","Z"],ai={visibility:"hidden"},as=1e3,aa=0;function ao(e,t,r,n){let{latestValues:i}=t;i[e]&&(r[e]=i[e],t.setStaticValue(e,0),n&&(n[e]=0))}function al(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;let{visualElement:t}=e.options;if(!t)return;let r=to(t);if(window.MotionHasOptimisedAnimation(r,"transform")){let{layout:t,layoutId:n}=e.options;window.MotionCancelOptimisedAnimation(r,"transform",eQ,!(t||n))}let{parent:n}=e;n&&!n.hasCheckedOptimisedAppear&&al(n)}function au({attachResizeListener:e,defaultParent:t,measureScroll:r,checkIsScrollRoot:n,resetTransform:i}){return class{constructor(e={},r=null==t?void 0:t()){this.id=aa++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,ar&&(at.totalNodes=at.resolvedTargetDeltas=at.recalculatedProjection=0),this.nodes.forEach(ad),this.nodes.forEach(ab),this.nodes.forEach(aS),this.nodes.forEach(ap),ar&&window.MotionDebug.record(at)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=e,this.root=r?r.root||r:this,this.path=r?[...r.path,r]:[],this.parent=r,this.depth=r?r.depth+1:0;for(let e=0;e<this.path.length;e++)this.path[e].shouldResetTransform=!0;this.root===this&&(this.nodes=new sP)}addEventListener(e,t){return this.eventHandlers.has(e)||this.eventHandlers.set(e,new e3),this.eventHandlers.get(e).add(t)}notifyListeners(e,...t){let r=this.eventHandlers.get(e);r&&r.notify(...t)}hasListeners(e){return this.eventHandlers.has(e)}mount(t,r=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=sD(t),this.instance=t;let{layoutId:n,layout:i,visualElement:s}=this.options;if(s&&!s.current&&s.mount(t),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),r&&(i||n)&&(this.isLayoutDirty=!0),e){let r,n=()=>this.root.updateBlockedByResize=!1;e(t,()=>{this.root.updateBlockedByResize=!0,r&&r(),r=sM(n,250),sS.hasAnimatedSinceResize&&(sS.hasAnimatedSinceResize=!1,this.nodes.forEach(av))})}n&&this.root.registerSharedNode(n,this),!1!==this.options.animate&&s&&(n||i)&&this.addEventListener("didUpdate",({delta:e,hasLayoutChanged:t,hasRelativeTargetChanged:r,layout:n})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}let i=this.options.transition||s.getDefaultTransition()||aI,{onLayoutAnimationStart:a,onLayoutAnimationComplete:o}=s.getProps(),l=!this.targetLayout||!s5(this.targetLayout,n)||r,u=!t&&r;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||u||t&&(l||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(e,u);let t={...er(i,"layout"),onPlay:a,onComplete:o};(s.shouldReduceMotion||this.options.layoutRoot)&&(t.delay=0,t.type=!1),this.startAnimation(t)}else t||av(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=n})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);let e=this.getStack();e&&e.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,eY(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){!this.isUpdateBlocked()&&(this.isUpdating=!0,this.nodes&&this.nodes.forEach(aT),this.animationId++)}getTransformTemplate(){let{visualElement:e}=this.options;return e&&e.getProps().transformTemplate}willUpdate(e=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&al(this),this.root.isUpdating||this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let e=0;e<this.path.length;e++){let t=this.path[e];t.shouldResetTransform=!0,t.updateScroll("snapshot"),t.options.layoutRoot&&t.willUpdate(!1)}let{layoutId:t,layout:r}=this.options;if(void 0===t&&!r)return;let n=this.getTransformTemplate();this.prevTransformTemplateValue=n?n(this.latestValues,""):void 0,this.updateSnapshot(),e&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(am);return}this.isUpdating||this.nodes.forEach(ag),this.isUpdating=!1,this.nodes.forEach(ay),this.nodes.forEach(ac),this.nodes.forEach(ah),this.clearAllSnapshots();let e=e0.now();eJ.delta=tE(0,1e3/60,e-eJ.timestamp),eJ.timestamp=e,eJ.isProcessing=!0,eX.update.process(eJ),eX.preRender.process(eJ),eX.render.process(eJ),eJ.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,s_.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(af),this.sharedNodes.forEach(aw)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,eQ.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){eQ.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){!this.snapshot&&this.instance&&(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let e=0;e<this.path.length;e++)this.path[e].updateScroll();let e=this.layout;this.layout=this.measure(!1),this.layoutCorrected=iY(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);let{visualElement:t}=this.options;t&&t.notify("LayoutMeasure",this.layout.layoutBox,e?e.layoutBox:void 0)}updateScroll(e="measure"){let t=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===e&&(t=!1),t){let t=n(this.instance);this.scroll={animationId:this.root.animationId,phase:e,isRoot:t,offset:r(this.instance),wasRoot:this.scroll?this.scroll.isRoot:t}}}resetTransform(){if(!i)return;let e=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,t=this.projectionDelta&&!s2(this.projectionDelta),r=this.getTransformTemplate(),n=r?r(this.latestValues,""):void 0,s=n!==this.prevTransformTemplateValue;e&&(t||i3(this.latestValues)||s)&&(i(this.instance,n),this.shouldResetTransform=!1,this.scheduleRender())}measure(e=!0){let t=this.measurePageBox(),r=this.removeElementScroll(t);return e&&(r=this.removeTransform(r)),aN(r),{animationId:this.root.animationId,measuredBox:t,layoutBox:r,latestValues:{},source:this.id}}measurePageBox(){var e;let{visualElement:t}=this.options;if(!t)return iY();let r=t.measureViewportBox();if(!((null==(e=this.scroll)?void 0:e.wasRoot)||this.path.some(aO))){let{scroll:e}=this.root;e&&(sn(r.x,e.offset.x),sn(r.y,e.offset.y))}return r}removeElementScroll(e){var t;let r=iY();if(sK(r,e),null==(t=this.scroll)?void 0:t.wasRoot)return r;for(let t=0;t<this.path.length;t++){let n=this.path[t],{scroll:i,options:s}=n;n!==this.root&&i&&s.layoutScroll&&(i.wasRoot&&sK(r,e),sn(r.x,i.offset.x),sn(r.y,i.offset.y))}return r}applyTransform(e,t=!1){let r=iY();sK(r,e);for(let e=0;e<this.path.length;e++){let n=this.path[e];!t&&n.options.layoutScroll&&n.scroll&&n!==n.root&&ss(r,{x:-n.scroll.offset.x,y:-n.scroll.offset.y}),i3(n.latestValues)&&ss(r,n.latestValues)}return i3(this.latestValues)&&ss(r,this.latestValues),r}removeTransform(e){let t=iY();sK(t,e);for(let e=0;e<this.path.length;e++){let r=this.path[e];if(!r.instance||!i3(r.latestValues))continue;i2(r.latestValues)&&r.updateSnapshot();let n=iY();sK(n,r.measurePageBox()),s0(t,r.latestValues,r.snapshot?r.snapshot.layoutBox:void 0,n)}return i3(this.latestValues)&&s0(t,this.latestValues),t}setTargetDelta(e){this.targetDelta=e,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(e){this.options={...this.options,...e,crossfade:void 0===e.crossfade||e.crossfade}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==eJ.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(e=!1){var t;let r=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=r.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=r.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=r.isSharedProjectionDirty);let n=!!this.resumingFrom||this!==r;if(!(e||n&&this.isSharedProjectionDirty||this.isProjectionDirty||(null==(t=this.parent)?void 0:t.isProjectionDirty)||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;let{layout:i,layoutId:s}=this.options;if(this.layout&&(i||s)){if(this.resolvedRelativeTargetAt=eJ.timestamp,!this.targetDelta&&!this.relativeTarget){let e=this.getClosestProjectingParent();e&&e.layout&&1!==this.animationProgress?(this.relativeParent=e,this.forceRelativeParentToResolveTarget(),this.relativeTarget=iY(),this.relativeTargetOrigin=iY(),iM(this.relativeTargetOrigin,this.layout.layoutBox,e.layout.layoutBox),sK(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(this.relativeTarget||this.targetDelta){if(this.target||(this.target=iY(),this.targetWithTransforms=iY()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),iO(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):sK(this.target,this.layout.layoutBox),i9(this.target,this.targetDelta)):sK(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;let e=this.getClosestProjectingParent();e&&!!e.resumingFrom==!!this.resumingFrom&&!e.options.layoutScroll&&e.target&&1!==this.animationProgress?(this.relativeParent=e,this.forceRelativeParentToResolveTarget(),this.relativeTarget=iY(),this.relativeTargetOrigin=iY(),iM(this.relativeTargetOrigin,this.target,e.target),sK(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}ar&&at.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||i2(this.parent.latestValues)||i6(this.parent.latestValues)))if(this.parent.isProjecting())return this.parent;else return this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var e;let t=this.getLead(),r=!!this.resumingFrom||this!==t,n=!0;if((this.isProjectionDirty||(null==(e=this.parent)?void 0:e.isProjectionDirty))&&(n=!1),r&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(n=!1),this.resolvedRelativeTargetAt===eJ.timestamp&&(n=!1),n)return;let{layout:i,layoutId:s}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(i||s))return;sK(this.layoutCorrected,this.layout.layoutBox);let a=this.treeScale.x,o=this.treeScale.y;sr(this.layoutCorrected,this.treeScale,this.path,r),t.layout&&!t.target&&(1!==this.treeScale.x||1!==this.treeScale.y)&&(t.target=t.layout.layoutBox,t.targetWithTransforms=iY());let{target:l}=t;if(!l){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}this.projectionDelta&&this.prevProjectionDelta?(sW(this.prevProjectionDelta.x,this.projectionDelta.x),sW(this.prevProjectionDelta.y,this.projectionDelta.y)):this.createProjectionDeltas(),iN(this.projectionDelta,this.layoutCorrected,l,this.latestValues),this.treeScale.x===a&&this.treeScale.y===o&&s7(this.projectionDelta.x,this.prevProjectionDelta.x)&&s7(this.projectionDelta.y,this.prevProjectionDelta.y)||(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",l)),ar&&at.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(e=!0){var t;if(null==(t=this.options.visualElement)||t.scheduleRender(),e){let e=this.getStack();e&&e.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=iW(),this.projectionDelta=iW(),this.projectionDeltaWithTransform=iW()}setAnimationOrigin(e,t=!1){let r,n=this.snapshot,i=n?n.latestValues:{},s={...this.latestValues},a=iW();this.relativeParent&&this.relativeParent.options.layoutRoot||(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!t;let o=iY(),l=(n?n.source:void 0)!==(this.layout?this.layout.source:void 0),u=this.getStack(),c=!u||u.members.length<=1,h=!!(l&&!c&&!0===this.options.crossfade&&!this.path.some(a_));this.animationProgress=0,this.mixTargetDelta=t=>{let n=t/1e3;aC(a.x,e.x,n),aC(a.y,e.y,n),this.setTargetDelta(a),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(iM(o,this.layout.layoutBox,this.relativeParent.layout.layoutBox),aE(this.relativeTarget,this.relativeTargetOrigin,o,n),r&&s6(this.relativeTarget,r)&&(this.isProjectionDirty=!1),r||(r=iY()),sK(r,this.relativeTarget)),l&&(this.animationValues=s,sU(s,i,this.latestValues,n,h,c)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=n},this.mixTargetDelta(1e3*!!this.options.layoutRoot)}startAnimation(e){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(eY(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=eQ.update(()=>{sS.hasAnimatedSinceResize=!0,this.currentAnimation=sN(0,as,{...e,onUpdate:t=>{this.mixTargetDelta(t),e.onUpdate&&e.onUpdate(t)},onComplete:()=>{e.onComplete&&e.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);let e=this.getStack();e&&e.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(as),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){let e=this.getLead(),{targetWithTransforms:t,target:r,layout:n,latestValues:i}=e;if(t&&r&&n){if(this!==e&&this.layout&&n&&aD(this.options.animationType,this.layout.layoutBox,n.layoutBox)){r=this.target||iY();let t=ik(this.layout.layoutBox.x);r.x.min=e.target.x.min,r.x.max=r.x.min+t;let n=ik(this.layout.layoutBox.y);r.y.min=e.target.y.min,r.y.max=r.y.min+n}sK(t,r),ss(t,i),iN(this.projectionDeltaWithTransform,this.layoutCorrected,t,i)}}registerSharedNode(e,t){this.sharedNodes.has(e)||this.sharedNodes.set(e,new s9),this.sharedNodes.get(e).add(t);let r=t.options.initialPromotionConfig;t.promote({transition:r?r.transition:void 0,preserveFollowOpacity:r&&r.shouldPreserveFollowOpacity?r.shouldPreserveFollowOpacity(t):void 0})}isLead(){let e=this.getStack();return!e||e.lead===this}getLead(){var e;let{layoutId:t}=this.options;return t&&(null==(e=this.getStack())?void 0:e.lead)||this}getPrevLead(){var e;let{layoutId:t}=this.options;return t?null==(e=this.getStack())?void 0:e.prevLead:void 0}getStack(){let{layoutId:e}=this.options;if(e)return this.root.sharedNodes.get(e)}promote({needsReset:e,transition:t,preserveFollowOpacity:r}={}){let n=this.getStack();n&&n.promote(this,r),e&&(this.projectionDelta=void 0,this.needsReset=!0),t&&this.setOptions({transition:t})}relegate(){let e=this.getStack();return!!e&&e.relegate(this)}resetSkewAndRotation(){let{visualElement:e}=this.options;if(!e)return;let t=!1,{latestValues:r}=e;if((r.z||r.rotate||r.rotateX||r.rotateY||r.rotateZ||r.skewX||r.skewY)&&(t=!0),!t)return;let n={};r.z&&ao("z",e,n,this.animationValues);for(let t=0;t<an.length;t++)ao(`rotate${an[t]}`,e,n,this.animationValues),ao(`skew${an[t]}`,e,n,this.animationValues);for(let t in e.render(),n)e.setStaticValue(t,n[t]),this.animationValues&&(this.animationValues[t]=n[t]);e.scheduleRender()}getProjectionStyles(e){var t,r;if(!this.instance||this.isSVG)return;if(!this.isVisible)return ai;let n={visibility:""},i=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,n.opacity="",n.pointerEvents=sL(null==e?void 0:e.pointerEvents)||"",n.transform=i?i(this.latestValues,""):"none",n;let s=this.getLead();if(!this.projectionDelta||!this.layout||!s.target){let t={};return this.options.layoutId&&(t.opacity=void 0!==this.latestValues.opacity?this.latestValues.opacity:1,t.pointerEvents=sL(null==e?void 0:e.pointerEvents)||""),this.hasProjected&&!i3(this.latestValues)&&(t.transform=i?i({},""):"none",this.hasProjected=!1),t}let a=s.animationValues||s.latestValues;this.applyTransformsToTarget(),n.transform=ae(this.projectionDeltaWithTransform,this.treeScale,a),i&&(n.transform=i(a,n.transform));let{x:o,y:l}=this.projectionDelta;for(let e in n.transformOrigin=`${100*o.origin}% ${100*l.origin}% 0`,s.animationValues?n.opacity=s===this?null!=(r=null!=(t=a.opacity)?t:this.latestValues.opacity)?r:1:this.preserveOpacity?this.latestValues.opacity:a.opacityExit:n.opacity=s===this?void 0!==a.opacity?a.opacity:"":void 0!==a.opacityExit?a.opacityExit:0,sx){if(void 0===a[e])continue;let{correct:t,applyTo:r}=sx[e],i="none"===n.transform?a[e]:t(a[e],s);if(r){let e=r.length;for(let t=0;t<e;t++)n[r[t]]=i}else n[e]=i}return this.options.layoutId&&(n.pointerEvents=s===this?sL(null==e?void 0:e.pointerEvents)||"":"none"),n}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(e=>{var t;return null==(t=e.currentAnimation)?void 0:t.stop()}),this.root.nodes.forEach(am),this.root.sharedNodes.clear()}}}function ac(e){e.updateLayout()}function ah(e){var t;let r=(null==(t=e.resumeFrom)?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&r&&e.hasListeners("didUpdate")){let{layoutBox:t,measuredBox:n}=e.layout,{animationType:i}=e.options,s=r.source!==e.layout.source;"size"===i?iJ(e=>{let n=s?r.measuredBox[e]:r.layoutBox[e],i=ik(n);n.min=t[e].min,n.max=n.min+i}):aD(i,r.layoutBox,t)&&iJ(n=>{let i=s?r.measuredBox[n]:r.layoutBox[n],a=ik(t[n]);i.max=i.min+a,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[n].max=e.relativeTarget[n].min+a)});let a=iW();iN(a,t,r.layoutBox);let o=iW();s?iN(o,e.applyTransform(n,!0),r.measuredBox):iN(o,t,r.layoutBox);let l=!s2(a),u=!1;if(!e.resumeFrom){let n=e.getClosestProjectingParent();if(n&&!n.resumeFrom){let{snapshot:i,layout:s}=n;if(i&&s){let a=iY();iM(a,r.layoutBox,i.layoutBox);let o=iY();iM(o,t,s.layoutBox),s5(a,o)||(u=!0),n.options.layoutRoot&&(e.relativeTarget=o,e.relativeTargetOrigin=a,e.relativeParent=n)}}}e.notifyListeners("didUpdate",{layout:t,snapshot:r,delta:o,layoutDelta:a,hasLayoutChanged:l,hasRelativeTargetChanged:u})}else if(e.isLead()){let{onExitComplete:t}=e.options;t&&t()}e.options.transition=void 0}function ad(e){ar&&at.totalNodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function ap(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function af(e){e.clearSnapshot()}function am(e){e.clearMeasurements()}function ag(e){e.isLayoutDirty=!1}function ay(e){let{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function av(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function ab(e){e.resolveTargetDelta()}function aS(e){e.calcProjection()}function aT(e){e.resetSkewAndRotation()}function aw(e){e.removeLeadSnapshot()}function aC(e,t,r){e.translate=rW(t.translate,0,r),e.scale=rW(t.scale,1,r),e.origin=t.origin,e.originPoint=t.originPoint}function ax(e,t,r,n){e.min=rW(t.min,r.min,n),e.max=rW(t.max,r.max,n)}function aE(e,t,r,n){ax(e.x,t.x,r.x,n),ax(e.y,t.y,r.y,n)}function a_(e){return e.animationValues&&void 0!==e.animationValues.opacityExit}let aI={duration:.45,ease:[.4,0,.1,1]},ak=e=>"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),aA=ak("applewebkit/")&&!ak("chrome/")?Math.round:eP;function aR(e){e.min=aA(e.min),e.max=aA(e.max)}function aN(e){aR(e.x),aR(e.y)}function aD(e,t,r){return"position"===e||"preserve-aspect"===e&&!iA(s8(t),s8(r),.2)}function aO(e){var t;return e!==e.root&&(null==(t=e.scroll)?void 0:t.wasRoot)}let aP=au({attachResizeListener:(e,t)=>iu(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),aM={current:void 0},aL=au({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!aM.current){let e=new aP({});e.mount(window),e.setOptions({layoutScroll:!0}),aM.current=e}return aM.current},resetTransform:(e,t)=>{e.style.transform=void 0!==t?t:"none"},checkIsScrollRoot:e=>"fixed"===window.getComputedStyle(e).position}),aB={pan:{Feature:sm},drag:{Feature:sp,ProjectionNode:aL,MeasureLayout:sA}};function aj(e,t,r){let{props:n}=e;e.animationState&&n.whileHover&&e.animationState.setActive("whileHover","Start"===r);let i=n["onHover"+r];i&&eQ.postRender(()=>i(t,ic(t)))}class aF extends ii{mount(){let{current:e}=this.node;e&&(this.unmount=eT(e,e=>(aj(this.node,e,"Start"),e=>aj(this.node,e,"End"))))}unmount(){}}class aV extends ii{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch(t){e=!0}e&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){this.isActive&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=r6(iu(this.node.current,"focus",()=>this.onFocus()),iu(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function aU(e,t,r){let{props:n}=e;e.animationState&&n.whileTap&&e.animationState.setActive("whileTap","Start"===r);let i=n["onTap"+("End"===r?"":r)];i&&eQ.postRender(()=>i(t,ic(t)))}class aq extends ii{mount(){let{current:e}=this.node;e&&(this.unmount=eN(e,e=>(aU(this.node,e,"Start"),(e,{success:t})=>aU(this.node,e,t?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}let az=new WeakMap,a$=new WeakMap,aG=e=>{let t=az.get(e.target);t&&t(e)},aH=e=>{e.forEach(aG)};function aK({root:e,...t}){let r=e||document;a$.has(r)||a$.set(r,{});let n=a$.get(r),i=JSON.stringify(t);return n[i]||(n[i]=new IntersectionObserver(aH,{root:e,...t})),n[i]}function aW(e,t,r){let n=aK(t);return az.set(e,r),n.observe(e),()=>{az.delete(e),n.unobserve(e)}}let aQ={some:0,all:1};class aY extends ii{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();let{viewport:e={}}=this.node.getProps(),{root:t,margin:r,amount:n="some",once:i}=e,s={root:t?t.current:void 0,rootMargin:r,threshold:"number"==typeof n?n:aQ[n]},a=e=>{let{isIntersecting:t}=e;if(this.isInView===t||(this.isInView=t,i&&!t&&this.hasEnteredView))return;t&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",t);let{onViewportEnter:r,onViewportLeave:n}=this.node.getProps(),s=t?r:n;s&&s(e)};return aW(this.node.current,s,a)}mount(){this.startObserver()}update(){if("undefined"==typeof IntersectionObserver)return;let{props:e,prevProps:t}=this.node;["amount","margin","root"].some(aJ(e,t))&&this.startObserver()}unmount(){}}function aJ({viewport:e={}},{viewport:t={}}={}){return r=>e[r]!==t[r]}let aX={inView:{Feature:aY},tap:{Feature:aq},focus:{Feature:aV},hover:{Feature:aF}},aZ={layout:{ProjectionNode:aL,MeasureLayout:sA}},a0=(0,N.createContext)({strict:!1}),a1=(0,N.createContext)({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"}),a2=(0,N.createContext)({});function a3(e){return z(e.animate)||J.some(t=>H(e[t]))}function a6(e){return!!(a3(e)||e.variants)}function a4(e,t){if(a3(e)){let{initial:t,animate:r}=e;return{initial:!1===t||H(t)?t:void 0,animate:H(r)?r:void 0}}return!1!==e.inherit?t:{}}function a5(e){let{initial:t,animate:r}=a4(e,(0,N.useContext)(a2));return(0,N.useMemo)(()=>({initial:t,animate:r}),[a8(t),a8(r)])}function a8(e){return Array.isArray(e)?e.join(" "):e}let a7="undefined"!=typeof window,a9={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},oe={};for(let e in a9)oe[e]={isEnabled:t=>a9[e].some(e=>!!t[e])};function ot(e){for(let t in e)oe[t]={...oe[t],...e[t]}}let or=Symbol.for("motionComponentSymbol");function on(e,t,r){return(0,N.useCallback)(n=>{n&&e.onMount&&e.onMount(n),t&&(n?t.mount(n):t.unmount()),r&&("function"==typeof r?r(n):iC(r)&&(r.current=n))},[t])}let oi=a7?N.useLayoutEffect:N.useEffect;function os(e,t,r,n,i){var s,a;let{visualElement:o}=(0,N.useContext)(a2),l=(0,N.useContext)(a0),u=(0,N.useContext)(sg),c=(0,N.useContext)(a1).reducedMotion,h=(0,N.useRef)(null);n=n||l.renderer,!h.current&&n&&(h.current=n(e,{visualState:t,parent:o,props:r,presenceContext:u,blockInitialAnimation:!!u&&!1===u.initial,reducedMotionConfig:c}));let d=h.current,p=(0,N.useContext)(sb);d&&!d.projection&&i&&("html"===d.type||"svg"===d.type)&&oa(h.current,r,i,p);let f=(0,N.useRef)(!1);(0,N.useInsertionEffect)(()=>{d&&f.current&&d.update(r,u)});let m=r[ta],g=(0,N.useRef)(!!m&&!(null==(s=window.MotionHandoffIsComplete)?void 0:s.call(window,m))&&(null==(a=window.MotionHasOptimisedAnimation)?void 0:a.call(window,m)));return oi(()=>{d&&(f.current=!0,window.MotionIsMounted=!0,d.updateFeatures(),s_.render(d.render),g.current&&d.animationState&&d.animationState.animateChanges())}),(0,N.useEffect)(()=>{d&&(!g.current&&d.animationState&&d.animationState.animateChanges(),g.current&&(queueMicrotask(()=>{var e;null==(e=window.MotionHandoffMarkAsComplete)||e.call(window,m)}),g.current=!1))}),d}function oa(e,t,r,n){let{layoutId:i,layout:s,drag:a,dragConstraints:o,layoutScroll:l,layoutRoot:u}=t;e.projection=new r(e.latestValues,t["data-framer-portal-id"]?void 0:oo(e.parent)),e.projection.setOptions({layoutId:i,layout:s,alwaysMeasureLayout:!!a||o&&iC(o),visualElement:e,animationType:"string"==typeof s?s:"both",initialPromotionConfig:n,layoutScroll:l,layoutRoot:u})}function oo(e){if(e)return!1!==e.options.allowProjection?e.projection:oo(e.parent)}function ol({preloadedFeatures:e,createVisualElement:t,useRender:r,useVisualState:n,Component:i}){var s,a;function o(s,a){let o,l={...(0,N.useContext)(a1),...s,layoutId:ou(s)},{isStatic:u}=l,c=a5(s),h=n(s,u);if(!u&&a7){oc(l,e);let r=oh(l);o=r.MeasureLayout,c.visualElement=os(i,h,l,t,r.ProjectionNode)}return(0,p.jsxs)(a2.Provider,{value:c,children:[o&&c.visualElement?(0,p.jsx)(o,{visualElement:c.visualElement,...l}):null,r(i,s,on(h,c.visualElement,a),h,u,c.visualElement)]})}e&&ot(e),o.displayName=`motion.${"string"==typeof i?i:`create(${null!=(a=null!=(s=i.displayName)?s:i.name)?a:""})`}`;let l=(0,N.forwardRef)(o);return l[or]=i,l}function ou({layoutId:e}){let t=(0,N.useContext)(sv).id;return t&&void 0!==e?t+"-"+e:e}function oc(e,t){(0,N.useContext)(a0).strict}function oh(e){let{drag:t,layout:r}=oe;if(!t&&!r)return{};let n={...t,...r};return{MeasureLayout:(null==t?void 0:t.isEnabled(e))||(null==r?void 0:r.isEnabled(e))?n.MeasureLayout:void 0,ProjectionNode:n.ProjectionNode}}let od=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function op(e){if("string"!=typeof e||e.includes("-"));else if(od.indexOf(e)>-1||/[A-Z]/u.test(e))return!0;return!1}function of(e){let t=(0,N.useRef)(null);return null===t.current&&(t.current=e()),t.current}function om({scrapeMotionValuesFromProps:e,createRenderState:t,onUpdate:r},n,i,s){let a={latestValues:oy(n,i,s,e),renderState:t()};return r&&(a.onMount=e=>r({props:n,current:e,...a}),a.onUpdate=e=>r(e)),a}let og=e=>(t,r)=>{let n=(0,N.useContext)(a2),i=(0,N.useContext)(sg),s=()=>om(e,t,n,i);return r?s():of(s)};function oy(e,t,r,n){let i={},s=n(e,{});for(let e in s)i[e]=sL(s[e]);let{initial:a,animate:o}=e,l=a3(e),u=a6(e);t&&u&&!l&&!1!==e.inherit&&(void 0===a&&(a=t.initial),void 0===o&&(o=t.animate));let c=!!r&&!1===r.initial,h=(c=c||!1===a)?o:a;if(h&&"boolean"!=typeof h&&!z(h)){let t=Array.isArray(h)?h:[h];for(let r=0;r<t.length;r++){let n=W(e,t[r]);if(n){let{transitionEnd:e,transition:t,...r}=n;for(let e in r){let t=r[e];if(Array.isArray(t)){let e=c?t.length-1:0;t=t[e]}null!==t&&(i[e]=t)}for(let t in e)i[t]=e[t]}}}return i}let ov=(e,t)=>t&&"number"==typeof e?t.transform(e):e,ob={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},oS=eF.length;function oT(e,t,r){let n="",i=!0;for(let s=0;s<oS;s++){let a=eF[s],o=e[a];if(void 0===o)continue;let l=!0;if(!(l="number"==typeof o?o===+!!a.startsWith("scale"):0===parseFloat(o))||r){let e=ov(o,rs[a]);if(!l){i=!1;let t=ob[a]||a;n+=`${t}(${e}) `}r&&(t[a]=e)}}return n=n.trim(),r?n=r(t,i?"":n):i&&(n="none"),n}function ow(e,t,r){let{style:n,vars:i,transformOrigin:s}=e,a=!1,o=!1;for(let e in t){let r=t[e];if(eV.has(e)){a=!0;continue}if(rA(e)){i[e]=r;continue}{let t=ov(r,rs[e]);e.startsWith("origin")?(o=!0,s[e]=t):n[e]=t}}if(!t.transform&&(a||r?n.transform=oT(t,e.transform,r):n.transform&&(n.transform="none")),o){let{originX:e="50%",originY:t="50%",originZ:r=0}=s;n.transformOrigin=`${e} ${t} ${r}`}}let oC={offset:"stroke-dashoffset",array:"stroke-dasharray"},ox={offset:"strokeDashoffset",array:"strokeDasharray"};function oE(e,t,r=1,n=0,i=!0){e.pathLength=1;let s=i?oC:ox;e[s.offset]=tz.transform(-n);let a=tz.transform(t),o=tz.transform(r);e[s.array]=`${a} ${o}`}function o_(e,t,r){return"string"==typeof e?e:tz.transform(t+r*e)}function oI(e,t,r){let n=o_(t,e.x,e.width),i=o_(r,e.y,e.height);return`${n} ${i}`}function ok(e,{attrX:t,attrY:r,attrScale:n,originX:i,originY:s,pathLength:a,pathSpacing:o=1,pathOffset:l=0,...u},c,h){if(ow(e,u,h),c){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};let{attrs:d,style:p,dimensions:f}=e;d.transform&&(f&&(p.transform=d.transform),delete d.transform),f&&(void 0!==i||void 0!==s||p.transform)&&(p.transformOrigin=oI(f,void 0!==i?i:.5,void 0!==s?s:.5)),void 0!==t&&(d.x=t),void 0!==r&&(d.y=r),void 0!==n&&(d.scale=n),void 0!==a&&oE(d,a,o,l,!1)}let oA=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),oR=()=>({...oA(),attrs:{}}),oN=e=>"string"==typeof e&&"svg"===e.toLowerCase();function oD(e,{style:t,vars:r},n,i){for(let s in Object.assign(e.style,t,i&&i.getProjectionStyles(n)),r)e.style.setProperty(s,r[s])}let oO=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function oP(e,t,r,n){for(let r in oD(e,t,void 0,n),t.attrs)e.setAttribute(oO.has(r)?r:ts(r),t.attrs[r])}function oM(e,{layout:t,layoutId:r}){return eV.has(e)||e.startsWith("origin")||(t||void 0!==r)&&(!!sx[e]||"opacity"===e)}function oL(e,t,r){var n;let{style:i}=e,s={};for(let a in i)(tr(i[a])||t.style&&tr(t.style[a])||oM(a,e)||(null==(n=null==r?void 0:r.getValue(a))?void 0:n.liveStyle)!==void 0)&&(s[a]=i[a]);return s}function oB(e,t,r){let n=oL(e,t,r);for(let r in e)(tr(e[r])||tr(t[r]))&&(n[-1!==eF.indexOf(r)?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r]=e[r]);return n}function oj(e,t){try{t.dimensions="function"==typeof e.getBBox?e.getBBox():e.getBoundingClientRect()}catch(e){t.dimensions={x:0,y:0,width:0,height:0}}}let oF=["x","y","width","height","cx","cy","r"],oV={useVisualState:og({scrapeMotionValuesFromProps:oB,createRenderState:oR,onUpdate:({props:e,prevProps:t,current:r,renderState:n,latestValues:i})=>{if(!r)return;let s=!!e.drag;if(!s){for(let e in i)if(eV.has(e)){s=!0;break}}if(!s)return;let a=!t;if(t)for(let r=0;r<oF.length;r++){let n=oF[r];e[n]!==t[n]&&(a=!0)}a&&eQ.read(()=>{oj(r,n),eQ.render(()=>{ok(n,i,oN(r.tagName),e.transformTemplate),oP(r,n)})})}})},oU={useVisualState:og({scrapeMotionValuesFromProps:oL,createRenderState:oA})};function oq(e,t,r){for(let n in t)tr(t[n])||oM(n,r)||(e[n]=t[n])}function oz({transformTemplate:e},t){return(0,N.useMemo)(()=>{let r=oA();return ow(r,t,e),Object.assign({},r.vars,r.style)},[t])}function o$(e,t){let r=e.style||{},n={};return oq(n,r,e),Object.assign(n,oz(e,t)),n}function oG(e,t){let r={},n=o$(e,t);return e.drag&&!1!==e.dragListener&&(r.draggable=!1,n.userSelect=n.WebkitUserSelect=n.WebkitTouchCallout="none",n.touchAction=!0===e.drag?"none":`pan-${"x"===e.drag?"y":"x"}`),void 0===e.tabIndex&&(e.onTap||e.onTapStart||e.whileTap)&&(r.tabIndex=0),r.style=n,r}let oH=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function oK(e){return e.startsWith("while")||e.startsWith("drag")&&"draggable"!==e||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||oH.has(e)}let oW=e=>!oK(e);function oQ(e){e&&(oW=t=>t.startsWith("on")?!oK(t):e(t))}try{oQ(require("@emotion/is-prop-valid").default)}catch(e){}function oY(e,t,r){let n={};for(let i in e)("values"!==i||"object"!=typeof e.values)&&(oW(i)||!0===r&&oK(i)||!t&&!oK(i)||e.draggable&&i.startsWith("onDrag"))&&(n[i]=e[i]);return n}function oJ(e,t,r,n){let i=(0,N.useMemo)(()=>{let r=oR();return ok(r,t,oN(n),e.transformTemplate),{...r.attrs,style:{...r.style}}},[t]);if(e.style){let t={};oq(t,e.style,e),i.style={...t,...i.style}}return i}function oX(e=!1){return(t,r,n,{latestValues:i},s)=>{let a=(op(t)?oJ:oG)(r,i,s,t),o=oY(r,"string"==typeof t,e),l=t!==N.Fragment?{...o,...a,ref:n}:{},{children:u}=r,c=(0,N.useMemo)(()=>tr(u)?u.get():u,[u]);return(0,N.createElement)(t,{...l,children:c})}}function oZ(e,t){return function(r,{forwardMotionProps:n}={forwardMotionProps:!1}){return ol({...op(r)?oV:oU,preloadedFeatures:e,useRender:oX(n),createVisualElement:t,Component:r})}}let o0={current:null},o1={current:!1};function o2(){if(o1.current=!0,a7)if(window.matchMedia){let e=window.matchMedia("(prefers-reduced-motion)"),t=()=>o0.current=e.matches;e.addListener(t),t()}else o0.current=!1}let o3=[...rj,tW,t8],o6=e=>o3.find(rB(e)),o4=new WeakMap;function o5(e,t,r){for(let n in t){let i=t[n],s=r[n];if(tr(i))e.addValue(n,i);else if(tr(s))e.addValue(n,e9(i,{owner:e}));else if(s!==i)if(e.hasValue(n)){let t=e.getValue(n);!0===t.liveStyle?t.jump(i):t.hasAnimated||t.set(i)}else{let t=e.getStaticValue(n);e.addValue(n,e9(void 0!==t?t:i,{owner:e}))}}for(let n in r)void 0===t[n]&&e.removeValue(n);return t}let o8=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class o7{scrapeMotionValuesFromProps(e,t,r){return{}}constructor({parent:e,props:t,presenceContext:r,reducedMotionConfig:n,blockInitialAnimation:i,visualState:s},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=rx,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{let e=e0.now();this.renderScheduledAt<e&&(this.renderScheduledAt=e,eQ.render(this.render,!1,!0))};let{latestValues:o,renderState:l,onUpdate:u}=s;this.onUpdate=u,this.latestValues=o,this.baseTarget={...o},this.initialValues=t.initial?{...o}:{},this.renderState=l,this.parent=e,this.props=t,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=n,this.options=a,this.blockInitialAnimation=!!i,this.isControllingVariants=a3(t),this.isVariantNode=a6(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);let{willChange:c,...h}=this.scrapeMotionValuesFromProps(t,{},this);for(let e in h){let t=h[e];void 0!==o[e]&&tr(t)&&t.set(o[e],!1)}}mount(e){this.current=e,o4.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((e,t)=>this.bindToMotionValue(t,e)),o1.current||o2(),this.shouldReduceMotion="never"!==this.reducedMotionConfig&&("always"===this.reducedMotionConfig||o0.current),this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){for(let e in o4.delete(this.current),this.projection&&this.projection.unmount(),eY(this.notifyUpdate),eY(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this),this.events)this.events[e].clear();for(let e in this.features){let t=this.features[e];t&&(t.unmount(),t.isMounted=!1)}this.current=null}bindToMotionValue(e,t){let r;this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();let n=eV.has(e),i=t.on("change",t=>{this.latestValues[e]=t,this.props.onUpdate&&eQ.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0)}),s=t.on("renderRequest",this.scheduleRender);window.MotionCheckAppearSync&&(r=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{i(),s(),r&&r(),t.owner&&t.stop()})}sortNodePosition(e){return this.current&&this.sortInstanceNodePosition&&this.type===e.type?this.sortInstanceNodePosition(this.current,e.current):0}updateFeatures(){let e="animation";for(e in oe){let t=oe[e];if(!t)continue;let{isEnabled:r,Feature:n}=t;if(!this.features[e]&&n&&r(this.props)&&(this.features[e]=new n(this)),this.features[e]){let t=this.features[e];t.isMounted?t.update():(t.mount(),t.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):iY()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let t=0;t<o8.length;t++){let r=o8[t];this.propEventSubscriptions[r]&&(this.propEventSubscriptions[r](),delete this.propEventSubscriptions[r]);let n=e["on"+r];n&&(this.propEventSubscriptions[r]=this.on(r,n))}this.prevMotionValues=o5(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){let t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){let r=this.values.get(e);t!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);let t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return void 0===r&&void 0!==t&&(r=e9(null===t?void 0:t,{owner:this}),this.addValue(e,r)),r}readValue(e,t){var r;let n=void 0===this.latestValues[e]&&this.current?null!=(r=this.getBaseTargetFromProps(this.props,e))?r:this.readValueFromInstance(this.current,e,this.options):this.latestValues[e];return null!=n&&("string"==typeof n&&(rI(n)||tC(n))?n=parseFloat(n):!o6(n)&&t8.test(t)&&(n=rl(e,t)),this.setBaseTarget(e,tr(n)?n.get():n)),tr(n)?n.get():n}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var t;let r,{initial:n}=this.props;if("string"==typeof n||"object"==typeof n){let i=W(this.props,n,null==(t=this.presenceContext)?void 0:t.custom);i&&(r=i[e])}if(n&&void 0!==r)return r;let i=this.getBaseTargetFromProps(this.props,e);return void 0===i||tr(i)?void 0!==this.initialValues[e]&&void 0===r?void 0:this.baseTarget[e]:i}on(e,t){return this.events[e]||(this.events[e]=new e3),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}}class o9 extends o7{constructor(){super(...arguments),this.KeyframeResolver=rV}sortInstanceNodePosition(e,t){return 2&e.compareDocumentPosition(t)?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:r}){delete t[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);let{children:e}=this.props;tr(e)&&(this.childSubscription=e.on("change",e=>{this.current&&(this.current.textContent=`${e}`)}))}}function le(e){return window.getComputedStyle(e)}class lt extends o9{constructor(){super(...arguments),this.type="html",this.renderInstance=oD}readValueFromInstance(e,t){if(eV.has(t)){let e=ro(t);return e&&e.default||0}{let r=le(e),n=(rA(t)?r.getPropertyValue(t):r[t])||0;return"string"==typeof n?n.trim():n}}measureInstanceViewportBox(e,{transformPagePoint:t}){return sa(e,t)}build(e,t,r){ow(e,t,r.transformTemplate)}scrapeMotionValuesFromProps(e,t,r){return oL(e,t,r)}}class lr extends o9{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=iY}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(eV.has(t)){let e=ro(t);return e&&e.default||0}return t=oO.has(t)?t:ts(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,r){return oB(e,t,r)}build(e,t,r){ok(e,t,this.isSVGTag,r.transformTemplate)}renderInstance(e,t,r,n){oP(e,t,r,n)}mount(e){this.isSVGTag=oN(e.tagName),super.mount(e)}}let ln=(e,t)=>op(e)?new lr(t):new lt(t,{allowProjection:e!==N.Fragment}),li=q(oZ({...il,...aX,...aB,...aZ},ln)),ls=({children:e,className:t})=>(0,p.jsx)("div",{className:(0,O.cn)("flex h-full w-full justify-center",t),children:(0,p.jsx)("div",{className:"w-full max-w-4xl",children:(0,p.jsxs)("div",{className:"relative wrap h-full p-4 md:p-10",children:[(0,p.jsx)("div",{className:"absolute h-full border border-dashed border-opacity-20 border-secondary",style:{left:"calc(25% + 1.25rem)"}}),e]})})}),la=({children:e,title:t})=>{let[r,n]=D().useState(!1);D().useEffect(()=>{let e=()=>{n(window.innerWidth<768)};return e(),window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}},[]);let i={hidden:{opacity:0,y:20},visible:{opacity:1,y:0}};return(0,p.jsxs)(li.div,{className:"mb-8 flex w-full items-start justify-between md:flex-row",initial:"hidden",whileInView:"visible",viewport:{once:!0,amount:.5},variants:i,transition:{duration:.5},children:[(0,p.jsx)("div",{className:"order-1 w-1/4 pr-4 text-right",children:(0,p.jsx)("h3",{className:"mb-3 text-xl font-bold text-foreground",children:t})}),(0,p.jsx)("div",{className:"z-20 order-1 flex h-10 w-10 items-center rounded-full bg-primary shadow-xl",children:(0,p.jsx)("div",{className:"mx-auto text-lg font-semibold text-primary-foreground"})}),(0,p.jsx)("div",{className:"order-1 w-8/12 rounded-lg bg-card p-4 shadow-xl pl-8",children:(0,p.jsx)("div",{className:"text-sm font-medium leading-snug tracking-wide text-muted-foreground",children:e})})]})},lo=[{title:"1. Crie sua Conta",content:(0,p.jsxs)("div",{children:[(0,p.jsx)("p",{className:"text-muted-foreground text-lg mb-6",children:"O primeiro passo \xe9 simples e r\xe1pido. Clique em LOGIN e crie sua conta na Vempreender para ter acesso \xe0 nossa plataforma e come\xe7ar a configurar seu assistente virtual."}),(0,p.jsx)(U.default,{src:"https://firebasestorage.googleapis.com/v0/b/cb-vempreender.firebasestorage.app/o/Imagens%20LP%2Flogin_vempreender.png?alt=media&token=1ad7612f-a1d6-4e1f-851a-e64dffdb1bd2",alt:"Cria\xe7\xe3o de conta na Vempreender AI",width:800,height:500,className:"rounded-lg object-cover w-full h-auto shadow-lg"})]})},{title:"2. Preencha o Formul\xe1rio",content:(0,p.jsxs)("div",{children:[(0,p.jsx)("p",{className:"text-muted-foreground text-lg mb-6",children:"Para que a IA responda como voc\xea, ela precisa aprender com voc\xea. Preencha um formul\xe1rio detalhado com informa\xe7\xf5es sobre seu neg\xf3cio, servi\xe7os, pre\xe7os e perguntas frequentes (FAQ). Quanto mais detalhes, mais inteligente ser\xe1 seu chatbot."}),(0,p.jsx)(U.default,{src:"https://firebasestorage.googleapis.com/v0/b/cb-vempreender.firebasestorage.app/o/Imagens%20LP%2Fform_vempreender.png?alt=media&token=46279254-bb94-4b11-9eb1-9ffaee0f7954",alt:"Preenchimento de formul\xe1rio",width:800,height:500,className:"rounded-lg object-cover w-full h-auto shadow-lg","data-ai-hint":"online form"})]})},{title:"3. Teste seu Chatbot",content:(0,p.jsxs)("div",{children:[(0,p.jsx)("p",{className:"text-muted-foreground text-lg mb-6",children:"Em at\xe9 1 hora, seu chatbot estar\xe1 pronto! Voc\xea receber\xe1 um link exclusivo para testar as conversas. Interaja com ele como se fosse um cliente para ver a m\xe1gica acontecer."}),(0,p.jsx)(U.default,{src:"https://firebasestorage.googleapis.com/v0/b/cb-vempreender.firebasestorage.app/o/Imagens%20LP%2Fchat_vempreender.png?alt=media&token=74947160-89fa-4b3f-81db-5241805f8577",alt:"Teste do chatbot",width:800,height:500,className:"rounded-lg object-cover w-full h-auto shadow-lg","data-ai-hint":"chatbot conversation"})]})},{title:"4. Ajuste e Refine",content:(0,p.jsxs)("div",{children:[(0,p.jsx)("p",{className:"text-muted-foreground text-lg mb-6",children:"Notou que uma resposta pode ser melhor? Sem problemas. Volte ao seu formul\xe1rio, adicione mais informa\xe7\xf5es, refine as respostas do FAQ e veja seu chatbot ficar cada vez mais preciso e eficiente."}),(0,p.jsx)(U.default,{src:"https://firebasestorage.googleapis.com/v0/b/cb-vempreender.firebasestorage.app/o/Imagens%20LP%2Fsummarize_vempreender.png?alt=media&token=9c30350a-708f-464a-adc1-ba6a58c9860d",alt:"Ajuste de configura\xe7\xf5es",width:800,height:500,className:"rounded-lg object-cover w-full h-auto shadow-lg","data-ai-hint":"dashboard settings"})]})},{title:"5. O que ele faz",content:(0,p.jsxs)("div",{className:"space-y-6 text-lg",children:[(0,p.jsxs)("ul",{className:"space-y-4 text-muted-foreground",children:[(0,p.jsxs)("li",{className:"flex items-start",children:[(0,p.jsx)("span",{className:"text-primary mr-3 mt-1",children:""}),(0,p.jsx)("span",{children:"Conversa fora do whatsapp, pra n\xe3o encher sua caixa de mensagens com curiosos."})]}),(0,p.jsxs)("li",{className:"flex items-start",children:[(0,p.jsx)("span",{className:"text-primary mr-3 mt-1",children:""}),(0,p.jsx)("span",{children:"Ajuda a separar curiosos do seu pontencial cliente. Voc\xea decide quem vai conversar no seu whatsapp."})]}),(0,p.jsxs)("li",{className:"flex items-start",children:[(0,p.jsx)("span",{className:"text-primary mr-3 mt-1",children:""}),(0,p.jsx)("span",{children:"Tira d\xfavidas e incentiva o cliente a desejar seu produto ou servi\xe7o. Voc\xea ainda recebe os dados de contato e uma sugest\xe3o de abordagem baseada no perfil do cliente."})]}),(0,p.jsxs)("li",{className:"flex items-start",children:[(0,p.jsx)("span",{className:"text-primary mr-3 mt-1",children:""}),(0,p.jsx)("span",{children:"Insira o link da sua Agenda pra aceitar agendamentos."})]})]}),(0,p.jsx)(U.default,{src:"https://firebasestorage.googleapis.com/v0/b/cb-vempreender.firebasestorage.app/o/Imagens%20LP%2Fcalendar_vempreender.png?alt=media&token=453cb2f1-17e0-45dd-adcf-2f8b2a826cf4",alt:"Resumo da conversa do chatbot",width:800,height:500,className:"rounded-lg object-contain w-full h-auto shadow-lg","data-ai-hint":"conversation summary"})]})},{title:"6. O que ele N\xc3O faz",content:(0,p.jsxs)("div",{className:"space-y-6 text-lg",children:[(0,p.jsxs)("ul",{className:"space-y-4 text-muted-foreground",children:[(0,p.jsxs)("li",{className:"flex items-start",children:[(0,p.jsx)("span",{className:"text-destructive mr-3 mt-1",children:""}),(0,p.jsx)("span",{children:"N\xe3o \xe9 indicado para pedidos de delivery, mas funciona muito bem para agendar encomendas."})]}),(0,p.jsxs)("li",{className:"flex items-start",children:[(0,p.jsx)("span",{className:"text-destructive mr-3 mt-1",children:""}),(0,p.jsx)("span",{children:"N\xe3o se integra a sistemas de CRM ou outras ferramentas."})]}),(0,p.jsxs)("li",{className:"flex items-start",children:[(0,p.jsx)("span",{className:"text-destructive mr-3 mt-1",children:""}),(0,p.jsx)("span",{children:"N\xe3o processa pagamentos. O foco \xe9 no atendimento inicial."})]})]}),(0,p.jsx)(U.default,{src:"https://firebasestorage.googleapis.com/v0/b/cb-vempreender.firebasestorage.app/o/Imagens%20LP%2Fdelivery.png?alt=media&token=8c12eb83-3d20-4174-ae51-9b633dd20124",alt:"Fun\xe7\xf5es n\xe3o inclusas",width:600,height:375,className:"rounded-lg object-cover w-full h-auto shadow-lg","data-ai-hint":"delivery box"})]})},{title:"7. Para quem \xe9 indicado",content:(0,p.jsxs)("div",{children:[(0,p.jsx)("p",{className:"text-muted-foreground text-lg mb-6",children:"Ideal para prestadores de servi\xe7o e aut\xf4nomos que recebem muitos contatos pelo Instagram ou tr\xe1fego pago e perdem muito tempo respondendo as mesmas perguntas."}),(0,p.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,p.jsx)("div",{className:"p-4 bg-card rounded-lg text-center",children:(0,p.jsx)("p",{className:"font-bold",children:"Esteticistas"})}),(0,p.jsx)("div",{className:"p-4 bg-card rounded-lg text-center",children:(0,p.jsx)("p",{className:"font-bold",children:"Advogados"})}),(0,p.jsx)("div",{className:"p-4 bg-card rounded-lg text-center",children:(0,p.jsx)("p",{className:"font-bold",children:"Nutricionistas"})}),(0,p.jsx)("div",{className:"p-4 bg-card rounded-lg text-center",children:(0,p.jsx)("p",{className:"font-bold",children:"Psic\xf3logos"})}),(0,p.jsx)("div",{className:"p-4 bg-card rounded-lg text-center",children:(0,p.jsx)("p",{className:"font-bold",children:"Terapeutas"})}),(0,p.jsx)("div",{className:"p-4 bg-card rounded-lg text-center",children:(0,p.jsx)("p",{className:"font-bold",children:"Personal Trainers"})}),(0,p.jsx)("div",{className:"p-4 bg-card rounded-lg text-center",children:(0,p.jsx)("p",{className:"font-bold",children:"E muitos outros!"})})]})]})}];function ll(){return(0,p.jsx)("section",{id:"como-funciona",className:"bg-background py-10 md:py-16",children:(0,p.jsxs)("div",{className:"container mx-auto px-4 md:px-24",children:[(0,p.jsxs)("div",{className:"mx-auto max-w-3xl text-center",children:[(0,p.jsx)("h2",{className:"font-headline text-3xl font-semibold tracking-tight text-foreground sm:text-4xl",children:"Como Funciona"}),(0,p.jsx)("p",{className:"mt-6 text-xl font-normal text-muted-foreground sm:text-2xl",children:"Em poucos passos, voc\xea transforma seu atendimento e libera seu tempo para focar no que realmente importa: seu neg\xf3cio."})]}),(0,p.jsx)(ls,{className:"mt-12",children:lo.map((e,t)=>(0,p.jsx)(la,{title:e.title,children:e.content},t))})]})})}let lu=[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]],lc=(0,v.A)("Instagram",lu),lh=[{icon:(0,p.jsx)(lc,{className:"h-8 w-8 text-primary"}),title:"Turbine seu Impulsionamento no Instagram",description:"Impulsionou no Instagram e a procura aumentou? Vempreender \xe9 seu Agente IA que trabalha 24/7 para recepcionar interessados, responder d\xfavidas e capturar dados. Contatos qualificados direto para voc\xea. Adicione o link na sua Bio!"},{icon:(0,p.jsx)("svg",{className:"h-8 w-8 text-primary",fill:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,p.jsx)("path",{d:"M12.024 10.428h-6.012v2.856h6.012c-.228 1.452-1.632 3.576-4.5 3.576-2.724 0-4.932-2.22-4.932-4.956s2.208-4.956 4.932-4.956c1.56 0 2.58 .672 3.18 1.248l2.292-2.292c-1.38-1.296-3.18-2.076-5.472-2.076-4.524 0-8.196 3.672-8.196 8.196s3.672 8.196 8.196 8.196c4.716 0 7.824-3.264 7.824-7.98 0-.528-.06-1.02-.156-1.5H12.024v.000z"})}),title:"Maximize seu Tr\xe1fego Pago",description:"Invista em Tr\xe1fego Pago (Google/Meta Ads) com intelig\xeancia. Cada clique \xe9 um investimento. Vempreender garante atendimento imediato a todos, qualificando contatos e aproveitando ao m\xe1ximo seu investimento."}];function ld(){return(0,p.jsx)("section",{id:"atraia-clientes",className:"py-5 md:py-8 bg-background/50",children:(0,p.jsxs)("div",{className:"container mx-auto px-4 md:px-24",children:[(0,p.jsxs)("div",{className:"mx-auto max-w-3xl text-center",children:[(0,p.jsx)("h2",{className:"font-headline text-3xl font-semibold tracking-tight text-foreground sm:text-4xl",children:"Pronto em at\xe9 1 hora!"}),(0,p.jsx)("p",{className:"mt-10 text-xl font-normal text-muted-foreground sm:text-2xl",children:"Seu incr\xedvel trabalho precisa ser divulgado. Elimine o gargalo do atendimento e divulgue seu neg\xf3cio sem medo. Com Vempreender, voc\xea atende a todos, de forma inteligente, eficiente e acess\xedvel. O Vempreender cuida da conversa para voc\xea vender mais, com mais intelig\xeancia e menos esfor\xe7o."})]}),(0,p.jsx)("div",{className:"mt-12 grid grid-cols-1 gap-8 md:grid-cols-2",children:lh.map(e=>(0,p.jsxs)(P,{className:"transform-gpu bg-card transition-all duration-300 hover:-translate-y-2 hover:shadow-2xl hover:shadow-primary/10 border-border",children:[(0,p.jsxs)(M,{className:"flex flex-col items-start gap-4",children:[e.icon,(0,p.jsx)(L,{className:"font-headline text-xl font-medium",children:e.title})]}),(0,p.jsx)(j,{children:(0,p.jsx)("p",{className:"text-muted-foreground text-lg",children:e.description})})]},e.title))}),(0,p.jsx)("div",{className:"mt-12 text-center",children:(0,p.jsx)("div",{className:"mx-auto max-w-2xl",children:(0,p.jsxs)("p",{className:"text-lg text-muted-foreground sm:text-xl",children:["Quer dominar o Impulsionamento e Tr\xe1fego Pago? ",(0,p.jsx)("a",{href:"#blog",className:"text-primary hover:underline",children:"Visite nosso Blog"})," para dicas pr\xe1ticas e fa\xe7a o Vempreender render ainda mais!"]})})})]})})}let lp=[{id:1,buttonText:"Concorrentes - Implanta\xe7\xe3o 5.000,00",title:"Implanta\xe7\xe3o nos Concorrentes",price:"Podem custar de 1.200,00 a 5.000,00",description:"Nossos concorrentes integram ferramentas que s\xe3o \xfateis, mas que nem todo empreendedor tem tempo e habilidade para aproveitar. Voc\xea paga e n\xe3o usa.",colors:"border-red-900/80 shadow-red-900/30",buttonColors:"bg-red-900/80 hover:bg-red-900 text-white",topClass:"top-20"},{id:2,buttonText:"Concorrentes - Mensalidade 3.000,00",title:"Mensalidade nos Concorrentes",price:"Podem custar de 900,00 a 3.000,00 por m\xeas.",description:"A mensalidade dos concorrentes \xe9 proporcional \xe0 quantidade de ferramentas e fun\xe7\xf5es embutidas que s\xf3 s\xe3o \xfateis se voc\xea tiver tempo e habilidades para explorar.",colors:"border-orange-400/80 shadow-orange-400/30",buttonColors:"bg-orange-400/80 hover:bg-orange-500 text-white",topClass:"top-36"},{id:3,buttonText:"Vempreender - Implanta\xe7\xe3o 400,00",title:"Implanta\xe7\xe3o na Vempreender",price:"Nossa implanta\xe7\xe3o custa 800,00 fora da promo\xe7\xe3o.",description:"Nossa Promo\xe7\xe3o \xe9 simples. Baixe e publique nosso post no Stories do seu Instagram marcando o @vempreender.ia e ganhe 50% de desconto na implanta\xe7\xe3o.",promoPrice:"Na promo\xe7\xe3o a implanta\xe7\xe3o custa apenas 400,00.",colors:"border-green-900/80 shadow-green-900/30",buttonColors:"bg-green-900/80 hover:bg-green-900 text-white",topClass:"top-52"},{id:4,buttonText:"Vempreender - Mensalidade 250,00",title:"Mensalidade na Vempreender",price:"Nossa mensalidade custa 579,00 fora da promo\xe7\xe3o.",description:"Para conquistar seu desconto, basta indicar 3 amigos que precisam de um assistente inteligente como o Vempreender. Voc\xea faz a indica\xe7\xe3o durante a cria\xe7\xe3o do seu chatbot.",promoPrice:"Na promo\xe7\xe3o a mensalidade fica apenas 250,00.",colors:"border-blue-900/80 shadow-blue-900/30",buttonColors:"bg-blue-900/80 hover:bg-blue-900 text-white",topClass:"top-64"}];function lf(){let e="/login/auth.html";return(0,p.jsxs)("section",{id:"nosso-plano",className:"relative pb-5 md:pb-8",children:[(0,p.jsx)("div",{"aria-hidden":"true",className:"absolute inset-0 -z-20 bg-cover bg-center bg-fixed bg-no-repeat",style:{backgroundImage:"url('https://firebasestorage.googleapis.com/v0/b/cb-vempreender.firebasestorage.app/o/Imagens%20LP%2FHero%20Chatbot%20Vempreender.webp?alt=media&token=cf25148f-5399-4976-bb7e-f9347ba1428f')"}}),(0,p.jsx)("div",{"aria-hidden":"true",className:"absolute inset-0 -z-10 bg-background/70"}),(0,p.jsxs)("div",{className:"container relative mx-auto px-4 md:px-24",children:[(0,p.jsxs)("div",{className:"mx-auto max-w-3xl text-center",children:[(0,p.jsx)("h2",{className:"font-headline text-3xl font-semibold tracking-tight text-foreground sm:text-4xl",children:"Simples no uso. Enorme no resultado."}),(0,p.jsx)("p",{className:"mt-10 text-xl font-normal text-foreground sm:text-2xl",children:"Sem complexidade ou funcionalidades que voc\xea n\xe3o usa. Foco em resolver seu problema principal: atender bem para vender mais."})]}),(0,p.jsx)("div",{className:"mx-auto mt-8 max-w-2xl text-center",children:(0,p.jsx)("p",{className:"text-xl font-medium text-primary",children:"Vempreender ser\xe1 seu melhor funcion\xe1rio por uma fra\xe7\xe3o do sal\xe1rio de um atendente humano. N\xe3o esquece as suas instru\xe7\xf5es, n\xe3o falta e trabalha inclusive enquanto voc\xea aproveita as suas f\xe9rias!"})}),(0,p.jsxs)("div",{className:"relative mx-auto mt-12 max-w-2xl",children:[lp.map((e,t)=>(0,p.jsxs)(N.Fragment,{children:[(0,p.jsx)("div",{className:`sticky ${e.topClass}`,children:(0,p.jsx)(P,{className:`flex flex-col border-2 ${e.colors}`,children:(0,p.jsxs)(M,{className:"flex flex-col space-y-1.5 p-6 px-6 py-4",children:[(0,p.jsx)(f.$,{className:`w-full text-lg font-bold md:text-xl ${e.buttonColors}`,children:e.buttonText}),(0,p.jsx)(L,{className:"pt-2 font-medium",children:e.title}),(0,p.jsx)(B,{className:"text-lg font-bold text-primary md:text-xl",children:e.price}),(0,p.jsx)("p",{className:"text-lg pt-2",children:e.description}),e.promoPrice&&(0,p.jsx)(B,{className:"mt-4 text-lg font-bold text-primary md:text-xl",children:e.promoPrice})]})})}),t<lp.length-1&&(0,p.jsx)("div",{className:"h-96"})]},e.id)),(0,p.jsx)("div",{className:"h-[100vh]","aria-hidden":"true"})]}),(0,p.jsx)("div",{className:"mt-16 text-center",children:(0,p.jsx)(f.$,{asChild:!0,size:"lg",className:"text-base font-bold shadow-lg shadow-primary/20 transition-all hover:scale-105 hover:shadow-xl hover:shadow-primary/30",children:(0,p.jsx)(g(),{href:e,target:"_blank",rel:"noopener noreferrer",children:"Teste Gr\xe1tis por 10 dias"})})})]})]})}let lm=[["path",{d:"M16 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"rib7q0"}],["path",{d:"M5 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"1ymkrd"}]],lg=(0,v.A)("Quote",lm);var ly=r(3315);let lv=[{quote:"Eu n\xe3o aguentava mais passar o dia todo respondendo as mesmas perguntas no WhatsApp. O Vempreender faz isso por mim. Meus agendamentos aumentaram e finalmente consigo focar no que eu amo, que \xe9 atender minhas clientes. Salvou minha sanidade!",name:"J\xe9ssica M., Esteticista",avatar:"https://placehold.co/100x100.png",aiHint:"woman portrait"},{quote:"Como advogado, meu tempo \xe9 meu bem mais valioso. Perdia horas qualificando contatos. O Vempreender filtra os casos iniciais com uma precis\xe3o incr\xedvel. O cliente chega pra mim muito mais preparado. Foi o melhor investimento que fiz no meu escrit\xf3rio este ano.",name:"Dr. Ricardo P., Advogado",avatar:"https://placehold.co/100x100.png",aiHint:"man portrait"},{quote:"Meu direct vivia lotado de 'quanto custa?'. Era imposs\xedvel dar aten\xe7\xe3o de qualidade pra todo mundo. Com o Vempreender, o pessoal j\xe1 tira as d\xfavidas iniciais pelo link na bio e chamo no WhatsApp clientes qualificados. Fechei 5 novos alunos na primeira semana!",name:"Fernando G., Personal Trainer",avatar:"https://placehold.co/100x100.png",aiHint:"man smiling"},{quote:"Muitos pacientes chegavam com d\xfavidas b\xe1sicas que tomavam tempo da consulta. O Vempreender agora educa eles antes mesmo de agendar. Otimizou meu tempo e melhorou a experi\xeancia do paciente. Recomendo demais!",name:"Dra. Ana B., Nutricionista",avatar:"https://placehold.co/100x100.png",aiHint:"woman professional"},{quote:"A primeira sess\xe3o de terapia pode ser intimidante. O Vempreender ajuda a quebrar o gelo, respondendo perguntas iniciais e explicando minha abordagem. Os clientes chegam mais tranquilos e confiantes. Fez toda a diferen\xe7a.",name:"Lucas T., Psic\xf3logo",avatar:"https://placehold.co/100x100.png",aiHint:"man thinking"}];function lb(){let[e,t]=N.useState(!1);return(0,p.jsx)("section",{id:"depoimentos",className:"py-10 md:py-16 bg-background/50",children:(0,p.jsxs)("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[(0,p.jsxs)("div",{className:"mx-auto max-w-3xl text-center",children:[(0,p.jsx)("h2",{className:"font-headline text-3xl font-semibold tracking-tight text-foreground sm:text-4xl",children:"Depoimentos"}),(0,p.jsx)("p",{className:"mt-6 text-2xl font-medium text-muted-foreground/80 sm:text-[22px]",children:"Veja o que nossos clientes est\xe3o dizendo sobre como o Vempreender transformou seus neg\xf3cios."})]}),(0,p.jsx)("div",{className:"relative mt-12 w-full overflow-hidden [mask-image:_linear_gradient(to_right,transparent_0,_black_128px,_black_calc(100%-128px),transparent_100%)]",onMouseEnter:()=>t(!0),onMouseLeave:()=>t(!1),children:(0,p.jsxs)("div",{className:(0,O.cn)("flex w-max shrink-0 gap-4 py-4 animate-marquee",e&&"pause-animation"),children:[lv.map((e,t)=>(0,p.jsx)("div",{className:"w-[350px] md:w-[400px] flex-shrink-0",children:(0,p.jsx)(P,{className:"bg-card flex flex-col h-full cursor-pointer transition-transform duration-300 hover:scale-105 hover:shadow-xl",children:(0,p.jsxs)(j,{className:"p-6 flex flex-col flex-1",children:[(0,p.jsx)(lg,{className:"h-8 w-8 text-primary mb-6"}),(0,p.jsxs)("p",{className:"text-muted-foreground mb-6 flex-1",children:["",e.quote,""]}),(0,p.jsxs)("div",{className:"flex items-center gap-4 mt-auto",children:[(0,p.jsxs)(ly.eu,{children:[(0,p.jsx)(ly.BK,{src:e.avatar,alt:e.name,"data-ai-hint":e.aiHint}),(0,p.jsxs)(ly.q5,{children:[e.name.split(" ")[0][0],e.name.split(" ")[1][0]]})]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("p",{className:"font-bold text-foreground",children:e.name.split(",")[0]}),(0,p.jsx)("p",{className:"text-sm text-muted-foreground",children:e.name.split(",")[1].trim()})]})]})]})})},`testimonial-1-${t}`)),lv.map((e,t)=>(0,p.jsx)("div",{className:"w-[350px] md:w-[400px] flex-shrink-0",children:(0,p.jsx)(P,{className:"bg-card flex flex-col h-full cursor-pointer transition-transform duration-300 hover:scale-105 hover:shadow-xl",children:(0,p.jsxs)(j,{className:"p-6 flex flex-col flex-1",children:[(0,p.jsx)(lg,{className:"h-8 w-8 text-primary mb-6"}),(0,p.jsxs)("p",{className:"text-muted-foreground mb-6 flex-1",children:["",e.quote,""]}),(0,p.jsxs)("div",{className:"flex items-center gap-4 mt-auto",children:[(0,p.jsxs)(ly.eu,{children:[(0,p.jsx)(ly.BK,{src:e.avatar,alt:e.name,"data-ai-hint":e.aiHint}),(0,p.jsxs)(ly.q5,{children:[e.name.split(" ")[0][0],e.name.split(" ")[1][0]]})]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("p",{className:"font-bold text-foreground",children:e.name.split(",")[0]}),(0,p.jsx)("p",{className:"text-sm text-muted-foreground",children:e.name.split(",")[1].trim()})]})]})]})})},`testimonial-2-${t}`))]})})]})})}function lS({className:e,...t}){return(0,p.jsx)("div",{className:(0,O.cn)("animate-pulse rounded-md bg-muted",e),...t})}function lT({posts:e}){return(0,p.jsx)("section",{id:"blog",className:"py-10 md:py-16",children:(0,p.jsxs)("div",{className:"container mx-auto px-4 md:px-24",children:[(0,p.jsxs)("div",{className:"mx-auto max-w-3xl text-center",children:[(0,p.jsx)("h2",{className:"font-headline text-3xl font-semibold tracking-tight text-foreground sm:text-4xl",children:"Blog Vempreender: Dicas e Estrat\xe9gias para sua Empresa Crescer"}),(0,p.jsx)("p",{className:"mt-10 text-xl font-normal text-muted-foreground sm:text-2xl",children:"Quer mais clientes e aumentar suas vendas? No Blog Vempreender voc\xea encontra dicas pr\xe1ticas de marketing, vendas e como usar seu chatbot, que \xe9 seu Agente IA personalizado, para crescer."})]}),(0,p.jsx)("div",{className:"mt-12 grid grid-cols-1 gap-8 md:grid-cols-3",children:e&&e.length>0?e.map(e=>(0,p.jsx)(g(),{href:`/blog/${e.id}`,className:"flex",children:(0,p.jsxs)(P,{className:"overflow-hidden flex flex-col w-full h-full transition-transform duration-300 hover:-translate-y-2 hover:shadow-xl",children:[(0,p.jsx)("div",{className:"relative w-full h-48",children:e.image?(0,p.jsx)(U.default,{src:e.image,alt:e.title,fill:!0,sizes:"(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw","data-ai-hint":e.aiHint,className:"object-cover"}):(0,p.jsx)(lS,{className:"h-full w-full"})}),(0,p.jsx)(M,{className:"flex-1",children:(0,p.jsx)(L,{className:"text-lg font-bold",children:e.title})})]})},e.id)):Array.from({length:3}).map((e,t)=>(0,p.jsxs)(P,{className:"overflow-hidden flex flex-col",children:[(0,p.jsx)(lS,{className:"w-full h-48"}),(0,p.jsx)(M,{className:"flex-1",children:(0,p.jsx)(lS,{className:"h-6 w-3/4"})})]},t))}),(0,p.jsx)("div",{className:"mt-12 text-center",children:(0,p.jsx)(f.$,{size:"lg",asChild:!0,className:"text-base font-bold",children:(0,p.jsx)(g(),{href:"/blog",children:"Ver Todas as Dicas no Blog"})})})]})})}let lw=[["path",{d:"m11 17 2 2a1 1 0 1 0 3-3",key:"efffak"}],["path",{d:"m14 14 2.5 2.5a1 1 0 1 0 3-3l-3.88-3.88a3 3 0 0 0-4.24 0l-.88.88a1 1 0 1 1-3-3l2.81-2.81a5.79 5.79 0 0 1 7.06-.87l.47.28a2 2 0 0 0 1.42.25L21 4",key:"9pr0kb"}],["path",{d:"m21 3 1 11h-2",key:"1tisrp"}],["path",{d:"M3 3 2 14l6.5 6.5a1 1 0 1 0 3-3",key:"1uvwmv"}],["path",{d:"M3 4h8",key:"1ep09j"}]],lC=(0,v.A)("Handshake",lw);function lx(){let e="/login/auth.html";return(0,p.jsx)("section",{id:"afiliados",className:"py-10 md:py-16 bg-background/50",children:(0,p.jsxs)("div",{className:"container mx-auto px-4 md:px-24",children:[(0,p.jsxs)("div",{className:"mx-auto max-w-3xl text-center",children:[(0,p.jsx)("h2",{className:"font-headline text-3xl font-semibold tracking-tight text-foreground sm:text-4xl",children:"Indique Vempreender: Programa de Afiliados"}),(0,p.jsx)("p",{className:"mt-10 text-xl font-normal text-muted-foreground sm:text-2xl",children:"Ajude outros empreendedores a transformar o atendimento com Vempreender e gere uma renda extra. Conhe\xe7a nosso Programa de Afiliados!"})]}),(0,p.jsxs)("div",{className:"mx-auto mt-12 max-w-4xl rounded-xl bg-card p-8 text-center border border-border",children:[(0,p.jsx)(lC,{className:"mx-auto h-12 w-12 text-primary"}),(0,p.jsx)("h3",{className:"mt-6 text-2xl font-bold text-foreground",children:"Lucre Ajudando Outros Neg\xf3cios"}),(0,p.jsx)("p",{className:"mt-2 text-muted-foreground",children:"Promova uma solu\xe7\xe3o que funciona! Indique Vempreender e receba 50% da taxa de Implanta\xe7\xe3o por cada novo cliente."}),(0,p.jsxs)("div",{className:"my-6 rounded-lg bg-primary/10 p-4",children:[(0,p.jsx)("p",{className:"text-2xl font-bold text-primary",children:"S\xe3o R$ 200,00 por indica\xe7\xe3o convertida!"}),(0,p.jsx)("p",{className:"text-sm text-primary/80",children:"Pagamento transparente 30 dias ap\xf3s a confirma\xe7\xe3o do cliente."})]}),(0,p.jsx)(f.$,{asChild:!0,size:"lg",className:"text-base font-bold",children:(0,p.jsx)(g(),{href:e,target:"_blank",rel:"noopener noreferrer",children:"Quero Ser Afiliado!"})})]})]})})}var lE=r(11273),l_=r(72031),lI=r(98599),lk=r(70569),lA=r(65551),lR=r(3416),lN=r(66156),lD=r(46059),lO=r(96963),lP="Collapsible",[lM,lL]=(0,lE.A)(lP),[lB,lj]=lM(lP),lF=N.forwardRef((e,t)=>{let{__scopeCollapsible:r,open:n,defaultOpen:i,disabled:s,onOpenChange:a,...o}=e,[l=!1,u]=(0,lA.i)({prop:n,defaultProp:i,onChange:a});return(0,p.jsx)(lB,{scope:r,disabled:s,contentId:(0,lO.B)(),open:l,onOpenToggle:N.useCallback(()=>u(e=>!e),[u]),children:(0,p.jsx)(lR.sG.div,{"data-state":lG(l),"data-disabled":s?"":void 0,...o,ref:t})})});lF.displayName=lP;var lV="CollapsibleTrigger",lU=N.forwardRef((e,t)=>{let{__scopeCollapsible:r,...n}=e,i=lj(lV,r);return(0,p.jsx)(lR.sG.button,{type:"button","aria-controls":i.contentId,"aria-expanded":i.open||!1,"data-state":lG(i.open),"data-disabled":i.disabled?"":void 0,disabled:i.disabled,...n,ref:t,onClick:(0,lk.m)(e.onClick,i.onOpenToggle)})});lU.displayName=lV;var lq="CollapsibleContent",lz=N.forwardRef((e,t)=>{let{forceMount:r,...n}=e,i=lj(lq,e.__scopeCollapsible);return(0,p.jsx)(lD.C,{present:r||i.open,children:({present:e})=>(0,p.jsx)(l$,{...n,ref:t,present:e})})});lz.displayName=lq;var l$=N.forwardRef((e,t)=>{let{__scopeCollapsible:r,present:n,children:i,...s}=e,a=lj(lq,r),[o,l]=N.useState(n),u=N.useRef(null),c=(0,lI.s)(t,u),h=N.useRef(0),d=h.current,f=N.useRef(0),m=f.current,g=a.open||o,y=N.useRef(g),v=N.useRef(void 0);return N.useEffect(()=>{let e=requestAnimationFrame(()=>y.current=!1);return()=>cancelAnimationFrame(e)},[]),(0,lN.N)(()=>{let e=u.current;if(e){v.current=v.current||{transitionDuration:e.style.transitionDuration,animationName:e.style.animationName},e.style.transitionDuration="0s",e.style.animationName="none";let t=e.getBoundingClientRect();h.current=t.height,f.current=t.width,y.current||(e.style.transitionDuration=v.current.transitionDuration,e.style.animationName=v.current.animationName),l(n)}},[a.open,n]),(0,p.jsx)(lR.sG.div,{"data-state":lG(a.open),"data-disabled":a.disabled?"":void 0,id:a.contentId,hidden:!g,...s,ref:c,style:{"--radix-collapsible-content-height":d?`${d}px`:void 0,"--radix-collapsible-content-width":m?`${m}px`:void 0,...e.style},children:g&&i})});function lG(e){return e?"open":"closed"}var lH=lF,lK=lU,lW=lz,lQ=r(43),lY="Accordion",lJ=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[lX,lZ,l0]=(0,l_.N)(lY),[l1,l2]=(0,lE.A)(lY,[l0,lL]),l3=lL(),l6=N.forwardRef((e,t)=>{let{type:r,...n}=e,i=n,s=n;return(0,p.jsx)(lX.Provider,{scope:e.__scopeAccordion,children:"multiple"===r?(0,p.jsx)(ue,{...s,ref:t}):(0,p.jsx)(l9,{...i,ref:t})})});l6.displayName=lY;var[l4,l5]=l1(lY),[l8,l7]=l1(lY,{collapsible:!1}),l9=N.forwardRef((e,t)=>{let{value:r,defaultValue:n,onValueChange:i=()=>{},collapsible:s=!1,...a}=e,[o,l]=(0,lA.i)({prop:r,defaultProp:n,onChange:i});return(0,p.jsx)(l4,{scope:e.__scopeAccordion,value:o?[o]:[],onItemOpen:l,onItemClose:N.useCallback(()=>s&&l(""),[s,l]),children:(0,p.jsx)(l8,{scope:e.__scopeAccordion,collapsible:s,children:(0,p.jsx)(un,{...a,ref:t})})})}),ue=N.forwardRef((e,t)=>{let{value:r,defaultValue:n,onValueChange:i=()=>{},...s}=e,[a=[],o]=(0,lA.i)({prop:r,defaultProp:n,onChange:i}),l=N.useCallback(e=>o((t=[])=>[...t,e]),[o]),u=N.useCallback(e=>o((t=[])=>t.filter(t=>t!==e)),[o]);return(0,p.jsx)(l4,{scope:e.__scopeAccordion,value:a,onItemOpen:l,onItemClose:u,children:(0,p.jsx)(l8,{scope:e.__scopeAccordion,collapsible:!0,children:(0,p.jsx)(un,{...s,ref:t})})})}),[ut,ur]=l1(lY),un=N.forwardRef((e,t)=>{let{__scopeAccordion:r,disabled:n,dir:i,orientation:s="vertical",...a}=e,o=N.useRef(null),l=(0,lI.s)(o,t),u=lZ(r),c="ltr"===(0,lQ.jH)(i),h=(0,lk.m)(e.onKeyDown,e=>{if(!lJ.includes(e.key))return;let t=e.target,r=u().filter(e=>!e.ref.current?.disabled),n=r.findIndex(e=>e.ref.current===t),i=r.length;if(-1===n)return;e.preventDefault();let a=n,o=0,l=i-1,h=()=>{(a=n+1)>l&&(a=o)},d=()=>{(a=n-1)<o&&(a=l)};switch(e.key){case"Home":a=o;break;case"End":a=l;break;case"ArrowRight":"horizontal"===s&&(c?h():d());break;case"ArrowDown":"vertical"===s&&h();break;case"ArrowLeft":"horizontal"===s&&(c?d():h());break;case"ArrowUp":"vertical"===s&&d()}let p=a%i;r[p].ref.current?.focus()});return(0,p.jsx)(ut,{scope:r,disabled:n,direction:i,orientation:s,children:(0,p.jsx)(lX.Slot,{scope:r,children:(0,p.jsx)(lR.sG.div,{...a,"data-orientation":s,ref:l,onKeyDown:n?void 0:h})})})}),ui="AccordionItem",[us,ua]=l1(ui),uo=N.forwardRef((e,t)=>{let{__scopeAccordion:r,value:n,...i}=e,s=ur(ui,r),a=l5(ui,r),o=l3(r),l=(0,lO.B)(),u=n&&a.value.includes(n)||!1,c=s.disabled||e.disabled;return(0,p.jsx)(us,{scope:r,open:u,disabled:c,triggerId:l,children:(0,p.jsx)(lH,{"data-orientation":s.orientation,"data-state":uf(u),...o,...i,ref:t,disabled:c,open:u,onOpenChange:e=>{e?a.onItemOpen(n):a.onItemClose(n)}})})});uo.displayName=ui;var ul="AccordionHeader",uu=N.forwardRef((e,t)=>{let{__scopeAccordion:r,...n}=e,i=ur(lY,r),s=ua(ul,r);return(0,p.jsx)(lR.sG.h3,{"data-orientation":i.orientation,"data-state":uf(s.open),"data-disabled":s.disabled?"":void 0,...n,ref:t})});uu.displayName=ul;var uc="AccordionTrigger",uh=N.forwardRef((e,t)=>{let{__scopeAccordion:r,...n}=e,i=ur(lY,r),s=ua(uc,r),a=l7(uc,r),o=l3(r);return(0,p.jsx)(lX.ItemSlot,{scope:r,children:(0,p.jsx)(lK,{"aria-disabled":s.open&&!a.collapsible||void 0,"data-orientation":i.orientation,id:s.triggerId,...o,...n,ref:t})})});uh.displayName=uc;var ud="AccordionContent",up=N.forwardRef((e,t)=>{let{__scopeAccordion:r,...n}=e,i=ur(lY,r),s=ua(ud,r),a=l3(r);return(0,p.jsx)(lW,{role:"region","aria-labelledby":s.triggerId,"data-orientation":i.orientation,...a,...n,ref:t,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...e.style}})});function uf(e){return e?"open":"closed"}up.displayName=ud;var um=l6,ug=uo,uy=uu,uv=uh,ub=up;let uS=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],uT=(0,v.A)("ChevronDown",uS),uw=um,uC=N.forwardRef(({className:e,...t},r)=>(0,p.jsx)(ug,{ref:r,className:(0,O.cn)("border-b",e),...t}));uC.displayName="AccordionItem";let ux=N.forwardRef(({className:e,children:t,...r},n)=>(0,p.jsx)(uy,{className:"flex",children:(0,p.jsxs)(uv,{ref:n,className:(0,O.cn)("flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",e),...r,children:[t,(0,p.jsx)(uT,{className:"h-4 w-4 shrink-0 transition-transform duration-200"})]})}));ux.displayName=uv.displayName;let uE=N.forwardRef(({className:e,children:t,...r},n)=>(0,p.jsx)(ub,{ref:n,className:"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...r,children:(0,p.jsx)("div",{className:(0,O.cn)("pb-4 pt-0",e),children:t})}));uE.displayName=ub.displayName;let u_=[{question:"O que \xe9 o Vempreender?",answer:"\xc9 um atendente com IA que responde seus clientes automaticamente com seu estilo, baseado no seu conhecimento."},{question:"Preciso entender de tecnologia para usar?",answer:"N\xe3o. N\xf3s configuramos tudo para voc\xea. Sua fun\xe7\xe3o \xe9 fornecer o m\xe1ximo de informa\xe7\xf5es sobre o seu servi\xe7o, principalmente com um FAQ (Perguntas Frequentes) bem extenso que voc\xea preenche no formul\xe1rio de cria\xe7\xe3o do seu chatbot. Existe um bot\xe3o de ajuda onde voc\xea pode copiar um prompt e pedir ajuda ao ChatGPT pra te ajudar a criar as Perguntas e Respostas mais frequentes."},{question:"Posso cancelar quando quiser?",answer:"Sim. Essa \xe9 uma assinatura mensal pr\xe9 paga. Basta parar de pagar ou enviar uma mensagem solicitando o cancelamento para contato@vempreender.com.br"},{question:"Funciona em redes sociais como Instagram?",answer:"O Vempreender gera um link que voc\xea pode divulgar na Bio do Instagram, an\xfancios, no Linktr.ee e onde mais desejar"},{question:"Como funciona o Teste Gr\xe1tis?",answer:"Ap\xf3s o preenchimento do formul\xe1rio, voc\xea recebe o link do seu chatbot pronto para uso e ter\xe1 10 dias de uso gratuito para testar tudo e fazer os ajustes que achar necess\xe1rio."},{question:"Como sei o que o chatbot responde pro meu cliente?",answer:"No seu email voc\xea receber\xe1: 1. O Nome, Whatsapp do cliente e foco de interesse da conversa; 2. Uma sugest\xe3o de abordagem feita pela nossa IA a partir da an\xe1lise da conversa. 3. A transcri\xe7\xe3o completa da conversa. Sempre analise se seu chatbot est\xe1 respondendo de forma coerente. 4. Caso as respostas sejam vagas e sem consist\xeancia, atualize e insira mais informa\xe7\xf5es no seu formul\xe1rio de cria\xe7\xe3o, principalmente no FAQ. Em instantes seu chatbot ser\xe1 atualizado. Repita o processo quantas vezes achar necess\xe1rio."}];function uI(){return(0,p.jsx)("section",{id:"faq",className:"py-10 md:py-16",children:(0,p.jsxs)("div",{className:"container mx-auto px-4 md:px-24",children:[(0,p.jsx)("div",{className:"mx-auto max-w-3xl text-center",children:(0,p.jsx)("h2",{className:"font-headline text-3xl font-bold tracking-tight text-foreground sm:text-4xl",children:"D\xfavidas Frequentes"})}),(0,p.jsx)("div",{className:"mt-12",children:(0,p.jsx)(P,{className:"bg-white/5 backdrop-blur-lg border-border",children:(0,p.jsx)(j,{className:"p-6",children:(0,p.jsx)(uw,{type:"single",collapsible:!0,className:"w-full",children:u_.map((e,t)=>(0,p.jsxs)(uC,{value:`item-${t}`,children:[(0,p.jsx)(ux,{className:"text-left font-medium hover:no-underline text-lg",children:e.question}),(0,p.jsx)(uE,{className:"text-muted-foreground text-base",children:e.answer})]},t))})})})})]})})}let uk=()=>void 0,uA={NODE_CLIENT:!1,SDK_VERSION:"${JSCORE_VERSION}"},uR=function(e){return Error("Firebase Database ("+uA.SDK_VERSION+") INTERNAL ASSERT FAILED: "+e)},uN=function(e){let t=[],r=0;for(let n=0;n<e.length;n++){let i=e.charCodeAt(n);i<128?t[r++]=i:(i<2048?t[r++]=i>>6|192:((64512&i)==55296&&n+1<e.length&&(64512&e.charCodeAt(n+1))==56320?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++n)),t[r++]=i>>18|240,t[r++]=i>>12&63|128):t[r++]=i>>12|224,t[r++]=i>>6&63|128),t[r++]=63&i|128)}return t},uD=function(e){let t=[],r=0,n=0;for(;r<e.length;){let i=e[r++];if(i<128)t[n++]=String.fromCharCode(i);else if(i>191&&i<224){let s=e[r++];t[n++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){let s=e[r++],a=((7&i)<<18|(63&s)<<12|(63&e[r++])<<6|63&e[r++])-65536;t[n++]=String.fromCharCode(55296+(a>>10)),t[n++]=String.fromCharCode(56320+(1023&a))}else{let s=e[r++],a=e[r++];t[n++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&a)}}return t.join("")},uO={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();let r=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let t=0;t<e.length;t+=3){let i=e[t],s=t+1<e.length,a=s?e[t+1]:0,o=t+2<e.length,l=o?e[t+2]:0,u=i>>2,c=(3&i)<<4|a>>4,h=(15&a)<<2|l>>6,d=63&l;!o&&(d=64,s||(h=64)),n.push(r[u],r[c],r[h],r[d])}return n.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(uN(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):uD(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();let r=t?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let t=0;t<e.length;){let i=r[e.charAt(t++)],s=t<e.length?r[e.charAt(t)]:0,a=++t<e.length?r[e.charAt(t)]:64,o=++t<e.length?r[e.charAt(t)]:64;if(++t,null==i||null==s||null==a||null==o)throw new uP;let l=i<<2|s>>4;if(n.push(l),64!==a){let e=s<<4&240|a>>2;if(n.push(e),64!==o){let e=a<<6&192|o;n.push(e)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class uP extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}let uM=function(e){let t=uN(e);return uO.encodeByteArray(t,!0)},uL=function(e){return uM(e).replace(/\./g,"")},uB=function(e){try{return uO.decodeString(e,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function uj(e){return"__proto__"!==e}function uF(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw Error("Unable to locate global object.")}let uV=()=>uF().__FIREBASE_DEFAULTS__,uU=()=>{if("undefined"==typeof process||void 0===process.env)return;let e=process.env.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},uq=()=>{let e;if("undefined"==typeof document)return;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(e){return}let t=e&&uB(e[1]);return t&&JSON.parse(t)},uz=()=>{try{return uk()||uV()||uU()||uq()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},u$=e=>{var t,r;return null==(r=null==(t=uz())?void 0:t.emulatorHosts)?void 0:r[e]},uG=e=>{let t=u$(e);if(!t)return;let r=t.lastIndexOf(":");if(r<=0||r+1===t.length)throw Error(`Invalid host ${t} with no separate hostname and port!`);let n=parseInt(t.substring(r+1),10);return"["===t[0]?[t.substring(1,r-1),n]:[t.substring(0,r),n]},uH=()=>{var e;return null==(e=uz())?void 0:e.config};class uK{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),"function"==typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,r))}}}function uW(e){return e.endsWith(".cloudworkstations.dev")}async function uQ(e){return(await fetch(e,{credentials:"include"})).ok}function uY(e,t){if(e.uid)throw Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let r={alg:"none",type:"JWT"},n=t||"demo-project",i=e.iat||0,s=e.sub||e.user_id;if(!s)throw Error("mockUserToken must contain 'sub' or 'user_id' field!");let a=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},e),o="";return[uL(JSON.stringify(r)),uL(JSON.stringify(a)),o].join(".")}let uJ={};function uX(){let e={prod:[],emulator:[]};for(let t of Object.keys(uJ))uJ[t]?e.emulator.push(t):e.prod.push(t);return e}function uZ(e){let t=document.getElementById(e),r=!1;return t||((t=document.createElement("div")).setAttribute("id",e),r=!0),{created:r,element:t}}let u0=!1;function u1(e,t){if("undefined"==typeof window||"undefined"==typeof document||!uW(window.location.host)||uJ[e]===t||uJ[e]||u0)return;function r(e){return`__firebase__banner__${e}`}uJ[e]=t;let n="__firebase__banner",i=uX().prod.length>0;function s(){let e=document.getElementById(n);e&&e.remove()}function a(e){e.style.display="flex",e.style.background="#7faaf0",e.style.position="fixed",e.style.bottom="5px",e.style.left="5px",e.style.padding=".5em",e.style.borderRadius="5px",e.style.alignItems="center"}function o(e,t){e.setAttribute("width","24"),e.setAttribute("id",t),e.setAttribute("height","24"),e.setAttribute("viewBox","0 0 24 24"),e.setAttribute("fill","none"),e.style.marginLeft="-6px"}function l(){let e=document.createElement("span");return e.style.cursor="pointer",e.style.marginLeft="16px",e.style.fontSize="24px",e.innerHTML=" &times;",e.onclick=()=>{u0=!0,s()},e}function u(e,t){e.setAttribute("id",t),e.innerText="Learn more",e.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",e.setAttribute("target","__blank"),e.style.paddingLeft="5px",e.style.textDecoration="underline"}function c(){let e=uZ(n),t=r("text"),s=document.getElementById(t)||document.createElement("span"),c=r("learnmore"),h=document.getElementById(c)||document.createElement("a"),d=r("preprendIcon"),p=document.getElementById(d)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(e.created){let t=e.element;a(t),u(h,c);let r=l();o(p,d),t.append(p,s,h,r),document.body.appendChild(t)}i?(s.innerText="Preview backend disconnected.",p.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(p.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,s.innerText="Preview backend running in this workspace."),s.setAttribute("id",t)}"loading"===document.readyState?window.addEventListener("DOMContentLoaded",c):c()}function u2(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function u3(){var e;let t=null==(e=uz())?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(e){return!1}}function u6(){return!u3()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function u4(){return!u3()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function u5(){try{return"object"==typeof indexedDB}catch(e){return!1}}function u8(){return new Promise((e,t)=>{try{let r=!0,n="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(n);i.onsuccess=()=>{i.result.close(),r||self.indexedDB.deleteDatabase(n),e(!0)},i.onupgradeneeded=()=>{r=!1},i.onerror=()=>{var e;t((null==(e=i.error)?void 0:e.message)||"")}}catch(e){t(e)}})}let u7="FirebaseError";class u9 extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=u7,Object.setPrototypeOf(this,u9.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ce.prototype.create)}}class ce{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},n=`${this.service}/${e}`,i=this.errors[e],s=i?ct(i,r):"Error",a=`${this.serviceName}: ${s} (${n}).`;return new u9(n,a,r)}}function ct(e,t){return e.replace(cr,(e,r)=>{let n=t[r];return null!=n?String(n):`<${r}?>`})}let cr=/\{\$([^}]+)}/g;function cn(e){return JSON.parse(e)}function ci(e,t){if(e===t)return!0;let r=Object.keys(e),n=Object.keys(t);for(let i of r){if(!n.includes(i))return!1;let r=e[i],s=t[i];if(cs(r)&&cs(s)){if(!ci(r,s))return!1}else if(r!==s)return!1}for(let e of n)if(!r.includes(e))return!1;return!0}function cs(e){return null!==e&&"object"==typeof e}function ca(e,t){if("object"!=typeof e||null===e)return!1;for(let r of t)if(r in e&&"function"==typeof e[r])return!0;return!1}function co(){}function cl(e){return e&&e._delegate?e._delegate:e}uA.NODE_CLIENT=!0;class cu{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}let cc="[DEFAULT]";class ch{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let e=new uK;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{let r=this.getOrInitializeService({instanceIdentifier:t});r&&e.resolve(r)}catch(e){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let r=this.normalizeInstanceIdentifier(null==e?void 0:e.identifier),n=null!=(t=null==e?void 0:e.optional)&&t;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(e){if(n)return null;throw e}if(n)return null;throw Error(`Service ${this.name} is not available`)}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(cp(e))try{this.getOrInitializeService({instanceIdentifier:cc})}catch(e){}for(let[e,t]of this.instancesDeferred.entries()){let r=this.normalizeInstanceIdentifier(e);try{let e=this.getOrInitializeService({instanceIdentifier:r});t.resolve(e)}catch(e){}}}}clearInstance(e=cc){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){let e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return null!=this.component}isInitialized(e=cc){return this.instances.has(e)}getOptions(e=cc){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let n=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[e,t]of this.instancesDeferred.entries())r===this.normalizeInstanceIdentifier(e)&&t.resolve(n);return n}onInit(e,t){var r;let n=this.normalizeInstanceIdentifier(t),i=null!=(r=this.onInitCallbacks.get(n))?r:new Set;i.add(e),this.onInitCallbacks.set(n,i);let s=this.instances.get(n);return s&&e(s,n),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let n of r)try{n(e,t)}catch(e){}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:cd(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch(e){}return r||null}normalizeInstanceIdentifier(e=cc){return this.component?this.component.multipleInstances?e:cc:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}function cd(e){return e===cc?void 0:e}function cp(e){return"EAGER"===e.instantiationMode}class cf{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new ch(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}let cm=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(a||(a={}));let cg={debug:a.DEBUG,verbose:a.VERBOSE,info:a.INFO,warn:a.WARN,error:a.ERROR,silent:a.SILENT},cy=a.INFO,cv={[a.DEBUG]:"log",[a.VERBOSE]:"log",[a.INFO]:"info",[a.WARN]:"warn",[a.ERROR]:"error"},cb=(e,t,...r)=>{if(t<e.logLevel)return;let n=new Date().toISOString(),i=cv[t];if(i)console[i](`[${n}]  ${e.name}:`,...r);else throw Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class cS{constructor(e){this.name=e,this._logLevel=cy,this._logHandler=cb,this._userLogHandler=null,cm.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in a))throw TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?cg[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,a.DEBUG,...e),this._logHandler(this,a.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,a.VERBOSE,...e),this._logHandler(this,a.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,a.INFO,...e),this._logHandler(this,a.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,a.WARN,...e),this._logHandler(this,a.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,a.ERROR,...e),this._logHandler(this,a.ERROR,...e)}}let cT=(e,t)=>t.some(t=>e instanceof t);function cw(){return i||(i=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function cC(){return s||(s=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}let cx=new WeakMap,cE=new WeakMap,c_=new WeakMap,cI=new WeakMap,ck=new WeakMap;function cA(e){let t=new Promise((t,r)=>{let n=()=>{e.removeEventListener("success",i),e.removeEventListener("error",s)},i=()=>{t(cM(e.result)),n()},s=()=>{r(e.error),n()};e.addEventListener("success",i),e.addEventListener("error",s)});return t.then(t=>{t instanceof IDBCursor&&cx.set(t,e)}).catch(()=>{}),ck.set(t,e),t}function cR(e){if(cE.has(e))return;let t=new Promise((t,r)=>{let n=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",s),e.removeEventListener("abort",s)},i=()=>{t(),n()},s=()=>{r(e.error||new DOMException("AbortError","AbortError")),n()};e.addEventListener("complete",i),e.addEventListener("error",s),e.addEventListener("abort",s)});cE.set(e,t)}let cN={get(e,t,r){if(e instanceof IDBTransaction){if("done"===t)return cE.get(e);if("objectStoreNames"===t)return e.objectStoreNames||c_.get(e);if("store"===t)return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return cM(e[t])},set:(e,t,r)=>(e[t]=r,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function cD(e){cN=e(cN)}function cO(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?cC().includes(e)?function(...t){return e.apply(cL(this),t),cM(cx.get(this))}:function(...t){return cM(e.apply(cL(this),t))}:function(t,...r){let n=e.call(cL(this),t,...r);return c_.set(n,t.sort?t.sort():[t]),cM(n)}}function cP(e){return"function"==typeof e?cO(e):(e instanceof IDBTransaction&&cR(e),cT(e,cw()))?new Proxy(e,cN):e}function cM(e){if(e instanceof IDBRequest)return cA(e);if(cI.has(e))return cI.get(e);let t=cP(e);return t!==e&&(cI.set(e,t),ck.set(t,e)),t}let cL=e=>ck.get(e);function cB(e,t,{blocked:r,upgrade:n,blocking:i,terminated:s}={}){let a=indexedDB.open(e,t),o=cM(a);return n&&a.addEventListener("upgradeneeded",e=>{n(cM(a.result),e.oldVersion,e.newVersion,cM(a.transaction),e)}),r&&a.addEventListener("blocked",e=>r(e.oldVersion,e.newVersion,e)),o.then(e=>{s&&e.addEventListener("close",()=>s()),i&&e.addEventListener("versionchange",e=>i(e.oldVersion,e.newVersion,e))}).catch(()=>{}),o}let cj=["get","getKey","getAll","getAllKeys","count"],cF=["put","add","delete","clear"],cV=new Map;function cU(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&"string"==typeof t))return;if(cV.get(t))return cV.get(t);let r=t.replace(/FromIndex$/,""),n=t!==r,i=cF.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(i||cj.includes(r)))return;let s=async function(e,...t){let s=this.transaction(e,i?"readwrite":"readonly"),a=s.store;return n&&(a=a.index(t.shift())),(await Promise.all([a[r](...t),i&&s.done]))[0]};return cV.set(t,s),s}cD(e=>({...e,get:(t,r,n)=>cU(t,r)||e.get(t,r,n),has:(t,r)=>!!cU(t,r)||e.has(t,r)}));class cq{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(!cz(e))return null;{let t=e.getImmediate();return`${t.library}/${t.version}`}}).filter(e=>e).join(" ")}}function cz(e){let t=e.getComponent();return(null==t?void 0:t.type)==="VERSION"}let c$="@firebase/app",cG="0.13.1",cH=new cS("@firebase/app"),cK="11.9.0",cW="[DEFAULT]",cQ={[c$]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/data-connect":"fire-data-connect","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","@firebase/ai":"fire-vertex","fire-js":"fire-js",firebase:"fire-js-all"},cY=new Map,cJ=new Map,cX=new Map;function cZ(e,t){try{e.container.addComponent(t)}catch(r){cH.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,r)}}function c0(e){let t=e.name;if(cX.has(t))return cH.debug(`There were multiple attempts to register component ${t}.`),!1;for(let r of(cX.set(t,e),cY.values()))cZ(r,e);for(let t of cJ.values())cZ(t,e);return!0}function c1(e,t){let r=e.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),e.container.getProvider(t)}function c2(e){return null!=e&&void 0!==e.settings}let c3=new ce("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class c6{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new cu("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw c3.create("app-deleted",{appName:this._name})}}function c4(e,t){let r=uB(e.split(".")[1]);return null===r?void console.error(`FirebaseServerApp ${t} is invalid: second part could not be parsed.`):void 0===JSON.parse(r).exp?void console.error(`FirebaseServerApp ${t} is invalid: expiration claim could not be parsed`):void(1e3*JSON.parse(r).exp-new Date().getTime()<=0&&console.error(`FirebaseServerApp ${t} is invalid: the token has expired.`))}let c5=cK;function c8(e,t={}){let r=e;"object"!=typeof t&&(t={name:t});let n=Object.assign({name:cW,automaticDataCollectionEnabled:!0},t),i=n.name;if("string"!=typeof i||!i)throw c3.create("bad-app-name",{appName:String(i)});if(r||(r=uH()),!r)throw c3.create("no-options");let s=cY.get(i);if(s)if(ci(r,s.options)&&ci(n,s.config))return s;else throw c3.create("duplicate-app",{appName:i});let a=new cf(i);for(let e of cX.values())a.addComponent(e);let o=new c6(r,n,a);return cY.set(i,o),o}function c7(e=cW){let t=cY.get(e);if(!t&&e===cW&&uH())return c8();if(!t)throw c3.create("no-app",{appName:e});return t}function c9(){return Array.from(cY.values())}async function he(e){let t=!1,r=e.name;cY.has(r)?(t=!0,cY.delete(r)):cJ.has(r)&&0>=e.decRefCount()&&(cJ.delete(r),t=!0),t&&(await Promise.all(e.container.getProviders().map(e=>e.delete())),e.isDeleted=!0)}function ht(e,t,r){var n;let i=null!=(n=cQ[e])?n:e;r&&(i+=`-${r}`);let s=i.match(/\s|\//),a=t.match(/\s|\//);if(s||a){let e=[`Unable to register library "${i}" with version "${t}":`];s&&e.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&a&&e.push("and"),a&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),cH.warn(e.join(" "));return}c0(new cu(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}let hr="firebase-heartbeat-database",hn=1,hi="firebase-heartbeat-store",hs=null;function ha(){return hs||(hs=cB(hr,hn,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(hi)}catch(e){console.warn(e)}}}).catch(e=>{throw c3.create("idb-open",{originalErrorMessage:e.message})})),hs}async function ho(e){try{let t=(await ha()).transaction(hi),r=await t.objectStore(hi).get(hu(e));return await t.done,r}catch(e){if(e instanceof u9)cH.warn(e.message);else{let t=c3.create("idb-get",{originalErrorMessage:null==e?void 0:e.message});cH.warn(t.message)}}}async function hl(e,t){try{let r=(await ha()).transaction(hi,"readwrite"),n=r.objectStore(hi);await n.put(t,hu(e)),await r.done}catch(e){if(e instanceof u9)cH.warn(e.message);else{let t=c3.create("idb-set",{originalErrorMessage:null==e?void 0:e.message});cH.warn(t.message)}}}function hu(e){return`${e.name}!${e.options.appId}`}let hc=1024,hh=30;class hd{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new hm(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){var e,t;try{let r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),n=hp();if((null==(e=this._heartbeatsCache)?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,(null==(t=this._heartbeatsCache)?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===n||this._heartbeatsCache.heartbeats.some(e=>e.date===n))return;if(this._heartbeatsCache.heartbeats.push({date:n,agent:r}),this._heartbeatsCache.heartbeats.length>hh){let e=hy(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(e,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){cH.warn(e)}}async getHeartbeatsHeader(){var e;try{if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,(null==(e=this._heartbeatsCache)?void 0:e.heartbeats)==null||0===this._heartbeatsCache.heartbeats.length)return"";let t=hp(),{heartbeatsToSend:r,unsentEntries:n}=hf(this._heartbeatsCache.heartbeats),i=uL(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return cH.warn(e),""}}}function hp(){return new Date().toISOString().substring(0,10)}function hf(e,t=hc){let r=[],n=e.slice();for(let i of e){let e=r.find(e=>e.agent===i.agent);if(e){if(e.dates.push(i.date),hg(r)>t){e.dates.pop();break}}else if(r.push({agent:i.agent,dates:[i.date]}),hg(r)>t){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}class hm{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!u5()&&u8().then(()=>!0).catch(()=>!1)}async read(){if(!await this._canUseIndexedDBPromise)return{heartbeats:[]};{let e=await ho(this.app);return(null==e?void 0:e.heartbeats)?e:{heartbeats:[]}}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){let r=await this.read();return hl(this.app,{lastSentHeartbeatDate:null!=(t=e.lastSentHeartbeatDate)?t:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){let r=await this.read();return hl(this.app,{lastSentHeartbeatDate:null!=(t=e.lastSentHeartbeatDate)?t:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}}}function hg(e){return uL(JSON.stringify({version:2,heartbeats:e})).length}function hy(e){if(0===e.length)return -1;let t=0,r=e[0].date;for(let n=1;n<e.length;n++)e[n].date<r&&(r=e[n].date,t=n);return t}!function(e){c0(new cu("platform-logger",e=>new cq(e),"PRIVATE")),c0(new cu("heartbeat",e=>new hd(e),"PRIVATE")),ht(c$,cG,""),ht(c$,cG,"esm2017"),ht("fire-js","")}("");var hv=r(28354),hb=r(55511),hS="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},hT={};(function(){function e(){this.blockSize=-1,this.blockSize=64,this.g=[,,,,],this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function t(e,t,r){r||(r=0);var n=Array(16);if("string"==typeof t)for(var i=0;16>i;++i)n[i]=t.charCodeAt(r++)|t.charCodeAt(r++)<<8|t.charCodeAt(r++)<<16|t.charCodeAt(r++)<<24;else for(i=0;16>i;++i)n[i]=t[r++]|t[r++]<<8|t[r++]<<16|t[r++]<<24;t=e.g[0],r=e.g[1],i=e.g[2];var s=e.g[3],a=t+(s^r&(i^s))+n[0]+0xd76aa478|0;a=s+(i^(t=r+(a<<7|a>>>25))&(r^i))+n[1]+0xe8c7b756|0,a=i+(r^(s=t+(a<<12|a>>>20))&(t^r))+n[2]+0x242070db|0,a=r+(t^(i=s+(a<<17|a>>>15))&(s^t))+n[3]+0xc1bdceee|0,a=t+(s^(r=i+(a<<22|a>>>10))&(i^s))+n[4]+0xf57c0faf|0,a=s+(i^(t=r+(a<<7|a>>>25))&(r^i))+n[5]+0x4787c62a|0,a=i+(r^(s=t+(a<<12|a>>>20))&(t^r))+n[6]+0xa8304613|0,a=r+(t^(i=s+(a<<17|a>>>15))&(s^t))+n[7]+0xfd469501|0,a=t+(s^(r=i+(a<<22|a>>>10))&(i^s))+n[8]+0x698098d8|0,a=s+(i^(t=r+(a<<7|a>>>25))&(r^i))+n[9]+0x8b44f7af|0,a=i+(r^(s=t+(a<<12|a>>>20))&(t^r))+n[10]+0xffff5bb1|0,a=r+(t^(i=s+(a<<17|a>>>15))&(s^t))+n[11]+0x895cd7be|0,a=t+(s^(r=i+(a<<22|a>>>10))&(i^s))+n[12]+0x6b901122|0,a=s+(i^(t=r+(a<<7|a>>>25))&(r^i))+n[13]+0xfd987193|0,a=i+(r^(s=t+(a<<12|a>>>20))&(t^r))+n[14]+0xa679438e|0,a=r+(t^(i=s+(a<<17|a>>>15))&(s^t))+n[15]+0x49b40821|0,r=i+(a<<22|a>>>10),a=t+(i^s&(r^i))+n[1]+0xf61e2562|0,t=r+(a<<5|a>>>27),a=s+(r^i&(t^r))+n[6]+0xc040b340|0,s=t+(a<<9|a>>>23),a=i+(t^r&(s^t))+n[11]+0x265e5a51|0,i=s+(a<<14|a>>>18),a=r+(s^t&(i^s))+n[0]+0xe9b6c7aa|0,r=i+(a<<20|a>>>12),a=t+(i^s&(r^i))+n[5]+0xd62f105d|0,t=r+(a<<5|a>>>27),a=s+(r^i&(t^r))+n[10]+0x2441453|0,s=t+(a<<9|a>>>23),a=i+(t^r&(s^t))+n[15]+0xd8a1e681|0,i=s+(a<<14|a>>>18),a=r+(s^t&(i^s))+n[4]+0xe7d3fbc8|0,r=i+(a<<20|a>>>12),a=t+(i^s&(r^i))+n[9]+0x21e1cde6|0,t=r+(a<<5|a>>>27),a=s+(r^i&(t^r))+n[14]+0xc33707d6|0,s=t+(a<<9|a>>>23),a=i+(t^r&(s^t))+n[3]+0xf4d50d87|0,i=s+(a<<14|a>>>18),a=r+(s^t&(i^s))+n[8]+0x455a14ed|0,r=i+(a<<20|a>>>12),a=t+(i^s&(r^i))+n[13]+0xa9e3e905|0,t=r+(a<<5|a>>>27),a=s+(r^i&(t^r))+n[2]+0xfcefa3f8|0,s=t+(a<<9|a>>>23),a=i+(t^r&(s^t))+n[7]+0x676f02d9|0,i=s+(a<<14|a>>>18),a=r+(s^t&(i^s))+n[12]+0x8d2a4c8a|0,a=t+((r=i+(a<<20|a>>>12))^i^s)+n[5]+0xfffa3942|0,a=s+((t=r+(a<<4|a>>>28))^r^i)+n[8]+0x8771f681|0,a=i+((s=t+(a<<11|a>>>21))^t^r)+n[11]+0x6d9d6122|0,a=r+((i=s+(a<<16|a>>>16))^s^t)+n[14]+0xfde5380c|0,a=t+((r=i+(a<<23|a>>>9))^i^s)+n[1]+0xa4beea44|0,a=s+((t=r+(a<<4|a>>>28))^r^i)+n[4]+0x4bdecfa9|0,a=i+((s=t+(a<<11|a>>>21))^t^r)+n[7]+0xf6bb4b60|0,a=r+((i=s+(a<<16|a>>>16))^s^t)+n[10]+0xbebfbc70|0,a=t+((r=i+(a<<23|a>>>9))^i^s)+n[13]+0x289b7ec6|0,a=s+((t=r+(a<<4|a>>>28))^r^i)+n[0]+0xeaa127fa|0,a=i+((s=t+(a<<11|a>>>21))^t^r)+n[3]+0xd4ef3085|0,a=r+((i=s+(a<<16|a>>>16))^s^t)+n[6]+0x4881d05|0,a=t+((r=i+(a<<23|a>>>9))^i^s)+n[9]+0xd9d4d039|0,a=s+((t=r+(a<<4|a>>>28))^r^i)+n[12]+0xe6db99e5|0,a=i+((s=t+(a<<11|a>>>21))^t^r)+n[15]+0x1fa27cf8|0,a=r+((i=s+(a<<16|a>>>16))^s^t)+n[2]+0xc4ac5665|0,r=i+(a<<23|a>>>9),a=t+(i^(r|~s))+n[0]+0xf4292244|0,t=r+(a<<6|a>>>26),a=s+(r^(t|~i))+n[7]+0x432aff97|0,s=t+(a<<10|a>>>22),a=i+(t^(s|~r))+n[14]+0xab9423a7|0,i=s+(a<<15|a>>>17),a=r+(s^(i|~t))+n[5]+0xfc93a039|0,r=i+(a<<21|a>>>11),a=t+(i^(r|~s))+n[12]+0x655b59c3|0,t=r+(a<<6|a>>>26),a=s+(r^(t|~i))+n[3]+0x8f0ccc92|0,s=t+(a<<10|a>>>22),a=i+(t^(s|~r))+n[10]+0xffeff47d|0,i=s+(a<<15|a>>>17),a=r+(s^(i|~t))+n[1]+0x85845dd1|0,r=i+(a<<21|a>>>11),a=t+(i^(r|~s))+n[8]+0x6fa87e4f|0,t=r+(a<<6|a>>>26),a=s+(r^(t|~i))+n[15]+0xfe2ce6e0|0,s=t+(a<<10|a>>>22),a=i+(t^(s|~r))+n[6]+0xa3014314|0,i=s+(a<<15|a>>>17),a=r+(s^(i|~t))+n[13]+0x4e0811a1|0,r=i+(a<<21|a>>>11),a=t+(i^(r|~s))+n[4]+0xf7537e82|0,t=r+(a<<6|a>>>26),a=s+(r^(t|~i))+n[11]+0xbd3af235|0,s=t+(a<<10|a>>>22),a=i+(t^(s|~r))+n[2]+0x2ad7d2bb|0,i=s+(a<<15|a>>>17),a=r+(s^(i|~t))+n[9]+0xeb86d391|0,e.g[0]=e.g[0]+t|0,e.g[1]=e.g[1]+(i+(a<<21|a>>>11))|0,e.g[2]=e.g[2]+i|0,e.g[3]=e.g[3]+s|0}function r(e,t){var r=s;return Object.prototype.hasOwnProperty.call(r,e)?r[e]:r[e]=t(e)}function n(e,t){this.h=t;for(var r=[],n=!0,i=e.length-1;0<=i;i--){var s=0|e[i];n&&s==t||(r[i]=s,n=!1)}this.g=r}(function(e,t){function r(){}r.prototype=t.prototype,e.D=t.prototype,e.prototype=new r,e.prototype.constructor=e,e.C=function(e,r,n){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[r].apply(e,i)}})(e,function(){this.blockSize=-1}),e.prototype.s=function(){this.g[0]=0x67452301,this.g[1]=0xefcdab89,this.g[2]=0x98badcfe,this.g[3]=0x10325476,this.o=this.h=0},e.prototype.u=function(e,r){void 0===r&&(r=e.length);for(var n=r-this.blockSize,i=this.B,s=this.h,a=0;a<r;){if(0==s)for(;a<=n;)t(this,e,a),a+=this.blockSize;if("string"==typeof e){for(;a<r;)if(i[s++]=e.charCodeAt(a++),s==this.blockSize){t(this,i),s=0;break}}else for(;a<r;)if(i[s++]=e[a++],s==this.blockSize){t(this,i),s=0;break}}this.h=s,this.o+=r},e.prototype.v=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var r=8*this.o;for(t=e.length-8;t<e.length;++t)e[t]=255&r,r/=256;for(this.u(e),e=Array(16),t=r=0;4>t;++t)for(var n=0;32>n;n+=8)e[r++]=this.g[t]>>>n&255;return e};var i,s={};function a(e){return -128<=e&&128>e?r(e,function(e){return new n([0|e],0>e?-1:0)}):new n([0|e],0>e?-1:0)}function u(e){if(isNaN(e)||!isFinite(e))return h;if(0>e)return g(u(-e));for(var t=[],r=1,i=0;e>=r;i++)t[i]=e/r|0,r*=0x100000000;return new n(t,0)}function c(e,t){if(0==e.length)throw Error("number format error: empty string");if(2>(t=t||10)||36<t)throw Error("radix out of range: "+t);if("-"==e.charAt(0))return g(c(e.substring(1),t));if(0<=e.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=u(Math.pow(t,8)),n=h,i=0;i<e.length;i+=8){var s=Math.min(8,e.length-i),a=parseInt(e.substring(i,i+s),t);8>s?(s=u(Math.pow(t,s)),n=n.j(s).add(u(a))):n=(n=n.j(r)).add(u(a))}return n}var h=a(0),d=a(1),p=a(0x1000000);function f(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function m(e){return -1==e.h}function g(e){for(var t=e.g.length,r=[],i=0;i<t;i++)r[i]=~e.g[i];return new n(r,~e.h).add(d)}function y(e,t){return e.add(g(t))}function v(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function b(e,t){this.g=e,this.h=t}function S(e,t){if(f(t))throw Error("division by zero");if(f(e))return new b(h,h);if(m(e))return t=S(g(e),t),new b(g(t.g),g(t.h));if(m(t))return t=S(e,g(t)),new b(g(t.g),t.h);if(30<e.g.length){if(m(e)||m(t))throw Error("slowDivide_ only works with positive integers.");for(var r=d,n=t;0>=n.l(e);)r=T(r),n=T(n);var i=w(r,1),s=w(n,1);for(n=w(n,2),r=w(r,2);!f(n);){var a=s.add(n);0>=a.l(e)&&(i=i.add(r),s=a),n=w(n,1),r=w(r,1)}return t=y(e,i.j(t)),new b(i,t)}for(i=h;0<=e.l(t);){for(n=48>=(n=Math.ceil(Math.log(r=Math.max(1,Math.floor(e.m()/t.m())))/Math.LN2))?1:Math.pow(2,n-48),a=(s=u(r)).j(t);m(a)||0<a.l(e);)r-=n,a=(s=u(r)).j(t);f(s)&&(s=d),i=i.add(s),e=y(e,a)}return new b(i,e)}function T(e){for(var t=e.g.length+1,r=[],i=0;i<t;i++)r[i]=e.i(i)<<1|e.i(i-1)>>>31;return new n(r,e.h)}function w(e,t){var r=t>>5;t%=32;for(var i=e.g.length-r,s=[],a=0;a<i;a++)s[a]=0<t?e.i(a+r)>>>t|e.i(a+r+1)<<32-t:e.i(a+r);return new n(s,e.h)}(i=n.prototype).m=function(){if(m(this))return-g(this).m();for(var e=0,t=1,r=0;r<this.g.length;r++){var n=this.i(r);e+=(0<=n?n:0x100000000+n)*t,t*=0x100000000}return e},i.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(f(this))return"0";if(m(this))return"-"+g(this).toString(e);for(var t=u(Math.pow(e,6)),r=this,n="";;){var i=S(r,t).g,s=((0<(r=y(r,i.j(t))).g.length?r.g[0]:r.h)>>>0).toString(e);if(f(r=i))return s+n;for(;6>s.length;)s="0"+s;n=s+n}},i.i=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},i.l=function(e){return m(e=y(this,e))?-1:+!f(e)},i.abs=function(){return m(this)?g(this):this},i.add=function(e){for(var t=Math.max(this.g.length,e.g.length),r=[],i=0,s=0;s<=t;s++){var a=i+(65535&this.i(s))+(65535&e.i(s)),o=(a>>>16)+(this.i(s)>>>16)+(e.i(s)>>>16);i=o>>>16,a&=65535,o&=65535,r[s]=o<<16|a}return new n(r,-0x80000000&r[r.length-1]?-1:0)},i.j=function(e){if(f(this)||f(e))return h;if(m(this))return m(e)?g(this).j(g(e)):g(g(this).j(e));if(m(e))return g(this.j(g(e)));if(0>this.l(p)&&0>e.l(p))return u(this.m()*e.m());for(var t=this.g.length+e.g.length,r=[],i=0;i<2*t;i++)r[i]=0;for(i=0;i<this.g.length;i++)for(var s=0;s<e.g.length;s++){var a=this.i(i)>>>16,o=65535&this.i(i),l=e.i(s)>>>16,c=65535&e.i(s);r[2*i+2*s]+=o*c,v(r,2*i+2*s),r[2*i+2*s+1]+=a*c,v(r,2*i+2*s+1),r[2*i+2*s+1]+=o*l,v(r,2*i+2*s+1),r[2*i+2*s+2]+=a*l,v(r,2*i+2*s+2)}for(i=0;i<t;i++)r[i]=r[2*i+1]<<16|r[2*i];for(i=t;i<2*t;i++)r[i]=0;return new n(r,0)},i.A=function(e){return S(this,e).h},i.and=function(e){for(var t=Math.max(this.g.length,e.g.length),r=[],i=0;i<t;i++)r[i]=this.i(i)&e.i(i);return new n(r,this.h&e.h)},i.or=function(e){for(var t=Math.max(this.g.length,e.g.length),r=[],i=0;i<t;i++)r[i]=this.i(i)|e.i(i);return new n(r,this.h|e.h)},i.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),r=[],i=0;i<t;i++)r[i]=this.i(i)^e.i(i);return new n(r,this.h^e.h)},e.prototype.digest=e.prototype.v,e.prototype.reset=e.prototype.s,e.prototype.update=e.prototype.u,l=hT.Md5=e,n.prototype.add=n.prototype.add,n.prototype.multiply=n.prototype.j,n.prototype.modulo=n.prototype.A,n.prototype.compare=n.prototype.l,n.prototype.toNumber=n.prototype.m,n.prototype.toString=n.prototype.toString,n.prototype.getBits=n.prototype.i,n.fromNumber=u,n.fromString=c,o=hT.Integer=n}).apply(void 0!==hS?hS:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var hw=r(36142),hC=r(97587);let hx="@firebase/firestore",hE="4.7.17";class h_{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}h_.UNAUTHENTICATED=new h_(null),h_.GOOGLE_CREDENTIALS=new h_("google-credentials-uid"),h_.FIRST_PARTY=new h_("first-party-uid"),h_.MOCK_USER=new h_("mock-user");let hI="11.9.0";function hk(e){hI=e}function hA(e){return(0,hv.inspect)(e,{depth:100})}let hR=new cS("@firebase/firestore");function hN(){return hR.logLevel}function hD(e,...t){if(hR.logLevel<=a.DEBUG){let r=t.map(hM);hR.debug(`Firestore (${hI}): ${e}`,...r)}}function hO(e,...t){if(hR.logLevel<=a.ERROR){let r=t.map(hM);hR.error(`Firestore (${hI}): ${e}`,...r)}}function hP(e,...t){if(hR.logLevel<=a.WARN){let r=t.map(hM);hR.warn(`Firestore (${hI}): ${e}`,...r)}}function hM(e){if("string"==typeof e)return e;try{return hA(e)}catch(t){return e}}function hL(e,t,r){let n="Unexpected state";"string"==typeof t?n=t:r=t,hB(e,n,r)}function hB(e,t,r){let n=`FIRESTORE (${hI}) INTERNAL ASSERTION FAILED: ${t} (ID: ${e.toString(16)})`;if(void 0!==r)try{let e=JSON.stringify(r);n+=" CONTEXT: "+e}catch(e){n+=" CONTEXT: "+r}throw hO(n),Error(n)}function hj(e,t,r,n){let i="Unexpected state";"string"==typeof r?i=r:n=r,e||hB(t,i,n)}function hF(e,t){return e}let hV={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class hU extends u9{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class hq{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class hz{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class h${getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(h_.UNAUTHENTICATED))}shutdown(){}}class hG{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class hH{constructor(e){this.authProvider=e,this.currentUser=h_.UNAUTHENTICATED,this.tokenCounter=0,this.forceRefresh=!1,this.auth=null}start(e,t){hj(void 0===this.tokenListener,42304);let r=this.tokenCounter,n=e=>this.tokenCounter!==r?(r=this.tokenCounter,t(e)):Promise.resolve(),i=new hq;this.tokenListener=()=>{this.tokenCounter++,this.currentUser=this.getUser(),i.resolve(),i=new hq,e.enqueueRetryable(()=>n(this.currentUser))};let s=()=>{let t=i;e.enqueueRetryable(async()=>{await t.promise,await n(this.currentUser)})},a=e=>{hD("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.tokenListener&&(this.auth.addAuthTokenListener(this.tokenListener),s())};this.authProvider.onInit(e=>a(e)),setTimeout(()=>{if(!this.auth){let e=this.authProvider.getImmediate({optional:!0});e?a(e):(hD("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new hq)}},0),s()}getToken(){let e=this.tokenCounter,t=this.forceRefresh;return(this.forceRefresh=!1,this.auth)?this.auth.getToken(t).then(t=>this.tokenCounter!==e?(hD("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(hj("string"==typeof t.accessToken,31837,{tokenData:t}),new hz(t.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.tokenListener&&this.auth.removeAuthTokenListener(this.tokenListener),this.tokenListener=void 0}getUser(){let e=this.auth&&this.auth.getUid();return hj(null===e||"string"==typeof e,2055,{currentUid:e}),new h_(e)}}class hK{constructor(e,t,r){this.sessionIndex=e,this.iamToken=t,this.authTokenFactory=r,this.type="FirstParty",this.user=h_.FIRST_PARTY,this._headers=new Map}getAuthToken(){return this.authTokenFactory?this.authTokenFactory():null}get headers(){this._headers.set("X-Goog-AuthUser",this.sessionIndex);let e=this.getAuthToken();return e&&this._headers.set("Authorization",e),this.iamToken&&this._headers.set("X-Goog-Iam-Authorization-Token",this.iamToken),this._headers}}class hW{constructor(e,t,r){this.sessionIndex=e,this.iamToken=t,this.authTokenFactory=r}getToken(){return Promise.resolve(new hK(this.sessionIndex,this.iamToken,this.authTokenFactory))}start(e,t){e.enqueueRetryable(()=>t(h_.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class hQ{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class hY{constructor(e,t){this.appCheckProvider=t,this.forceRefresh=!1,this.appCheck=null,this.latestAppCheckToken=null,this.serverAppAppCheckToken=null,c2(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken)}start(e,t){hj(void 0===this.tokenListener,3512);let r=e=>{null!=e.error&&hD("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${e.error.message}`);let r=e.token!==this.latestAppCheckToken;return this.latestAppCheckToken=e.token,hD("FirebaseAppCheckTokenProvider",`Received ${r?"new":"existing"} token.`),r?t(e.token):Promise.resolve()};this.tokenListener=t=>{e.enqueueRetryable(()=>r(t))};let n=e=>{hD("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.tokenListener&&this.appCheck.addTokenListener(this.tokenListener)};this.appCheckProvider.onInit(e=>n(e)),setTimeout(()=>{if(!this.appCheck){let e=this.appCheckProvider.getImmediate({optional:!0});e?n(e):hD("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.serverAppAppCheckToken)return Promise.resolve(new hQ(this.serverAppAppCheckToken));let e=this.forceRefresh;return(this.forceRefresh=!1,this.appCheck)?this.appCheck.getToken(e).then(e=>e?(hj("string"==typeof e.token,44558,{tokenResult:e}),this.latestAppCheckToken=e.token,new hQ(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.tokenListener&&this.appCheck.removeTokenListener(this.tokenListener),this.tokenListener=void 0}}function hJ(e){if(!e)return new h$;switch(e.type){case"firstParty":return new hW(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new hU(hV.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}function hX(e){return(0,hb.randomBytes)(e)}function hZ(){return new hv.TextEncoder}function h0(){return new TextDecoder("utf-8")}class h1{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,r="",n=20;for(;r.length<n;){let i=hX(40);for(let s=0;s<i.length;++s)r.length<n&&i[s]<t&&(r+=e.charAt(i[s]%e.length))}return r}}function h2(e,t){return e<t?-1:+(e>t)}function h3(e,t){let r=0;for(;r<e.length&&r<t.length;){let n=e.codePointAt(r),i=t.codePointAt(r);if(n!==i)if(n<128&&i<128)return h2(n,i);else{let s=hZ(),a=h4(s.encode(h6(e,r)),s.encode(h6(t,r)));if(0!==a)return a;return h2(n,i)}r+=n>65535?2:1}return h2(e.length,t.length)}function h6(e,t){return e.codePointAt(t)>65535?e.substring(t,t+2):e.substring(t,t+1)}function h4(e,t){for(let r=0;r<e.length&&r<t.length;++r)if(e[r]!==t[r])return h2(e[r],t[r]);return h2(e.length,t.length)}function h5(e,t,r){return e.length===t.length&&e.every((e,n)=>r(e,t[n]))}function h8(e){return e+"\0"}let h7=-0xe7791f700,h9=1e6;class de{static now(){return de.fromMillis(Date.now())}static fromDate(e){return de.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*h9);return new de(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0||t>=1e9)throw new hU(hV.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<h7||e>=0x3afff44180)throw new hU(hV.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/h9}_compareTo(e){return this.seconds===e.seconds?h2(this.nanoseconds,e.nanoseconds):h2(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds-h7).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class dt{static fromTimestamp(e){return new dt(e)}static min(){return new dt(new de(0,0))}static max(){return new dt(new de(0x3afff4417f,1e9-1))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}let dr="__name__";class dn{constructor(e,t,r){void 0===t?t=0:t>e.length&&hL(637,{offset:t,range:e.length}),void 0===r?r=e.length-t:r>e.length-t&&hL(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===dn.comparator(this,e)}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof dn?e.forEach(e=>{t.push(e)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let n=0;n<r;n++){let r=dn.compareSegments(e.get(n),t.get(n));if(0!==r)return r}return h2(e.length,t.length)}static compareSegments(e,t){let r=dn.isNumericId(e),n=dn.isNumericId(t);return r&&!n?-1:!r&&n?1:r&&n?dn.extractNumericId(e).compare(dn.extractNumericId(t)):h3(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return o.fromString(e.substring(4,e.length-2))}}class di extends dn{construct(e,t,r){return new di(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new hU(hV.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(e=>e.length>0))}return new di(t)}static emptyPath(){return new di([])}}let ds=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class da extends dn{construct(e,t,r){return new da(e,t,r)}static isValidIdentifier(e){return ds.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),da.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&this.get(0)===dr}static keyField(){return new da([dr])}static fromServerFormat(e){let t=[],r="",n=0,i=()=>{if(0===r.length)throw new hU(hV.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},s=!1;for(;n<e.length;){let t=e[n];if("\\"===t){if(n+1===e.length)throw new hU(hV.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let t=e[n+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new hU(hV.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=t,n+=2}else"`"===t?s=!s:"."!==t||s?r+=t:i(),n++}if(i(),s)throw new hU(hV.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new da(t)}static emptyPath(){return new da([])}}class dl{constructor(e){this.path=e}static fromPath(e){return new dl(di.fromString(e))}static fromName(e){return new dl(di.fromString(e).popFirst(5))}static empty(){return new dl(di.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===di.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return di.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new dl(new di(e.slice()))}}let du=-1,dc=0;class dh{constructor(e,t,r,n){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=n}}function dd(e){return e.fields.find(e=>2===e.kind)}function dp(e){return e.fields.filter(e=>2!==e.kind)}function df(e){let t=dp(e);return 0===t.length?0:t[t.length-1].kind}function dm(e,t){let r=h2(e.collectionGroup,t.collectionGroup);if(0!==r)return r;for(let n=0;n<Math.min(e.fields.length,t.fields.length);++n)if(0!==(r=dv(e.fields[n],t.fields[n])))return r;return h2(e.fields.length,t.fields.length)}function dg(e){return`id=${e.indexId}|cg=${e.collectionGroup}|f=${e.fields.map(e=>`${e.fieldPath}:${e.kind}`).join(",")}`}dh.UNKNOWN_ID=-1;class dy{constructor(e,t){this.fieldPath=e,this.kind=t}}function dv(e,t){let r=da.comparator(e.fieldPath,t.fieldPath);return 0!==r?r:h2(e.kind,t.kind)}class db{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new db(dc,dw.min())}}function dS(e,t){let r=e.toTimestamp().seconds,n=e.toTimestamp().nanoseconds+1;return new dw(dt.fromTimestamp(1e9===n?new de(r+1,0):new de(r,n)),dl.empty(),t)}function dT(e){return new dw(e.readTime,e.key,du)}class dw{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new dw(dt.min(),dl.empty(),du)}static max(){return new dw(dt.max(),dl.empty(),du)}}function dC(e,t){let r=e.readTime.compareTo(t.readTime);return 0!==r||0!==(r=dl.comparator(e.documentKey,t.documentKey))?r:h2(e.largestBatchId,t.largestBatchId)}let dx="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class dE{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}async function d_(e){if(e.code===hV.FAILED_PRECONDITION&&e.message===dx)hD("LocalStore","Unexpectedly lost primary lease");else throw e}class dI{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(e){return this.next(void 0,e)}next(e,t){return(this.callbackAttached&&hL(59440),this.callbackAttached=!0,this.isDone)?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new dI((r,n)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(r,n)},this.catchCallback=e=>{this.wrapFailure(t,e).next(r,n)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();if(t instanceof dI)return t;return dI.resolve(t)}catch(e){return dI.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):dI.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):dI.reject(t)}static resolve(e){return new dI((t,r)=>{t(e)})}static reject(e){return new dI((t,r)=>{r(e)})}static waitFor(e){return new dI((t,r)=>{let n=0,i=0,s=!1;e.forEach(e=>{++n,e.next(()=>{++i,s&&i===n&&t()},e=>r(e))}),s=!0,i===n&&t()})}static or(e){let t=dI.resolve(!1);for(let r of e)t=t.next(e=>e?dI.resolve(e):r());return t}static forEach(e,t){let r=[];return e.forEach((e,n)=>{r.push(t.call(this,e,n))}),this.waitFor(r)}static mapArray(e,t){return new dI((r,n)=>{let i=e.length,s=Array(i),a=0;for(let o=0;o<i;o++){let l=o;t(e[l]).next(e=>{s[l]=e,++a===i&&r(s)},e=>n(e))}})}static doWhile(e,t){return new dI((r,n)=>{let i=()=>{!0===e()?t().next(()=>{i()},n):r()};i()})}}let dk="SimpleDb",dA=3;class dR{static open(e,t,r,n){try{return new dR(t,e.transaction(n,r))}catch(e){throw new dP(t,e)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.completionDeferred=new hq,this.transaction.oncomplete=()=>{this.completionDeferred.resolve()},this.transaction.onabort=()=>{t.error?this.completionDeferred.reject(new dP(e,t.error)):this.completionDeferred.resolve()},this.transaction.onerror=t=>{let r=dF(t.target.error);this.completionDeferred.reject(new dP(e,r))}}get completionPromise(){return this.completionDeferred.promise}abort(e){e&&this.completionDeferred.reject(e),this.aborted||(hD(dk,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}maybeCommit(){let e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){return new dL(this.transaction.objectStore(e))}}class dN{static delete(e){return hD(dk,"Removing database:",e),dB(uF().indexedDB.deleteDatabase(e)).toPromise()}static isAvailable(){if(!u5())return!1;if(dN.isMockPersistence())return!0;let e=u2(),t=dN.getIOSVersion(e),r=0<t&&t<10,n=dD(e),i=0<n&&n<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0)&&!r&&!i}static isMockPersistence(){var e;return"undefined"!=typeof process&&(null==(e=process.env)?void 0:e.USE_MOCK_PERSISTENCE)==="YES"}static getStore(e,t){return e.store(t)}static getIOSVersion(e){let t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i);return Number(t?t[1].split("_").slice(0,2).join("."):"-1")}constructor(e,t,r){this.name=e,this.version=t,this.schemaConverter=r,this.lastClosedDbVersion=null,12.2===dN.getIOSVersion(u2())&&hO("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async ensureDb(e){return this.db||(hD(dk,"Opening database:",this.name),this.db=await new Promise((t,r)=>{let n=indexedDB.open(this.name,this.version);n.onsuccess=e=>{t(e.target.result)},n.onblocked=()=>{r(new dP(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},n.onerror=t=>{let n=t.target.error;"VersionError"===n.name?r(new hU(hV.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===n.name?r(new hU(hV.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n)):r(new dP(e,n))},n.onupgradeneeded=e=>{hD(dk,'Database "'+this.name+'" requires upgrade from version:',e.oldVersion);let t=e.target.result;if(null!==this.lastClosedDbVersion&&this.lastClosedDbVersion!==e.oldVersion)throw Error(`refusing to open IndexedDB database due to potential corruption of the IndexedDB database data; this corruption could be caused by clicking the "clear site data" button in a web browser; try reloading the web page to re-initialize the IndexedDB database: lastClosedDbVersion=${this.lastClosedDbVersion}, event.oldVersion=${e.oldVersion}, event.newVersion=${e.newVersion}, db.version=${t.version}`);this.schemaConverter.createOrUpgrade(t,n.transaction,e.oldVersion,this.version).next(()=>{hD(dk,"Database upgrade to version "+this.version+" complete")})}}),this.db.addEventListener("close",e=>{let t=e.target;this.lastClosedDbVersion=t.version},{passive:!0})),this.versionchangelistener&&(this.db.onversionchange=e=>this.versionchangelistener(e)),this.db}setVersionChangeListener(e){this.versionchangelistener=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,r,n){let i="readonly"===t,s=0;for(;;){++s;try{this.db=await this.ensureDb(e);let t=dR.open(this.db,e,i?"readonly":"readwrite",r),s=n(t).next(e=>(t.maybeCommit(),e)).catch(e=>(t.abort(e),dI.reject(e))).toPromise();return s.catch(()=>{}),await t.completionPromise,s}catch(r){let e=r,t="FirebaseError"!==e.name&&s<dA;if(hD(dk,"Transaction failed with error:",e.message,"Retrying:",t),this.close(),!t)return Promise.reject(e)}}}close(){this.db&&this.db.close(),this.db=void 0}}function dD(e){let t=e.match(/Android ([\d.]+)/i);return Number(t?t[1].split(".").slice(0,2).join("."):"-1")}class dO{constructor(e){this.dbCursor=e,this.shouldStop=!1,this.nextKey=null}get isDone(){return this.shouldStop}get skipToKey(){return this.nextKey}set cursor(e){this.dbCursor=e}done(){this.shouldStop=!0}skip(e){this.nextKey=e}delete(){return dB(this.dbCursor.delete())}}class dP extends hU{constructor(e,t){super(hV.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function dM(e){return"IndexedDbTransactionError"===e.name}class dL{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(hD(dk,"PUT",this.store.name,e,t),r=this.store.put(t,e)):(hD(dk,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),dB(r)}add(e){return hD(dk,"ADD",this.store.name,e,e),dB(this.store.add(e))}get(e){return dB(this.store.get(e)).next(t=>(void 0===t&&(t=null),hD(dk,"GET",this.store.name,e,t),t))}delete(e){return hD(dk,"DELETE",this.store.name,e),dB(this.store.delete(e))}count(){return hD(dk,"COUNT",this.store.name),dB(this.store.count())}loadAll(e,t){let r=this.options(e,t),n=r.index?this.store.index(r.index):this.store;if("function"==typeof n.getAll){let e=n.getAll(r.range);return new dI((t,r)=>{e.onerror=e=>{r(e.target.error)},e.onsuccess=e=>{t(e.target.result)}})}{let e=this.cursor(r),t=[];return this.iterateCursor(e,(e,r)=>{t.push(r)}).next(()=>t)}}loadFirst(e,t){let r=this.store.getAll(e,null===t?void 0:t);return new dI((e,t)=>{r.onerror=e=>{t(e.target.error)},r.onsuccess=t=>{e(t.target.result)}})}deleteAll(e,t){hD(dk,"DELETE ALL",this.store.name);let r=this.options(e,t);r.keysOnly=!1;let n=this.cursor(r);return this.iterateCursor(n,(e,t,r)=>r.delete())}iterate(e,t){let r;t?r=e:(r={},t=e);let n=this.cursor(r);return this.iterateCursor(n,t)}iterateSerial(e){let t=this.cursor({});return new dI((r,n)=>{t.onerror=e=>{n(dF(e.target.error))},t.onsuccess=t=>{let n=t.target.result;if(!n)return void r();e(n.primaryKey,n.value).next(e=>{e?n.continue():r()})}})}iterateCursor(e,t){let r=[];return new dI((n,i)=>{e.onerror=e=>{i(e.target.error)},e.onsuccess=e=>{let i=e.target.result;if(!i)return void n();let s=new dO(i),a=t(i.primaryKey,i.value,s);if(a instanceof dI){let e=a.catch(e=>(s.done(),dI.reject(e)));r.push(e)}s.isDone?n():null===s.skipToKey?i.continue():i.continue(s.skipToKey)}}).next(()=>dI.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),!e.index)return this.store.openCursor(e.range,t);{let r=this.store.index(e.index);return e.keysOnly?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}}}function dB(e){return new dI((t,r)=>{e.onsuccess=e=>{t(e.target.result)},e.onerror=e=>{r(dF(e.target.error))}})}let dj=!1;function dF(e){let t=dN.getIOSVersion(u2());if(t>=12.2&&t<13){let t="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(t)>=0){let e=new hU("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return dj||(dj=!0,setTimeout(()=>{throw e},0)),e}}return e}let dV="IndexBackfiller",dU=15e3,dq=6e4,dz=50;class d${constructor(e,t){this.asyncQueue=e,this.backfiller=t,this.task=null}start(){this.schedule(dU)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}schedule(e){hD(dV,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{let e=await this.backfiller.backfill();hD(dV,`Documents written: ${e}`)}catch(e){dM(e)?hD(dV,"Ignoring IndexedDB error during index backfill: ",e):await d_(e)}await this.schedule(dq)})}}class dG{constructor(e,t){this.localStore=e,this.persistence=t}async backfill(e=dz){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.writeIndexEntries(t,e))}writeIndexEntries(e,t){let r=new Set,n=t,i=!0;return dI.doWhile(()=>!0===i&&n>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(t=>{if(!(null===t||r.has(t)))return hD(dV,`Processing collection: ${t}`),this.writeEntriesForCollectionGroup(e,t,n).next(e=>{n-=e,r.add(t)});i=!1})).next(()=>t-n)}writeEntriesForCollectionGroup(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(n=>this.localStore.localDocuments.getNextDocuments(e,t,n,r).next(r=>{let i=r.changes;return this.localStore.indexManager.updateIndexEntries(e,i).next(()=>this.getNewOffset(n,r)).next(r=>(hD(dV,`Updating offset: ${r}`),this.localStore.indexManager.updateCollectionGroup(e,t,r))).next(()=>i.size)}))}getNewOffset(e,t){let r=e;return t.changes.forEach((e,t)=>{let n=dT(t);dC(n,r)>0&&(r=n)}),new dw(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}class dH{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.setPreviousValue(e),this.writeNewSequenceNumber=e=>t.writeSequenceNumber(e))}setPreviousValue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){let e=++this.previousValue;return this.writeNewSequenceNumber&&this.writeNewSequenceNumber(e),e}}dH.INVALID=-1;let dK="\x01",dW="\x01",dQ="\x10",dY="\x11";function dJ(e){let t="";for(let r=0;r<e.length;r++)t.length>0&&(t=dZ(t)),t=dX(e.get(r),t);return dZ(t)}function dX(e,t){let r=t,n=e.length;for(let t=0;t<n;t++){let n=e.charAt(t);switch(n){case"\0":r+=dK+dQ;break;case dK:r+=dK+dY;break;default:r+=n}}return r}function dZ(e){return e+dK+dW}function d0(e){let t=e.length;if(hj(t>=2,64408,{path:e}),2===t)return hj(e.charAt(0)===dK&&e.charAt(1)===dW,56145,{path:e}),di.emptyPath();let r=t-2,n=[],i="";for(let s=0;s<t;){let t=e.indexOf(dK,s);switch((t<0||t>r)&&hL(50515,{path:e}),e.charAt(t+1)){case dW:let a,o=e.substring(s,t);0===i.length?a=o:(i+=o,a=i,i=""),n.push(a);break;case dQ:i+=e.substring(s,t),i+="\0";break;case dY:i+=e.substring(s,t+1);break;default:hL(61167,{path:e})}s=t+2}return new di(n)}let d1="remoteDocuments",d2="owner",d3="owner",d6="mutationQueues",d4="userId",d5="mutations",d8="batchId",d7="userMutationsIndex",d9=["userId","batchId"];function pe(e){return[e]}function pt(e,t){return[e,dJ(t)]}function pr(e,t,r){return[e,dJ(t),r]}let pn={},pi="documentMutations",ps="remoteDocumentsV14",pa=["prefixPath","collectionGroup","readTime","documentId"],po="documentKeyIndex",pl=["prefixPath","collectionGroup","documentId"],pu="collectionGroupIndex",pc=["collectionGroup","readTime","prefixPath","documentId"],ph="remoteDocumentGlobal",pd="remoteDocumentGlobalKey",pp="targets",pf="targetId",pm="queryTargetsIndex",pg=["canonicalId","targetId"],py="targetDocuments",pv=["targetId","path"],pb="documentTargetsIndex",pS=["path","targetId"],pT="targetGlobalKey",pw="targetGlobal",pC="collectionParents",px=["collectionId","parent"],pE="clientMetadata",p_="clientId",pI="bundles",pk="bundleId",pA="namedQueries",pR="name",pN="indexConfiguration",pD="indexId",pO="collectionGroupIndex",pP="collectionGroup",pM="indexState",pL=["indexId","uid"],pB="sequenceNumberIndex",pj=["uid","sequenceNumber"],pF="indexEntries",pV=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],pU="documentKeyIndex",pq=["indexId","uid","orderedDocumentKey"],pz="documentOverlays",p$=["userId","collectionPath","documentId"],pG="collectionPathOverlayIndex",pH=["userId","collectionPath","largestBatchId"],pK="collectionGroupOverlayIndex",pW=["userId","collectionGroup","largestBatchId"],pQ="globals",pY="name",pJ=[d6,d5,pi,d1,pp,d2,pw,py,pE,ph,pC,pI,pA],pX=[...pJ,pz],pZ=[d6,d5,pi,ps,pp,d2,pw,py,pE,ph,pC,pI,pA,pz],p0=pZ,p1=[...p0,pN,pM,pF],p2=p1,p3=[...p1,pQ],p6=p3;function p4(e){return 18===e?p6:17===e?p3:16===e?p2:15===e?p1:14===e?p0:13===e?pZ:12===e?pX:11===e?pJ:void hL(60245)}class p5 extends dE{constructor(e,t){super(),this.simpleDbTransaction=e,this.currentSequenceNumber=t}}function p8(e,t){let r=hF(e);return dN.getStore(r.simpleDbTransaction,t)}function p7(e){let t=0;for(let r in e)Object.prototype.hasOwnProperty.call(e,r)&&t++;return t}function p9(e,t){for(let r in e)Object.prototype.hasOwnProperty.call(e,r)&&t(r,e[r])}function fe(e,t){let r=[];for(let n in e)Object.prototype.hasOwnProperty.call(e,n)&&r.push(t(e[n],n,e));return r}function ft(e){for(let t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class fr{constructor(e,t){this.comparator=e,this.root=t||fi.EMPTY}insert(e,t){return new fr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,fi.BLACK,null,null))}remove(e){return new fr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,fi.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let n=this.comparator(e,r.key);if(0===n)return t+r.left.size;n<0?r=r.left:(t+=r.left.size+1,r=r.right)}return -1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new fn(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new fn(this.root,e,this.comparator,!1)}getReverseIterator(){return new fn(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new fn(this.root,e,this.comparator,!0)}}class fn{constructor(e,t,r,n){this.isReverse=n,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?r(e.key,t):1,t&&n&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else if(0===i){this.nodeStack.push(e);break}else this.nodeStack.push(e),e=this.isReverse?e.right:e.left}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class fi{constructor(e,t,r,n,i){this.key=e,this.value=t,this.color=null!=r?r:fi.RED,this.left=null!=n?n:fi.EMPTY,this.right=null!=i?i:fi.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,n,i){return new fi(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=n?n:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let n=this,i=r(e,n.key);return(n=i<0?n.copy(null,null,null,n.left.insert(e,t,r),null):0===i?n.copy(null,t,null,null,null):n.copy(null,null,null,null,n.right.insert(e,t,r))).fixUp()}removeMin(){if(this.left.isEmpty())return fi.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()}remove(e,t){let r,n=this;if(0>t(e,n.key))n.left.isEmpty()||n.left.isRed()||n.left.left.isRed()||(n=n.moveRedLeft()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed()&&(n=n.rotateRight()),n.right.isEmpty()||n.right.isRed()||n.right.left.isRed()||(n=n.moveRedRight()),0===t(e,n.key))if(n.right.isEmpty())return fi.EMPTY;else r=n.right.min(),n=n.copy(r.key,r.value,null,null,n.right.removeMin());n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}rotateLeft(){let e=this.copy(null,null,fi.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,fi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){return Math.pow(2,this.check())<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw hL(43730,{key:this.key,value:this.value});if(this.right.isRed())throw hL(14113,{key:this.key,value:this.value});let e=this.left.check();if(e===this.right.check())return e+ +!this.isRed();throw hL(27949)}}fi.EMPTY=null,fi.RED=!0,fi.BLACK=!1;class fs{constructor(){this.size=0}get key(){throw hL(57766)}get value(){throw hL(16141)}get color(){throw hL(16727)}get left(){throw hL(29726)}get right(){throw hL(36894)}copy(e,t,r,n,i){return this}insert(e,t,r){return new fi(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}}fi.EMPTY=new fs;class fa{constructor(e){this.comparator=e,this.data=new fr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let n=r.getNext();if(this.comparator(n.key,e[1])>=0)return;t(n.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new fo(this.data.getIterator())}getIteratorFrom(e){return new fo(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(e=>{t=t.add(e)}),t}isEqual(e){if(!(e instanceof fa)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let e=t.getNext().key,n=r.getNext().key;if(0!==this.comparator(e,n))return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new fa(this.comparator);return t.data=e,t}}class fo{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function fl(e,t,r,n,i){let s=e.getIterator(),a=t.getIterator(),o=fu(s),l=fu(a);for(;o||l;){let e=!1,t=!1;if(o&&l){let n=r(o,l);n<0?t=!0:n>0&&(e=!0)}else null!=o?t=!0:e=!0;e?(n(l),l=fu(a)):t?(i(o),o=fu(s)):(o=fu(s),l=fu(a))}}function fu(e){return e.hasNext()?e.getNext():void 0}class fc{constructor(e){this.fields=e,e.sort(da.comparator)}static empty(){return new fc([])}unionWith(e){let t=new fa(da.comparator);for(let e of this.fields)t=t.add(e);for(let r of e)t=t.add(r);return new fc(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return h5(this.fields,e.fields,(e,t)=>e.isEqual(t))}}function fh(e){return Buffer.from(e,"base64").toString("binary")}function fd(e){return Buffer.from(e,"binary").toString("base64")}class fp{constructor(e){this.binaryString=e}static fromBase64String(e){return new fp(fh(e))}static fromUint8Array(e){return new fp(ff(e))}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return fd(this.binaryString)}toUint8Array(){return fm(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return h2(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}function ff(e){let t="";for(let r=0;r<e.length;++r)t+=String.fromCharCode(e[r]);return t}function fm(e){let t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}fp.EMPTY_BYTE_STRING=new fp("");let fg=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function fy(e){if(hj(!!e,39018),"string"==typeof e){let t=0,r=fg.exec(e);if(hj(!!r,46558,{timestamp:e}),r[1]){let e=r[1];t=Number(e=(e+"000000000").substr(0,9))}return{seconds:Math.floor(new Date(e).getTime()/1e3),nanos:t}}return{seconds:fv(e.seconds),nanos:fv(e.nanos)}}function fv(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function fb(e){return"string"==typeof e?fp.fromBase64String(e):fp.fromUint8Array(e)}let fS="server_timestamp",fT="__type__",fw="__previous_value__",fC="__local_write_time__";function fx(e){var t,r;return(null==(r=((null==(t=null==e?void 0:e.mapValue)?void 0:t.fields)||{})[fT])?void 0:r.stringValue)===fS}function fE(e,t){let r={fields:{[fT]:{stringValue:fS},[fC]:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&fx(t)&&(t=f_(t)),t&&(r.fields[fw]=t),{mapValue:r}}function f_(e){let t=e.mapValue.fields[fw];return fx(t)?f_(t):t}function fI(e){let t=fy(e.mapValue.fields[fC].timestampValue);return new de(t.seconds,t.nanos)}class fk{constructor(e,t,r,n,i,s,a,o,l,u){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=n,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=o,this.useFetchStreams=l,this.isUsingEmulator=u}}let fA="(default)";class fR{constructor(e,t){this.projectId=e,this.database=t||fA}static empty(){return new fR("","")}get isDefaultDatabase(){return this.database===fA}isEqual(e){return e instanceof fR&&e.projectId===this.projectId&&e.database===this.database}}function fN(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new hU(hV.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new fR(e.options.projectId,t)}let fD=-1;function fO(e){return null==e}function fP(e){return 0===e&&1/e==-1/0}function fM(e){return"number"==typeof e&&Number.isInteger(e)&&!fP(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}let fL="__type__",fB="__max__",fj={mapValue:{fields:{__type__:{stringValue:fB}}}},fF="__vector__",fV="value",fU={nullValue:"NULL_VALUE"};function fq(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?fx(e)?4:mg(e)?0x1fffffffffffff:mf(e)?10:11:hL(28295,{value:e})}function fz(e,t){if(e===t)return!0;let r=fq(e);if(r!==fq(t))return!1;switch(r){case 0:case 0x1fffffffffffff:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return fI(e).isEqual(fI(t));case 3:return f$(e,t);case 5:return e.stringValue===t.stringValue;case 6:return fH(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return fG(e,t);case 2:return fK(e,t);case 9:return h5(e.arrayValue.values||[],t.arrayValue.values||[],fz);case 10:case 11:return fW(e,t);default:return hL(52216,{left:e})}}function f$(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;let r=fy(e.timestampValue),n=fy(t.timestampValue);return r.seconds===n.seconds&&r.nanos===n.nanos}function fG(e,t){return fv(e.geoPointValue.latitude)===fv(t.geoPointValue.latitude)&&fv(e.geoPointValue.longitude)===fv(t.geoPointValue.longitude)}function fH(e,t){return fb(e.bytesValue).isEqual(fb(t.bytesValue))}function fK(e,t){if("integerValue"in e&&"integerValue"in t)return fv(e.integerValue)===fv(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){let r=fv(e.doubleValue),n=fv(t.doubleValue);return r===n?fP(r)===fP(n):isNaN(r)&&isNaN(n)}return!1}function fW(e,t){let r=e.mapValue.fields||{},n=t.mapValue.fields||{};if(p7(r)!==p7(n))return!1;for(let e in r)if(r.hasOwnProperty(e)&&(void 0===n[e]||!fz(r[e],n[e])))return!1;return!0}function fQ(e,t){return void 0!==(e.values||[]).find(e=>fz(e,t))}function fY(e,t){if(e===t)return 0;let r=fq(e),n=fq(t);if(r!==n)return h2(r,n);switch(r){case 0:case 0x1fffffffffffff:return 0;case 1:return h2(e.booleanValue,t.booleanValue);case 2:return fJ(e,t);case 3:return fX(e.timestampValue,t.timestampValue);case 4:return fX(fI(e),fI(t));case 5:return h3(e.stringValue,t.stringValue);case 6:return f1(e.bytesValue,t.bytesValue);case 7:return fZ(e.referenceValue,t.referenceValue);case 8:return f0(e.geoPointValue,t.geoPointValue);case 9:return f2(e.arrayValue,t.arrayValue);case 10:return f3(e.mapValue,t.mapValue);case 11:return f6(e.mapValue,t.mapValue);default:throw hL(23264,{leftType:r})}}function fJ(e,t){let r=fv(e.integerValue||e.doubleValue),n=fv(t.integerValue||t.doubleValue);return r<n?-1:r>n?1:r===n?0:isNaN(r)?isNaN(n)?0:-1:1}function fX(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return h2(e,t);let r=fy(e),n=fy(t),i=h2(r.seconds,n.seconds);return 0!==i?i:h2(r.nanos,n.nanos)}function fZ(e,t){let r=e.split("/"),n=t.split("/");for(let e=0;e<r.length&&e<n.length;e++){let t=h2(r[e],n[e]);if(0!==t)return t}return h2(r.length,n.length)}function f0(e,t){let r=h2(fv(e.latitude),fv(t.latitude));return 0!==r?r:h2(fv(e.longitude),fv(t.longitude))}function f1(e,t){let r=fb(e),n=fb(t);return r.compareTo(n)}function f2(e,t){let r=e.values||[],n=t.values||[];for(let e=0;e<r.length&&e<n.length;++e){let t=fY(r[e],n[e]);if(t)return t}return h2(r.length,n.length)}function f3(e,t){var r,n,i,s;let a=e.fields||{},o=t.fields||{},l=null==(r=a[fV])?void 0:r.arrayValue,u=null==(n=o[fV])?void 0:n.arrayValue,c=h2((null==(i=null==l?void 0:l.values)?void 0:i.length)||0,(null==(s=null==u?void 0:u.values)?void 0:s.length)||0);return 0!==c?c:f2(l,u)}function f6(e,t){if(e===fj.mapValue&&t===fj.mapValue)return 0;if(e===fj.mapValue)return 1;if(t===fj.mapValue)return -1;let r=e.fields||{},n=Object.keys(r),i=t.fields||{},s=Object.keys(i);n.sort(),s.sort();for(let e=0;e<n.length&&e<s.length;++e){let t=h3(n[e],s[e]);if(0!==t)return t;let a=fY(r[n[e]],i[s[e]]);if(0!==a)return a}return h2(n.length,s.length)}function f4(e){return f5(e)}function f5(e){if("nullValue"in e)return"null";if("booleanValue"in e)return""+e.booleanValue;if("integerValue"in e)return""+e.integerValue;if("doubleValue"in e)return""+e.doubleValue;if("timestampValue"in e)return f7(e.timestampValue);else if("stringValue"in e)return e.stringValue;else if("bytesValue"in e)return f8(e.bytesValue);else if("referenceValue"in e)return me(e.referenceValue);else if("geoPointValue"in e)return f9(e.geoPointValue);else if("arrayValue"in e)return mr(e.arrayValue);else if("mapValue"in e)return mt(e.mapValue);else return hL(61005,{value:e})}function f8(e){return fb(e).toBase64()}function f7(e){let t=fy(e);return`time(${t.seconds},${t.nanos})`}function f9(e){return`geo(${e.latitude},${e.longitude})`}function me(e){return dl.fromName(e).toString()}function mt(e){let t=Object.keys(e.fields||{}).sort(),r="{",n=!0;for(let i of t)n?n=!1:r+=",",r+=`${i}:${f5(e.fields[i])}`;return r+"}"}function mr(e){let t="[",r=!0;for(let n of e.values||[])r?r=!1:t+=",",t+=f5(n);return t+"]"}function mn(e){switch(fq(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let t=f_(e);return t?16+mn(t):16;case 5:return 2*e.stringValue.length;case 6:return fb(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return ms(e.arrayValue);case 10:case 11:return mi(e.mapValue);default:throw hL(13486,{value:e})}}function mi(e){let t=0;return p9(e.fields,(e,r)=>{t+=e.length+mn(r)}),t}function ms(e){return(e.values||[]).reduce((e,t)=>e+mn(t),0)}function ma(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function mo(e){return!!e&&"integerValue"in e}function ml(e){return!!e&&"doubleValue"in e}function mu(e){return mo(e)||ml(e)}function mc(e){return!!e&&"arrayValue"in e}function mh(e){return!!e&&"nullValue"in e}function md(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function mp(e){return!!e&&"mapValue"in e}function mf(e){var t,r;return(null==(r=((null==(t=null==e?void 0:e.mapValue)?void 0:t.fields)||{})[fL])?void 0:r.stringValue)===fF}function mm(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){let t={mapValue:{fields:{}}};return p9(e.mapValue.fields,(e,r)=>t.mapValue.fields[e]=mm(r)),t}{if(!e.arrayValue)return Object.assign({},e);let t={arrayValue:{values:[]}};for(let r=0;r<(e.arrayValue.values||[]).length;++r)t.arrayValue.values[r]=mm(e.arrayValue.values[r]);return t}}function mg(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===fB}let my={mapValue:{fields:{[fL]:{stringValue:fF},[fV]:{arrayValue:{}}}}};function mv(e){if("nullValue"in e)return fU;if("booleanValue"in e)return{booleanValue:!1};if("integerValue"in e||"doubleValue"in e)return{doubleValue:NaN};if("timestampValue"in e)return{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}};if("stringValue"in e)return{stringValue:""};else if("bytesValue"in e)return{bytesValue:""};else if("referenceValue"in e)return ma(fR.empty(),dl.empty());else if("geoPointValue"in e)return{geoPointValue:{latitude:-90,longitude:-180}};else if("arrayValue"in e)return{arrayValue:{}};else if(!("mapValue"in e))return hL(35942,{value:e});else return mf(e)?my:{mapValue:{}}}function mb(e){if("nullValue"in e)return{booleanValue:!1};if("booleanValue"in e)return{doubleValue:NaN};if("integerValue"in e||"doubleValue"in e)return{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}};if("timestampValue"in e)return{stringValue:""};if("stringValue"in e)return{bytesValue:""};else if("bytesValue"in e)return ma(fR.empty(),dl.empty());else if("referenceValue"in e)return{geoPointValue:{latitude:-90,longitude:-180}};else if("geoPointValue"in e)return{arrayValue:{}};else if("arrayValue"in e)return my;else if(!("mapValue"in e))return hL(61959,{value:e});else return mf(e)?{mapValue:{}}:fj}function mS(e,t){let r=fY(e.value,t.value);return 0!==r?r:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function mT(e,t){let r=fY(e.value,t.value);return 0!==r?r:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}class mw{constructor(e){this.value=e}static empty(){return new mw({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(!mp(t=(t.mapValue.fields||{})[e.get(r)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=mm(t)}setAll(e){let t=da.emptyPath(),r={},n=[];e.forEach((e,i)=>{if(!t.isImmediateParentOf(i)){let e=this.getFieldsMap(t);this.applyChanges(e,r,n),r={},n=[],t=i.popLast()}e?r[i.lastSegment()]=mm(e):n.push(i.lastSegment())});let i=this.getFieldsMap(t);this.applyChanges(i,r,n)}delete(e){let t=this.field(e.popLast());mp(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return fz(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let n=t.mapValue.fields[e.get(r)];mp(n)&&n.mapValue.fields||(n={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=n),t=n}return t.mapValue.fields}applyChanges(e,t,r){for(let n of(p9(t,(t,r)=>e[t]=r),r))delete e[n]}clone(){return new mw(mm(this.value))}}function mC(e){let t=[];return p9(e.fields,(e,r)=>{let n=new da([e]);if(mp(r)){let e=mC(r.mapValue).fields;if(0===e.length)t.push(n);else for(let r of e)t.push(n.child(r))}else t.push(n)}),new fc(t)}class mx{constructor(e,t,r,n,i,s,a){this.key=e,this.documentType=t,this.version=r,this.readTime=n,this.createTime=i,this.data=s,this.documentState=a}static newInvalidDocument(e){return new mx(e,0,dt.min(),dt.min(),dt.min(),mw.empty(),0)}static newFoundDocument(e,t,r,n){return new mx(e,1,t,dt.min(),r,n,0)}static newNoDocument(e,t){return new mx(e,2,t,dt.min(),dt.min(),mw.empty(),0)}static newUnknownDocument(e,t){return new mx(e,3,t,dt.min(),dt.min(),mw.empty(),2)}convertToFoundDocument(e,t){return this.createTime.isEqual(dt.min())&&(2===this.documentType||0===this.documentType)&&(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=mw.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=mw.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=dt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof mx&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new mx(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}function mE(e,t,r){let n=t.data.field(e),i=r.data.field(e);return null!==n&&null!==i?fY(n,i):hL(42886)}class m_{constructor(e,t){this.position=e,this.inclusive=t}}function mI(e,t,r){let n=0;for(let i=0;i<e.position.length;i++){let s=t[i],a=e.position[i];if(n=s.field.isKeyField()?dl.comparator(dl.fromName(a.referenceValue),r.key):fY(a,r.data.field(s.field)),"desc"===s.dir&&(n*=-1),0!==n)break}return n}function mk(e,t,r){let n=mI(e,t,r);return e.inclusive?n>=0:n>0}function mA(e,t,r){let n=mI(e,t,r);return e.inclusive?n<=0:n<0}function mR(e,t){if(null===e)return null===t;if(null===t||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let r=0;r<e.position.length;r++)if(!fz(e.position[r],t.position[r]))return!1;return!0}class mN{constructor(e,t="asc"){this.field=e,this.dir=t}}function mD(e){return e.field.canonicalString()+e.dir}function mO(e){return`${e.field.canonicalString()} (${e.dir})`}function mP(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class mM{}class mL extends mM{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){if(e.isKeyField())if("in"===t||"not-in"===t)return this.createKeyFieldInFilter(e,t,r);else return new mY(e,t,r);if("array-contains"===t)return new m0(e,r);if("in"===t)return new m1(e,r);if("not-in"===t)return new m2(e,r);if("array-contains-any"===t)return new m3(e,r);else return new mL(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new mJ(e,r):new mX(e,r)}matches(e){let t=e.data.field(this.field);return"!="===this.op?null!==t&&void 0===t.nullValue&&this.matchesComparison(fY(t,this.value)):null!==t&&fq(this.value)===fq(t)&&this.matchesComparison(fY(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return hL(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class mB extends mM{constructor(e,t){super(),this.filters=e,this.op=t,this.memoizedFlattenedFilters=null}static create(e,t){return new mB(e,t)}matches(e){return mj(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.memoizedFlattenedFilters||(this.memoizedFlattenedFilters=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.memoizedFlattenedFilters}getFilters(){return Object.assign([],this.filters)}}function mj(e){return"and"===e.op}function mF(e){return"or"===e.op}function mV(e){return mU(e)&&mj(e)}function mU(e){for(let t of e.filters)if(t instanceof mB)return!1;return!0}function mq(e){if(e instanceof mL)return e.field.canonicalString()+e.op.toString()+f4(e.value);{if(mV(e))return e.filters.map(e=>mq(e)).join(",");let t=e.filters.map(e=>mq(e)).join(",");return`${e.op}(${t})`}}function mz(e,t){return e instanceof mL?m$(e,t):e instanceof mB?mG(e,t):void hL(19439)}function m$(e,t){return t instanceof mL&&e.op===t.op&&e.field.isEqual(t.field)&&fz(e.value,t.value)}function mG(e,t){return t instanceof mB&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((e,r,n)=>e&&mz(r,t.filters[n]),!0)}function mH(e,t){let r=e.filters.concat(t);return mB.create(r,e.op)}function mK(e){return e instanceof mL?mQ(e):e instanceof mB?mW(e):"Filter"}function mW(e){return e.op.toString()+" {"+e.getFilters().map(mK).join(" ,")+"}"}function mQ(e){return`${e.field.canonicalString()} ${e.op} ${f4(e.value)}`}class mY extends mL{constructor(e,t,r){super(e,t,r),this.key=dl.fromName(r.referenceValue)}matches(e){let t=dl.comparator(e.key,this.key);return this.matchesComparison(t)}}class mJ extends mL{constructor(e,t){super(e,"in",t),this.keys=mZ("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class mX extends mL{constructor(e,t){super(e,"not-in",t),this.keys=mZ("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function mZ(e,t){var r;return((null==(r=t.arrayValue)?void 0:r.values)||[]).map(e=>dl.fromName(e.referenceValue))}class m0 extends mL{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return mc(t)&&fQ(t.arrayValue,this.value)}}class m1 extends mL{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return null!==t&&fQ(this.value.arrayValue,t)}}class m2 extends mL{constructor(e,t){super(e,"not-in",t)}matches(e){if(fQ(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return null!==t&&void 0===t.nullValue&&!fQ(this.value.arrayValue,t)}}class m3 extends mL{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!!mc(t)&&!!t.arrayValue.values&&t.arrayValue.values.some(e=>fQ(this.value.arrayValue,e))}}class m6{constructor(e,t=null,r=[],n=[],i=null,s=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=n,this.limit=i,this.startAt=s,this.endAt=a,this.memoizedCanonicalId=null}}function m4(e,t=null,r=[],n=[],i=null,s=null,a=null){return new m6(e,t,r,n,i,s,a)}function m5(e){let t=hF(e);if(null===t.memoizedCanonicalId){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(e=>mq(e)).join(","),e+="|ob:",e+=t.orderBy.map(e=>mD(e)).join(","),fO(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(e=>f4(e)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(e=>f4(e)).join(",")),t.memoizedCanonicalId=e}return t.memoizedCanonicalId}function m8(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(e=>mK(e)).join(", ")}]`),fO(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(e=>mO(e)).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(e=>f4(e)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(e=>f4(e)).join(",")),`Target(${t})`}function m7(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let r=0;r<e.orderBy.length;r++)if(!mP(e.orderBy[r],t.orderBy[r]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let r=0;r<e.filters.length;r++)if(!mz(e.filters[r],t.filters[r]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!mR(e.startAt,t.startAt)&&mR(e.endAt,t.endAt)}function m9(e){return dl.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function ge(e,t){return e.filters.filter(e=>e instanceof mL&&e.field.isEqual(t))}function gt(e,t){let r=dd(t);if(void 0===r)return null;for(let t of ge(e,r.fieldPath))switch(t.op){case"array-contains-any":return t.value.arrayValue.values||[];case"array-contains":return[t.value]}return null}function gr(e,t){let r=new Map;for(let n of dp(t))for(let t of ge(e,n.fieldPath))switch(t.op){case"==":case"in":r.set(n.fieldPath.canonicalString(),t.value);break;case"not-in":case"!=":return r.set(n.fieldPath.canonicalString(),t.value),Array.from(r.values())}return null}function gn(e,t){let r=[],n=!0;for(let i of dp(t)){let t=0===i.kind?gs(e,i.fieldPath,e.startAt):ga(e,i.fieldPath,e.startAt);r.push(t.value),n&&(n=t.inclusive)}return new m_(r,n)}function gi(e,t){let r=[],n=!0;for(let i of dp(t)){let t=0===i.kind?ga(e,i.fieldPath,e.endAt):gs(e,i.fieldPath,e.endAt);r.push(t.value),n&&(n=t.inclusive)}return new m_(r,n)}function gs(e,t,r){let n=fU,i=!0;for(let r of ge(e,t)){let e=fU,t=!0;switch(r.op){case"<":case"<=":e=mv(r.value);break;case"==":case"in":case">=":e=r.value;break;case">":e=r.value,t=!1;break;case"!=":case"not-in":e=fU}0>mS({value:n,inclusive:i},{value:e,inclusive:t})&&(n=e,i=t)}if(null!==r){for(let s=0;s<e.orderBy.length;++s)if(e.orderBy[s].field.isEqual(t)){let e=r.position[s];0>mS({value:n,inclusive:i},{value:e,inclusive:r.inclusive})&&(n=e,i=r.inclusive);break}}return{value:n,inclusive:i}}function ga(e,t,r){let n=fj,i=!0;for(let r of ge(e,t)){let e=fj,t=!0;switch(r.op){case">=":case">":e=mb(r.value),t=!1;break;case"==":case"in":case"<=":e=r.value;break;case"<":e=r.value,t=!1;break;case"!=":case"not-in":e=fj}mT({value:n,inclusive:i},{value:e,inclusive:t})>0&&(n=e,i=t)}if(null!==r){for(let s=0;s<e.orderBy.length;++s)if(e.orderBy[s].field.isEqual(t)){let e=r.position[s];mT({value:n,inclusive:i},{value:e,inclusive:r.inclusive})>0&&(n=e,i=r.inclusive);break}}return{value:n,inclusive:i}}function go(e){let t=new fa(da.comparator),r=!1;for(let n of e.filters)for(let e of n.getFlattenedFilters())e.field.isKeyField()||("array-contains"===e.op||"array-contains-any"===e.op?r=!0:t=t.add(e.field));for(let r of e.orderBy)r.field.isKeyField()||(t=t.add(r.field));return t.size+ +!!r}function gl(e){return null!==e.limit}class gu{constructor(e,t=null,r=[],n=[],i=null,s="F",a=null,o=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=n,this.limit=i,this.limitType=s,this.startAt=a,this.endAt=o,this.memoizedNormalizedOrderBy=null,this.memoizedTarget=null,this.memoizedAggregateTarget=null,this.startAt,this.endAt}}function gc(e,t,r,n,i,s,a,o){return new gu(e,t,r,n,i,s,a,o)}function gh(e){return new gu(e)}function gd(e,t){return new gu(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}function gp(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function gf(e){let t=new fa(da.comparator);return e.filters.forEach(e=>{e.getFlattenedFilters().forEach(e=>{e.isInequality()&&(t=t.add(e.field))})}),t}function gm(e){return dl.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function gg(e){return null!==e.collectionGroup}function gy(e){let t=hF(e);if(null===t.memoizedNormalizedOrderBy){t.memoizedNormalizedOrderBy=[];let e=new Set;for(let r of t.explicitOrderBy)t.memoizedNormalizedOrderBy.push(r),e.add(r.field.canonicalString());let r=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";gf(t).forEach(n=>{e.has(n.canonicalString())||n.isKeyField()||t.memoizedNormalizedOrderBy.push(new mN(n,r))}),e.has(da.keyField().canonicalString())||t.memoizedNormalizedOrderBy.push(new mN(da.keyField(),r))}return t.memoizedNormalizedOrderBy}function gv(e){let t=hF(e);return t.memoizedTarget||(t.memoizedTarget=gS(t,gy(e))),t.memoizedTarget}function gb(e){let t=hF(e);return t.memoizedAggregateTarget||(t.memoizedAggregateTarget=gS(t,e.explicitOrderBy)),t.memoizedAggregateTarget}function gS(e,t){if("F"===e.limitType)return m4(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(e=>{let t="desc"===e.dir?"asc":"desc";return new mN(e.field,t)});let r=e.endAt?new m_(e.endAt.position,e.endAt.inclusive):null,n=e.startAt?new m_(e.startAt.position,e.startAt.inclusive):null;return m4(e.path,e.collectionGroup,t,e.filters,e.limit,r,n)}}function gT(e,t){let r=e.filters.concat([t]);return new gu(e.path,e.collectionGroup,e.explicitOrderBy.slice(),r,e.limit,e.limitType,e.startAt,e.endAt)}function gw(e,t){let r=e.explicitOrderBy.concat([t]);return new gu(e.path,e.collectionGroup,r,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}function gC(e,t,r){return new gu(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,r,e.startAt,e.endAt)}function gx(e,t){return new gu(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}function gE(e,t){return new gu(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}function g_(e,t){return m7(gv(e),gv(t))&&e.limitType===t.limitType}function gI(e){return`${m5(gv(e))}|lt:${e.limitType}`}function gk(e){return`Query(target=${m8(gv(e))}; limitType=${e.limitType})`}function gA(e,t){return t.isFoundDocument()&&gR(e,t)&&gN(e,t)&&gD(e,t)&&gO(e,t)}function gR(e,t){let r=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(r):dl.isDocumentKey(e.path)?e.path.isEqual(r):e.path.isImmediateParentOf(r)}function gN(e,t){for(let r of gy(e))if(!r.field.isKeyField()&&null===t.data.field(r.field))return!1;return!0}function gD(e,t){for(let r of e.filters)if(!r.matches(t))return!1;return!0}function gO(e,t){return(!e.startAt||!!mA(e.startAt,gy(e),t))&&(!e.endAt||!!mk(e.endAt,gy(e),t))}function gP(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function gM(e){return(t,r)=>{let n=!1;for(let i of gy(e)){let e=gL(i,t,r);if(0!==e)return e;n=n||i.field.isKeyField()}return 0}}function gL(e,t,r){let n=e.field.isKeyField()?dl.comparator(t.key,r.key):mE(e.field,t,r);switch(e.dir){case"asc":return n;case"desc":return -1*n;default:return hL(19790,{direction:e.dir})}}class gB{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r){for(let[t,n]of r)if(this.equalsFn(t,e))return n}}has(e){return void 0!==this.get(e)}set(e,t){let r=this.mapKeyFn(e),n=this.inner[r];if(void 0===n){this.inner[r]=[[e,t]],this.innerSize++;return}for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e)){n[r]=[e,t];return}n.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let n=0;n<r.length;n++)if(this.equalsFn(r[n][0],e))return 1===r.length?delete this.inner[t]:r.splice(n,1),this.innerSize--,!0;return!1}forEach(e){p9(this.inner,(t,r)=>{for(let[t,n]of r)e(t,n)})}isEmpty(){return ft(this.inner)}size(){return this.innerSize}}let gj=new fr(dl.comparator);function gF(){return gj}let gV=new fr(dl.comparator);function gU(...e){let t=gV;for(let r of e)t=t.insert(r.key,r);return t}function gq(){return gH()}function gz(e){let t=gV;return e.forEach((e,r)=>t=t.insert(e,r.overlayedDocument)),t}function g$(){return gH()}function gG(){return gH()}function gH(){return new gB(e=>e.toString(),(e,t)=>e.isEqual(t))}let gK=new fr(dl.comparator);function gW(){return gK}let gQ=new fa(dl.comparator);function gY(...e){let t=gQ;for(let r of e)t=t.add(r);return t}let gJ=new fa(h2);function gX(){return gJ}function gZ(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};else if(t===1/0)return{doubleValue:"Infinity"};else if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:fP(t)?"-0":t}}function g0(e){return{integerValue:""+e}}function g1(e,t){return fM(t)?g0(t):gZ(e,t)}class g2{constructor(){this._=void 0}}function g3(e,t,r){return e instanceof g8?fE(r,t):e instanceof g7?g9(e,t):e instanceof ye?yt(e,t):yn(e,t)}function g6(e,t,r){return e instanceof g7?g9(e,t):e instanceof ye?yt(e,t):r}function g4(e,t){return e instanceof yr?mu(t)?t:{integerValue:0}:null}function g5(e,t){return e instanceof g7&&t instanceof g7||e instanceof ye&&t instanceof ye?h5(e.elements,t.elements,fz):e instanceof yr&&t instanceof yr?fz(e.operand,t.operand):e instanceof g8&&t instanceof g8}class g8 extends g2{}class g7 extends g2{constructor(e){super(),this.elements=e}}function g9(e,t){let r=ys(t);for(let t of e.elements)r.some(e=>fz(e,t))||r.push(t);return{arrayValue:{values:r}}}class ye extends g2{constructor(e){super(),this.elements=e}}function yt(e,t){let r=ys(t);for(let t of e.elements)r=r.filter(e=>!fz(e,t));return{arrayValue:{values:r}}}class yr extends g2{constructor(e,t){super(),this.serializer=e,this.operand=t}}function yn(e,t){let r=g4(e,t),n=yi(r)+yi(e.operand);return mo(r)&&mo(e.operand)?g0(n):gZ(e.serializer,n)}function yi(e){return fv(e.integerValue||e.doubleValue)}function ys(e){return mc(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class ya{constructor(e,t){this.field=e,this.transform=t}}function yo(e,t){return e.field.isEqual(t.field)&&g5(e.transform,t.transform)}function yl(e,t){return void 0===e&&void 0===t||!!e&&!!t&&h5(e,t,(e,t)=>yo(e,t))}class yu{constructor(e,t){this.version=e,this.transformResults=t}}class yc{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new yc}static exists(e){return new yc(void 0,e)}static updateTime(e){return new yc(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function yh(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class yd{}function yp(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)if(e.isNoDocument())return new yI(e.key,yc.none());else return new yv(e.key,e.data,yc.none());{let r=e.data,n=mw.empty(),i=new fa(da.comparator);for(let e of t.fields)if(!i.has(e)){let t=r.field(e);null===t&&e.length>1&&(e=e.popLast(),t=r.field(e)),null===t?n.delete(e):n.set(e,t),i=i.add(e)}return new yT(e.key,n,new fc(i.toArray()),yc.none())}}function yf(e,t,r){e instanceof yv?yb(e,t,r):e instanceof yT?yw(e,t,r):yk(e,t,r)}function ym(e,t,r,n){return e instanceof yv?yS(e,t,r,n):e instanceof yT?yC(e,t,r,n):yA(e,t,r)}function yg(e,t){let r=null;for(let n of e.fieldTransforms){let e=t.data.field(n.field),i=g4(n.transform,e||null);null!=i&&(null===r&&(r=mw.empty()),r.set(n.field,i))}return r||null}function yy(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!yl(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class yv extends yd{constructor(e,t,r,n=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=n,this.type=0}getFieldMask(){return null}}function yb(e,t,r){let n=e.value.clone(),i=yE(e.fieldTransforms,t,r.transformResults);n.setAll(i),t.convertToFoundDocument(r.version,n).setHasCommittedMutations()}function yS(e,t,r,n){if(!yh(e.precondition,t))return r;let i=e.value.clone(),s=y_(e.fieldTransforms,n,t);return i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}class yT extends yd{constructor(e,t,r,n,i=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=n,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function yw(e,t,r){if(!yh(e.precondition,t))return void t.convertToUnknownDocument(r.version);let n=yE(e.fieldTransforms,t,r.transformResults),i=t.data;i.setAll(yx(e)),i.setAll(n),t.convertToFoundDocument(r.version,i).setHasCommittedMutations()}function yC(e,t,r,n){if(!yh(e.precondition,t))return r;let i=y_(e.fieldTransforms,n,t),s=t.data;return(s.setAll(yx(e)),s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null===r)?null:r.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map(e=>e.field))}function yx(e){let t=new Map;return e.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){let n=e.data.field(r);t.set(r,n)}}),t}function yE(e,t,r){let n=new Map;hj(e.length===r.length,32656,{serverTransformResultCount:r.length,fieldTransformCount:e.length});for(let i=0;i<r.length;i++){let s=e[i],a=s.transform,o=t.data.field(s.field);n.set(s.field,g6(a,o,r[i]))}return n}function y_(e,t,r){let n=new Map;for(let i of e){let e=i.transform,s=r.data.field(i.field);n.set(i.field,g3(e,s,t))}return n}class yI extends yd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}function yk(e,t,r){t.convertToNoDocument(r.version).setHasCommittedMutations()}function yA(e,t,r){return yh(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):r}class yR extends yd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class yN{constructor(e,t,r,n){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=n}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let t=0;t<this.mutations.length;t++){let n=this.mutations[t];n.key.isEqual(e.key)&&yf(n,e,r[t])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=ym(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=ym(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=gG();return this.mutations.forEach(n=>{let i=e.get(n.key),s=i.overlayedDocument,a=this.applyToLocalView(s,i.mutatedFields),o=yp(s,a=t.has(n.key)?null:a);null!==o&&r.set(n.key,o),s.isValidDocument()||s.convertToNoDocument(dt.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),gY())}isEqual(e){return this.batchId===e.batchId&&h5(this.mutations,e.mutations,(e,t)=>yy(e,t))&&h5(this.baseMutations,e.baseMutations,(e,t)=>yy(e,t))}}class yD{constructor(e,t,r,n){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=n}static from(e,t,r){hj(e.mutations.length===r.length,58842,{mutationsSent:e.mutations.length,resultsReceived:r.length});let n=gW(),i=e.mutations;for(let e=0;e<i.length;e++)n=n.insert(i[e].key,r[e].version);return new yD(e,t,r,n)}}class yO{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class yP{constructor(e,t){this.count=e,this.unchangedNames=t}}function yM(e){switch(e){case hV.OK:return hL(64938);case hV.CANCELLED:case hV.UNKNOWN:case hV.DEADLINE_EXCEEDED:case hV.RESOURCE_EXHAUSTED:case hV.INTERNAL:case hV.UNAVAILABLE:case hV.UNAUTHENTICATED:return!1;case hV.INVALID_ARGUMENT:case hV.NOT_FOUND:case hV.ALREADY_EXISTS:case hV.PERMISSION_DENIED:case hV.FAILED_PRECONDITION:case hV.ABORTED:case hV.OUT_OF_RANGE:case hV.UNIMPLEMENTED:case hV.DATA_LOSS:return!0;default:return hL(15467,{code:e})}}function yL(e){return yM(e)&&e!==hV.ABORTED}function yB(e){if(void 0===e)return hO("GRPC error has no .code"),hV.UNKNOWN;switch(e){case u.OK:return hV.OK;case u.CANCELLED:return hV.CANCELLED;case u.UNKNOWN:return hV.UNKNOWN;case u.DEADLINE_EXCEEDED:return hV.DEADLINE_EXCEEDED;case u.RESOURCE_EXHAUSTED:return hV.RESOURCE_EXHAUSTED;case u.INTERNAL:return hV.INTERNAL;case u.UNAVAILABLE:return hV.UNAVAILABLE;case u.UNAUTHENTICATED:return hV.UNAUTHENTICATED;case u.INVALID_ARGUMENT:return hV.INVALID_ARGUMENT;case u.NOT_FOUND:return hV.NOT_FOUND;case u.ALREADY_EXISTS:return hV.ALREADY_EXISTS;case u.PERMISSION_DENIED:return hV.PERMISSION_DENIED;case u.FAILED_PRECONDITION:return hV.FAILED_PRECONDITION;case u.ABORTED:return hV.ABORTED;case u.OUT_OF_RANGE:return hV.OUT_OF_RANGE;case u.UNIMPLEMENTED:return hV.UNIMPLEMENTED;case u.DATA_LOSS:return hV.DATA_LOSS;default:return hL(39323,{code:e})}}!function(e){e[e.OK=0]="OK",e[e.CANCELLED=1]="CANCELLED",e[e.UNKNOWN=2]="UNKNOWN",e[e.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",e[e.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",e[e.NOT_FOUND=5]="NOT_FOUND",e[e.ALREADY_EXISTS=6]="ALREADY_EXISTS",e[e.PERMISSION_DENIED=7]="PERMISSION_DENIED",e[e.UNAUTHENTICATED=16]="UNAUTHENTICATED",e[e.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",e[e.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",e[e.ABORTED=10]="ABORTED",e[e.OUT_OF_RANGE=11]="OUT_OF_RANGE",e[e.UNIMPLEMENTED=12]="UNIMPLEMENTED",e[e.INTERNAL=13]="INTERNAL",e[e.UNAVAILABLE=14]="UNAVAILABLE",e[e.DATA_LOSS=15]="DATA_LOSS"}(u||(u={}));class yj extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}let yF=null;function yV(e){if(yF)throw Error("a TestingHooksSpi instance is already set");yF=e}let yU=new o([0xffffffff,0xffffffff],0);function yq(e){let t=hZ().encode(e),r=new l;return r.update(t),new Uint8Array(r.digest())}function yz(e){let t=new DataView(e.buffer),r=t.getUint32(0,!0),n=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new o([r,n],0),new o([i,s],0)]}class y${constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new yG(`Invalid padding: ${t}`);if(r<0||e.length>0&&0===this.hashCount)throw new yG(`Invalid hash count: ${r}`);if(0===e.length&&0!==t)throw new yG(`Invalid padding when bitmap length is 0: ${t}`);this.bitCount=8*e.length-t,this.bitCountInInteger=o.fromNumber(this.bitCount)}getBitIndex(e,t,r){let n=e.add(t.multiply(o.fromNumber(r)));return 1===n.compare(yU)&&(n=new o([n.getBits(0),n.getBits(1)],0)),n.modulo(this.bitCountInInteger).toNumber()}isBitSet(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(0===this.bitCount)return!1;let[t,r]=yz(yq(e));for(let e=0;e<this.hashCount;e++){let n=this.getBitIndex(t,r,e);if(!this.isBitSet(n))return!1}return!0}static create(e,t,r){let n=e%8==0?0:8-e%8,i=new y$(new Uint8Array(Math.ceil(e/8)),n,t);return r.forEach(e=>i.insert(e)),i}insert(e){if(0===this.bitCount)return;let[t,r]=yz(yq(e));for(let e=0;e<this.hashCount;e++){let n=this.getBitIndex(t,r,e);this.setBit(n)}}setBit(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class yG extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class yH{constructor(e,t,r,n,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=n,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let n=new Map;return n.set(e,yK.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new yH(dt.min(),n,new fr(h2),gF(),gY())}}class yK{constructor(e,t,r,n,i){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=n,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new yK(r,t,gY(),gY(),gY())}}class yW{constructor(e,t,r,n){this.updatedTargetIds=e,this.removedTargetIds=t,this.key=r,this.newDoc=n}}class yQ{constructor(e,t){this.targetId=e,this.existenceFilter=t}}class yY{constructor(e,t,r=fp.EMPTY_BYTE_STRING,n=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=n}}class yJ{constructor(){this.pendingResponses=0,this.documentChanges=y1(),this._resumeToken=fp.EMPTY_BYTE_STRING,this._current=!1,this._hasPendingChanges=!0}get current(){return this._current}get resumeToken(){return this._resumeToken}get isPending(){return 0!==this.pendingResponses}get hasPendingChanges(){return this._hasPendingChanges}updateResumeToken(e){e.approximateByteSize()>0&&(this._hasPendingChanges=!0,this._resumeToken=e)}toTargetChange(){let e=gY(),t=gY(),r=gY();return this.documentChanges.forEach((n,i)=>{switch(i){case 0:e=e.add(n);break;case 2:t=t.add(n);break;case 1:r=r.add(n);break;default:hL(38017,{changeType:i})}}),new yK(this._resumeToken,this._current,e,t,r)}clearPendingChanges(){this._hasPendingChanges=!1,this.documentChanges=y1()}addDocumentChange(e,t){this._hasPendingChanges=!0,this.documentChanges=this.documentChanges.insert(e,t)}removeDocumentChange(e){this._hasPendingChanges=!0,this.documentChanges=this.documentChanges.remove(e)}recordPendingTargetRequest(){this.pendingResponses+=1}recordTargetResponse(){this.pendingResponses-=1,hj(this.pendingResponses>=0,3241,{pendingResponses:this.pendingResponses})}markCurrent(){this._hasPendingChanges=!0,this._current=!0}}let yX="WatchChangeAggregator";class yZ{constructor(e){this.metadataProvider=e,this.targetStates=new Map,this.pendingDocumentUpdates=gF(),this.pendingDocumentUpdatesByTarget=y0(),this.pendingDocumentTargetMapping=y0(),this.pendingTargetResets=new fr(h2)}handleDocumentChange(e){for(let t of e.updatedTargetIds)e.newDoc&&e.newDoc.isFoundDocument()?this.addDocumentToTarget(t,e.newDoc):this.removeDocumentFromTarget(t,e.key,e.newDoc);for(let t of e.removedTargetIds)this.removeDocumentFromTarget(t,e.key,e.newDoc)}handleTargetChange(e){this.forEachTarget(e,t=>{let r=this.ensureTargetState(t);switch(e.state){case 0:this.isActiveTarget(t)&&r.updateResumeToken(e.resumeToken);break;case 1:r.recordTargetResponse(),r.isPending||r.clearPendingChanges(),r.updateResumeToken(e.resumeToken);break;case 2:r.recordTargetResponse(),r.isPending||this.removeTarget(t);break;case 3:this.isActiveTarget(t)&&(r.markCurrent(),r.updateResumeToken(e.resumeToken));break;case 4:this.isActiveTarget(t)&&(this.resetTarget(t),r.updateResumeToken(e.resumeToken));break;default:hL(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.targetStates.forEach((e,r)=>{this.isActiveTarget(r)&&t(r)})}handleExistenceFilter(e){let t=e.targetId,r=e.existenceFilter.count,n=this.targetDataForActiveTarget(t);if(n){let i=n.target;if(m9(i))if(0===r){let e=new dl(i.path);this.removeDocumentFromTarget(t,e,mx.newNoDocument(e,dt.min()))}else hj(1===r,20013,{expectedCount:r});else{let n=this.getCurrentDocumentCountForTarget(t);if(n!==r){let r=this.parseBloomFilter(e),i=r?this.applyBloomFilter(r,e,n):1;if(0!==i){this.resetTarget(t);let e=2===i?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.pendingTargetResets=this.pendingTargetResets.insert(t,e)}null==yF||yF.notifyOnExistenceFilterMismatch(y2(n,e.existenceFilter,this.metadataProvider.getDatabaseId(),r,i))}}}}parseBloomFilter(e){let t,r,n=e.existenceFilter.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:i="",padding:s=0},hashCount:a=0}=n;try{t=fb(i).toUint8Array()}catch(e){if(e instanceof yj)return hP("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{r=new y$(t,s,a)}catch(e){return e instanceof yG?hP("BloomFilter error: ",e):hP("Applying bloom filter failed: ",e),null}return 0===r.bitCount?null:r}applyBloomFilter(e,t,r){return 2*(t.existenceFilter.count!==r-this.filterRemovedDocuments(e,t.targetId))}filterRemovedDocuments(e,t){let r=this.metadataProvider.getRemoteKeysForTarget(t),n=0;return r.forEach(r=>{let i=this.metadataProvider.getDatabaseId(),s=`projects/${i.projectId}/databases/${i.database}/documents/${r.path.canonicalString()}`;!e.mightContain(s)&&(this.removeDocumentFromTarget(t,r,null),n++)}),n}createRemoteEvent(e){let t=new Map;this.targetStates.forEach((r,n)=>{let i=this.targetDataForActiveTarget(n);if(i){if(r.current&&m9(i.target)){let t=new dl(i.target.path);this.ensureDocumentUpdateByTarget(t).has(n)||this.targetContainsDocument(n,t)||this.removeDocumentFromTarget(n,t,mx.newNoDocument(t,e))}r.hasPendingChanges&&(t.set(n,r.toTargetChange()),r.clearPendingChanges())}});let r=gY();this.pendingDocumentTargetMapping.forEach((e,t)=>{let n=!0;t.forEachWhile(e=>{let t=this.targetDataForActiveTarget(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(n=!1,!1)}),n&&(r=r.add(e))}),this.pendingDocumentUpdates.forEach((t,r)=>r.setReadTime(e));let n=new yH(e,t,this.pendingTargetResets,this.pendingDocumentUpdates,r);return this.pendingDocumentUpdates=gF(),this.pendingDocumentUpdatesByTarget=y0(),this.pendingDocumentTargetMapping=y0(),this.pendingTargetResets=new fr(h2),n}addDocumentToTarget(e,t){if(!this.isActiveTarget(e))return;let r=2*!!this.targetContainsDocument(e,t.key);this.ensureTargetState(e).addDocumentChange(t.key,r),this.pendingDocumentUpdates=this.pendingDocumentUpdates.insert(t.key,t),this.pendingDocumentUpdatesByTarget=this.pendingDocumentUpdatesByTarget.insert(t.key,this.ensureDocumentUpdateByTarget(t.key).add(e)),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(t.key,this.ensureDocumentTargetMapping(t.key).add(e))}removeDocumentFromTarget(e,t,r){if(!this.isActiveTarget(e))return;let n=this.ensureTargetState(e);this.targetContainsDocument(e,t)?n.addDocumentChange(t,1):n.removeDocumentChange(t),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(t,this.ensureDocumentTargetMapping(t).delete(e)),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(t,this.ensureDocumentTargetMapping(t).add(e)),r&&(this.pendingDocumentUpdates=this.pendingDocumentUpdates.insert(t,r))}removeTarget(e){this.targetStates.delete(e)}getCurrentDocumentCountForTarget(e){let t=this.ensureTargetState(e).toTargetChange();return this.metadataProvider.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}recordPendingTargetRequest(e){this.ensureTargetState(e).recordPendingTargetRequest()}ensureTargetState(e){let t=this.targetStates.get(e);return t||(t=new yJ,this.targetStates.set(e,t)),t}ensureDocumentTargetMapping(e){let t=this.pendingDocumentTargetMapping.get(e);return t||(t=new fa(h2),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(e,t)),t}ensureDocumentUpdateByTarget(e){let t=this.pendingDocumentUpdatesByTarget.get(e);return t||(t=new fa(h2),this.pendingDocumentUpdatesByTarget=this.pendingDocumentUpdatesByTarget.insert(e,t)),t}isActiveTarget(e){let t=null!==this.targetDataForActiveTarget(e);return t||hD(yX,"Detected inactive target",e),t}targetDataForActiveTarget(e){let t=this.targetStates.get(e);return t&&t.isPending?null:this.metadataProvider.getTargetDataForTarget(e)}resetTarget(e){this.targetStates.set(e,new yJ),this.metadataProvider.getRemoteKeysForTarget(e).forEach(t=>{this.removeDocumentFromTarget(e,t,null)})}targetContainsDocument(e,t){return this.metadataProvider.getRemoteKeysForTarget(e).has(t)}}function y0(){return new fr(dl.comparator)}function y1(){return new fr(dl.comparator)}function y2(e,t,r,n,i){var s,a,o,l,u,c;let h={localCacheCount:e,existenceFilterCount:t.count,databaseId:r.database,projectId:r.projectId},d=t.unchangedNames;return d&&(h.bloomFilter={applied:0===i,hashCount:null!=(s=null==d?void 0:d.hashCount)?s:0,bitmapLength:null!=(l=null==(o=null==(a=null==d?void 0:d.bits)?void 0:a.bitmap)?void 0:o.length)?l:0,padding:null!=(c=null==(u=null==d?void 0:d.bits)?void 0:u.padding)?c:0,mightContain:e=>{var t;return null!=(t=null==n?void 0:n.mightContain(e))&&t}}),h}let y3=(()=>{let e={};return e.asc="ASCENDING",e.desc="DESCENDING",e})(),y6=(()=>{let e={};return e["<"]="LESS_THAN",e["<="]="LESS_THAN_OR_EQUAL",e[">"]="GREATER_THAN",e[">="]="GREATER_THAN_OR_EQUAL",e["=="]="EQUAL",e["!="]="NOT_EQUAL",e["array-contains"]="ARRAY_CONTAINS",e.in="IN",e["not-in"]="NOT_IN",e["array-contains-any"]="ARRAY_CONTAINS_ANY",e})(),y4=(()=>{let e={};return e.and="AND",e.or="OR",e})();class y5{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function y8(e){return new hU(void 0===e.code?hV.UNKNOWN:yB(e.code),e.message||"")}function y7(e,t){return e.useProto3Json||fO(t)?t:{value:t}}function y9(e){let t;return fO(t="object"==typeof e?e.value:e)?null:t}function ve(e,t){if(!e.useProto3Json)return{seconds:""+t.seconds,nanos:t.nanoseconds};{let e=new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),r=("000000000"+t.nanoseconds).slice(-9);return`${e}.${r}Z`}}function vt(e){let t=fy(e);return new de(t.seconds,t.nanos)}function vr(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function vn(e,t){return e.useProto3Json?(hj(void 0===t||"string"==typeof t,58123),fp.fromBase64String(t||"")):(hj(void 0===t||t instanceof Buffer||t instanceof Uint8Array,16193),fp.fromUint8Array(t||new Uint8Array))}function vi(e,t){return ve(e,t.toTimestamp())}function vs(e){return hj(!!e,49232),dt.fromTimestamp(vt(e))}function va(e,t){return vo(e,t).canonicalString()}function vo(e,t){let r=vf(e).child("documents");return void 0===t?r:r.child(t)}function vl(e){let t=di.fromString(e);return hj(bs(t),10190,{key:t.toString()}),t}function vu(e,t){return va(e.databaseId,t.path)}function vc(e,t){let r=vl(t);if(r.get(1)!==e.databaseId.projectId)throw new hU(hV.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+e.databaseId.projectId);if(r.get(3)!==e.databaseId.database)throw new hU(hV.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+e.databaseId.database);return new dl(vm(r))}function vh(e,t){return va(e.databaseId,t)}function vd(e){let t=vl(e);return 4===t.length?di.emptyPath():vm(t)}function vp(e){return new di(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function vf(e){return new di(["projects",e.projectId,"databases",e.database])}function vm(e){return hj(e.length>4&&"documents"===e.get(4),29091,{key:e.toString()}),e.popFirst(5)}function vg(e,t,r){return{name:vu(e,t),fields:r.value.mapValue.fields}}function vy(e,t){return{name:vu(e,t.key),fields:t.data.value.mapValue.fields,updateTime:ve(e,t.version.toTimestamp()),createTime:ve(e,t.createTime.toTimestamp())}}function vv(e,t,r){let n=vc(e,t.name),i=vs(t.updateTime),s=t.createTime?vs(t.createTime):dt.min(),a=new mw({mapValue:{fields:t.fields}}),o=mx.newFoundDocument(n,i,s,a);return r&&o.setHasCommittedMutations(),r?o.setHasCommittedMutations():o}function vb(e,t){hj(!!t.found,43571),t.found.name,t.found.updateTime;let r=vc(e,t.found.name),n=vs(t.found.updateTime),i=t.found.createTime?vs(t.found.createTime):dt.min(),s=new mw({mapValue:{fields:t.found.fields}});return mx.newFoundDocument(r,n,i,s)}function vS(e,t){hj(!!t.missing,3894),hj(!!t.readTime,22933);let r=vc(e,t.missing),n=vs(t.readTime);return mx.newNoDocument(r,n)}function vT(e,t){return"found"in t?vb(e,t):"missing"in t?vS(e,t):hL(7234,{result:t})}function vw(e,t){let r;if("targetChange"in t){t.targetChange;let n=vC(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=vn(e,t.targetChange.resumeToken),a=t.targetChange.cause;r=new yY(n,i,s,a&&y8(a)||null)}else if("documentChange"in t){t.documentChange;let n=t.documentChange;n.document,n.document.name,n.document.updateTime;let i=vc(e,n.document.name),s=vs(n.document.updateTime),a=n.document.createTime?vs(n.document.createTime):dt.min(),o=new mw({mapValue:{fields:n.document.fields}}),l=mx.newFoundDocument(i,s,a,o);r=new yW(n.targetIds||[],n.removedTargetIds||[],l.key,l)}else if("documentDelete"in t){t.documentDelete;let n=t.documentDelete;n.document;let i=vc(e,n.document),s=n.readTime?vs(n.readTime):dt.min(),a=mx.newNoDocument(i,s);r=new yW([],n.removedTargetIds||[],a.key,a)}else if("documentRemove"in t){t.documentRemove;let n=t.documentRemove;n.document;let i=vc(e,n.document);r=new yW([],n.removedTargetIds||[],i,null)}else{if(!("filter"in t))return hL(11601,{change:t});t.filter;let e=t.filter;e.targetId;let{count:n=0,unchangedNames:i}=e,s=new yP(n,i);r=new yQ(e.targetId,s)}return r}function vC(e){if("NO_CHANGE"===e)return 0;if("ADD"===e)return 1;if("REMOVE"===e)return 2;if("CURRENT"===e)return 3;if("RESET"===e)return 4;else return hL(39313,{state:e})}function vx(e){if(!("targetChange"in e))return dt.min();let t=e.targetChange;return t.targetIds&&t.targetIds.length||!t.readTime?dt.min():vs(t.readTime)}function vE(e,t){let r;if(t instanceof yv)r={update:vg(e,t.key,t.value)};else if(t instanceof yI)r={delete:vu(e,t.key)};else if(t instanceof yT)r={update:vg(e,t.key,t.data),updateMask:bn(t.fieldMask)};else{if(!(t instanceof yR))return hL(16599,{mutationType:t.type});r={verify:vu(e,t.key)}}return t.fieldTransforms.length>0&&(r.updateTransforms=t.fieldTransforms.map(t=>vN(e,t))),t.precondition.isNone||(r.currentDocument=vI(e,t.precondition)),r}function v_(e,t){let r=t.currentDocument?vk(t.currentDocument):yc.none(),n=t.updateTransforms?t.updateTransforms.map(t=>vD(e,t)):[];if(t.update){t.update.name;let i=vc(e,t.update.name),s=new mw({mapValue:{fields:t.update.fields}});return t.updateMask?new yT(i,s,bi(t.updateMask),r,n):new yv(i,s,r,n)}return t.delete?new yI(vc(e,t.delete),r):t.verify?new yR(vc(e,t.verify),r):hL(1463,{proto:t})}function vI(e,t){return void 0!==t.updateTime?{updateTime:vi(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:hL(27497)}function vk(e){return void 0!==e.updateTime?yc.updateTime(vs(e.updateTime)):void 0!==e.exists?yc.exists(e.exists):yc.none()}function vA(e,t){let r=e.updateTime?vs(e.updateTime):vs(t);return r.isEqual(dt.min())&&(r=vs(t)),new yu(r,e.transformResults||[])}function vR(e,t){return e&&e.length>0?(hj(void 0!==t,14353),e.map(e=>vA(e,t))):[]}function vN(e,t){let r=t.transform;if(r instanceof g8)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(r instanceof g7)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:r.elements}};if(r instanceof ye)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:r.elements}};if(r instanceof yr)return{fieldPath:t.field.canonicalString(),increment:r.operand};throw hL(20930,{transform:t.transform})}function vD(e,t){let r=null;return"setToServerValue"in t?(hj("REQUEST_TIME"===t.setToServerValue,16630,{proto:t}),r=new g8):"appendMissingElements"in t?r=new g7(t.appendMissingElements.values||[]):"removeAllFromArray"in t?r=new ye(t.removeAllFromArray.values||[]):"increment"in t?r=new yr(e,t.increment):hL(16584,{proto:t}),new ya(da.fromServerFormat(t.fieldPath),r)}function vO(e,t){return{documents:[vh(e,t.path)]}}function vP(e){let t=e.documents.length;return hj(1===t,1966,{count:t}),gv(gh(vd(e.documents[0])))}function vM(e,t){let r,n={structuredQuery:{}},i=t.path;null!==t.collectionGroup?(r=i,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(r=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=vh(e,r);let s=vq(t.filters);s&&(n.structuredQuery.where=s);let a=vG(t.orderBy);a&&(n.structuredQuery.orderBy=a);let o=y7(e,t.limit);return null!==o&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt=vK(t.startAt)),t.endAt&&(n.structuredQuery.endAt=vW(t.endAt)),{queryTarget:n,parent:r}}function vL(e,t,r,n){let{queryTarget:i,parent:s}=vM(e,t),a={},o=[],l=0;return r.forEach(e=>{let t=n?e.alias:`aggregate_${l++}`;a[t]=e.alias,"count"===e.aggregateType?o.push({alias:t,count:{}}):"avg"===e.aggregateType?o.push({alias:t,avg:{field:v3(e.fieldPath)}}):"sum"===e.aggregateType&&o.push({alias:t,sum:{field:v3(e.fieldPath)}})}),{request:{structuredAggregationQuery:{aggregations:o,structuredQuery:i.structuredQuery},parent:i.parent},aliasMap:a,parent:s}}function vB(e){let t=vd(e.parent),r=e.structuredQuery,n=r.from?r.from.length:0,i=null;if(n>0){hj(1===n,65062);let e=r.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let s=[];r.where&&(s=vz(r.where));let a=[];r.orderBy&&(a=vH(r.orderBy));let o=null;r.limit&&(o=y9(r.limit));let l=null;r.startAt&&(l=vQ(r.startAt));let u=null;return r.endAt&&(u=vY(r.endAt)),gc(t,i,a,s,o,"F",l,u)}function vj(e){return gv(vB(e))}function vF(e,t){let r=vV(t.purpose);return null==r?null:{"goog-listen-tags":r}}function vV(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return hL(28987,{purpose:e})}}function vU(e,t){let r,n=t.target;if((r=m9(n)?{documents:vO(e,n)}:{query:vM(e,n).queryTarget}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0){r.resumeToken=vr(e,t.resumeToken);let n=y7(e,t.expectedCount);null!==n&&(r.expectedCount=n)}else if(t.snapshotVersion.compareTo(dt.min())>0){r.readTime=ve(e,t.snapshotVersion.toTimestamp());let n=y7(e,t.expectedCount);null!==n&&(r.expectedCount=n)}return r}function vq(e){if(0!==e.length)return v8(mB.create(e,"and"))}function vz(e){let t=v$(e);return t instanceof mB&&mV(t)?t.getFilters():[t]}function v$(e){return void 0!==e.unaryFilter?be(e):void 0!==e.fieldFilter?bt(e):void 0!==e.compositeFilter?br(e):hL(30097,{filter:e})}function vG(e){if(0!==e.length)return e.map(e=>v4(e))}function vH(e){return e.map(e=>v5(e))}function vK(e){return{before:e.inclusive,values:e.position}}function vW(e){return{before:!e.inclusive,values:e.position}}function vQ(e){let t=!!e.before;return new m_(e.values||[],t)}function vY(e){let t=!e.before;return new m_(e.values||[],t)}function vJ(e){return y3[e]}function vX(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}function vZ(e){return y6[e]}function v0(e){return y4[e]}function v1(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return hL(58110);default:return hL(50506)}}function v2(e){switch(e){case"AND":return"and";case"OR":return"or";default:return hL(1026)}}function v3(e){return{fieldPath:e.canonicalString()}}function v6(e){return da.fromServerFormat(e.fieldPath)}function v4(e){return{field:v3(e.field),direction:vJ(e.dir)}}function v5(e){return new mN(v6(e.field),vX(e.direction))}function v8(e){return e instanceof mL?v9(e):e instanceof mB?v7(e):hL(54877,{filter:e})}function v7(e){let t=e.getFilters().map(e=>v8(e));return 1===t.length?t[0]:{compositeFilter:{op:v0(e.op),filters:t}}}function v9(e){if("=="===e.op){if(md(e.value))return{unaryFilter:{field:v3(e.field),op:"IS_NAN"}};else if(mh(e.value))return{unaryFilter:{field:v3(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(md(e.value))return{unaryFilter:{field:v3(e.field),op:"IS_NOT_NAN"}};else if(mh(e.value))return{unaryFilter:{field:v3(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:v3(e.field),op:vZ(e.op),value:e.value}}}function be(e){switch(e.unaryFilter.op){case"IS_NAN":let t=v6(e.unaryFilter.field);return mL.create(t,"==",{doubleValue:NaN});case"IS_NULL":let r=v6(e.unaryFilter.field);return mL.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let n=v6(e.unaryFilter.field);return mL.create(n,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let i=v6(e.unaryFilter.field);return mL.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return hL(61313);default:return hL(60726)}}function bt(e){return mL.create(v6(e.fieldFilter.field),v1(e.fieldFilter.op),e.fieldFilter.value)}function br(e){return mB.create(e.compositeFilter.filters.map(e=>v$(e)),v2(e.compositeFilter.op))}function bn(e){let t=[];return e.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function bi(e){return new fc((e.fieldPaths||[]).map(e=>da.fromServerFormat(e)))}function bs(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class ba{constructor(e,t,r,n,i=dt.min(),s=dt.min(),a=fp.EMPTY_BYTE_STRING,o=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=n,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=o}withSequenceNumber(e){return new ba(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new ba(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ba(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ba(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class bo{constructor(e){this.remoteSerializer=e}}function bl(e,t){let r;if(t.document)r=vv(e.remoteSerializer,t.document,!!t.hasCommittedMutations);else if(t.noDocument){let e=dl.fromSegments(t.noDocument.path),n=bp(t.noDocument.readTime);r=mx.newNoDocument(e,n),t.hasCommittedMutations&&r.setHasCommittedMutations()}else{if(!t.unknownDocument)return hL(56709);let e=dl.fromSegments(t.unknownDocument.path),n=bp(t.unknownDocument.version);r=mx.newUnknownDocument(e,n)}return t.readTime&&r.setReadTime(bh(t.readTime)),r}function bu(e,t){let r=t.key,n={prefixPath:r.getCollectionPath().popLast().toArray(),collectionGroup:r.collectionGroup,documentId:r.path.lastSegment(),readTime:bc(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())n.document=vy(e.remoteSerializer,t);else if(t.isNoDocument())n.noDocument={path:r.path.toArray(),readTime:bd(t.version)};else{if(!t.isUnknownDocument())return hL(57904,{document:t});n.unknownDocument={path:r.path.toArray(),version:bd(t.version)}}return n}function bc(e){let t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function bh(e){let t=new de(e[0],e[1]);return dt.fromTimestamp(t)}function bd(e){let t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function bp(e){let t=new de(e.seconds,e.nanoseconds);return dt.fromTimestamp(t)}function bf(e,t,r){let n=r.baseMutations.map(t=>vE(e.remoteSerializer,t)),i=r.mutations.map(t=>vE(e.remoteSerializer,t));return{userId:t,batchId:r.batchId,localWriteTimeMs:r.localWriteTime.toMillis(),baseMutations:n,mutations:i}}function bm(e,t){let r=(t.baseMutations||[]).map(t=>v_(e.remoteSerializer,t));for(let e=0;e<t.mutations.length-1;++e){let r=t.mutations[e];e+1<t.mutations.length&&void 0!==t.mutations[e+1].transform&&(r.updateTransforms=t.mutations[e+1].transform.fieldTransforms,t.mutations.splice(e+1,1),++e)}let n=t.mutations.map(t=>v_(e.remoteSerializer,t)),i=de.fromMillis(t.localWriteTimeMs);return new yN(t.batchId,i,r,n)}function bg(e){let t,r=bp(e.readTime),n=void 0!==e.lastLimboFreeSnapshotVersion?bp(e.lastLimboFreeSnapshotVersion):dt.min();return new ba(t=bv(e.query)?vP(e.query):vj(e.query),e.targetId,"TargetPurposeListen",e.lastListenSequenceNumber,r,n,fp.fromBase64String(e.resumeToken))}function by(e,t){let r,n=bd(t.snapshotVersion),i=bd(t.lastLimboFreeSnapshotVersion);r=m9(t.target)?vO(e.remoteSerializer,t.target):vM(e.remoteSerializer,t.target).queryTarget;let s=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:m5(t.target),readTime:n,resumeToken:s,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:r}}function bv(e){return void 0!==e.documents}function bb(e){return{id:e.bundleId,createTime:bp(e.createTime),version:e.version}}function bS(e){return{bundleId:e.id,createTime:bd(vs(e.createTime)),version:e.version}}function bT(e){return{name:e.name,query:bC(e.bundledQuery),readTime:bp(e.readTime)}}function bw(e){return{name:e.name,readTime:bd(vs(e.readTime)),bundledQuery:e.bundledQuery}}function bC(e){let t=vB({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?gC(t,t.limit,"L"):t}function bx(e){return{name:e.name,query:bC(e.bundledQuery),readTime:vs(e.readTime)}}function bE(e){return{id:e.id,version:e.version,createTime:vs(e.createTime)}}function b_(e,t){return new yO(t.largestBatchId,v_(e.remoteSerializer,t.overlayMutation))}function bI(e,t,r){let[n,i,s]=bk(t,r.mutation.key);return{userId:t,collectionPath:i,documentId:s,collectionGroup:r.mutation.key.getCollectionGroup(),largestBatchId:r.largestBatchId,overlayMutation:vE(e.remoteSerializer,r.mutation)}}function bk(e,t){let r=t.path.lastSegment();return[e,dJ(t.path.popLast()),r]}function bA(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map(e=>[e.fieldPath.canonicalString(),e.kind])}}function bR(e,t){let r=t?new db(t.sequenceNumber,new dw(bp(t.readTime),new dl(d0(t.documentKey)),t.largestBatchId)):db.empty(),n=e.fields.map(([e,t])=>new dy(da.fromServerFormat(e),t));return new dh(e.indexId,e.collectionGroup,n,r)}function bN(e,t,r,n){return{indexId:e,uid:t,sequenceNumber:r,readTime:bd(n.readTime),documentKey:dJ(n.documentKey.path),largestBatchId:n.largestBatchId}}class bD{getBundleMetadata(e,t){return bO(e).get(t).next(e=>{if(e)return bb(e)})}saveBundleMetadata(e,t){return bO(e).put(bS(t))}getNamedQuery(e,t){return bP(e).get(t).next(e=>{if(e)return bT(e)})}saveNamedQuery(e,t){return bP(e).put(bw(t))}}function bO(e){return p8(e,pI)}function bP(e){return p8(e,pA)}class bM{constructor(e,t){this.serializer=e,this.userId=t}static forUser(e,t){return new bM(e,t.uid||"")}getOverlay(e,t){return bL(e).get(bk(this.userId,t)).next(e=>e?b_(this.serializer,e):null)}getOverlays(e,t){let r=g$();return dI.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&r.set(t,e)})).next(()=>r)}saveOverlays(e,t,r){let n=[];return r.forEach((r,i)=>{let s=new yO(t,i);n.push(this.saveOverlay(e,s))}),dI.waitFor(n)}removeOverlaysForBatchId(e,t,r){let n=new Set;t.forEach(e=>n.add(dJ(e.getCollectionPath())));let i=[];return n.forEach(t=>{let n=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,r+1],!1,!0);i.push(bL(e).deleteAll(pG,n))}),dI.waitFor(i)}getOverlaysForCollection(e,t,r){let n=g$(),i=dJ(t),s=IDBKeyRange.bound([this.userId,i,r],[this.userId,i,Number.POSITIVE_INFINITY],!0);return bL(e).loadAll(pG,s).next(e=>{for(let t of e){let e=b_(this.serializer,t);n.set(e.getKey(),e)}return n})}getOverlaysForCollectionGroup(e,t,r,n){let i,s=g$(),a=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return bL(e).iterate({index:pK,range:a},(e,t,r)=>{let a=b_(this.serializer,t);s.size()<n||a.largestBatchId===i?(s.set(a.getKey(),a),i=a.largestBatchId):r.done()}).next(()=>s)}saveOverlay(e,t){return bL(e).put(bI(this.serializer,this.userId,t))}}function bL(e){return p8(e,pz)}class bB{globalsStore(e){return p8(e,pQ)}getSessionToken(e){return this.globalsStore(e).get("sessionToken").next(e=>{let t=null==e?void 0:e.value;return t?fp.fromUint8Array(t):fp.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.globalsStore(e).put({name:"sessionToken",value:t.toUint8Array()})}}let bj=5,bF=10,bV=13,bU=15,bq=20,bz=25,b$=30,bG=37,bH=45,bK=50,bW=53,bQ=55,bY=60,bJ=2;class bX{constructor(){}writeIndexValue(e,t){this.writeIndexValueAux(e,t),t.writeInfinity()}writeIndexValueAux(e,t){if("nullValue"in e)this.writeValueTypeLabel(t,bj);else if("booleanValue"in e)this.writeValueTypeLabel(t,bF),t.writeNumber(+!!e.booleanValue);else if("integerValue"in e)this.writeValueTypeLabel(t,bU),t.writeNumber(fv(e.integerValue));else if("doubleValue"in e){let r=fv(e.doubleValue);isNaN(r)?this.writeValueTypeLabel(t,bV):(this.writeValueTypeLabel(t,bU),fP(r)?t.writeNumber(0):t.writeNumber(r))}else if("timestampValue"in e){let r=e.timestampValue;this.writeValueTypeLabel(t,bq),"string"==typeof r&&(r=fy(r)),t.writeString(`${r.seconds||""}`),t.writeNumber(r.nanos||0)}else if("stringValue"in e)this.writeIndexString(e.stringValue,t),this.writeTruncationMarker(t);else if("bytesValue"in e)this.writeValueTypeLabel(t,b$),t.writeBytes(fb(e.bytesValue)),this.writeTruncationMarker(t);else if("referenceValue"in e)this.writeIndexEntityRef(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.writeValueTypeLabel(t,bH),t.writeNumber(r.latitude||0),t.writeNumber(r.longitude||0)}else"mapValue"in e?mg(e)?this.writeValueTypeLabel(t,Number.MAX_SAFE_INTEGER):mf(e)?this.writeIndexVector(e.mapValue,t):(this.writeIndexMap(e.mapValue,t),this.writeTruncationMarker(t)):"arrayValue"in e?(this.writeIndexArray(e.arrayValue,t),this.writeTruncationMarker(t)):hL(19022,{indexValue:e})}writeIndexString(e,t){this.writeValueTypeLabel(t,bz),this.writeUnlabeledIndexString(e,t)}writeUnlabeledIndexString(e,t){t.writeString(e)}writeIndexMap(e,t){let r=e.fields||{};for(let e of(this.writeValueTypeLabel(t,bQ),Object.keys(r)))this.writeIndexString(e,t),this.writeIndexValueAux(r[e],t)}writeIndexVector(e,t){var r,n;let i=e.fields||{};this.writeValueTypeLabel(t,bW);let s=fV,a=(null==(n=null==(r=i[s].arrayValue)?void 0:r.values)?void 0:n.length)||0;this.writeValueTypeLabel(t,bU),t.writeNumber(fv(a)),this.writeIndexString(s,t),this.writeIndexValueAux(i[s],t)}writeIndexArray(e,t){let r=e.values||[];for(let e of(this.writeValueTypeLabel(t,bK),r))this.writeIndexValueAux(e,t)}writeIndexEntityRef(e,t){this.writeValueTypeLabel(t,bG),dl.fromName(e).path.forEach(e=>{this.writeValueTypeLabel(t,bY),this.writeUnlabeledIndexString(e,t)})}writeValueTypeLabel(e,t){e.writeNumber(t)}writeTruncationMarker(e){e.writeNumber(bJ)}}bX.INSTANCE=new bX;let bZ="\uD800",b0="\uDBFF",b1=0,b2=255,b3=1,b6=255,b4=255,b5=0,b8=64,b7=8,b9=1024;function Se(e){let t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}function St(e){if(0===e)return 8;let t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function Sr(e){let t=0;for(let r=0;r<8;++r){let n=St(255&e[r]);if(t+=n,8!==n)break}return t}function Sn(e){return Math.ceil((b8-Sr(e))/b7)}class Si{constructor(){this.buffer=new Uint8Array(b9),this.position=0}writeBytesAscending(e){let t=e[Symbol.iterator](),r=t.next();for(;!r.done;)this.writeByteAscending(r.value),r=t.next();this.writeSeparatorAscending()}writeBytesDescending(e){let t=e[Symbol.iterator](),r=t.next();for(;!r.done;)this.writeByteDescending(r.value),r=t.next();this.writeSeparatorDescending()}writeUtf8Ascending(e){for(let t of e){let e=t.charCodeAt(0);if(e<128)this.writeByteAscending(e);else if(e<2048)this.writeByteAscending(960|e>>>6),this.writeByteAscending(128|63&e);else if(t<bZ||b0<t)this.writeByteAscending(480|e>>>12),this.writeByteAscending(128|63&e>>>6),this.writeByteAscending(128|63&e);else{let e=t.codePointAt(0);this.writeByteAscending(240|e>>>18),this.writeByteAscending(128|63&e>>>12),this.writeByteAscending(128|63&e>>>6),this.writeByteAscending(128|63&e)}}this.writeSeparatorAscending()}writeUtf8Descending(e){for(let t of e){let e=t.charCodeAt(0);if(e<128)this.writeByteDescending(e);else if(e<2048)this.writeByteDescending(960|e>>>6),this.writeByteDescending(128|63&e);else if(t<bZ||b0<t)this.writeByteDescending(480|e>>>12),this.writeByteDescending(128|63&e>>>6),this.writeByteDescending(128|63&e);else{let e=t.codePointAt(0);this.writeByteDescending(240|e>>>18),this.writeByteDescending(128|63&e>>>12),this.writeByteDescending(128|63&e>>>6),this.writeByteDescending(128|63&e)}}this.writeSeparatorDescending()}writeNumberAscending(e){let t=this.toOrderedBits(e),r=Sn(t);this.ensureAvailable(1+r),this.buffer[this.position++]=255&r;for(let e=t.length-r;e<t.length;++e)this.buffer[this.position++]=255&t[e]}writeNumberDescending(e){let t=this.toOrderedBits(e),r=Sn(t);this.ensureAvailable(1+r),this.buffer[this.position++]=~(255&r);for(let e=t.length-r;e<t.length;++e)this.buffer[this.position++]=~(255&t[e])}writeInfinityAscending(){this.writeEscapedByteAscending(b6),this.writeEscapedByteAscending(b4)}writeInfinityDescending(){this.writeEscapedByteDescending(b6),this.writeEscapedByteDescending(b4)}reset(){this.position=0}seed(e){this.ensureAvailable(e.length),this.buffer.set(e,this.position),this.position+=e.length}encodedBytes(){return this.buffer.slice(0,this.position)}toOrderedBits(e){let t=Se(e),r=(128&t[0])!=0;t[0]^=r?255:128;for(let e=1;e<t.length;++e)t[e]^=255*!!r;return t}writeByteAscending(e){let t=255&e;t===b1?(this.writeEscapedByteAscending(b1),this.writeEscapedByteAscending(b2)):t===b6?(this.writeEscapedByteAscending(b6),this.writeEscapedByteAscending(b5)):this.writeEscapedByteAscending(t)}writeByteDescending(e){let t=255&e;t===b1?(this.writeEscapedByteDescending(b1),this.writeEscapedByteDescending(b2)):t===b6?(this.writeEscapedByteDescending(b6),this.writeEscapedByteDescending(b5)):this.writeEscapedByteDescending(e)}writeSeparatorAscending(){this.writeEscapedByteAscending(b1),this.writeEscapedByteAscending(b3)}writeSeparatorDescending(){this.writeEscapedByteDescending(b1),this.writeEscapedByteDescending(b3)}writeEscapedByteAscending(e){this.ensureAvailable(1),this.buffer[this.position++]=e}writeEscapedByteDescending(e){this.ensureAvailable(1),this.buffer[this.position++]=~e}ensureAvailable(e){let t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);let n=new Uint8Array(r);n.set(this.buffer),this.buffer=n}}class Ss{constructor(e){this.orderedCode=e}writeBytes(e){this.orderedCode.writeBytesAscending(e)}writeString(e){this.orderedCode.writeUtf8Ascending(e)}writeNumber(e){this.orderedCode.writeNumberAscending(e)}writeInfinity(){this.orderedCode.writeInfinityAscending()}}class Sa{constructor(e){this.orderedCode=e}writeBytes(e){this.orderedCode.writeBytesDescending(e)}writeString(e){this.orderedCode.writeUtf8Descending(e)}writeNumber(e){this.orderedCode.writeNumberDescending(e)}writeInfinity(){this.orderedCode.writeInfinityDescending()}}class So{constructor(){this.orderedCode=new Si,this.ascending=new Ss(this.orderedCode),this.descending=new Sa(this.orderedCode)}seed(e){this.orderedCode.seed(e)}forKind(e){return 0===e?this.ascending:this.descending}encodedBytes(){return this.orderedCode.encodedBytes()}reset(){this.orderedCode.reset()}}class Sl{constructor(e,t,r,n){this._indexId=e,this._documentKey=t,this._arrayValue=r,this._directionalValue=n}successor(){let e=this._directionalValue.length,t=0===e||255===this._directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this._directionalValue,0),t!==e?r.set([0],this._directionalValue.length):++r[r.length-1],new Sl(this._indexId,this._documentKey,this._arrayValue,r)}dbIndexEntry(e,t,r){return{indexId:this._indexId,uid:e,arrayValue:Sh(this._arrayValue),directionalValue:Sh(this._directionalValue),orderedDocumentKey:Sh(t),documentKey:r.path.toArray()}}dbIndexEntryKey(e,t,r){let n=this.dbIndexEntry(e,t,r);return[n.indexId,n.uid,n.arrayValue,n.directionalValue,n.orderedDocumentKey,n.documentKey]}}function Su(e,t){let r=e._indexId-t._indexId;return 0!==r||0!==(r=Sc(e._arrayValue,t._arrayValue))||0!==(r=Sc(e._directionalValue,t._directionalValue))?r:dl.comparator(e._documentKey,t._documentKey)}function Sc(e,t){for(let r=0;r<e.length&&r<t.length;++r){let n=e[r]-t[r];if(0!==n)return n}return e.length-t.length}function Sh(e){return u4()?Sp(e):e}function Sd(e){return"string"!=typeof e?e:Sf(e)}function Sp(e){let t="";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t}function Sf(e){let t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}class Sm{constructor(e){for(let t of(this.inequalityFilters=new fa((e,t)=>da.comparator(e.field,t.field)),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.orderBys=e.orderBy,this.equalityFilters=[],e.filters)){let e=t;e.isInequality()?this.inequalityFilters=this.inequalityFilters.add(e):this.equalityFilters.push(e)}}get hasMultipleInequality(){return this.inequalityFilters.size>1}servedByIndex(e){if(hj(e.collectionGroup===this.collectionId,49279),this.hasMultipleInequality)return!1;let t=dd(e);if(void 0!==t&&!this.hasMatchingEqualityFilter(t))return!1;let r=dp(e),n=new Set,i=0,s=0;for(;i<r.length;++i)if(this.hasMatchingEqualityFilter(r[i]))n=n.add(r[i].fieldPath.canonicalString());else break;if(i===r.length)return!0;if(this.inequalityFilters.size>0){let e=this.inequalityFilters.getIterator().getNext();if(!n.has(e.field.canonicalString())){let t=r[i];if(!this.matchesFilter(e,t)||!this.matchesOrderBy(this.orderBys[s++],t))return!1}++i}for(;i<r.length;++i){let e=r[i];if(s>=this.orderBys.length||!this.matchesOrderBy(this.orderBys[s++],e))return!1}return!0}buildTargetIndex(){if(this.hasMultipleInequality)return null;let e=new fa(da.comparator),t=[];for(let r of this.equalityFilters)if(!r.field.isKeyField())if("array-contains"===r.op||"array-contains-any"===r.op)t.push(new dy(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new dy(r.field,0))}for(let r of this.orderBys)!r.field.isKeyField()&&(e.has(r.field)||(e=e.add(r.field),t.push(new dy(r.field,+("asc"!==r.dir)))));return new dh(dh.UNKNOWN_ID,this.collectionId,t,db.empty())}hasMatchingEqualityFilter(e){for(let t of this.equalityFilters)if(this.matchesFilter(t,e))return!0;return!1}matchesFilter(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;let r="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===r}matchesOrderBy(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function Sg(e){var t,r;if(hj(e instanceof mL||e instanceof mB,20012),e instanceof mL)if(!(e instanceof m1))return e;else{let n=(null==(r=null==(t=e.value.arrayValue)?void 0:t.values)?void 0:r.map(t=>mL.create(e.field,"==",t)))||[];return mB.create(n,"or")}let n=e.filters.map(e=>Sg(e));return mB.create(n,e.op)}function Sy(e){if(0===e.getFilters().length)return[];let t=Sw(Sg(e));return(hj(SS(t),7391),Sv(t)||Sb(t))?[t]:t.getFilters()}function Sv(e){return e instanceof mL}function Sb(e){return e instanceof mB&&mV(e)}function SS(e){return Sv(e)||Sb(e)||ST(e)}function ST(e){if(e instanceof mB&&mF(e)){for(let t of e.getFilters())if(!Sv(t)&&!Sb(t))return!1;return!0}return!1}function Sw(e){if(hj(e instanceof mL||e instanceof mB,34018),e instanceof mL)return e;if(1===e.filters.length)return Sw(e.filters[0]);let t=e.filters.map(e=>Sw(e)),r=mB.create(t,e.op);return SS(r=SI(r))?r:(hj(r instanceof mB,64498),hj(mj(r),40251),hj(r.filters.length>1,57927),r.filters.reduce((e,t)=>SC(e,t)))}function SC(e,t){let r;return hj(e instanceof mL||e instanceof mB,38388),hj(t instanceof mL||t instanceof mB,25473),SI(r=e instanceof mL?t instanceof mL?Sx(e,t):S_(e,t):t instanceof mL?S_(t,e):SE(e,t))}function Sx(e,t){return mB.create([e,t],"and")}function SE(e,t){if(hj(e.filters.length>0&&t.filters.length>0,48005),mj(e)&&mj(t))return mH(e,t.getFilters());let r=mF(e)?e:t,n=mF(e)?t:e,i=r.filters.map(e=>SC(e,n));return mB.create(i,"or")}function S_(e,t){if(mj(t))return mH(t,e.getFilters());{let r=t.filters.map(t=>SC(e,t));return mB.create(r,"or")}}function SI(e){if(hj(e instanceof mL||e instanceof mB,11850),e instanceof mL)return e;let t=e.getFilters();if(1===t.length)return SI(t[0]);if(mU(e))return e;let r=t.map(e=>SI(e)),n=[];return(r.forEach(t=>{t instanceof mL?n.push(t):t instanceof mB&&(t.op===e.op?n.push(...t.filters):n.push(t))}),1===n.length)?n[0]:mB.create(n,e.op)}class Sk{constructor(){this.collectionParentIndex=new SA}addToCollectionParentIndex(e,t){return this.collectionParentIndex.add(t),dI.resolve()}getCollectionParents(e,t){return dI.resolve(this.collectionParentIndex.getEntries(t))}addFieldIndex(e,t){return dI.resolve()}deleteFieldIndex(e,t){return dI.resolve()}deleteAllFieldIndexes(e){return dI.resolve()}createTargetIndexes(e,t){return dI.resolve()}getDocumentsMatchingTarget(e,t){return dI.resolve(null)}getIndexType(e,t){return dI.resolve(0)}getFieldIndexes(e,t){return dI.resolve([])}getNextCollectionGroupToUpdate(e){return dI.resolve(null)}getMinOffset(e,t){return dI.resolve(dw.min())}getMinOffsetFromCollectionGroup(e,t){return dI.resolve(dw.min())}updateCollectionGroup(e,t,r){return dI.resolve()}updateIndexEntries(e,t){return dI.resolve()}}class SA{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),n=this.index[t]||new fa(di.comparator),i=!n.has(r);return this.index[t]=n.add(r),i}has(e){let t=e.lastSegment(),r=e.popLast(),n=this.index[t];return n&&n.has(r)}getEntries(e){return(this.index[e]||new fa(di.comparator)).toArray()}}let SR="IndexedDbIndexManager",SN=new Uint8Array(0);class SD{constructor(e,t){this.databaseId=t,this.collectionParentsCache=new SA,this.targetToDnfSubTargets=new gB(e=>m5(e),(e,t)=>m7(e,t)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.collectionParentsCache.has(t)){let r=t.lastSegment(),n=t.popLast();e.addOnCommittedListener(()=>{this.collectionParentsCache.add(t)});let i={collectionId:r,parent:dJ(n)};return SO(e).put(i)}return dI.resolve()}getCollectionParents(e,t){let r=[],n=IDBKeyRange.bound([t,""],[h8(t),""],!1,!0);return SO(e).loadAll(n).next(e=>{for(let n of e){if(n.collectionId!==t)break;r.push(d0(n.parent))}return r})}addFieldIndex(e,t){let r=SM(e),n=bA(t);delete n.indexId;let i=r.add(n);if(!t.indexState)return i.next();{let r=SL(e);return i.next(e=>{r.put(bN(e,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}}deleteFieldIndex(e,t){let r=SM(e),n=SL(e),i=SP(e);return r.delete(t.indexId).next(()=>n.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){let t=SM(e),r=SP(e),n=SL(e);return t.deleteAll().next(()=>r.deleteAll()).next(()=>n.deleteAll())}createTargetIndexes(e,t){return dI.forEach(this.getSubTargets(t),t=>this.getIndexType(e,t).next(r=>{if(0===r||1===r){let r=new Sm(t).buildTargetIndex();if(null!=r)return this.addFieldIndex(e,r)}}))}getDocumentsMatchingTarget(e,t){let r=SP(e),n=!0,i=new Map;return dI.forEach(this.getSubTargets(t),t=>this.getFieldIndex(e,t).next(e=>{n&&(n=!!e),i.set(t,e)})).next(()=>{if(!n)return dI.resolve(null);{let e=gY(),n=[];return dI.forEach(i,(i,s)=>{hD(SR,`Using index ${dg(i)} to execute ${m5(t)}`);let a=gt(s,i),o=gr(s,i),l=gn(s,i),u=gi(s,i),c=this.encodeBound(i,s,l),h=this.encodeBound(i,s,u),d=this.encodeValues(i,s,o),p=this.generateIndexRanges(i.indexId,a,c,l.inclusive,h,u.inclusive,d);return dI.forEach(p,i=>r.loadFirst(i,t.limit).next(t=>{t.forEach(t=>{let r=dl.fromSegments(t.documentKey);e.has(r)||(e=e.add(r),n.push(r))})}))}).next(()=>n)}})}getSubTargets(e){let t=this.targetToDnfSubTargets.get(e);return t||(t=0===e.filters.length?[e]:Sy(mB.create(e.filters,"and")).map(t=>m4(e.path,e.collectionGroup,e.orderBy,t.getFilters(),e.limit,e.startAt,e.endAt)),this.targetToDnfSubTargets.set(e,t)),t}generateIndexRanges(e,t,r,n,i,s,a){let o=(null!=t?t.length:1)*Math.max(r.length,i.length),l=o/(null!=t?t.length:1),u=[];for(let c=0;c<o;++c){let o=t?this.encodeSingleElement(t[c/l]):SN,h=this.generateLowerBound(e,o,r[c%l],n),d=this.generateUpperBound(e,o,i[c%l],s),p=a.map(t=>this.generateLowerBound(e,o,t,!0));u.push(...this.createRange(h,d,p))}return u}generateLowerBound(e,t,r,n){let i=new Sl(e,dl.empty(),t,r);return n?i:i.successor()}generateUpperBound(e,t,r,n){let i=new Sl(e,dl.empty(),t,r);return n?i.successor():i}getFieldIndex(e,t){let r=new Sm(t),n=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,n).next(e=>{let t=null;for(let n of e)r.servedByIndex(n)&&(!t||n.fields.length>t.fields.length)&&(t=n);return t})}getIndexType(e,t){let r=2,n=this.getSubTargets(t);return dI.forEach(n,t=>this.getFieldIndex(e,t).next(e=>{e?0!==r&&e.fields.length<go(t)&&(r=1):r=0})).next(()=>gl(t)&&n.length>1&&2===r?1:r)}encodeDirectionalElements(e,t){let r=new So;for(let n of dp(e)){let e=t.data.field(n.fieldPath);if(null==e)return null;let i=r.forKind(n.kind);bX.INSTANCE.writeIndexValue(e,i)}return r.encodedBytes()}encodeSingleElement(e){let t=new So;return bX.INSTANCE.writeIndexValue(e,t.forKind(0)),t.encodedBytes()}encodeDirectionalKey(e,t){let r=new So;return bX.INSTANCE.writeIndexValue(ma(this.databaseId,t),r.forKind(df(e))),r.encodedBytes()}encodeValues(e,t,r){if(null===r)return[];let n=[];n.push(new So);let i=0;for(let s of dp(e)){let e=r[i++];for(let r of n)if(this.isInFilter(t,s.fieldPath)&&mc(e))n=this.expandIndexValues(n,s,e);else{let t=r.forKind(s.kind);bX.INSTANCE.writeIndexValue(e,t)}}return this.getEncodedBytes(n)}encodeBound(e,t,r){return this.encodeValues(e,t,r.position)}getEncodedBytes(e){let t=[];for(let r=0;r<e.length;++r)t[r]=e[r].encodedBytes();return t}expandIndexValues(e,t,r){let n=[...e],i=[];for(let e of r.arrayValue.values||[])for(let r of n){let n=new So;n.seed(r.encodedBytes()),bX.INSTANCE.writeIndexValue(e,n.forKind(t.kind)),i.push(n)}return i}isInFilter(e,t){return!!e.filters.find(e=>e instanceof mL&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op))}getFieldIndexes(e,t){let r=SM(e),n=SL(e);return(t?r.loadAll(pO,IDBKeyRange.bound(t,t)):r.loadAll()).next(e=>{let t=[];return dI.forEach(e,e=>n.get([e.indexId,this.uid]).next(r=>{t.push(bR(e,r))})).next(()=>t)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(e=>0===e.length?null:(e.sort((e,t)=>{let r=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==r?r:h2(e.collectionGroup,t.collectionGroup)}),e[0].collectionGroup))}updateCollectionGroup(e,t,r){let n=SM(e),i=SL(e);return this.getNextSequenceNumber(e).next(e=>n.loadAll(pO,IDBKeyRange.bound(t,t)).next(t=>dI.forEach(t,t=>i.put(bN(t.indexId,this.uid,e,r)))))}updateIndexEntries(e,t){let r=new Map;return dI.forEach(t,(t,n)=>{let i=r.get(t.collectionGroup);return(i?dI.resolve(i):this.getFieldIndexes(e,t.collectionGroup)).next(i=>(r.set(t.collectionGroup,i),dI.forEach(i,r=>this.getExistingIndexEntries(e,t,r).next(t=>{let i=this.computeIndexEntries(n,r);return t.isEqual(i)?dI.resolve():this.updateEntries(e,n,r,t,i)}))))})}addIndexEntry(e,t,r,n){return SP(e).put(n.dbIndexEntry(this.uid,this.encodeDirectionalKey(r,t.key),t.key))}deleteIndexEntry(e,t,r,n){return SP(e).delete(n.dbIndexEntryKey(this.uid,this.encodeDirectionalKey(r,t.key),t.key))}getExistingIndexEntries(e,t,r){let n=SP(e),i=new fa(Su);return n.iterate({index:pU,range:IDBKeyRange.only([r.indexId,this.uid,Sh(this.encodeDirectionalKey(r,t))])},(e,n)=>{i=i.add(new Sl(r.indexId,t,Sd(n.arrayValue),Sd(n.directionalValue)))}).next(()=>i)}computeIndexEntries(e,t){let r=new fa(Su),n=this.encodeDirectionalElements(t,e);if(null==n)return r;let i=dd(t);if(null!=i){let s=e.data.field(i.fieldPath);if(mc(s))for(let i of s.arrayValue.values||[])r=r.add(new Sl(t.indexId,e.key,this.encodeSingleElement(i),n))}else r=r.add(new Sl(t.indexId,e.key,SN,n));return r}updateEntries(e,t,r,n,i){hD(SR,"Updating index entries for document '%s'",t.key);let s=[];return fl(n,i,Su,n=>{s.push(this.addIndexEntry(e,t,r,n))},n=>{s.push(this.deleteIndexEntry(e,t,r,n))}),dI.waitFor(s)}getNextSequenceNumber(e){let t=1;return SL(e).iterate({index:pB,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(e,r,n)=>{n.done(),t=r.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((e,t)=>Su(e,t)).filter((e,t,r)=>!t||0!==Su(e,r[t-1]));let n=[];for(let i of(n.push(e),r)){let r=Su(i,e),s=Su(i,t);if(0===r)n[0]=e.successor();else if(r>0&&s<0)n.push(i),n.push(i.successor());else if(s>0)break}n.push(t);let i=[];for(let e=0;e<n.length;e+=2){if(this.isRangeMatchable(n[e],n[e+1]))return[];let t=n[e].dbIndexEntryKey(this.uid,SN,dl.empty()),r=n[e+1].dbIndexEntryKey(this.uid,SN,dl.empty());i.push(IDBKeyRange.bound(t,r))}return i}isRangeMatchable(e,t){return Su(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(SB)}getMinOffset(e,t){return dI.mapArray(this.getSubTargets(t),t=>this.getFieldIndex(e,t).next(e=>e||hL(44426))).next(SB)}}function SO(e){return p8(e,pC)}function SP(e){return p8(e,pF)}function SM(e){return p8(e,pN)}function SL(e){return p8(e,pM)}function SB(e){hj(0!==e.length,28825);let t=e[0].indexState.offset,r=t.largestBatchId;for(let n=1;n<e.length;n++){let i=e[n].indexState.offset;0>dC(i,t)&&(t=i),r<i.largestBatchId&&(r=i.largestBatchId)}return new dw(t.readTime,t.documentKey,r)}function Sj(e,t,r){let n=e.store(d5),i=e.store(pi),s=[],a=IDBKeyRange.only(r.batchId),o=0,l=n.iterate({range:a},(e,t,r)=>(o++,r.delete()));s.push(l.next(()=>{hj(1===o,47070,{batchId:r.batchId})}));let u=[];for(let e of r.mutations){let n=pr(t,e.key.path,r.batchId);s.push(i.delete(n)),u.push(e.key)}return dI.waitFor(s).next(()=>u)}function SF(e){let t;if(!e)return 0;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else if(e.noDocument)t=e.noDocument;else throw hL(14731);return JSON.stringify(t).length}class SV{constructor(e,t,r,n){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=n,this.documentKeysByBatchId={}}static forUser(e,t,r,n){return hj(""!==e.uid,64387),new SV(e.isAuthenticated()?e.uid:"",t,r,n)}checkEmpty(e){let t=!0,r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Sz(e).iterate({index:d7,range:r},(e,r,n)=>{t=!1,n.done()}).next(()=>t)}addMutationBatch(e,t,r,n){let i=S$(e),s=Sz(e);return s.add({}).next(a=>{hj("number"==typeof a,49019);let o=new yN(a,t,r,n),l=bf(this.serializer,this.userId,o),u=[],c=new fa((e,t)=>h2(e.canonicalString(),t.canonicalString()));for(let e of n){let t=pr(this.userId,e.key.path,a);c=c.add(e.key.path.popLast()),u.push(s.put(l)),u.push(i.put(t,pn))}return c.forEach(t=>{u.push(this.indexManager.addToCollectionParentIndex(e,t))}),e.addOnCommittedListener(()=>{this.documentKeysByBatchId[a]=o.keys()}),dI.waitFor(u).next(()=>o)})}lookupMutationBatch(e,t){return Sz(e).get(t).next(e=>e?(hj(e.userId===this.userId,48,"Unexpected user for mutation batch",{userId:e.userId,batchId:t}),bm(this.serializer,e)):null)}lookupMutationKeys(e,t){return this.documentKeysByBatchId[t]?dI.resolve(this.documentKeysByBatchId[t]):this.lookupMutationBatch(e,t).next(e=>{if(!e)return null;{let r=e.keys();return this.documentKeysByBatchId[t]=r,r}})}getNextMutationBatchAfterBatchId(e,t){let r=t+1,n=IDBKeyRange.lowerBound([this.userId,r]),i=null;return Sz(e).iterate({index:d7,range:n},(e,t,n)=>{t.userId===this.userId&&(hj(t.batchId>=r,47524,{nextBatchId:r}),i=bm(this.serializer,t)),n.done()}).next(()=>i)}getHighestUnacknowledgedBatchId(e){let t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),r=fD;return Sz(e).iterate({index:d7,range:t,reverse:!0},(e,t,n)=>{r=t.batchId,n.done()}).next(()=>r)}getAllMutationBatches(e){let t=IDBKeyRange.bound([this.userId,fD],[this.userId,Number.POSITIVE_INFINITY]);return Sz(e).loadAll(d7,t).next(e=>e.map(e=>bm(this.serializer,e)))}getAllMutationBatchesAffectingDocumentKey(e,t){let r=pt(this.userId,t.path),n=IDBKeyRange.lowerBound(r),i=[];return S$(e).iterate({range:n},(r,n,s)=>{let[a,o,l]=r,u=d0(o);return a===this.userId&&t.path.isEqual(u)?Sz(e).get(l).next(e=>{if(!e)throw hL(61480,{indexKey:r,batchId:l});hj(e.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:e.userId,batchId:l}),i.push(bm(this.serializer,e))}):void s.done()}).next(()=>i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new fa(h2),n=[];return t.forEach(t=>{let i=pt(this.userId,t.path),s=IDBKeyRange.lowerBound(i),a=S$(e).iterate({range:s},(e,n,i)=>{let[s,a,o]=e,l=d0(a);if(s!==this.userId||!t.path.isEqual(l))return void i.done();r=r.add(o)});n.push(a)}),dI.waitFor(n).next(()=>this.lookupMutationBatches(e,r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,n=r.length+1,i=pt(this.userId,r),s=IDBKeyRange.lowerBound(i),a=new fa(h2);return S$(e).iterate({range:s},(e,t,i)=>{let[s,o,l]=e,u=d0(o);if(s!==this.userId||!r.isPrefixOf(u))return void i.done();u.length===n&&(a=a.add(l))}).next(()=>this.lookupMutationBatches(e,a))}lookupMutationBatches(e,t){let r=[],n=[];return t.forEach(t=>{n.push(Sz(e).get(t).next(e=>{if(null===e)throw hL(35274,{batchId:t});hj(e.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:e.userId,batchId:t}),r.push(bm(this.serializer,e))}))}),dI.waitFor(n).next(()=>r)}removeMutationBatch(e,t){return Sj(e.simpleDbTransaction,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.removeCachedMutationKeys(t.batchId)}),dI.forEach(r,t=>this.referenceDelegate.markPotentiallyOrphaned(e,t))))}removeCachedMutationKeys(e){delete this.documentKeysByBatchId[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return dI.resolve();let r=IDBKeyRange.lowerBound(pe(this.userId)),n=[];return S$(e).iterate({range:r},(e,t,r)=>{if(e[0]!==this.userId)return void r.done();{let t=d0(e[1]);n.push(t)}}).next(()=>{hj(0===n.length,56720,{danglingKeys:n.map(e=>e.canonicalString())})})})}containsKey(e,t){return SU(e,this.userId,t)}getMutationQueueMetadata(e){return SG(e).get(this.userId).next(e=>e||{userId:this.userId,lastAcknowledgedBatchId:fD,lastStreamToken:""})}}function SU(e,t,r){let n=pt(t,r.path),i=n[1],s=IDBKeyRange.lowerBound(n),a=!1;return S$(e).iterate({range:s,keysOnly:!0},(e,r,n)=>{let[s,o,l]=e;s===t&&o===i&&(a=!0),n.done()}).next(()=>a)}function Sq(e,t){let r=!1;return SG(e).iterateSerial(n=>SU(e,n,t).next(e=>(e&&(r=!0),dI.resolve(!e)))).next(()=>r)}function Sz(e){return p8(e,d5)}function S$(e){return p8(e,pi)}function SG(e){return p8(e,d6)}let SH=2;class SK{constructor(e){this.lastId=e}next(){return this.lastId+=SH,this.lastId}static forTargetCache(){return new SK(2-SH)}static forSyncEngine(){return new SK(1-SH)}}class SW{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.retrieveMetadata(e).next(t=>{let r=new SK(t.highestTargetId);return t.highestTargetId=r.next(),this.saveMetadata(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.retrieveMetadata(e).next(e=>dt.fromTimestamp(new de(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.retrieveMetadata(e).next(e=>e.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.retrieveMetadata(e).next(n=>(n.highestListenSequenceNumber=t,r&&(n.lastRemoteSnapshotVersion=r.toTimestamp()),t>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=t),this.saveMetadata(e,n)))}addTargetData(e,t){return this.saveTargetData(e,t).next(()=>this.retrieveMetadata(e).next(r=>(r.targetCount+=1,this.updateMetadataFromTargetData(t,r),this.saveMetadata(e,r))))}updateTargetData(e,t){return this.saveTargetData(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>SQ(e).delete(t.targetId)).next(()=>this.retrieveMetadata(e)).next(t=>(hj(t.targetCount>0,8065),t.targetCount-=1,this.saveMetadata(e,t)))}removeTargets(e,t,r){let n=0,i=[];return SQ(e).iterate((s,a)=>{let o=bg(a);o.sequenceNumber<=t&&null===r.get(o.targetId)&&(n++,i.push(this.removeTargetData(e,o)))}).next(()=>dI.waitFor(i)).next(()=>n)}forEachTarget(e,t){return SQ(e).iterate((e,r)=>{t(bg(r))})}retrieveMetadata(e){return SY(e).get(pT).next(e=>(hj(null!==e,2888),e))}saveMetadata(e,t){return SY(e).put(pT,t)}saveTargetData(e,t){return SQ(e).put(by(this.serializer,t))}updateMetadataFromTargetData(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.retrieveMetadata(e).next(e=>e.targetCount)}getTargetData(e,t){let r=m5(t),n=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),i=null;return SQ(e).iterate({range:n,index:pm},(e,r,n)=>{let s=bg(r);m7(t,s.target)&&(i=s,n.done())}).next(()=>i)}addMatchingKeys(e,t,r){let n=[],i=SJ(e);return t.forEach(t=>{let s=dJ(t.path);n.push(i.put({targetId:r,path:s})),n.push(this.referenceDelegate.addReference(e,r,t))}),dI.waitFor(n)}removeMatchingKeys(e,t,r){let n=SJ(e);return dI.forEach(t,t=>{let i=dJ(t.path);return dI.waitFor([n.delete([r,i]),this.referenceDelegate.removeReference(e,r,t)])})}removeMatchingKeysForTargetId(e,t){let r=SJ(e),n=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(n)}getMatchingKeysForTargetId(e,t){let r=IDBKeyRange.bound([t],[t+1],!1,!0),n=SJ(e),i=gY();return n.iterate({range:r,keysOnly:!0},(e,t,r)=>{let n=new dl(d0(e[1]));i=i.add(n)}).next(()=>i)}containsKey(e,t){let r=dJ(t.path),n=IDBKeyRange.bound([r],[h8(r)],!1,!0),i=0;return SJ(e).iterate({index:pb,keysOnly:!0,range:n},([e,t],r,n)=>{0!==e&&(i++,n.done())}).next(()=>i>0)}getTargetDataForTarget(e,t){return SQ(e).get(t).next(e=>e?bg(e):null)}}function SQ(e){return p8(e,pp)}function SY(e){return p8(e,pw)}function SJ(e){return p8(e,py)}let SX={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},SZ=-1,S0=0x2800000;class S1{static withCacheSize(e){return new S1(e,S1.DEFAULT_COLLECTION_PERCENTILE,S1.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}S1.DEFAULT_COLLECTION_PERCENTILE=10,S1.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,S1.DEFAULT=new S1(S0,S1.DEFAULT_COLLECTION_PERCENTILE,S1.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),S1.DISABLED=new S1(SZ,0,0);let S2="LruGarbageCollector",S3=1048576,S6=6e4,S4=3e5;function S5([e,t],[r,n]){let i=h2(e,r);return 0===i?h2(t,n):i}class S8{constructor(e){this.maxElements=e,this.buffer=new fa(S5),this.previousIndex=0}nextIndex(){return++this.previousIndex}addElement(e){let t=[e,this.nextIndex()];if(this.buffer.size<this.maxElements)this.buffer=this.buffer.add(t);else{let e=this.buffer.last();0>S5(t,e)&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class S7{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.gcTask=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==SZ&&this.scheduleGC(S6)}stop(){this.gcTask&&(this.gcTask.cancel(),this.gcTask=null)}get started(){return null!==this.gcTask}scheduleGC(e){hD(S2,`Garbage collection scheduled in ${e}ms`),this.gcTask=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.gcTask=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){dM(e)?hD(S2,"Ignoring IndexedDB error during garbage collection: ",e):await d_(e)}await this.scheduleGC(S4)})}}class S9{constructor(e,t){this.delegate=e,this.params=t}calculateTargetCount(e,t){return this.delegate.getSequenceNumberCount(e).next(e=>Math.floor(t/100*e))}nthSequenceNumber(e,t){if(0===t)return dI.resolve(dH.INVALID);let r=new S8(t);return this.delegate.forEachTarget(e,e=>r.addElement(e.sequenceNumber)).next(()=>this.delegate.forEachOrphanedDocumentSequenceNumber(e,e=>r.addElement(e))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.delegate.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.delegate.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===SZ?(hD("LruGarbageCollector","Garbage collection skipped; disabled"),dI.resolve(SX)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(hD("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),SX):this.runGarbageCollection(e,t))}getCacheSize(e){return this.delegate.getCacheSize(e)}runGarbageCollection(e,t){let r,n,i,s,o,l,u,c=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(t=>(t>this.params.maximumSequenceNumbersToCollect?(hD("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${t}`),n=this.params.maximumSequenceNumbersToCollect):n=t,s=Date.now(),this.nthSequenceNumber(e,n))).next(n=>(r=n,o=Date.now(),this.removeTargets(e,r,t))).next(t=>(i=t,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(e=>(u=Date.now(),hN()<=a.DEBUG&&hD("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-c}ms
	Determined least recently used ${n} in ${o-s}ms
	Removed ${i} targets in ${l-o}ms
	Removed ${e} documents in ${u-l}ms
Total Duration: ${u-c}ms`),dI.resolve({didRun:!0,sequenceNumbersCollected:n,targetsRemoved:i,documentsRemoved:e})))}}function Te(e,t){return new S9(e,t)}class Tt{constructor(e,t){this.db=e,this.garbageCollector=Te(this,t)}getSequenceNumberCount(e){let t=this.orphanedDocumentCount(e);return this.db.getTargetCache().getTargetCount(e).next(e=>t.next(t=>e+t))}orphanedDocumentCount(e){let t=0;return this.forEachOrphanedDocumentSequenceNumber(e,e=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}forEachOrphanedDocumentSequenceNumber(e,t){return this.forEachOrphanedDocument(e,(e,r)=>t(r))}addReference(e,t,r){return Ti(e,r)}removeReference(e,t,r){return Ti(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Ti(e,t)}isPinned(e,t){return Sq(e,t)}removeOrphanedDocuments(e,t){let r=this.db.getRemoteDocumentCache().newChangeBuffer(),n=[],i=0;return this.forEachOrphanedDocument(e,(s,a)=>{if(a<=t){let t=this.isPinned(e,s).next(t=>{if(!t)return i++,r.getEntry(e,s).next(()=>(r.removeEntry(s,dt.min()),SJ(e).delete(Tr(s))))});n.push(t)}}).next(()=>dI.waitFor(n)).next(()=>r.apply(e)).next(()=>i)}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Ti(e,t)}forEachOrphanedDocument(e,t){let r,n=SJ(e),i=dH.INVALID;return n.iterate({index:pb},([e,n],{path:s,sequenceNumber:a})=>{0===e?(i!==dH.INVALID&&t(new dl(d0(r)),i),i=a,r=s):i=dH.INVALID}).next(()=>{i!==dH.INVALID&&t(new dl(d0(r)),i)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Tr(e){return[0,dJ(e.path)]}function Tn(e,t){return{targetId:0,path:dJ(e.path),sequenceNumber:t}}function Ti(e,t){return SJ(e).put(Tn(t,e.currentSequenceNumber))}class Ts{constructor(){this.changes=new gB(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,mx.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return void 0!==r?dI.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Ta{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Tc(e).put(r)}removeEntry(e,t,r){return Tc(e).delete(Td(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.setMetadata(e,r)))}getEntry(e,t){let r=mx.newInvalidDocument(t);return Tc(e).iterate({index:po,range:IDBKeyRange.only(Th(t))},(e,n)=>{r=this.maybeDecodeDocument(t,n)}).next(()=>r)}getSizedEntry(e,t){let r={size:0,document:mx.newInvalidDocument(t)};return Tc(e).iterate({index:po,range:IDBKeyRange.only(Th(t))},(e,n)=>{r={document:this.maybeDecodeDocument(t,n),size:SF(n)}}).next(()=>r)}getEntries(e,t){let r=gF();return this.forEachDbEntry(e,t,(e,t)=>{let n=this.maybeDecodeDocument(e,t);r=r.insert(e,n)}).next(()=>r)}getSizedEntries(e,t){let r=gF(),n=new fr(dl.comparator);return this.forEachDbEntry(e,t,(e,t)=>{let i=this.maybeDecodeDocument(e,t);r=r.insert(e,i),n=n.insert(e,SF(t))}).next(()=>({documents:r,sizeMap:n}))}forEachDbEntry(e,t,r){if(t.isEmpty())return dI.resolve();let n=new fa(Tf);t.forEach(e=>n=n.add(e));let i=IDBKeyRange.bound(Th(n.first()),Th(n.last())),s=n.getIterator(),a=s.getNext();return Tc(e).iterate({index:po,range:i},(e,t,n)=>{let i=dl.fromSegments([...t.prefixPath,t.collectionGroup,t.documentId]);for(;a&&0>Tf(a,i);)r(a,null),a=s.getNext();a&&a.isEqual(i)&&(r(a,t),a=s.hasNext()?s.getNext():null),a?n.skip(Th(a)):n.done()}).next(()=>{for(;a;)r(a,null),a=s.hasNext()?s.getNext():null})}getDocumentsMatchingQuery(e,t,r,n,i){let s=t.path,a=[s.popLast().toArray(),s.lastSegment(),bc(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],o=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Tc(e).loadAll(IDBKeyRange.bound(a,o,!0)).next(e=>{null==i||i.incrementDocumentReadCount(e.length);let r=gF();for(let i of e){let e=this.maybeDecodeDocument(dl.fromSegments(i.prefixPath.concat(i.collectionGroup,i.documentId)),i);e.isFoundDocument()&&(gA(t,e)||n.has(e.key))&&(r=r.insert(e.key,e))}return r})}getAllFromCollectionGroup(e,t,r,n){let i=gF(),s=Tp(t,r),a=Tp(t,dw.max());return Tc(e).iterate({index:pu,range:IDBKeyRange.bound(s,a,!0)},(e,t,r)=>{let s=this.maybeDecodeDocument(dl.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);(i=i.insert(s.key,s)).size===n&&r.done()}).next(()=>i)}newChangeBuffer(e){return new Tl(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(e=>e.byteSize)}getMetadata(e){return Tu(e).get(pd).next(e=>(hj(!!e,20021),e))}setMetadata(e,t){return Tu(e).put(pd,t)}maybeDecodeDocument(e,t){if(t){let e=bl(this.serializer,t);if(!(e.isNoDocument()&&e.version.isEqual(dt.min())))return e}return mx.newInvalidDocument(e)}}function To(e){return new Ta(e)}class Tl extends Ts{constructor(e,t){super(),this.documentCache=e,this.trackRemovals=t,this.documentStates=new gB(e=>e.toString(),(e,t)=>e.isEqual(t))}applyChanges(e){let t=[],r=0,n=new fa((e,t)=>h2(e.canonicalString(),t.canonicalString()));return this.changes.forEach((i,s)=>{let a=this.documentStates.get(i);if(t.push(this.documentCache.removeEntry(e,i,a.readTime)),s.isValidDocument()){let o=bu(this.documentCache.serializer,s);n=n.add(i.path.popLast());let l=SF(o);r+=l-a.size,t.push(this.documentCache.addEntry(e,i,o))}else if(r-=a.size,this.trackRemovals){let r=bu(this.documentCache.serializer,s.convertToNoDocument(dt.min()));t.push(this.documentCache.addEntry(e,i,r))}}),n.forEach(r=>{t.push(this.documentCache.indexManager.addToCollectionParentIndex(e,r))}),t.push(this.documentCache.updateMetadata(e,r)),dI.waitFor(t)}getFromCache(e,t){return this.documentCache.getSizedEntry(e,t).next(e=>(this.documentStates.set(t,{size:e.size,readTime:e.document.readTime}),e.document))}getAllFromCache(e,t){return this.documentCache.getSizedEntries(e,t).next(({documents:e,sizeMap:t})=>(t.forEach((t,r)=>{this.documentStates.set(t,{size:r,readTime:e.get(t).readTime})}),e))}}function Tu(e){return p8(e,ph)}function Tc(e){return p8(e,ps)}function Th(e){let t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function Td(e,t){let r=e.path.toArray();return[r.slice(0,r.length-2),r[r.length-2],bc(t),r[r.length-1]]}function Tp(e,t){let r=t.documentKey.path.toArray();return[e,bc(t.readTime),r.slice(0,r.length-2),r.length>0?r[r.length-1]:""]}function Tf(e,t){let r=e.path.toArray(),n=t.path.toArray(),i=0;for(let e=0;e<r.length-2&&e<n.length-2;++e)if(i=h2(r[e],n[e]))return i;return(i=h2(r.length,n.length))||(i=h2(r[r.length-2],n[n.length-2]))?i:h2(r[r.length-1],n[n.length-1])}let Tm=18;class Tg{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Ty{constructor(e,t,r,n){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=n}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(n=>(r=n,this.remoteDocumentCache.getEntry(e,t))).next(e=>(null!==r&&ym(r.mutation,e,fc.empty(),de.now()),e))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.getLocalViewOfDocuments(e,t,gY()).next(()=>t))}getLocalViewOfDocuments(e,t,r=gY()){let n=g$();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,r).next(e=>{let t=gU();return e.forEach((e,r)=>{t=t.insert(e,r.overlayedDocument)}),t}))}getOverlayedDocuments(e,t){let r=g$();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,gY()))}populateOverlays(e,t,r){let n=[];return r.forEach(e=>{t.has(e)||n.push(e)}),this.documentOverlayCache.getOverlays(e,n).next(e=>{e.forEach((e,r)=>{t.set(e,r)})})}computeViews(e,t,r,n){let i=gF(),s=gH(),a=gq();return t.forEach((e,t)=>{let a=r.get(t.key);n.has(t.key)&&(void 0===a||a.mutation instanceof yT)?i=i.insert(t.key,t):void 0!==a?(s.set(t.key,a.mutation.getFieldMask()),ym(a.mutation,t,a.mutation.getFieldMask(),de.now())):s.set(t.key,fc.empty())}),this.recalculateAndSaveOverlays(e,i).next(e=>(e.forEach((e,t)=>s.set(e,t)),t.forEach((e,t)=>{var r;return a.set(e,new Tg(t,null!=(r=s.get(e))?r:null))}),a))}recalculateAndSaveOverlays(e,t){let r=gH(),n=new fr((e,t)=>e-t),i=gY();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(e=>{for(let i of e)i.keys().forEach(e=>{let s=t.get(e);if(null===s)return;let a=r.get(e)||fc.empty();a=i.applyToLocalView(s,a),r.set(e,a);let o=(n.get(i.batchId)||gY()).add(e);n=n.insert(i.batchId,o)})}).next(()=>{let s=[],a=n.getReverseIterator();for(;a.hasNext();){let n=a.getNext(),o=n.key,l=n.value,u=gG();l.forEach(e=>{if(!i.has(e)){let n=yp(t.get(e),r.get(e));null!==n&&u.set(e,n),i=i.add(e)}}),s.push(this.documentOverlayCache.saveOverlays(e,o,u))}return dI.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.recalculateAndSaveOverlays(e,t))}getDocumentsMatchingQuery(e,t,r,n){return gm(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):gg(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,n):this.getDocumentsMatchingCollectionQuery(e,t,r,n)}getNextDocuments(e,t,r,n){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,n).next(i=>{let s=n-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,n-i.size):dI.resolve(g$()),a=du,o=i;return s.next(t=>dI.forEach(t,(t,r)=>(a<r.largestBatchId&&(a=r.largestBatchId),i.get(t))?dI.resolve():this.remoteDocumentCache.getEntry(e,t).next(e=>{o=o.insert(t,e)})).next(()=>this.populateOverlays(e,t,i)).next(()=>this.computeViews(e,o,t,gY())).next(e=>({batchId:a,changes:gz(e)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new dl(t)).next(e=>{let t=gU();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})}getDocumentsMatchingCollectionGroupQuery(e,t,r,n){let i=t.collectionGroup,s=gU();return this.indexManager.getCollectionParents(e,i).next(a=>dI.forEach(a,a=>{let o=gd(t,a.child(i));return this.getDocumentsMatchingCollectionQuery(e,o,r,n).next(e=>{e.forEach((e,t)=>{s=s.insert(e,t)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,n){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,i,n))).next(e=>{i.forEach((t,r)=>{let n=r.getKey();null===e.get(n)&&(e=e.insert(n,mx.newInvalidDocument(n)))});let r=gU();return e.forEach((e,n)=>{let s=i.get(e);void 0!==s&&ym(s.mutation,n,fc.empty(),de.now()),gA(t,n)&&(r=r.insert(e,n))}),r})}}class Tv{constructor(e){this.serializer=e,this.bundles=new Map,this.namedQueries=new Map}getBundleMetadata(e,t){return dI.resolve(this.bundles.get(t))}saveBundleMetadata(e,t){return this.bundles.set(t.id,bE(t)),dI.resolve()}getNamedQuery(e,t){return dI.resolve(this.namedQueries.get(t))}saveNamedQuery(e,t){return this.namedQueries.set(t.name,bx(t)),dI.resolve()}}class Tb{constructor(){this.overlays=new fr(dl.comparator),this.overlayByBatchId=new Map}getOverlay(e,t){return dI.resolve(this.overlays.get(t))}getOverlays(e,t){let r=g$();return dI.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&r.set(t,e)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((r,n)=>{this.saveOverlay(e,t,n)}),dI.resolve()}removeOverlaysForBatchId(e,t,r){let n=this.overlayByBatchId.get(r);return void 0!==n&&(n.forEach(e=>this.overlays=this.overlays.remove(e)),this.overlayByBatchId.delete(r)),dI.resolve()}getOverlaysForCollection(e,t,r){let n=g$(),i=t.length+1,s=new dl(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let e=a.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&e.largestBatchId>r&&n.set(e.getKey(),e)}return dI.resolve(n)}getOverlaysForCollectionGroup(e,t,r,n){let i=new fr((e,t)=>e-t),s=this.overlays.getIterator();for(;s.hasNext();){let e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>r){let t=i.get(e.largestBatchId);null===t&&(t=g$(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}let a=g$(),o=i.getIterator();for(;o.hasNext()&&(o.getNext().value.forEach((e,t)=>a.set(e,t)),!(a.size()>=n)););return dI.resolve(a)}saveOverlay(e,t,r){let n=this.overlays.get(r.key);if(null!==n){let e=this.overlayByBatchId.get(n.largestBatchId).delete(r.key);this.overlayByBatchId.set(n.largestBatchId,e)}this.overlays=this.overlays.insert(r.key,new yO(t,r));let i=this.overlayByBatchId.get(t);void 0===i&&(i=gY(),this.overlayByBatchId.set(t,i)),this.overlayByBatchId.set(t,i.add(r.key))}}class TS{constructor(){this.sessionToken=fp.EMPTY_BYTE_STRING}getSessionToken(e){return dI.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,dI.resolve()}}class TT{constructor(){this.refsByKey=new fa(Tw.compareByKey),this.refsByTarget=new fa(Tw.compareByTargetId)}isEmpty(){return this.refsByKey.isEmpty()}addReference(e,t){let r=new Tw(e,t);this.refsByKey=this.refsByKey.add(r),this.refsByTarget=this.refsByTarget.add(r)}addReferences(e,t){e.forEach(e=>this.addReference(e,t))}removeReference(e,t){this.removeRef(new Tw(e,t))}removeReferences(e,t){e.forEach(e=>this.removeReference(e,t))}removeReferencesForId(e){let t=new dl(new di([])),r=new Tw(t,e),n=new Tw(t,e+1),i=[];return this.refsByTarget.forEachInRange([r,n],e=>{this.removeRef(e),i.push(e.key)}),i}removeAllReferences(){this.refsByKey.forEach(e=>this.removeRef(e))}removeRef(e){this.refsByKey=this.refsByKey.delete(e),this.refsByTarget=this.refsByTarget.delete(e)}referencesForId(e){let t=new dl(new di([])),r=new Tw(t,e),n=new Tw(t,e+1),i=gY();return this.refsByTarget.forEachInRange([r,n],e=>{i=i.add(e.key)}),i}containsKey(e){let t=new Tw(e,0),r=this.refsByKey.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Tw{constructor(e,t){this.key=e,this.targetOrBatchId=t}static compareByKey(e,t){return dl.comparator(e.key,t.key)||h2(e.targetOrBatchId,t.targetOrBatchId)}static compareByTargetId(e,t){return h2(e.targetOrBatchId,t.targetOrBatchId)||dl.comparator(e.key,t.key)}}class TC{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.nextBatchId=1,this.batchesByDocumentKey=new fa(Tw.compareByKey)}checkEmpty(e){return dI.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,n){let i=this.nextBatchId;this.nextBatchId++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new yN(i,t,r,n);for(let t of(this.mutationQueue.push(s),n))this.batchesByDocumentKey=this.batchesByDocumentKey.add(new Tw(t.key,i)),this.indexManager.addToCollectionParentIndex(e,t.key.path.popLast());return dI.resolve(s)}lookupMutationBatch(e,t){return dI.resolve(this.findMutationBatch(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,n=this.indexOfBatchId(r),i=n<0?0:n;return dI.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return dI.resolve(0===this.mutationQueue.length?fD:this.nextBatchId-1)}getAllMutationBatches(e){return dI.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new Tw(t,0),n=new Tw(t,Number.POSITIVE_INFINITY),i=[];return this.batchesByDocumentKey.forEachInRange([r,n],e=>{let t=this.findMutationBatch(e.targetOrBatchId);i.push(t)}),dI.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new fa(h2);return t.forEach(e=>{let t=new Tw(e,0),n=new Tw(e,Number.POSITIVE_INFINITY);this.batchesByDocumentKey.forEachInRange([t,n],e=>{r=r.add(e.targetOrBatchId)})}),dI.resolve(this.findMutationBatches(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,n=r.length+1,i=r;dl.isDocumentKey(i)||(i=i.child(""));let s=new Tw(new dl(i),0),a=new fa(h2);return this.batchesByDocumentKey.forEachWhile(e=>{let t=e.key.path;return!!r.isPrefixOf(t)&&(t.length===n&&(a=a.add(e.targetOrBatchId)),!0)},s),dI.resolve(this.findMutationBatches(a))}findMutationBatches(e){let t=[];return e.forEach(e=>{let r=this.findMutationBatch(e);null!==r&&t.push(r)}),t}removeMutationBatch(e,t){hj(0===this.indexOfExistingBatchId(t.batchId,"removed"),55003),this.mutationQueue.shift();let r=this.batchesByDocumentKey;return dI.forEach(t.mutations,n=>{let i=new Tw(n.key,t.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,n.key)}).next(()=>{this.batchesByDocumentKey=r})}removeCachedMutationKeys(e){}containsKey(e,t){let r=new Tw(t,0),n=this.batchesByDocumentKey.firstAfterOrEqual(r);return dI.resolve(t.isEqual(n&&n.key))}performConsistencyCheck(e){return this.mutationQueue.length,dI.resolve()}indexOfExistingBatchId(e,t){return this.indexOfBatchId(e)}indexOfBatchId(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}findMutationBatch(e){let t=this.indexOfBatchId(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}let Tx="-9223372036854775808";function TE(){return new fr(dl.comparator)}class T_{constructor(e){this.sizer=e,this.docs=TE(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,n=this.docs.get(r),i=n?n.size:0,s=this.sizer(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return dI.resolve(r?r.document.mutableCopy():mx.newInvalidDocument(t))}getEntries(e,t){let r=gF();return t.forEach(e=>{let t=this.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():mx.newInvalidDocument(e))}),dI.resolve(r)}getDocumentsMatchingQuery(e,t,r,n){let i=gF(),s=t.path,a=new dl(s.child("__id"+Tx+"__")),o=this.docs.getIteratorFrom(a);for(;o.hasNext();){let{key:e,value:{document:a}}=o.getNext();if(!s.isPrefixOf(e.path))break;!(e.path.length>s.length+1||0>=dC(dT(a),r))&&(n.has(a.key)||gA(t,a))&&(i=i.insert(a.key,a.mutableCopy()))}return dI.resolve(i)}getAllFromCollectionGroup(e,t,r,n){hL(9500)}forEachDocumentKey(e,t){return dI.forEach(this.docs,e=>t(e))}newChangeBuffer(e){return new Tk(this)}getSize(e){return dI.resolve(this.size)}}function TI(e){return new T_(e)}class Tk extends Ts{constructor(e){super(),this.documentCache=e}applyChanges(e){let t=[];return this.changes.forEach((r,n)=>{n.isValidDocument()?t.push(this.documentCache.addEntry(e,n)):this.documentCache.removeEntry(r)}),dI.waitFor(t)}getFromCache(e,t){return this.documentCache.getEntry(e,t)}getAllFromCache(e,t){return this.documentCache.getEntries(e,t)}}class TA{constructor(e){this.persistence=e,this.targets=new gB(e=>m5(e),m7),this.lastRemoteSnapshotVersion=dt.min(),this.highestTargetId=0,this.highestSequenceNumber=0,this.references=new TT,this.targetCount=0,this.targetIdGenerator=SK.forTargetCache()}forEachTarget(e,t){return this.targets.forEach((e,r)=>t(r)),dI.resolve()}getLastRemoteSnapshotVersion(e){return dI.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return dI.resolve(this.highestSequenceNumber)}allocateTargetId(e){return this.highestTargetId=this.targetIdGenerator.next(),dI.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.highestSequenceNumber&&(this.highestSequenceNumber=t),dI.resolve()}saveTargetData(e){this.targets.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.targetIdGenerator=new SK(t),this.highestTargetId=t),e.sequenceNumber>this.highestSequenceNumber&&(this.highestSequenceNumber=e.sequenceNumber)}addTargetData(e,t){return this.saveTargetData(t),this.targetCount+=1,dI.resolve()}updateTargetData(e,t){return this.saveTargetData(t),dI.resolve()}removeTargetData(e,t){return this.targets.delete(t.target),this.references.removeReferencesForId(t.targetId),this.targetCount-=1,dI.resolve()}removeTargets(e,t,r){let n=0,i=[];return this.targets.forEach((s,a)=>{a.sequenceNumber<=t&&null===r.get(a.targetId)&&(this.targets.delete(s),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),n++)}),dI.waitFor(i).next(()=>n)}getTargetCount(e){return dI.resolve(this.targetCount)}getTargetData(e,t){let r=this.targets.get(t)||null;return dI.resolve(r)}addMatchingKeys(e,t,r){return this.references.addReferences(t,r),dI.resolve()}removeMatchingKeys(e,t,r){this.references.removeReferences(t,r);let n=this.persistence.referenceDelegate,i=[];return n&&t.forEach(t=>{i.push(n.markPotentiallyOrphaned(e,t))}),dI.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.references.removeReferencesForId(t),dI.resolve()}getMatchingKeysForTargetId(e,t){let r=this.references.referencesForId(t);return dI.resolve(r)}containsKey(e,t){return dI.resolve(this.references.containsKey(t))}}let TR="MemoryPersistence";class TN{constructor(e,t){this.mutationQueues={},this.overlays={},this.listenSequence=new dH(0),this._started=!1,this._started=!0,this.globalsCache=new TS,this.referenceDelegate=e(this),this.targetCache=new TA(this);let r=e=>this.referenceDelegate.documentSize(e);this.indexManager=new Sk,this.remoteDocumentCache=TI(r),this.serializer=new bo(t),this.bundleCache=new Tv(this.serializer)}start(){return Promise.resolve()}shutdown(){return this._started=!1,Promise.resolve()}get started(){return this._started}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Tb,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.mutationQueues[e.toKey()];return r||(r=new TC(t,this.referenceDelegate),this.mutationQueues[e.toKey()]=r),r}getGlobalsCache(){return this.globalsCache}getTargetCache(){return this.targetCache}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.bundleCache}runTransaction(e,t,r){hD(TR,"Starting transaction:",e);let n=new TD(this.listenSequence.next());return this.referenceDelegate.onTransactionStarted(),r(n).next(e=>this.referenceDelegate.onTransactionCommitted(n).next(()=>e)).toPromise().then(e=>(n.raiseOnCommittedEvent(),e))}mutationQueuesContainKey(e,t){return dI.or(Object.values(this.mutationQueues).map(r=>()=>r.containsKey(e,t)))}}class TD extends dE{constructor(e){super(),this.currentSequenceNumber=e}}class TO{constructor(e){this.persistence=e,this.localViewReferences=new TT,this._orphanedDocuments=null}static factory(e){return new TO(e)}get orphanedDocuments(){if(this._orphanedDocuments)return this._orphanedDocuments;throw hL(60996)}addReference(e,t,r){return this.localViewReferences.addReference(r,t),this.orphanedDocuments.delete(r.toString()),dI.resolve()}removeReference(e,t,r){return this.localViewReferences.removeReference(r,t),this.orphanedDocuments.add(r.toString()),dI.resolve()}markPotentiallyOrphaned(e,t){return this.orphanedDocuments.add(t.toString()),dI.resolve()}removeTarget(e,t){this.localViewReferences.removeReferencesForId(t.targetId).forEach(e=>this.orphanedDocuments.add(e.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(e=>{e.forEach(e=>this.orphanedDocuments.add(e.toString()))}).next(()=>r.removeTargetData(e,t))}onTransactionStarted(){this._orphanedDocuments=new Set}onTransactionCommitted(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return dI.forEach(this.orphanedDocuments,r=>{let n=dl.fromPath(r);return this.isReferenced(e,n).next(e=>{e||t.removeEntry(n,dt.min())})}).next(()=>(this._orphanedDocuments=null,t.apply(e)))}updateLimboDocument(e,t){return this.isReferenced(e,t).next(e=>{e?this.orphanedDocuments.delete(t.toString()):this.orphanedDocuments.add(t.toString())})}documentSize(e){return 0}isReferenced(e,t){return dI.or([()=>dI.resolve(this.localViewReferences.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.mutationQueuesContainKey(e,t)])}}class TP{constructor(e,t){this.persistence=e,this.orphanedSequenceNumbers=new gB(e=>dJ(e.path),(e,t)=>e.isEqual(t)),this.garbageCollector=Te(this,t)}static factory(e,t){return new TP(e,t)}onTransactionStarted(){}onTransactionCommitted(e){return dI.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}getSequenceNumberCount(e){let t=this.orphanedDocumentCount(e);return this.persistence.getTargetCache().getTargetCount(e).next(e=>t.next(t=>e+t))}orphanedDocumentCount(e){let t=0;return this.forEachOrphanedDocumentSequenceNumber(e,e=>{t++}).next(()=>t)}forEachOrphanedDocumentSequenceNumber(e,t){return dI.forEach(this.orphanedSequenceNumbers,(r,n)=>this.isPinned(e,r,n).next(e=>e?dI.resolve():t(n)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0,n=this.persistence.getRemoteDocumentCache(),i=n.newChangeBuffer();return n.forEachDocumentKey(e,n=>this.isPinned(e,n,t).next(e=>{e||(r++,i.removeEntry(n,dt.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.orphanedSequenceNumbers.set(t,e.currentSequenceNumber),dI.resolve()}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.orphanedSequenceNumbers.set(r,e.currentSequenceNumber),dI.resolve()}removeReference(e,t,r){return this.orphanedSequenceNumbers.set(r,e.currentSequenceNumber),dI.resolve()}updateLimboDocument(e,t){return this.orphanedSequenceNumbers.set(t,e.currentSequenceNumber),dI.resolve()}documentSize(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=mn(e.data.value)),t}isPinned(e,t,r){return dI.or([()=>this.persistence.mutationQueuesContainKey(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let e=this.orphanedSequenceNumbers.get(t);return dI.resolve(void 0!==e&&e>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class TM{constructor(e){this.serializer=e}createOrUpgrade(e,t,r,n){let i=new dR("createOrUpgrade",t);r<1&&n>=1&&(TB(e),Tj(e),Tz(e),TV(e));let s=dI.resolve();return r<3&&n>=3&&(0!==r&&(T$(e),Tz(e)),s=s.next(()=>TH(i))),r<4&&n>=4&&(0!==r&&(s=s.next(()=>TF(e,i))),s=s.next(()=>{TK(e)})),r<5&&n>=5&&(s=s.next(()=>this.removeAcknowledgedMutations(i))),r<6&&n>=6&&(s=s.next(()=>(Tq(e),this.addDocumentGlobal(i)))),r<7&&n>=7&&(s=s.next(()=>this.ensureSequenceNumbers(i))),r<8&&n>=8&&(s=s.next(()=>this.createCollectionParentIndex(e,i))),r<9&&n>=9&&(s=s.next(()=>{TG(e)})),r<10&&n>=10&&(s=s.next(()=>this.rewriteCanonicalIds(i))),r<11&&n>=11&&(s=s.next(()=>{TW(e),TQ(e)})),r<12&&n>=12&&(s=s.next(()=>{TJ(e)})),r<13&&n>=13&&(s=s.next(()=>TU(e)).next(()=>this.rewriteRemoteDocumentCache(e,i)).next(()=>e.deleteObjectStore(d1))),r<14&&n>=14&&(s=s.next(()=>this.runOverlayMigration(e,i))),r<15&&n>=15&&(s=s.next(()=>TY(e))),r<16&&n>=16&&(s=s.next(()=>{t.objectStore(pM).clear()}).next(()=>{t.objectStore(pF).clear()})),r<17&&n>=17&&(s=s.next(()=>{TX(e)})),r<18&&n>=18&&u4()&&(s=s.next(()=>{t.objectStore(pM).clear()}).next(()=>{t.objectStore(pF).clear()})),s}addDocumentGlobal(e){let t=0;return e.store(d1).iterate((e,r)=>{t+=SF(r)}).next(()=>{let r={byteSize:t};return e.store(ph).put(pd,r)})}removeAcknowledgedMutations(e){let t=e.store(d6),r=e.store(d5);return t.loadAll().next(t=>dI.forEach(t,t=>{let n=IDBKeyRange.bound([t.userId,fD],[t.userId,t.lastAcknowledgedBatchId]);return r.loadAll(d7,n).next(r=>dI.forEach(r,r=>{hj(r.userId===t.userId,18650,"Cannot process batch from unexpected user",{batchId:r.batchId});let n=bm(this.serializer,r);return Sj(e,t.userId,n).next(()=>{})}))}))}ensureSequenceNumbers(e){let t=e.store(py),r=e.store(d1);return e.store(pw).get(pT).next(e=>{let n=r=>t.put({targetId:0,path:dJ(r),sequenceNumber:e.highestListenSequenceNumber}),i=[];return r.iterate((e,r)=>{let s=new di(e),a=TL(s);i.push(t.get(a).next(e=>e?dI.resolve():n(s)))}).next(()=>dI.waitFor(i))})}createCollectionParentIndex(e,t){e.createObjectStore(pC,{keyPath:px});let r=t.store(pC),n=new SA,i=e=>{if(n.add(e)){let t=e.lastSegment(),n=e.popLast();return r.put({collectionId:t,parent:dJ(n)})}};return t.store(d1).iterate({keysOnly:!0},(e,t)=>i(new di(e).popLast())).next(()=>t.store(pi).iterate({keysOnly:!0},([e,t,r],n)=>i(d0(t).popLast())))}rewriteCanonicalIds(e){let t=e.store(pp);return t.iterate((e,r)=>{let n=bg(r),i=by(this.serializer,n);return t.put(i)})}rewriteRemoteDocumentCache(e,t){let r=t.store(d1),n=[];return r.iterate((e,r)=>{let i=t.store(ps),s=TZ(r).path.toArray(),a={prefixPath:s.slice(0,s.length-2),collectionGroup:s[s.length-2],documentId:s[s.length-1],readTime:r.readTime||[0,0],unknownDocument:r.unknownDocument,noDocument:r.noDocument,document:r.document,hasCommittedMutations:!!r.hasCommittedMutations};n.push(i.put(a))}).next(()=>dI.waitFor(n))}runOverlayMigration(e,t){let r=t.store(d5),n=To(this.serializer),i=new TN(TO.factory,this.serializer.remoteSerializer);return r.loadAll().next(e=>{let r=new Map;return e.forEach(e=>{var t;let n=null!=(t=r.get(e.userId))?t:gY();bm(this.serializer,e).keys().forEach(e=>n=n.add(e)),r.set(e.userId,n)}),dI.forEach(r,(e,r)=>{let s=new h_(r),a=bM.forUser(this.serializer,s),o=i.getIndexManager(s);return new Ty(n,SV.forUser(s,this.serializer,o,i.referenceDelegate),a,o).recalculateAndSaveOverlaysForDocumentKeys(new p5(t,dH.INVALID),e).next()})})}}function TL(e){return[0,dJ(e)]}function TB(e){e.createObjectStore(d2)}function Tj(e){e.createObjectStore(d6,{keyPath:d4}),e.createObjectStore(d5,{keyPath:d8,autoIncrement:!0}).createIndex(d7,d9,{unique:!0}),e.createObjectStore(pi)}function TF(e,t){return t.store(d5).loadAll().next(r=>{e.deleteObjectStore(d5),e.createObjectStore(d5,{keyPath:d8,autoIncrement:!0}).createIndex(d7,d9,{unique:!0});let n=t.store(d5),i=r.map(e=>n.put(e));return dI.waitFor(i)})}function TV(e){e.createObjectStore(d1)}function TU(e){let t=e.createObjectStore(ps,{keyPath:pa});t.createIndex(po,pl),t.createIndex(pu,pc)}function Tq(e){e.createObjectStore(ph)}function Tz(e){e.createObjectStore(py,{keyPath:pv}).createIndex(pb,pS,{unique:!0}),e.createObjectStore(pp,{keyPath:pf}).createIndex(pm,pg,{unique:!0}),e.createObjectStore(pw)}function T$(e){e.deleteObjectStore(py),e.deleteObjectStore(pp),e.deleteObjectStore(pw)}function TG(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}function TH(e){let t=e.store(pw),r={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:dt.min().toTimestamp(),targetCount:0};return t.put(pT,r)}function TK(e){e.createObjectStore(pE,{keyPath:p_})}function TW(e){e.createObjectStore(pI,{keyPath:pk})}function TQ(e){e.createObjectStore(pA,{keyPath:pR})}function TY(e){e.createObjectStore(pN,{keyPath:pD,autoIncrement:!0}).createIndex(pO,pP,{unique:!1}),e.createObjectStore(pM,{keyPath:pL}).createIndex(pB,pj,{unique:!1}),e.createObjectStore(pF,{keyPath:pV}).createIndex(pU,pq,{unique:!1})}function TJ(e){let t=e.createObjectStore(pz,{keyPath:p$});t.createIndex(pG,pH,{unique:!1}),t.createIndex(pK,pW,{unique:!1})}function TX(e){e.createObjectStore(pQ,{keyPath:pY})}function TZ(e){return e.document?new dl(di.fromString(e.document.name).popFirst(5)):e.noDocument?dl.fromSegments(e.noDocument.path):e.unknownDocument?dl.fromSegments(e.unknownDocument.path):hL(36783)}let T0="IndexedDbPersistence",T1=18e5,T2=5e3,T3=4e3,T6="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",T4="This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.",T5="firestore_zombie",T8="main";class T7{constructor(e,t,r,n,i,s,a,o,l,u,c=Tm){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.queue=i,this.window=s,this.document=a,this.sequenceNumberSyncer=l,this.forceOwningTab=u,this.schemaVersion=c,this.listenSequence=null,this._started=!1,this.isPrimary=!1,this.networkEnabled=!0,this.windowUnloadHandler=null,this.inForeground=!1,this.documentVisibilityHandler=null,this.clientMetadataRefresher=null,this.lastGarbageCollectionTime=Number.NEGATIVE_INFINITY,this.primaryStateListener=e=>Promise.resolve(),!T7.isAvailable())throw new hU(hV.UNIMPLEMENTED,T4);this.referenceDelegate=new Tt(this,n),this.dbName=t+T8,this.serializer=new bo(o),this.simpleDb=new dN(this.dbName,this.schemaVersion,new TM(this.serializer)),this.globalsCache=new bB,this.targetCache=new SW(this.referenceDelegate,this.serializer),this.remoteDocumentCache=To(this.serializer),this.bundleCache=new bD,this.window&&this.window.localStorage?this.webStorage=this.window.localStorage:(this.webStorage=null,!1===u&&hO(T0,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.updateClientMetadataAndTryBecomePrimary().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new hU(hV.FAILED_PRECONDITION,T6);return this.attachVisibilityHandler(),this.attachWindowUnloadHook(),this.scheduleClientMetadataAndPrimaryLeaseRefreshes(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.targetCache.getHighestSequenceNumber(e))}).then(e=>{this.listenSequence=new dH(e,this.sequenceNumberSyncer)}).then(()=>{this._started=!0}).catch(e=>(this.simpleDb&&this.simpleDb.close(),Promise.reject(e)))}setPrimaryStateListener(e){return this.primaryStateListener=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.simpleDb.setVersionChangeListener(async t=>{null===t.newVersion&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.queue.enqueueAndForget(async()=>{this.started&&await this.updateClientMetadataAndTryBecomePrimary()}))}updateClientMetadataAndTryBecomePrimary(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>we(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.verifyPrimaryLease(e).next(e=>{e||(this.isPrimary=!1,this.queue.enqueueRetryable(()=>this.primaryStateListener(!1)))})}).next(()=>this.canActAsPrimary(e)).next(t=>this.isPrimary&&!t?this.releasePrimaryLeaseIfHeld(e).next(()=>!1):!!t&&this.acquireOrExtendPrimaryLease(e).next(()=>!0))).catch(e=>{if(dM(e))return hD(T0,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return hD(T0,"Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.queue.enqueueRetryable(()=>this.primaryStateListener(e)),this.isPrimary=e})}verifyPrimaryLease(e){return T9(e).get(d3).next(e=>dI.resolve(this.isLocalClient(e)))}removeClientMetadata(e){return we(e).delete(this.clientId)}async maybeGarbageCollectMultiClientState(){if(this.isPrimary&&!this.isWithinAge(this.lastGarbageCollectionTime,T1)){this.lastGarbageCollectionTime=Date.now();let e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",e=>{let t=p8(e,pE);return t.loadAll().next(e=>{let r=this.filterActiveClients(e,T1),n=e.filter(e=>-1===r.indexOf(e));return dI.forEach(n,e=>t.delete(e.clientId)).next(()=>n)})}).catch(()=>[]);if(this.webStorage)for(let t of e)this.webStorage.removeItem(this.zombiedClientLocalStorageKey(t.clientId))}}scheduleClientMetadataAndPrimaryLeaseRefreshes(){this.clientMetadataRefresher=this.queue.enqueueAfterDelay("client_metadata_refresh",T3,()=>this.updateClientMetadataAndTryBecomePrimary().then(()=>this.maybeGarbageCollectMultiClientState()).then(()=>this.scheduleClientMetadataAndPrimaryLeaseRefreshes()))}isLocalClient(e){return!!e&&e.ownerId===this.clientId}canActAsPrimary(e){return this.forceOwningTab?dI.resolve(!0):T9(e).get(d3).next(t=>{if(null!==t&&this.isWithinAge(t.leaseTimestampMs,T2)&&!this.isClientZombied(t.ownerId)){if(this.isLocalClient(t)&&this.networkEnabled)return!0;if(!this.isLocalClient(t)){if(!t.allowTabSynchronization)throw new hU(hV.FAILED_PRECONDITION,T6);return!1}}return!!this.networkEnabled&&!!this.inForeground||we(e).loadAll().next(e=>void 0===this.filterActiveClients(e,T2).find(e=>{if(this.clientId!==e.clientId){let t=!this.networkEnabled&&e.networkEnabled,r=!this.inForeground&&e.inForeground,n=this.networkEnabled===e.networkEnabled;if(t||r&&n)return!0}return!1}))}).next(e=>(this.isPrimary!==e&&hD(T0,`Client ${e?"is":"is not"} eligible for a primary lease.`),e))}async shutdown(){this._started=!1,this.markClientZombied(),this.clientMetadataRefresher&&(this.clientMetadataRefresher.cancel(),this.clientMetadataRefresher=null),this.detachVisibilityHandler(),this.detachWindowUnloadHook(),await this.simpleDb.runTransaction("shutdown","readwrite",[d2,pE],e=>{let t=new p5(e,dH.INVALID);return this.releasePrimaryLeaseIfHeld(t).next(()=>this.removeClientMetadata(t))}),this.simpleDb.close(),this.removeClientZombiedEntry()}filterActiveClients(e,t){return e.filter(e=>this.isWithinAge(e.updateTimeMs,t)&&!this.isClientZombied(e.clientId))}getActiveClients(){return this.runTransaction("getActiveClients","readonly",e=>we(e).loadAll().next(e=>this.filterActiveClients(e,T1).map(e=>e.clientId)))}get started(){return this._started}getGlobalsCache(){return this.globalsCache}getMutationQueue(e,t){return SV.forUser(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.targetCache}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new SD(e,this.serializer.remoteSerializer.databaseId)}getDocumentOverlayCache(e){return bM.forUser(this.serializer,e)}getBundleCache(){return this.bundleCache}runTransaction(e,t,r){let n;hD(T0,"Starting transaction:",e);let i="readonly"===t?"readonly":"readwrite",s=p4(this.schemaVersion);return this.simpleDb.runTransaction(e,i,s,i=>(n=new p5(i,this.listenSequence?this.listenSequence.next():dH.INVALID),"readwrite-primary"===t)?this.verifyPrimaryLease(n).next(e=>!!e||this.canActAsPrimary(n)).next(t=>{if(!t)throw hO(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.queue.enqueueRetryable(()=>this.primaryStateListener(!1)),new hU(hV.FAILED_PRECONDITION,dx);return r(n)}).next(e=>this.acquireOrExtendPrimaryLease(n).next(()=>e)):this.verifyAllowTabSynchronization(n).next(()=>r(n))).then(e=>(n.raiseOnCommittedEvent(),e))}verifyAllowTabSynchronization(e){return T9(e).get(d3).next(e=>{if(null!==e&&this.isWithinAge(e.leaseTimestampMs,T2)&&!this.isClientZombied(e.ownerId)&&!this.isLocalClient(e)&&!this.forceOwningTab&&(!this.allowTabSynchronization||!e.allowTabSynchronization))throw new hU(hV.FAILED_PRECONDITION,T6)})}acquireOrExtendPrimaryLease(e){let t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return T9(e).put(d3,t)}static isAvailable(){return dN.isAvailable()}releasePrimaryLeaseIfHeld(e){let t=T9(e);return t.get(d3).next(e=>this.isLocalClient(e)?(hD(T0,"Releasing primary lease."),t.delete(d3)):dI.resolve())}isWithinAge(e,t){let r=Date.now(),n=r-t,i=r;return!(e<n)&&(!(e>i)||(hO(`Detected an update time that is in the future: ${e} > ${i}`),!1))}attachVisibilityHandler(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.documentVisibilityHandler=()=>{this.queue.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.updateClientMetadataAndTryBecomePrimary()))},this.document.addEventListener("visibilitychange",this.documentVisibilityHandler),this.inForeground="visible"===this.document.visibilityState)}detachVisibilityHandler(){this.documentVisibilityHandler&&(this.document.removeEventListener("visibilitychange",this.documentVisibilityHandler),this.documentVisibilityHandler=null)}attachWindowUnloadHook(){var e;"function"==typeof(null==(e=this.window)?void 0:e.addEventListener)&&(this.windowUnloadHandler=()=>{this.markClientZombied();let e=/(?:Version|Mobile)\/1[456]/;u6()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.queue.enterRestrictedMode(!0),this.queue.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.windowUnloadHandler))}detachWindowUnloadHook(){this.windowUnloadHandler&&(this.window.removeEventListener("pagehide",this.windowUnloadHandler),this.windowUnloadHandler=null)}isClientZombied(e){var t;try{let r=(null==(t=this.webStorage)?void 0:t.getItem(this.zombiedClientLocalStorageKey(e)))!==null;return hD(T0,`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(e){return hO(T0,"Failed to get zombied client id.",e),!1}}markClientZombied(){if(this.webStorage)try{this.webStorage.setItem(this.zombiedClientLocalStorageKey(this.clientId),String(Date.now()))}catch(e){hO("Failed to set zombie client id.",e)}}removeClientZombiedEntry(){if(this.webStorage)try{this.webStorage.removeItem(this.zombiedClientLocalStorageKey(this.clientId))}catch(e){}}zombiedClientLocalStorageKey(e){return`${T5}_${this.persistenceKey}_${e}`}}function T9(e){return p8(e,d2)}function we(e){return p8(e,pE)}function wt(e,t){let r=e.projectId;return e.isDefaultDatabase||(r+="."+e.database),"firestore/"+t+"/"+r+"/"}function wr(e,t,r,n,i){t=[...t],(e=[...e]).sort(r),t.sort(r);let s=e.length,a=t.length,o=0,l=0;for(;o<a&&l<s;){let s=r(e[l],t[o]);s<0?i(e[l++]):s>0?n(t[o++]):(o++,l++)}for(;o<a;)n(t[o++]);for(;l<s;)i(e[l++])}function wn(e,t){if(e.length!==t.length)return!1;for(let r=0;r<e.length;++r)if(e[r]!==t[r])return!1;return!0}let wi="LocalStore",ws=3e8;class wa{constructor(e,t,r,n){this.persistence=e,this.queryEngine=t,this.serializer=n,this.targetDataByTarget=new fr(h2),this.targetIdByTarget=new gB(e=>m5(e),m7),this.collectionGroupReadTime=new Map,this.remoteDocuments=e.getRemoteDocumentCache(),this.targetCache=e.getTargetCache(),this.bundleCache=e.getBundleCache(),this.initializeUserComponents(r)}initializeUserComponents(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Ty(this.remoteDocuments,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.remoteDocuments.setIndexManager(this.indexManager),this.queryEngine.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.targetDataByTarget))}}function wo(e,t,r,n){return new wa(e,t,r,n)}async function wl(e,t){let r=hF(e);return await r.persistence.runTransaction("Handle user change","readonly",e=>{let n;return r.mutationQueue.getAllMutationBatches(e).next(i=>(n=i,r.initializeUserComponents(t),r.mutationQueue.getAllMutationBatches(e))).next(t=>{let i=[],s=[],a=gY();for(let e of n)for(let t of(i.push(e.batchId),e.mutations))a=a.add(t.key);for(let e of t)for(let t of(s.push(e.batchId),e.mutations))a=a.add(t.key);return r.localDocuments.getDocuments(e,a).next(e=>({affectedDocuments:e,removedBatchIds:i,addedBatchIds:s}))})})}function wu(e,t){let r,n,i=hF(e),s=de.now(),a=t.reduce((e,t)=>e.add(t.key),gY());return i.persistence.runTransaction("Locally write mutations","readwrite",e=>{let o=gF(),l=gY();return i.remoteDocuments.getEntries(e,a).next(e=>{(o=e).forEach((e,t)=>{t.isValidDocument()||(l=l.add(e))})}).next(()=>i.localDocuments.getOverlayedDocuments(e,o)).next(n=>{r=n;let a=[];for(let e of t){let t=yg(e,r.get(e.key).overlayedDocument);null!=t&&a.push(new yT(e.key,t,mC(t.value.mapValue),yc.exists(!0)))}return i.mutationQueue.addMutationBatch(e,s,a,t)}).next(t=>{n=t;let s=t.applyToLocalDocumentSet(r,l);return i.documentOverlayCache.saveOverlays(e,t.batchId,s)})}).then(()=>({batchId:n.batchId,changes:gz(r)}))}function wc(e,t){let r=hF(e);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",e=>{let n=t.batch.keys(),i=r.remoteDocuments.newChangeBuffer({trackRemovals:!0});return wE(r,e,t,i).next(()=>i.apply(e)).next(()=>r.mutationQueue.performConsistencyCheck(e)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(e,n,t.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,wh(t))).next(()=>r.localDocuments.getDocuments(e,n))})}function wh(e){let t=gY();for(let r=0;r<e.mutationResults.length;++r)e.mutationResults[r].transformResults.length>0&&(t=t.add(e.batch.mutations[r].key));return t}function wd(e,t){let r=hF(e);return r.persistence.runTransaction("Reject batch","readwrite-primary",e=>{let n;return r.mutationQueue.lookupMutationBatch(e,t).next(t=>(hj(null!==t,37113),n=t.keys(),r.mutationQueue.removeMutationBatch(e,t))).next(()=>r.mutationQueue.performConsistencyCheck(e)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(e,n,t)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,n)).next(()=>r.localDocuments.getDocuments(e,n))})}function wp(e){let t=hF(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",e=>t.mutationQueue.getHighestUnacknowledgedBatchId(e))}function wf(e){let t=hF(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.targetCache.getLastRemoteSnapshotVersion(e))}function wm(e,t){let r=hF(e),n=t.snapshotVersion,i=r.targetDataByTarget;return r.persistence.runTransaction("Apply remote event","readwrite-primary",e=>{let s=r.remoteDocuments.newChangeBuffer({trackRemovals:!0});i=r.targetDataByTarget;let a=[];t.targetChanges.forEach((s,o)=>{let l=i.get(o);if(!l)return;a.push(r.targetCache.removeMatchingKeys(e,s.removedDocuments,o).next(()=>r.targetCache.addMatchingKeys(e,s.addedDocuments,o)));let u=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(o)?u=u.withResumeToken(fp.EMPTY_BYTE_STRING,dt.min()).withLastLimboFreeSnapshotVersion(dt.min()):s.resumeToken.approximateByteSize()>0&&(u=u.withResumeToken(s.resumeToken,n)),i=i.insert(o,u),wy(l,u,s)&&a.push(r.targetCache.updateTargetData(e,u))});let o=gF(),l=gY();if(t.documentUpdates.forEach(n=>{t.resolvedLimboDocuments.has(n)&&a.push(r.persistence.referenceDelegate.updateLimboDocument(e,n))}),a.push(wg(e,s,t.documentUpdates).next(e=>{o=e.changedDocuments,l=e.existenceChangedKeys})),!n.isEqual(dt.min())){let t=r.targetCache.getLastRemoteSnapshotVersion(e).next(t=>r.targetCache.setTargetsMetadata(e,e.currentSequenceNumber,n));a.push(t)}return dI.waitFor(a).next(()=>s.apply(e)).next(()=>r.localDocuments.getLocalViewOfDocuments(e,o,l)).next(()=>o)}).then(e=>(r.targetDataByTarget=i,e))}function wg(e,t,r){let n=gY(),i=gY();return r.forEach(e=>n=n.add(e)),t.getEntries(e,n).next(e=>{let n=gF();return r.forEach((r,s)=>{let a=e.get(r);s.isFoundDocument()!==a.isFoundDocument()&&(i=i.add(r)),s.isNoDocument()&&s.version.isEqual(dt.min())?(t.removeEntry(r,s.readTime),n=n.insert(r,s)):!a.isValidDocument()||s.version.compareTo(a.version)>0||0===s.version.compareTo(a.version)&&a.hasPendingWrites?(t.addEntry(s),n=n.insert(r,s)):hD(wi,"Ignoring outdated watch update for ",r,". Current version:",a.version," Watch version:",s.version)}),{changedDocuments:n,existenceChangedKeys:i}})}function wy(e,t,r){return!!(0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=ws)||r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size>0}async function wv(e,t){let r=hF(e);try{await r.persistence.runTransaction("notifyLocalViewChanges","readwrite",e=>dI.forEach(t,t=>dI.forEach(t.addedKeys,n=>r.persistence.referenceDelegate.addReference(e,t.targetId,n)).next(()=>dI.forEach(t.removedKeys,n=>r.persistence.referenceDelegate.removeReference(e,t.targetId,n)))))}catch(e){if(dM(e))hD(wi,"Failed to update sequence numbers: "+e);else throw e}for(let e of t){let t=e.targetId;if(!e.fromCache){let e=r.targetDataByTarget.get(t),n=e.snapshotVersion,i=e.withLastLimboFreeSnapshotVersion(n);r.targetDataByTarget=r.targetDataByTarget.insert(t,i)}}}function wb(e,t){let r=hF(e);return r.persistence.runTransaction("Get next mutation batch","readonly",e=>(void 0===t&&(t=fD),r.mutationQueue.getNextMutationBatchAfterBatchId(e,t)))}function wS(e,t){let r=hF(e);return r.persistence.runTransaction("read document","readonly",e=>r.localDocuments.getDocument(e,t))}function wT(e,t){let r=hF(e);return r.persistence.runTransaction("Allocate target","readwrite",e=>{let n;return r.targetCache.getTargetData(e,t).next(i=>i?(n=i,dI.resolve(n)):r.targetCache.allocateTargetId(e).next(i=>(n=new ba(t,i,"TargetPurposeListen",e.currentSequenceNumber),r.targetCache.addTargetData(e,n).next(()=>n))))}).then(e=>{let n=r.targetDataByTarget.get(e.targetId);return(null===n||e.snapshotVersion.compareTo(n.snapshotVersion)>0)&&(r.targetDataByTarget=r.targetDataByTarget.insert(e.targetId,e),r.targetIdByTarget.set(t,e.targetId)),e})}function ww(e,t,r){let n=hF(e),i=n.targetIdByTarget.get(r);return void 0!==i?dI.resolve(n.targetDataByTarget.get(i)):n.targetCache.getTargetData(t,r)}async function wC(e,t,r){let n=hF(e),i=n.targetDataByTarget.get(t),s=r?"readwrite":"readwrite-primary";try{r||await n.persistence.runTransaction("Release target",s,e=>n.persistence.referenceDelegate.removeTarget(e,i))}catch(e){if(dM(e))hD(wi,`Failed to update sequence numbers for target ${t}: ${e}`);else throw e}n.targetDataByTarget=n.targetDataByTarget.remove(t),n.targetIdByTarget.delete(i.target)}function wx(e,t,r){let n=hF(e),i=dt.min(),s=gY();return n.persistence.runTransaction("Execute query","readwrite",e=>ww(n,e,gv(t)).next(t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,n.targetCache.getMatchingKeysForTargetId(e,t.targetId).next(e=>{s=e})}).next(()=>n.queryEngine.getDocumentsMatchingQuery(e,t,r?i:dt.min(),r?s:gY())).next(e=>(wN(n,gP(t),e),{documents:e,remoteKeys:s})))}function wE(e,t,r,n){let i=r.batch,s=i.keys(),a=dI.resolve();return s.forEach(e=>{a=a.next(()=>n.getEntry(t,e)).next(t=>{let s=r.docVersions.get(e);hj(null!==s,48541),0>t.version.compareTo(s)&&(i.applyToRemoteDocument(t,r),t.isValidDocument()&&(t.setReadTime(r.commitVersion),n.addEntry(t)))})}),a.next(()=>e.mutationQueue.removeMutationBatch(t,i))}function w_(e,t){let r=hF(e),n=hF(r.mutationQueue);return r.persistence.runTransaction("Lookup mutation documents","readonly",e=>n.lookupMutationKeys(e,t).next(t=>t?r.localDocuments.getDocuments(e,t):dI.resolve(null)))}function wI(e,t){hF(hF(e,wa).mutationQueue).removeCachedMutationKeys(t)}function wk(e){return hF(hF(e,wa).persistence).getActiveClients()}function wA(e,t){let r=hF(e),n=hF(r.targetCache),i=r.targetDataByTarget.get(t);return i?Promise.resolve(i.target):r.persistence.runTransaction("Get target data","readonly",e=>n.getTargetDataForTarget(e,t).next(e=>e?e.target:null))}function wR(e,t){let r=hF(e),n=r.collectionGroupReadTime.get(t)||dt.min();return r.persistence.runTransaction("Get new document changes","readonly",e=>r.remoteDocuments.getAllFromCollectionGroup(e,t,dS(n,du),Number.MAX_SAFE_INTEGER)).then(e=>(wN(r,t,e),e))}function wN(e,t,r){let n=e.collectionGroupReadTime.get(t)||dt.min();r.forEach((e,t)=>{t.readTime.compareTo(n)>0&&(n=t.readTime)}),e.collectionGroupReadTime.set(t,n)}function wD(e){return gv(gh(di.fromString(`__bundle__/docs/${e}`)))}async function wO(e,t,r,n){let i=hF(e),s=gY(),a=gF();for(let e of r){let r=t.toDocumentKey(e.metadata.name);e.document&&(s=s.add(r));let n=t.toMutableDocument(e);n.setReadTime(t.toSnapshotVersion(e.metadata.readTime)),a=a.insert(r,n)}let o=i.remoteDocuments.newChangeBuffer({trackRemovals:!0}),l=await wT(i,wD(n));return i.persistence.runTransaction("Apply bundle documents","readwrite",e=>wg(e,o,a).next(t=>(o.apply(e),t)).next(t=>i.targetCache.removeMatchingKeysForTargetId(e,l.targetId).next(()=>i.targetCache.addMatchingKeys(e,s,l.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(e,t.changedDocuments,t.existenceChangedKeys)).next(()=>t.changedDocuments)))}function wP(e,t){let r=hF(e),n=vs(t.createTime);return r.persistence.runTransaction("hasNewerBundle","readonly",e=>r.bundleCache.getBundleMetadata(e,t.id)).then(e=>!!e&&e.createTime.compareTo(n)>=0)}function wM(e,t){let r=hF(e);return r.persistence.runTransaction("Save bundle","readwrite",e=>r.bundleCache.saveBundleMetadata(e,t))}function wL(e,t){let r=hF(e);return r.persistence.runTransaction("Get named query","readonly",e=>r.bundleCache.getNamedQuery(e,t))}async function wB(e,t,r=gY()){let n=await wT(e,gv(bC(t.bundledQuery))),i=hF(e);return i.persistence.runTransaction("Save named query","readwrite",e=>{let s=vs(t.readTime);if(n.snapshotVersion.compareTo(s)>=0)return i.bundleCache.saveNamedQuery(e,t);let a=n.withResumeToken(fp.EMPTY_BYTE_STRING,s);return i.targetDataByTarget=i.targetDataByTarget.insert(a.targetId,a),i.targetCache.updateTargetData(e,a).next(()=>i.targetCache.removeMatchingKeysForTargetId(e,n.targetId)).next(()=>i.targetCache.addMatchingKeys(e,r,n.targetId)).next(()=>i.bundleCache.saveNamedQuery(e,t))})}async function wj(e,t){let r=hF(e),n=r.indexManager,i=[];return r.persistence.runTransaction("Configure indexes","readwrite",e=>n.getFieldIndexes(e).next(r=>wr(r,t,dm,t=>{i.push(n.addFieldIndex(e,t))},t=>{i.push(n.deleteFieldIndex(e,t))})).next(()=>dI.waitFor(i)))}function wF(e,t){hF(e).queryEngine.indexAutoCreationEnabled=t}function wV(e){let t=hF(e),r=t.indexManager;return t.persistence.runTransaction("Delete All Indexes","readwrite",e=>r.deleteAllFieldIndexes(e))}class wU{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}let wq=100;function wz(){return u6()?8:dD(u2())>0?6:4}class w${constructor(){this.initialized=!1,this.indexAutoCreationEnabled=!1,this.indexAutoCreationMinCollectionSize=wq,this.relativeIndexReadCostPerDocument=wz()}initialize(e,t){this.localDocumentsView=e,this.indexManager=t,this.initialized=!0}getDocumentsMatchingQuery(e,t,r,n){let i={result:null};return this.performQueryUsingIndex(e,t).next(e=>{i.result=e}).next(()=>{if(!i.result)return this.performQueryUsingRemoteKeys(e,t,n,r).next(e=>{i.result=e})}).next(()=>{if(i.result)return;let r=new wU;return this.executeFullCollectionScan(e,t,r).next(n=>{if(i.result=n,this.indexAutoCreationEnabled)return this.createCacheIndexes(e,t,r,n.size)})}).next(()=>i.result)}createCacheIndexes(e,t,r,n){return r.documentReadCount<this.indexAutoCreationMinCollectionSize?(hN()<=a.DEBUG&&hD("QueryEngine","SDK will not create cache indexes for query:",gk(t),"since it only creates cache indexes for collection contains","more than or equal to",this.indexAutoCreationMinCollectionSize,"documents"),dI.resolve()):(hN()<=a.DEBUG&&hD("QueryEngine","Query:",gk(t),"scans",r.documentReadCount,"local documents and returns",n,"documents as results."),r.documentReadCount>this.relativeIndexReadCostPerDocument*n)?(hN()<=a.DEBUG&&hD("QueryEngine","The SDK decides to create cache indexes for query:",gk(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,gv(t))):dI.resolve()}performQueryUsingIndex(e,t){if(gp(t))return dI.resolve(null);let r=gv(t);return this.indexManager.getIndexType(e,r).next(n=>0===n?null:(null!==t.limit&&1===n&&(r=gv(t=gC(t,null,"F"))),this.indexManager.getDocumentsMatchingTarget(e,r).next(n=>{let i=gY(...n);return this.localDocumentsView.getDocuments(e,i).next(n=>this.indexManager.getMinOffset(e,r).next(r=>{let s=this.applyQuery(t,n);return this.needsRefill(t,s,i,r.readTime)?this.performQueryUsingIndex(e,gC(t,null,"F")):this.appendRemainingResults(e,s,t,r)}))})))}performQueryUsingRemoteKeys(e,t,r,n){return gp(t)||n.isEqual(dt.min())?dI.resolve(null):this.localDocumentsView.getDocuments(e,r).next(i=>{let s=this.applyQuery(t,i);return this.needsRefill(t,s,r,n)?dI.resolve(null):(hN()<=a.DEBUG&&hD("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),gk(t)),this.appendRemainingResults(e,s,t,dS(n,du)).next(e=>e))})}applyQuery(e,t){let r=new fa(gM(e));return t.forEach((t,n)=>{gA(e,n)&&(r=r.add(n))}),r}needsRefill(e,t,r,n){if(null===e.limit)return!1;if(r.size!==t.size)return!0;let i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(n)>0)}executeFullCollectionScan(e,t,r){return hN()<=a.DEBUG&&hD("QueryEngine","Using full collection scan to execute query:",gk(t)),this.localDocumentsView.getDocumentsMatchingQuery(e,t,dw.min(),r)}appendRemainingResults(e,t,r,n){return this.localDocumentsView.getDocumentsMatchingQuery(e,r,n).next(e=>(t.forEach(t=>{e=e.insert(t.key,t)}),e))}}let wG="firestore_clients";function wH(e,t){return`${wG}_${e}_${t}`}let wK="firestore_mutations";function wW(e,t,r){let n=`${wK}_${e}_${r}`;return t.isAuthenticated()&&(n+=`_${t.uid}`),n}let wQ="firestore_targets";function wY(e,t){return`${wQ}_${e}_${t}`}let wJ="firestore_online_state";function wX(e){return`${wJ}_${e}`}let wZ="firestore_bundle_loaded_v2";function w0(e){return`${wZ}_${e}`}let w1="firestore_sequence_number";function w2(e){return`${w1}_${e}`}let w3="SharedClientState";class w6{constructor(e,t,r,n){this.user=e,this.batchId=t,this.state=r,this.error=n}static fromWebStorageEntry(e,t,r){let n,i=JSON.parse(r),s="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return(s&&i.error&&(s="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(n=new hU(i.error.code,i.error.message)),s)?new w6(e,t,i.state,n):(hO(w3,`Failed to parse mutation state for ID '${t}': ${r}`),null)}toWebStorageJSON(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class w4{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static fromWebStorageEntry(e,t){let r,n=JSON.parse(t),i="object"==typeof n&&-1!==["not-current","current","rejected"].indexOf(n.state)&&(void 0===n.error||"object"==typeof n.error);return(i&&n.error&&(i="string"==typeof n.error.message&&"string"==typeof n.error.code)&&(r=new hU(n.error.code,n.error.message)),i)?new w4(e,n.state,r):(hO(w3,`Failed to parse target state for ID '${e}': ${t}`),null)}toWebStorageJSON(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class w5{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static fromWebStorageEntry(e,t){let r=JSON.parse(t),n="object"==typeof r&&r.activeTargetIds instanceof Array,i=gX();for(let e=0;n&&e<r.activeTargetIds.length;++e)n=fM(r.activeTargetIds[e]),i=i.add(r.activeTargetIds[e]);return n?new w5(e,i):(hO(w3,`Failed to parse client data for instance '${e}': ${t}`),null)}}class w8{constructor(e,t){this.clientId=e,this.onlineState=t}static fromWebStorageEntry(e){let t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new w8(t.clientId,t.onlineState):(hO(w3,`Failed to parse online state: ${e}`),null)}}class w7{constructor(){this.activeTargetIds=gX()}addQueryTarget(e){this.activeTargetIds=this.activeTargetIds.add(e)}removeQueryTarget(e){this.activeTargetIds=this.activeTargetIds.delete(e)}toWebStorageJSON(){return JSON.stringify({activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()})}}class w9{constructor(e,t,r,n,i){this.window=e,this.queue=t,this.persistenceKey=r,this.localClientId=n,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.storageListener=this.handleWebStorageEvent.bind(this),this.activeClients=new fr(h2),this.started=!1,this.earlyEvents=[];let s=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.localClientStorageKey=wH(this.persistenceKey,this.localClientId),this.sequenceNumberKey=w2(this.persistenceKey),this.activeClients=this.activeClients.insert(this.localClientId,new w7),this.clientStateKeyRe=RegExp(`^${wG}_${s}_([^_]*)$`),this.mutationBatchKeyRe=RegExp(`^${wK}_${s}_(\\d+)(?:_(.*))?$`),this.queryTargetKeyRe=RegExp(`^${wQ}_${s}_(\\d+)$`),this.onlineStateKey=wX(this.persistenceKey),this.bundleLoadedKey=w0(this.persistenceKey),this.window.addEventListener("storage",this.storageListener)}static isAvailable(e){return!!(e&&e.localStorage)}async start(){for(let e of(await this.syncEngine.getActiveClients())){if(e===this.localClientId)continue;let t=this.getItem(wH(this.persistenceKey,e));if(t){let r=w5.fromWebStorageEntry(e,t);r&&(this.activeClients=this.activeClients.insert(r.clientId,r))}}this.persistClientState();let e=this.storage.getItem(this.onlineStateKey);if(e){let t=this.fromWebStorageOnlineState(e);t&&this.handleOnlineStateEvent(t)}for(let e of this.earlyEvents)this.handleWebStorageEvent(e);this.earlyEvents=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.sequenceNumberKey,JSON.stringify(e))}getAllActiveQueryTargets(){return this.extractActiveQueryTargets(this.activeClients)}isActiveQueryTarget(e){let t=!1;return this.activeClients.forEach((r,n)=>{n.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.persistMutationState(e,"pending")}updateMutationState(e,t,r){this.persistMutationState(e,t,r),this.removeMutationState(e)}addLocalQueryTarget(e,t=!0){let r="not-current";if(this.isActiveQueryTarget(e)){let t=this.storage.getItem(wY(this.persistenceKey,e));if(t){let n=w4.fromWebStorageEntry(e,t);n&&(r=n.state)}}return t&&this.localClientState.addQueryTarget(e),this.persistClientState(),r}removeLocalQueryTarget(e){this.localClientState.removeQueryTarget(e),this.persistClientState()}isLocalQueryTarget(e){return this.localClientState.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(wY(this.persistenceKey,e))}updateQueryState(e,t,r){this.persistQueryTargetState(e,t,r)}handleUserChange(e,t,r){t.forEach(e=>{this.removeMutationState(e)}),this.currentUser=e,r.forEach(e=>{this.addPendingMutation(e)})}setOnlineState(e){this.persistOnlineState(e)}notifyBundleLoaded(e){this.persistBundleLoadedState(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.storageListener),this.removeItem(this.localClientStorageKey),this.started=!1)}getItem(e){let t=this.storage.getItem(e);return hD(w3,"READ",e,t),t}setItem(e,t){hD(w3,"SET",e,t),this.storage.setItem(e,t)}removeItem(e){hD(w3,"REMOVE",e),this.storage.removeItem(e)}handleWebStorageEvent(e){let t=e;if(t.storageArea===this.storage){if(hD(w3,"EVENT",t.key,t.newValue),t.key===this.localClientStorageKey)return void hO("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.queue.enqueueRetryable(async()=>{if(!this.started)return void this.earlyEvents.push(t);if(null!==t.key){if(this.clientStateKeyRe.test(t.key))if(null!=t.newValue){let e=this.fromWebStorageClientState(t.key,t.newValue);if(e)return this.handleClientStateEvent(e.clientId,e)}else{let e=this.fromWebStorageClientStateKey(t.key);return this.handleClientStateEvent(e,null)}else if(this.mutationBatchKeyRe.test(t.key)){if(null!==t.newValue){let e=this.fromWebStorageMutationMetadata(t.key,t.newValue);if(e)return this.handleMutationBatchEvent(e)}}else if(this.queryTargetKeyRe.test(t.key)){if(null!==t.newValue){let e=this.fromWebStorageQueryTargetMetadata(t.key,t.newValue);if(e)return this.handleQueryTargetEvent(e)}}else if(t.key===this.onlineStateKey){if(null!==t.newValue){let e=this.fromWebStorageOnlineState(t.newValue);if(e)return this.handleOnlineStateEvent(e)}}else if(t.key===this.sequenceNumberKey){let e=Ce(t.newValue);e!==dH.INVALID&&this.sequenceNumberHandler(e)}else if(t.key===this.bundleLoadedKey){let e=this.fromWebStoreBundleLoadedState(t.newValue);await Promise.all(e.map(e=>this.syncEngine.synchronizeWithChangedDocuments(e)))}}})}}get localClientState(){return this.activeClients.get(this.localClientId)}persistClientState(){this.setItem(this.localClientStorageKey,this.localClientState.toWebStorageJSON())}persistMutationState(e,t,r){let n=new w6(this.currentUser,e,t,r),i=wW(this.persistenceKey,this.currentUser,e);this.setItem(i,n.toWebStorageJSON())}removeMutationState(e){let t=wW(this.persistenceKey,this.currentUser,e);this.removeItem(t)}persistOnlineState(e){let t={clientId:this.localClientId,onlineState:e};this.storage.setItem(this.onlineStateKey,JSON.stringify(t))}persistQueryTargetState(e,t,r){let n=wY(this.persistenceKey,e),i=new w4(e,t,r);this.setItem(n,i.toWebStorageJSON())}persistBundleLoadedState(e){let t=JSON.stringify(Array.from(e));this.setItem(this.bundleLoadedKey,t)}fromWebStorageClientStateKey(e){let t=this.clientStateKeyRe.exec(e);return t?t[1]:null}fromWebStorageClientState(e,t){let r=this.fromWebStorageClientStateKey(e);return w5.fromWebStorageEntry(r,t)}fromWebStorageMutationMetadata(e,t){let r=this.mutationBatchKeyRe.exec(e),n=Number(r[1]),i=void 0!==r[2]?r[2]:null;return w6.fromWebStorageEntry(new h_(i),n,t)}fromWebStorageQueryTargetMetadata(e,t){let r=Number(this.queryTargetKeyRe.exec(e)[1]);return w4.fromWebStorageEntry(r,t)}fromWebStorageOnlineState(e){return w8.fromWebStorageEntry(e)}fromWebStoreBundleLoadedState(e){return JSON.parse(e)}async handleMutationBatchEvent(e){return e.user.uid!==this.currentUser.uid?void hD(w3,`Ignoring mutation for non-active user ${e.user.uid}`):this.syncEngine.applyBatchState(e.batchId,e.state,e.error)}handleQueryTargetEvent(e){return this.syncEngine.applyTargetState(e.targetId,e.state,e.error)}handleClientStateEvent(e,t){let r=t?this.activeClients.insert(e,t):this.activeClients.remove(e),n=this.extractActiveQueryTargets(this.activeClients),i=this.extractActiveQueryTargets(r),s=[],a=[];return i.forEach(e=>{n.has(e)||s.push(e)}),n.forEach(e=>{i.has(e)||a.push(e)}),this.syncEngine.applyActiveTargetsChange(s,a).then(()=>{this.activeClients=r})}handleOnlineStateEvent(e){this.activeClients.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}extractActiveQueryTargets(e){let t=gX();return e.forEach((e,r)=>{t=t.unionWith(r.activeTargetIds)}),t}}function Ce(e){let t=dH.INVALID;if(null!=e)try{let r=JSON.parse(e);hj("number"==typeof r,30636,{seqString:e}),t=r}catch(e){hO(w3,"Failed to read sequence number from WebStorage",e)}return t}class Ct{constructor(){this.localState=new w7,this.queryState={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.localState.addQueryTarget(e),this.queryState[e]||"not-current"}updateQueryState(e,t,r){this.queryState[e]=t}removeLocalQueryTarget(e){this.localState.removeQueryTarget(e)}isLocalQueryTarget(e){return this.localState.activeTargetIds.has(e)}clearQueryState(e){delete this.queryState[e]}getAllActiveQueryTargets(){return this.localState.activeTargetIds}isActiveQueryTarget(e){return this.localState.activeTargetIds.has(e)}start(){return this.localState=new w7,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Cr{addCallback(e){}shutdown(){}}class Cn{constructor(e){this.sendFn=e.sendFn,this.closeFn=e.closeFn}onConnected(e){this.wrappedOnConnected=e}onOpen(e){this.wrappedOnOpen=e}onClose(e){this.wrappedOnClose=e}onMessage(e){this.wrappedOnMessage=e}close(){this.closeFn()}send(e){this.sendFn(e)}callOnConnected(){this.wrappedOnConnected()}callOnOpen(){this.wrappedOnOpen()}callOnClose(e){this.wrappedOnClose(e)}callOnMessage(e){this.wrappedOnMessage(e)}}let Ci=null;function Cs(){return 0x10000000+Math.round(0x80000000*Math.random())}function Ca(){return null===Ci?Ci=Cs():Ci++,"0x"+Ci.toString(16)}function Co(e){return new Promise((t,r)=>{e((e,n)=>{e?r(e):t(n)})})}let Cl="1.9.15",Cu="GrpcConnection",Cc=`gl-node/${process.versions.node} fire/${hI} grpc/${Cl}`;function Ch(e,t,r,n){hj(null===t||"OAuth"===t.type,36936);let i=new hw.OS;return t&&t.headers.forEach((e,t)=>i.set(t,e)),r&&r.headers.forEach((e,t)=>i.set(t,e)),n&&i.set("X-Firebase-GMPID",n),i.set("X-Goog-Api-Client",Cc),i.set("Google-Cloud-Resource-Prefix",e),i.set("x-goog-request-params",e),i}class Cd{get shouldResourcePathBeIncludedInRequest(){return!0}constructor(e,t){this.databaseInfo=t,this.cachedStub=null,this.firestore=e.google.firestore.v1,this.databasePath=`projects/${t.databaseId.projectId}/databases/${t.databaseId.database}`}ensureActiveStub(){if(!this.cachedStub){hD(Cu,"Creating Firestore stub.");let e=this.databaseInfo.ssl?hw.z3.createSsl():hw.z3.createInsecure();this.cachedStub=new this.firestore.Firestore(this.databaseInfo.host,e)}return this.cachedStub}invokeRPC(e,t,r,n,i){let s=Ca(),a=this.ensureActiveStub(),o=Ch(this.databasePath,n,i,this.databaseInfo.appId),l=Object.assign({database:this.databasePath},r);return Co(t=>(hD(Cu,`RPC '${e}' ${s} invoked with request:`,r),a[e](l,o,(r,n)=>{r?(hD(Cu,`RPC '${e}' ${s} failed with error:`,r),t(new hU(yB(r.code),r.message))):(hD(Cu,`RPC '${e}' ${s} completed with response:`,n),t(void 0,n))})))}invokeStreamingRPC(e,t,r,n,i,s){let a=Ca(),o=[],l=new hq;hD(Cu,`RPC '${e}' ${a} invoked (streaming) with request:`,r);let u=this.ensureActiveStub(),c=Ch(this.databasePath,n,i,this.databaseInfo.appId),h=Object.assign(Object.assign({},r),{database:this.databasePath}),d=u[e](h,c),p=!1;return d.on("data",t=>{hD(Cu,`RPC ${e} ${a} received result:`,t),o.push(t),void 0!==s&&o.length===s&&(p=!0,l.resolve(o))}),d.on("end",()=>{hD(Cu,`RPC '${e}' ${a} completed.`),p||(p=!0,l.resolve(o))}),d.on("error",t=>{hD(Cu,`RPC '${e}' ${a} failed with error:`,t);let r=yB(t.code);l.reject(new hU(r,t.message))}),l.promise}openStream(e,t,r){let n=Ca(),i=this.ensureActiveStub(),s=Ch(this.databasePath,t,r,this.databaseInfo.appId),a=i[e](s),o=!1,l=e=>{o||(o=!0,u.callOnClose(e),a.end())},u=new Cn({sendFn:t=>{if(o)hD(Cu,`RPC '${e}' stream ${n} not sending because gRPC stream is closed:`,t);else{hD(Cu,`RPC '${e}' stream ${n} sending:`,t);try{a.write(t)}catch(e){throw hO("Failure sending:",t),hO("Error:",e),e}}},closeFn:()=>{hD(Cu,`RPC '${e}' stream ${n} closed locally via close().`),l()}}),c=!1;return a.on("data",t=>{o||(hD(Cu,`RPC '${e}' stream ${n} received:`,t),c||(u.callOnConnected(),c=!0),u.callOnMessage(t))}),a.on("end",()=>{hD(Cu,`RPC '${e}' stream ${n} ended.`),l()}),a.on("error",t=>{o||(hP(Cu,`RPC '${e}' stream ${n} error. Code:`,t.code,"Message:",t.message),l(new hU(yB(t.code),t.message)))}),hD(Cu,`Opening RPC '${e}' stream ${n} to ${this.databaseInfo.host}`),setTimeout(()=>{u.callOnOpen()},0),u}terminate(){this.cachedStub&&(this.cachedStub.close(),this.cachedStub=void 0)}}let Cp={google:{nested:{protobuf:{options:{csharp_namespace:"Google.Protobuf.WellKnownTypes",go_package:"github.com/golang/protobuf/ptypes/wrappers",java_package:"com.google.protobuf",java_outer_classname:"WrappersProto",java_multiple_files:!0,objc_class_prefix:"GPB",cc_enable_arenas:!0,optimize_for:"SPEED"},nested:{Timestamp:{fields:{seconds:{type:"int64",id:1},nanos:{type:"int32",id:2}}},FileDescriptorSet:{fields:{file:{rule:"repeated",type:"FileDescriptorProto",id:1}}},FileDescriptorProto:{fields:{name:{type:"string",id:1},package:{type:"string",id:2},dependency:{rule:"repeated",type:"string",id:3},publicDependency:{rule:"repeated",type:"int32",id:10,options:{packed:!1}},weakDependency:{rule:"repeated",type:"int32",id:11,options:{packed:!1}},messageType:{rule:"repeated",type:"DescriptorProto",id:4},enumType:{rule:"repeated",type:"EnumDescriptorProto",id:5},service:{rule:"repeated",type:"ServiceDescriptorProto",id:6},extension:{rule:"repeated",type:"FieldDescriptorProto",id:7},options:{type:"FileOptions",id:8},sourceCodeInfo:{type:"SourceCodeInfo",id:9},syntax:{type:"string",id:12}}},DescriptorProto:{fields:{name:{type:"string",id:1},field:{rule:"repeated",type:"FieldDescriptorProto",id:2},extension:{rule:"repeated",type:"FieldDescriptorProto",id:6},nestedType:{rule:"repeated",type:"DescriptorProto",id:3},enumType:{rule:"repeated",type:"EnumDescriptorProto",id:4},extensionRange:{rule:"repeated",type:"ExtensionRange",id:5},oneofDecl:{rule:"repeated",type:"OneofDescriptorProto",id:8},options:{type:"MessageOptions",id:7},reservedRange:{rule:"repeated",type:"ReservedRange",id:9},reservedName:{rule:"repeated",type:"string",id:10}},nested:{ExtensionRange:{fields:{start:{type:"int32",id:1},end:{type:"int32",id:2}}},ReservedRange:{fields:{start:{type:"int32",id:1},end:{type:"int32",id:2}}}}},FieldDescriptorProto:{fields:{name:{type:"string",id:1},number:{type:"int32",id:3},label:{type:"Label",id:4},type:{type:"Type",id:5},typeName:{type:"string",id:6},extendee:{type:"string",id:2},defaultValue:{type:"string",id:7},oneofIndex:{type:"int32",id:9},jsonName:{type:"string",id:10},options:{type:"FieldOptions",id:8}},nested:{Type:{values:{TYPE_DOUBLE:1,TYPE_FLOAT:2,TYPE_INT64:3,TYPE_UINT64:4,TYPE_INT32:5,TYPE_FIXED64:6,TYPE_FIXED32:7,TYPE_BOOL:8,TYPE_STRING:9,TYPE_GROUP:10,TYPE_MESSAGE:11,TYPE_BYTES:12,TYPE_UINT32:13,TYPE_ENUM:14,TYPE_SFIXED32:15,TYPE_SFIXED64:16,TYPE_SINT32:17,TYPE_SINT64:18}},Label:{values:{LABEL_OPTIONAL:1,LABEL_REQUIRED:2,LABEL_REPEATED:3}}}},OneofDescriptorProto:{fields:{name:{type:"string",id:1},options:{type:"OneofOptions",id:2}}},EnumDescriptorProto:{fields:{name:{type:"string",id:1},value:{rule:"repeated",type:"EnumValueDescriptorProto",id:2},options:{type:"EnumOptions",id:3}}},EnumValueDescriptorProto:{fields:{name:{type:"string",id:1},number:{type:"int32",id:2},options:{type:"EnumValueOptions",id:3}}},ServiceDescriptorProto:{fields:{name:{type:"string",id:1},method:{rule:"repeated",type:"MethodDescriptorProto",id:2},options:{type:"ServiceOptions",id:3}}},MethodDescriptorProto:{fields:{name:{type:"string",id:1},inputType:{type:"string",id:2},outputType:{type:"string",id:3},options:{type:"MethodOptions",id:4},clientStreaming:{type:"bool",id:5},serverStreaming:{type:"bool",id:6}}},FileOptions:{fields:{javaPackage:{type:"string",id:1},javaOuterClassname:{type:"string",id:8},javaMultipleFiles:{type:"bool",id:10},javaGenerateEqualsAndHash:{type:"bool",id:20,options:{deprecated:!0}},javaStringCheckUtf8:{type:"bool",id:27},optimizeFor:{type:"OptimizeMode",id:9,options:{default:"SPEED"}},goPackage:{type:"string",id:11},ccGenericServices:{type:"bool",id:16},javaGenericServices:{type:"bool",id:17},pyGenericServices:{type:"bool",id:18},deprecated:{type:"bool",id:23},ccEnableArenas:{type:"bool",id:31},objcClassPrefix:{type:"string",id:36},csharpNamespace:{type:"string",id:37},uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,0x1fffffff]],reserved:[[38,38]],nested:{OptimizeMode:{values:{SPEED:1,CODE_SIZE:2,LITE_RUNTIME:3}}}},MessageOptions:{fields:{messageSetWireFormat:{type:"bool",id:1},noStandardDescriptorAccessor:{type:"bool",id:2},deprecated:{type:"bool",id:3},mapEntry:{type:"bool",id:7},uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,0x1fffffff]],reserved:[[8,8]]},FieldOptions:{fields:{ctype:{type:"CType",id:1,options:{default:"STRING"}},packed:{type:"bool",id:2},jstype:{type:"JSType",id:6,options:{default:"JS_NORMAL"}},lazy:{type:"bool",id:5},deprecated:{type:"bool",id:3},weak:{type:"bool",id:10},uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,0x1fffffff]],reserved:[[4,4]],nested:{CType:{values:{STRING:0,CORD:1,STRING_PIECE:2}},JSType:{values:{JS_NORMAL:0,JS_STRING:1,JS_NUMBER:2}}}},OneofOptions:{fields:{uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,0x1fffffff]]},EnumOptions:{fields:{allowAlias:{type:"bool",id:2},deprecated:{type:"bool",id:3},uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,0x1fffffff]]},EnumValueOptions:{fields:{deprecated:{type:"bool",id:1},uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,0x1fffffff]]},ServiceOptions:{fields:{deprecated:{type:"bool",id:33},uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,0x1fffffff]]},MethodOptions:{fields:{deprecated:{type:"bool",id:33},uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,0x1fffffff]]},UninterpretedOption:{fields:{name:{rule:"repeated",type:"NamePart",id:2},identifierValue:{type:"string",id:3},positiveIntValue:{type:"uint64",id:4},negativeIntValue:{type:"int64",id:5},doubleValue:{type:"double",id:6},stringValue:{type:"bytes",id:7},aggregateValue:{type:"string",id:8}},nested:{NamePart:{fields:{namePart:{rule:"required",type:"string",id:1},isExtension:{rule:"required",type:"bool",id:2}}}}},SourceCodeInfo:{fields:{location:{rule:"repeated",type:"Location",id:1}},nested:{Location:{fields:{path:{rule:"repeated",type:"int32",id:1},span:{rule:"repeated",type:"int32",id:2},leadingComments:{type:"string",id:3},trailingComments:{type:"string",id:4},leadingDetachedComments:{rule:"repeated",type:"string",id:6}}}}},GeneratedCodeInfo:{fields:{annotation:{rule:"repeated",type:"Annotation",id:1}},nested:{Annotation:{fields:{path:{rule:"repeated",type:"int32",id:1},sourceFile:{type:"string",id:2},begin:{type:"int32",id:3},end:{type:"int32",id:4}}}}},Struct:{fields:{fields:{keyType:"string",type:"Value",id:1}}},Value:{oneofs:{kind:{oneof:["nullValue","numberValue","stringValue","boolValue","structValue","listValue"]}},fields:{nullValue:{type:"NullValue",id:1},numberValue:{type:"double",id:2},stringValue:{type:"string",id:3},boolValue:{type:"bool",id:4},structValue:{type:"Struct",id:5},listValue:{type:"ListValue",id:6}}},NullValue:{values:{NULL_VALUE:0}},ListValue:{fields:{values:{rule:"repeated",type:"Value",id:1}}},Empty:{fields:{}},DoubleValue:{fields:{value:{type:"double",id:1}}},FloatValue:{fields:{value:{type:"float",id:1}}},Int64Value:{fields:{value:{type:"int64",id:1}}},UInt64Value:{fields:{value:{type:"uint64",id:1}}},Int32Value:{fields:{value:{type:"int32",id:1}}},UInt32Value:{fields:{value:{type:"uint32",id:1}}},BoolValue:{fields:{value:{type:"bool",id:1}}},StringValue:{fields:{value:{type:"string",id:1}}},BytesValue:{fields:{value:{type:"bytes",id:1}}},Any:{fields:{typeUrl:{type:"string",id:1},value:{type:"bytes",id:2}}}}},firestore:{nested:{v1:{options:{csharp_namespace:"Google.Cloud.Firestore.V1",go_package:"google.golang.org/genproto/googleapis/firestore/v1;firestore",java_multiple_files:!0,java_outer_classname:"WriteProto",java_package:"com.google.firestore.v1",objc_class_prefix:"GCFS",php_namespace:"Google\\Cloud\\Firestore\\V1",ruby_package:"Google::Cloud::Firestore::V1"},nested:{AggregationResult:{fields:{aggregateFields:{keyType:"string",type:"Value",id:2}}},BitSequence:{fields:{bitmap:{type:"bytes",id:1},padding:{type:"int32",id:2}}},BloomFilter:{fields:{bits:{type:"BitSequence",id:1},hashCount:{type:"int32",id:2}}},DocumentMask:{fields:{fieldPaths:{rule:"repeated",type:"string",id:1}}},Precondition:{oneofs:{conditionType:{oneof:["exists","updateTime"]}},fields:{exists:{type:"bool",id:1},updateTime:{type:"google.protobuf.Timestamp",id:2}}},TransactionOptions:{oneofs:{mode:{oneof:["readOnly","readWrite"]}},fields:{readOnly:{type:"ReadOnly",id:2},readWrite:{type:"ReadWrite",id:3}},nested:{ReadWrite:{fields:{retryTransaction:{type:"bytes",id:1}}},ReadOnly:{oneofs:{consistencySelector:{oneof:["readTime"]}},fields:{readTime:{type:"google.protobuf.Timestamp",id:2}}}}},Document:{fields:{name:{type:"string",id:1},fields:{keyType:"string",type:"Value",id:2},createTime:{type:"google.protobuf.Timestamp",id:3},updateTime:{type:"google.protobuf.Timestamp",id:4}}},Value:{oneofs:{valueType:{oneof:["nullValue","booleanValue","integerValue","doubleValue","timestampValue","stringValue","bytesValue","referenceValue","geoPointValue","arrayValue","mapValue"]}},fields:{nullValue:{type:"google.protobuf.NullValue",id:11},booleanValue:{type:"bool",id:1},integerValue:{type:"int64",id:2},doubleValue:{type:"double",id:3},timestampValue:{type:"google.protobuf.Timestamp",id:10},stringValue:{type:"string",id:17},bytesValue:{type:"bytes",id:18},referenceValue:{type:"string",id:5},geoPointValue:{type:"google.type.LatLng",id:8},arrayValue:{type:"ArrayValue",id:9},mapValue:{type:"MapValue",id:6}}},ArrayValue:{fields:{values:{rule:"repeated",type:"Value",id:1}}},MapValue:{fields:{fields:{keyType:"string",type:"Value",id:1}}},Firestore:{options:{"(google.api.default_host)":"firestore.googleapis.com","(google.api.oauth_scopes)":"https://www.googleapis.com/auth/cloud-platform,https://www.googleapis.com/auth/datastore"},methods:{GetDocument:{requestType:"GetDocumentRequest",responseType:"Document",options:{"(google.api.http).get":"/v1/{name=projects/*/databases/*/documents/*/**}"},parsedOptions:[{"(google.api.http)":{get:"/v1/{name=projects/*/databases/*/documents/*/**}"}}]},ListDocuments:{requestType:"ListDocumentsRequest",responseType:"ListDocumentsResponse",options:{"(google.api.http).get":"/v1/{parent=projects/*/databases/*/documents/*/**}/{collection_id}"},parsedOptions:[{"(google.api.http)":{get:"/v1/{parent=projects/*/databases/*/documents/*/**}/{collection_id}"}}]},UpdateDocument:{requestType:"UpdateDocumentRequest",responseType:"Document",options:{"(google.api.http).patch":"/v1/{document.name=projects/*/databases/*/documents/*/**}","(google.api.http).body":"document","(google.api.method_signature)":"document,update_mask"},parsedOptions:[{"(google.api.http)":{patch:"/v1/{document.name=projects/*/databases/*/documents/*/**}",body:"document"}},{"(google.api.method_signature)":"document,update_mask"}]},DeleteDocument:{requestType:"DeleteDocumentRequest",responseType:"google.protobuf.Empty",options:{"(google.api.http).delete":"/v1/{name=projects/*/databases/*/documents/*/**}","(google.api.method_signature)":"name"},parsedOptions:[{"(google.api.http)":{delete:"/v1/{name=projects/*/databases/*/documents/*/**}"}},{"(google.api.method_signature)":"name"}]},BatchGetDocuments:{requestType:"BatchGetDocumentsRequest",responseType:"BatchGetDocumentsResponse",responseStream:!0,options:{"(google.api.http).post":"/v1/{database=projects/*/databases/*}/documents:batchGet","(google.api.http).body":"*"},parsedOptions:[{"(google.api.http)":{post:"/v1/{database=projects/*/databases/*}/documents:batchGet",body:"*"}}]},BeginTransaction:{requestType:"BeginTransactionRequest",responseType:"BeginTransactionResponse",options:{"(google.api.http).post":"/v1/{database=projects/*/databases/*}/documents:beginTransaction","(google.api.http).body":"*","(google.api.method_signature)":"database"},parsedOptions:[{"(google.api.http)":{post:"/v1/{database=projects/*/databases/*}/documents:beginTransaction",body:"*"}},{"(google.api.method_signature)":"database"}]},Commit:{requestType:"CommitRequest",responseType:"CommitResponse",options:{"(google.api.http).post":"/v1/{database=projects/*/databases/*}/documents:commit","(google.api.http).body":"*","(google.api.method_signature)":"database,writes"},parsedOptions:[{"(google.api.http)":{post:"/v1/{database=projects/*/databases/*}/documents:commit",body:"*"}},{"(google.api.method_signature)":"database,writes"}]},Rollback:{requestType:"RollbackRequest",responseType:"google.protobuf.Empty",options:{"(google.api.http).post":"/v1/{database=projects/*/databases/*}/documents:rollback","(google.api.http).body":"*","(google.api.method_signature)":"database,transaction"},parsedOptions:[{"(google.api.http)":{post:"/v1/{database=projects/*/databases/*}/documents:rollback",body:"*"}},{"(google.api.method_signature)":"database,transaction"}]},RunQuery:{requestType:"RunQueryRequest",responseType:"RunQueryResponse",responseStream:!0,options:{"(google.api.http).post":"/v1/{parent=projects/*/databases/*/documents}:runQuery","(google.api.http).body":"*","(google.api.http).additional_bindings.post":"/v1/{parent=projects/*/databases/*/documents/*/**}:runQuery","(google.api.http).additional_bindings.body":"*"},parsedOptions:[{"(google.api.http)":{post:"/v1/{parent=projects/*/databases/*/documents}:runQuery",body:"*",additional_bindings:{post:"/v1/{parent=projects/*/databases/*/documents/*/**}:runQuery",body:"*"}}}]},RunAggregationQuery:{requestType:"RunAggregationQueryRequest",responseType:"RunAggregationQueryResponse",responseStream:!0,options:{"(google.api.http).post":"/v1/{parent=projects/*/databases/*/documents}:runAggregationQuery","(google.api.http).body":"*","(google.api.http).additional_bindings.post":"/v1/{parent=projects/*/databases/*/documents/*/**}:runAggregationQuery","(google.api.http).additional_bindings.body":"*"},parsedOptions:[{"(google.api.http)":{post:"/v1/{parent=projects/*/databases/*/documents}:runAggregationQuery",body:"*",additional_bindings:{post:"/v1/{parent=projects/*/databases/*/documents/*/**}:runAggregationQuery",body:"*"}}}]},PartitionQuery:{requestType:"PartitionQueryRequest",responseType:"PartitionQueryResponse",options:{"(google.api.http).post":"/v1/{parent=projects/*/databases/*/documents}:partitionQuery","(google.api.http).body":"*","(google.api.http).additional_bindings.post":"/v1/{parent=projects/*/databases/*/documents/*/**}:partitionQuery","(google.api.http).additional_bindings.body":"*"},parsedOptions:[{"(google.api.http)":{post:"/v1/{parent=projects/*/databases/*/documents}:partitionQuery",body:"*",additional_bindings:{post:"/v1/{parent=projects/*/databases/*/documents/*/**}:partitionQuery",body:"*"}}}]},Write:{requestType:"WriteRequest",requestStream:!0,responseType:"WriteResponse",responseStream:!0,options:{"(google.api.http).post":"/v1/{database=projects/*/databases/*}/documents:write","(google.api.http).body":"*"},parsedOptions:[{"(google.api.http)":{post:"/v1/{database=projects/*/databases/*}/documents:write",body:"*"}}]},Listen:{requestType:"ListenRequest",requestStream:!0,responseType:"ListenResponse",responseStream:!0,options:{"(google.api.http).post":"/v1/{database=projects/*/databases/*}/documents:listen","(google.api.http).body":"*"},parsedOptions:[{"(google.api.http)":{post:"/v1/{database=projects/*/databases/*}/documents:listen",body:"*"}}]},ListCollectionIds:{requestType:"ListCollectionIdsRequest",responseType:"ListCollectionIdsResponse",options:{"(google.api.http).post":"/v1/{parent=projects/*/databases/*/documents}:listCollectionIds","(google.api.http).body":"*","(google.api.http).additional_bindings.post":"/v1/{parent=projects/*/databases/*/documents/*/**}:listCollectionIds","(google.api.http).additional_bindings.body":"*","(google.api.method_signature)":"parent"},parsedOptions:[{"(google.api.http)":{post:"/v1/{parent=projects/*/databases/*/documents}:listCollectionIds",body:"*",additional_bindings:{post:"/v1/{parent=projects/*/databases/*/documents/*/**}:listCollectionIds",body:"*"}}},{"(google.api.method_signature)":"parent"}]},BatchWrite:{requestType:"BatchWriteRequest",responseType:"BatchWriteResponse",options:{"(google.api.http).post":"/v1/{database=projects/*/databases/*}/documents:batchWrite","(google.api.http).body":"*"},parsedOptions:[{"(google.api.http)":{post:"/v1/{database=projects/*/databases/*}/documents:batchWrite",body:"*"}}]},CreateDocument:{requestType:"CreateDocumentRequest",responseType:"Document",options:{"(google.api.http).post":"/v1/{parent=projects/*/databases/*/documents/**}/{collection_id}","(google.api.http).body":"document"},parsedOptions:[{"(google.api.http)":{post:"/v1/{parent=projects/*/databases/*/documents/**}/{collection_id}",body:"document"}}]}}},GetDocumentRequest:{oneofs:{consistencySelector:{oneof:["transaction","readTime"]}},fields:{name:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},mask:{type:"DocumentMask",id:2},transaction:{type:"bytes",id:3},readTime:{type:"google.protobuf.Timestamp",id:5}}},ListDocumentsRequest:{oneofs:{consistencySelector:{oneof:["transaction","readTime"]}},fields:{parent:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},collectionId:{type:"string",id:2,options:{"(google.api.field_behavior)":"REQUIRED"}},pageSize:{type:"int32",id:3},pageToken:{type:"string",id:4},orderBy:{type:"string",id:6},mask:{type:"DocumentMask",id:7},transaction:{type:"bytes",id:8},readTime:{type:"google.protobuf.Timestamp",id:10},showMissing:{type:"bool",id:12}}},ListDocumentsResponse:{fields:{documents:{rule:"repeated",type:"Document",id:1},nextPageToken:{type:"string",id:2}}},CreateDocumentRequest:{fields:{parent:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},collectionId:{type:"string",id:2,options:{"(google.api.field_behavior)":"REQUIRED"}},documentId:{type:"string",id:3},document:{type:"Document",id:4,options:{"(google.api.field_behavior)":"REQUIRED"}},mask:{type:"DocumentMask",id:5}}},UpdateDocumentRequest:{fields:{document:{type:"Document",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},updateMask:{type:"DocumentMask",id:2},mask:{type:"DocumentMask",id:3},currentDocument:{type:"Precondition",id:4}}},DeleteDocumentRequest:{fields:{name:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},currentDocument:{type:"Precondition",id:2}}},BatchGetDocumentsRequest:{oneofs:{consistencySelector:{oneof:["transaction","newTransaction","readTime"]}},fields:{database:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},documents:{rule:"repeated",type:"string",id:2},mask:{type:"DocumentMask",id:3},transaction:{type:"bytes",id:4},newTransaction:{type:"TransactionOptions",id:5},readTime:{type:"google.protobuf.Timestamp",id:7}}},BatchGetDocumentsResponse:{oneofs:{result:{oneof:["found","missing"]}},fields:{found:{type:"Document",id:1},missing:{type:"string",id:2},transaction:{type:"bytes",id:3},readTime:{type:"google.protobuf.Timestamp",id:4}}},BeginTransactionRequest:{fields:{database:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},options:{type:"TransactionOptions",id:2}}},BeginTransactionResponse:{fields:{transaction:{type:"bytes",id:1}}},CommitRequest:{fields:{database:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},writes:{rule:"repeated",type:"Write",id:2},transaction:{type:"bytes",id:3}}},CommitResponse:{fields:{writeResults:{rule:"repeated",type:"WriteResult",id:1},commitTime:{type:"google.protobuf.Timestamp",id:2}}},RollbackRequest:{fields:{database:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},transaction:{type:"bytes",id:2,options:{"(google.api.field_behavior)":"REQUIRED"}}}},RunQueryRequest:{oneofs:{queryType:{oneof:["structuredQuery"]},consistencySelector:{oneof:["transaction","newTransaction","readTime"]}},fields:{parent:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},structuredQuery:{type:"StructuredQuery",id:2},transaction:{type:"bytes",id:5},newTransaction:{type:"TransactionOptions",id:6},readTime:{type:"google.protobuf.Timestamp",id:7}}},RunQueryResponse:{fields:{transaction:{type:"bytes",id:2},document:{type:"Document",id:1},readTime:{type:"google.protobuf.Timestamp",id:3},skippedResults:{type:"int32",id:4}}},RunAggregationQueryRequest:{oneofs:{queryType:{oneof:["structuredAggregationQuery"]},consistencySelector:{oneof:["transaction","newTransaction","readTime"]}},fields:{parent:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},structuredAggregationQuery:{type:"StructuredAggregationQuery",id:2},transaction:{type:"bytes",id:4},newTransaction:{type:"TransactionOptions",id:5},readTime:{type:"google.protobuf.Timestamp",id:6}}},RunAggregationQueryResponse:{fields:{result:{type:"AggregationResult",id:1},transaction:{type:"bytes",id:2},readTime:{type:"google.protobuf.Timestamp",id:3}}},PartitionQueryRequest:{oneofs:{queryType:{oneof:["structuredQuery"]}},fields:{parent:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},structuredQuery:{type:"StructuredQuery",id:2},partitionCount:{type:"int64",id:3},pageToken:{type:"string",id:4},pageSize:{type:"int32",id:5}}},PartitionQueryResponse:{fields:{partitions:{rule:"repeated",type:"Cursor",id:1},nextPageToken:{type:"string",id:2}}},WriteRequest:{fields:{database:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},streamId:{type:"string",id:2},writes:{rule:"repeated",type:"Write",id:3},streamToken:{type:"bytes",id:4},labels:{keyType:"string",type:"string",id:5}}},WriteResponse:{fields:{streamId:{type:"string",id:1},streamToken:{type:"bytes",id:2},writeResults:{rule:"repeated",type:"WriteResult",id:3},commitTime:{type:"google.protobuf.Timestamp",id:4}}},ListenRequest:{oneofs:{targetChange:{oneof:["addTarget","removeTarget"]}},fields:{database:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},addTarget:{type:"Target",id:2},removeTarget:{type:"int32",id:3},labels:{keyType:"string",type:"string",id:4}}},ListenResponse:{oneofs:{responseType:{oneof:["targetChange","documentChange","documentDelete","documentRemove","filter"]}},fields:{targetChange:{type:"TargetChange",id:2},documentChange:{type:"DocumentChange",id:3},documentDelete:{type:"DocumentDelete",id:4},documentRemove:{type:"DocumentRemove",id:6},filter:{type:"ExistenceFilter",id:5}}},Target:{oneofs:{targetType:{oneof:["query","documents"]},resumeType:{oneof:["resumeToken","readTime"]}},fields:{query:{type:"QueryTarget",id:2},documents:{type:"DocumentsTarget",id:3},resumeToken:{type:"bytes",id:4},readTime:{type:"google.protobuf.Timestamp",id:11},targetId:{type:"int32",id:5},once:{type:"bool",id:6},expectedCount:{type:"google.protobuf.Int32Value",id:12}},nested:{DocumentsTarget:{fields:{documents:{rule:"repeated",type:"string",id:2}}},QueryTarget:{oneofs:{queryType:{oneof:["structuredQuery"]}},fields:{parent:{type:"string",id:1},structuredQuery:{type:"StructuredQuery",id:2}}}}},TargetChange:{fields:{targetChangeType:{type:"TargetChangeType",id:1},targetIds:{rule:"repeated",type:"int32",id:2},cause:{type:"google.rpc.Status",id:3},resumeToken:{type:"bytes",id:4},readTime:{type:"google.protobuf.Timestamp",id:6}},nested:{TargetChangeType:{values:{NO_CHANGE:0,ADD:1,REMOVE:2,CURRENT:3,RESET:4}}}},ListCollectionIdsRequest:{fields:{parent:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},pageSize:{type:"int32",id:2},pageToken:{type:"string",id:3}}},ListCollectionIdsResponse:{fields:{collectionIds:{rule:"repeated",type:"string",id:1},nextPageToken:{type:"string",id:2}}},BatchWriteRequest:{fields:{database:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},writes:{rule:"repeated",type:"Write",id:2},labels:{keyType:"string",type:"string",id:3}}},BatchWriteResponse:{fields:{writeResults:{rule:"repeated",type:"WriteResult",id:1},status:{rule:"repeated",type:"google.rpc.Status",id:2}}},StructuredQuery:{fields:{select:{type:"Projection",id:1},from:{rule:"repeated",type:"CollectionSelector",id:2},where:{type:"Filter",id:3},orderBy:{rule:"repeated",type:"Order",id:4},startAt:{type:"Cursor",id:7},endAt:{type:"Cursor",id:8},offset:{type:"int32",id:6},limit:{type:"google.protobuf.Int32Value",id:5}},nested:{CollectionSelector:{fields:{collectionId:{type:"string",id:2},allDescendants:{type:"bool",id:3}}},Filter:{oneofs:{filterType:{oneof:["compositeFilter","fieldFilter","unaryFilter"]}},fields:{compositeFilter:{type:"CompositeFilter",id:1},fieldFilter:{type:"FieldFilter",id:2},unaryFilter:{type:"UnaryFilter",id:3}}},CompositeFilter:{fields:{op:{type:"Operator",id:1},filters:{rule:"repeated",type:"Filter",id:2}},nested:{Operator:{values:{OPERATOR_UNSPECIFIED:0,AND:1,OR:2}}}},FieldFilter:{fields:{field:{type:"FieldReference",id:1},op:{type:"Operator",id:2},value:{type:"Value",id:3}},nested:{Operator:{values:{OPERATOR_UNSPECIFIED:0,LESS_THAN:1,LESS_THAN_OR_EQUAL:2,GREATER_THAN:3,GREATER_THAN_OR_EQUAL:4,EQUAL:5,NOT_EQUAL:6,ARRAY_CONTAINS:7,IN:8,ARRAY_CONTAINS_ANY:9,NOT_IN:10}}}},UnaryFilter:{oneofs:{operandType:{oneof:["field"]}},fields:{op:{type:"Operator",id:1},field:{type:"FieldReference",id:2}},nested:{Operator:{values:{OPERATOR_UNSPECIFIED:0,IS_NAN:2,IS_NULL:3,IS_NOT_NAN:4,IS_NOT_NULL:5}}}},Order:{fields:{field:{type:"FieldReference",id:1},direction:{type:"Direction",id:2}}},FieldReference:{fields:{fieldPath:{type:"string",id:2}}},Projection:{fields:{fields:{rule:"repeated",type:"FieldReference",id:2}}},Direction:{values:{DIRECTION_UNSPECIFIED:0,ASCENDING:1,DESCENDING:2}}}},StructuredAggregationQuery:{oneofs:{queryType:{oneof:["structuredQuery"]}},fields:{structuredQuery:{type:"StructuredQuery",id:1},aggregations:{rule:"repeated",type:"Aggregation",id:3}},nested:{Aggregation:{oneofs:{operator:{oneof:["count","sum","avg"]}},fields:{count:{type:"Count",id:1},sum:{type:"Sum",id:2},avg:{type:"Avg",id:3},alias:{type:"string",id:7}},nested:{Count:{fields:{upTo:{type:"google.protobuf.Int64Value",id:1}}},Sum:{fields:{field:{type:"FieldReference",id:1}}},Avg:{fields:{field:{type:"FieldReference",id:1}}}}}}},Cursor:{fields:{values:{rule:"repeated",type:"Value",id:1},before:{type:"bool",id:2}}},Write:{oneofs:{operation:{oneof:["update","delete","verify","transform"]}},fields:{update:{type:"Document",id:1},delete:{type:"string",id:2},verify:{type:"string",id:5},transform:{type:"DocumentTransform",id:6},updateMask:{type:"DocumentMask",id:3},updateTransforms:{rule:"repeated",type:"DocumentTransform.FieldTransform",id:7},currentDocument:{type:"Precondition",id:4}}},DocumentTransform:{fields:{document:{type:"string",id:1},fieldTransforms:{rule:"repeated",type:"FieldTransform",id:2}},nested:{FieldTransform:{oneofs:{transformType:{oneof:["setToServerValue","increment","maximum","minimum","appendMissingElements","removeAllFromArray"]}},fields:{fieldPath:{type:"string",id:1},setToServerValue:{type:"ServerValue",id:2},increment:{type:"Value",id:3},maximum:{type:"Value",id:4},minimum:{type:"Value",id:5},appendMissingElements:{type:"ArrayValue",id:6},removeAllFromArray:{type:"ArrayValue",id:7}},nested:{ServerValue:{values:{SERVER_VALUE_UNSPECIFIED:0,REQUEST_TIME:1}}}}}},WriteResult:{fields:{updateTime:{type:"google.protobuf.Timestamp",id:1},transformResults:{rule:"repeated",type:"Value",id:2}}},DocumentChange:{fields:{document:{type:"Document",id:1},targetIds:{rule:"repeated",type:"int32",id:5},removedTargetIds:{rule:"repeated",type:"int32",id:6}}},DocumentDelete:{fields:{document:{type:"string",id:1},removedTargetIds:{rule:"repeated",type:"int32",id:6},readTime:{type:"google.protobuf.Timestamp",id:4}}},DocumentRemove:{fields:{document:{type:"string",id:1},removedTargetIds:{rule:"repeated",type:"int32",id:2},readTime:{type:"google.protobuf.Timestamp",id:4}}},ExistenceFilter:{fields:{targetId:{type:"int32",id:1},count:{type:"int32",id:2},unchangedNames:{type:"BloomFilter",id:3}}}}}}},api:{options:{go_package:"google.golang.org/genproto/googleapis/api/annotations;annotations",java_multiple_files:!0,java_outer_classname:"HttpProto",java_package:"com.google.api",objc_class_prefix:"GAPI",cc_enable_arenas:!0},nested:{http:{type:"HttpRule",id:0x44f2530,extend:"google.protobuf.MethodOptions"},Http:{fields:{rules:{rule:"repeated",type:"HttpRule",id:1}}},HttpRule:{oneofs:{pattern:{oneof:["get","put","post","delete","patch","custom"]}},fields:{get:{type:"string",id:2},put:{type:"string",id:3},post:{type:"string",id:4},delete:{type:"string",id:5},patch:{type:"string",id:6},custom:{type:"CustomHttpPattern",id:8},selector:{type:"string",id:1},body:{type:"string",id:7},additionalBindings:{rule:"repeated",type:"HttpRule",id:11}}},CustomHttpPattern:{fields:{kind:{type:"string",id:1},path:{type:"string",id:2}}},methodSignature:{rule:"repeated",type:"string",id:1051,extend:"google.protobuf.MethodOptions"},defaultHost:{type:"string",id:1049,extend:"google.protobuf.ServiceOptions"},oauthScopes:{type:"string",id:1050,extend:"google.protobuf.ServiceOptions"},fieldBehavior:{rule:"repeated",type:"google.api.FieldBehavior",id:1052,extend:"google.protobuf.FieldOptions"},FieldBehavior:{values:{FIELD_BEHAVIOR_UNSPECIFIED:0,OPTIONAL:1,REQUIRED:2,OUTPUT_ONLY:3,INPUT_ONLY:4,IMMUTABLE:5,UNORDERED_LIST:6,NON_EMPTY_DEFAULT:7}}}},type:{options:{cc_enable_arenas:!0,go_package:"google.golang.org/genproto/googleapis/type/latlng;latlng",java_multiple_files:!0,java_outer_classname:"LatLngProto",java_package:"com.google.type",objc_class_prefix:"GTP"},nested:{LatLng:{fields:{latitude:{type:"double",id:1},longitude:{type:"double",id:2}}}}},rpc:{options:{cc_enable_arenas:!0,go_package:"google.golang.org/genproto/googleapis/rpc/status;status",java_multiple_files:!0,java_outer_classname:"StatusProto",java_package:"com.google.rpc",objc_class_prefix:"RPC"},nested:{Status:{fields:{code:{type:"int32",id:1},message:{type:"string",id:2},details:{rule:"repeated",type:"google.protobuf.Any",id:3}}}}}}}};var Cf={nested:Cp},Cm=Object.freeze({__proto__:null,nested:Cp,default:Cf});let Cg={longs:String,enums:String,defaults:!0,oneofs:!1};function Cy(){let e=hC.rS(Cm,Cg);return hw.ex(e)}function Cv(e){return new Cd(Cy(),e)}function Cb(){return new Cr}function CS(){return"YES"===process.env.USE_MOCK_PERSISTENCE?window:null}function CT(){return null}function Cw(e){return new y5(e,!1)}let CC="ExponentialBackoff",Cx=1e3,CE=1.5,C_=6e4;class CI{constructor(e,t,r=Cx,n=CE,i=C_){this.queue=e,this.timerId=t,this.initialDelayMs=r,this.backoffFactor=n,this.maxDelayMs=i,this.currentBaseMs=0,this.timerPromise=null,this.lastAttemptTime=Date.now(),this.reset()}reset(){this.currentBaseMs=0}resetToMax(){this.currentBaseMs=this.maxDelayMs}backoffAndRun(e){this.cancel();let t=Math.floor(this.currentBaseMs+this.jitterDelayMs()),r=Math.max(0,Date.now()-this.lastAttemptTime),n=Math.max(0,t-r);n>0&&hD(CC,`Backing off for ${n} ms (base delay: ${this.currentBaseMs} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.timerPromise=this.queue.enqueueAfterDelay(this.timerId,n,()=>(this.lastAttemptTime=Date.now(),e())),this.currentBaseMs*=this.backoffFactor,this.currentBaseMs<this.initialDelayMs&&(this.currentBaseMs=this.initialDelayMs),this.currentBaseMs>this.maxDelayMs&&(this.currentBaseMs=this.maxDelayMs)}skipBackoff(){null!==this.timerPromise&&(this.timerPromise.skipDelay(),this.timerPromise=null)}cancel(){null!==this.timerPromise&&(this.timerPromise.cancel(),this.timerPromise=null)}jitterDelayMs(){return(Math.random()-.5)*this.currentBaseMs}}let Ck="PersistentStream",CA=6e4,CR=1e4;class CN{constructor(e,t,r,n,i,s,a,o){this.queue=e,this.idleTimerId=r,this.healthTimerId=n,this.connection=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=o,this.state=0,this.closeCount=0,this.idleTimer=null,this.healthCheck=null,this.stream=null,this.responseCount=0,this.backoff=new CI(e,t)}isStarted(){return 1===this.state||5===this.state||this.isOpen()}isOpen(){return 2===this.state||3===this.state}start(){if(this.responseCount=0,4===this.state)return void this.performBackoff();this.auth()}async stop(){this.isStarted()&&await this.close(0)}inhibitBackoff(){this.state=0,this.backoff.reset()}markIdle(){this.isOpen()&&null===this.idleTimer&&(this.idleTimer=this.queue.enqueueAfterDelay(this.idleTimerId,CA,()=>this.handleIdleCloseTimer()))}sendRequest(e){this.cancelIdleCheck(),this.stream.send(e)}async handleIdleCloseTimer(){if(this.isOpen())return this.close(0)}cancelIdleCheck(){this.idleTimer&&(this.idleTimer.cancel(),this.idleTimer=null)}cancelHealthCheck(){this.healthCheck&&(this.healthCheck.cancel(),this.healthCheck=null)}async close(e,t){this.cancelIdleCheck(),this.cancelHealthCheck(),this.backoff.cancel(),this.closeCount++,4!==e?this.backoff.reset():t&&t.code===hV.RESOURCE_EXHAUSTED?(hO(t.toString()),hO("Using maximum backoff delay to prevent overloading the backend."),this.backoff.resetToMax()):t&&t.code===hV.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.tearDown(),this.stream.close(),this.stream=null),this.state=e,await this.listener.onClose(t)}tearDown(){}auth(){this.state=1;let e=this.getCloseGuardedDispatcher(this.closeCount),t=this.closeCount;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([e,r])=>{this.closeCount===t&&this.startStream(e,r)},t=>{e(()=>{let e=new hU(hV.UNKNOWN,"Fetching auth token failed: "+t.message);return this.handleStreamClose(e)})})}startStream(e,t){let r=this.getCloseGuardedDispatcher(this.closeCount);this.stream=this.startRpc(e,t),this.stream.onConnected(()=>{r(()=>this.listener.onConnected())}),this.stream.onOpen(()=>{r(()=>(this.state=2,this.healthCheck=this.queue.enqueueAfterDelay(this.healthTimerId,CR,()=>(this.isOpen()&&(this.state=3),Promise.resolve())),this.listener.onOpen()))}),this.stream.onClose(e=>{r(()=>this.handleStreamClose(e))}),this.stream.onMessage(e=>{r(()=>1==++this.responseCount?this.onFirst(e):this.onNext(e))})}performBackoff(){this.state=5,this.backoff.backoffAndRun(async()=>{this.state=0,this.start()})}handleStreamClose(e){return hD(Ck,`close with error: ${e}`),this.stream=null,this.close(4,e)}getCloseGuardedDispatcher(e){return t=>{this.queue.enqueueAndForget(()=>this.closeCount===e?t():(hD(Ck,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class CD extends CN{constructor(e,t,r,n,i,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,n,s),this.serializer=i}startRpc(e,t){return this.connection.openStream("Listen",e,t)}onFirst(e){return this.onNext(e)}onNext(e){this.backoff.reset();let t=vw(this.serializer,e),r=vx(e);return this.listener.onWatchChange(t,r)}watch(e){let t={};t.database=vp(this.serializer),t.addTarget=vU(this.serializer,e);let r=vF(this.serializer,e);r&&(t.labels=r),this.sendRequest(t)}unwatch(e){let t={};t.database=vp(this.serializer),t.removeTarget=e,this.sendRequest(t)}}class CO extends CN{constructor(e,t,r,n,i,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,n,s),this.serializer=i}get handshakeComplete(){return this.responseCount>0}start(){this.lastStreamToken=void 0,super.start()}tearDown(){this.handshakeComplete&&this.writeMutations([])}startRpc(e,t){return this.connection.openStream("Write",e,t)}onFirst(e){return hj(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,hj(!e.writeResults||0===e.writeResults.length,55816),this.listener.onHandshakeComplete()}onNext(e){hj(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.backoff.reset();let t=vR(e.writeResults,e.commitTime),r=vs(e.commitTime);return this.listener.onMutationResult(r,t)}writeHandshake(){let e={};e.database=vp(this.serializer),this.sendRequest(e)}writeMutations(e){let t={streamToken:this.lastStreamToken,writes:e.map(e=>vE(this.serializer,e))};this.sendRequest(t)}}class CP{}class CM extends CP{constructor(e,t,r,n){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=n,this.terminated=!1}verifyInitialized(){if(this.terminated)throw new hU(hV.FAILED_PRECONDITION,"The client has already been terminated.")}invokeRPC(e,t,r,n){return this.verifyInitialized(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.connection.invokeRPC(e,vo(t,r),n,i,s)).catch(e=>{if("FirebaseError"===e.name)throw e.code===hV.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e;throw new hU(hV.UNKNOWN,e.toString())})}invokeStreamingRPC(e,t,r,n,i){return this.verifyInitialized(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.invokeStreamingRPC(e,vo(t,r),n,s,a,i)).catch(e=>{if("FirebaseError"===e.name)throw e.code===hV.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e;throw new hU(hV.UNKNOWN,e.toString())})}terminate(){this.terminated=!0,this.connection.terminate()}}function CL(e,t,r,n){return new CM(e,t,r,n)}async function CB(e,t){let r=hF(e),n={writes:t.map(e=>vE(r.serializer,e))};await r.invokeRPC("Commit",r.serializer.databaseId,di.emptyPath(),n)}async function Cj(e,t){let r=hF(e),n={documents:t.map(e=>vu(r.serializer,e))},i=await r.invokeStreamingRPC("BatchGetDocuments",r.serializer.databaseId,di.emptyPath(),n,t.length),s=new Map;i.forEach(e=>{let t=vT(r.serializer,e);s.set(t.key.toString(),t)});let a=[];return t.forEach(e=>{let t=s.get(e.toString());hj(!!t,55234,{key:e}),a.push(t)}),a}async function CF(e,t,r){var n;let i=hF(e),{request:s,aliasMap:a,parent:o}=vL(i.serializer,gb(t),r);i.connection.shouldResourcePathBeIncludedInRequest||delete s.parent;let l=(await i.invokeStreamingRPC("RunAggregationQuery",i.serializer.databaseId,o,s,1)).filter(e=>!!e.result);hj(1===l.length,64727);let u=null==(n=l[0].result)?void 0:n.aggregateFields;return Object.keys(u).reduce((e,t)=>(e[a[t]]=u[t],e),{})}function CV(e,t,r){let n=hF(e);return n.verifyInitialized(),new CO(t,n.connection,n.authCredentials,n.appCheckCredentials,n.serializer,r)}function CU(e,t,r){let n=hF(e);return n.verifyInitialized(),new CD(t,n.connection,n.authCredentials,n.appCheckCredentials,n.serializer,r)}let Cq="OnlineStateTracker",Cz=1,C$=1e4;class CG{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.watchStreamFailures=0,this.onlineStateTimer=null,this.shouldWarnClientIsOffline=!0}handleWatchStreamStart(){0===this.watchStreamFailures&&(this.setAndBroadcast("Unknown"),this.onlineStateTimer=this.asyncQueue.enqueueAfterDelay("online_state_timeout",C$,()=>(this.onlineStateTimer=null,this.logClientOfflineWarningIfNecessary(`Backend didn't respond within ${C$/1e3} seconds.`),this.setAndBroadcast("Offline"),Promise.resolve())))}handleWatchStreamFailure(e){"Online"===this.state?this.setAndBroadcast("Unknown"):(this.watchStreamFailures++,this.watchStreamFailures>=Cz&&(this.clearOnlineStateTimer(),this.logClientOfflineWarningIfNecessary(`Connection failed ${Cz} times. Most recent error: ${e.toString()}`),this.setAndBroadcast("Offline")))}set(e){this.clearOnlineStateTimer(),this.watchStreamFailures=0,"Online"===e&&(this.shouldWarnClientIsOffline=!1),this.setAndBroadcast(e)}setAndBroadcast(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}logClientOfflineWarningIfNecessary(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.shouldWarnClientIsOffline?(hO(t),this.shouldWarnClientIsOffline=!1):hD(Cq,t)}clearOnlineStateTimer(){null!==this.onlineStateTimer&&(this.onlineStateTimer.cancel(),this.onlineStateTimer=null)}}let CH="RemoteStore",CK=10;class CW{constructor(e,t,r,n,i){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.writePipeline=[],this.listenTargets=new Map,this.offlineCauses=new Set,this.onNetworkStatusChange=[],this.connectivityMonitor=i,this.connectivityMonitor.addCallback(e=>{r.enqueueAndForget(async()=>{C8(this)&&(hD(CH,"Restarting streams for network reachability change."),await xy(this))})}),this.onlineStateTracker=new CG(r,n)}}function CQ(e,t,r,n,i){return new CW(e,t,r,n,i)}function CY(e){let t=hF(e);return t.offlineCauses.delete(0),CJ(t)}async function CJ(e){if(C8(e))for(let t of e.onNetworkStatusChange)await t(!0)}async function CX(e){let t=hF(e);t.offlineCauses.add(0),await CZ(t),t.onlineStateTracker.set("Offline")}async function CZ(e){for(let t of e.onNetworkStatusChange)await t(!1)}async function C0(e){let t=hF(e);hD(CH,"RemoteStore shutting down."),t.offlineCauses.add(5),await CZ(t),t.connectivityMonitor.shutdown(),t.onlineStateTracker.set("Unknown")}function C1(e,t){let r=hF(e);!r.listenTargets.has(t.targetId)&&(r.listenTargets.set(t.targetId,t),C5(r)?C4(r):xS(r).isOpen()&&C3(r,t))}function C2(e,t){let r=hF(e),n=xS(r);r.listenTargets.delete(t),n.isOpen()&&C6(r,t),0===r.listenTargets.size&&(n.isOpen()?n.markIdle():C8(r)&&r.onlineStateTracker.set("Unknown"))}function C3(e,t){if(e.watchChangeAggregator.recordPendingTargetRequest(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(dt.min())>0){let r=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(r)}xS(e).watch(t)}function C6(e,t){e.watchChangeAggregator.recordPendingTargetRequest(t),xS(e).unwatch(t)}function C4(e){e.watchChangeAggregator=new yZ({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),getTargetDataForTarget:t=>e.listenTargets.get(t)||null,getDatabaseId:()=>e.datastore.serializer.databaseId}),xS(e).start(),e.onlineStateTracker.handleWatchStreamStart()}function C5(e){return C8(e)&&!xS(e).isStarted()&&e.listenTargets.size>0}function C8(e){return 0===hF(e).offlineCauses.size}function C7(e){e.watchChangeAggregator=void 0}async function C9(e){e.onlineStateTracker.set("Online")}async function xe(e){e.listenTargets.forEach((t,r)=>{C3(e,t)})}async function xt(e,t){C7(e),C5(e)?(e.onlineStateTracker.handleWatchStreamFailure(t),C4(e)):e.onlineStateTracker.set("Unknown")}async function xr(e,t,r){if(e.onlineStateTracker.set("Online"),t instanceof yY&&2===t.state&&t.cause){try{await xa(e,t)}catch(r){hD(CH,"Failed to remove targets %s: %s ",t.targetIds.join(","),r),await xn(e,r)}return}if(t instanceof yW?e.watchChangeAggregator.handleDocumentChange(t):t instanceof yQ?e.watchChangeAggregator.handleExistenceFilter(t):e.watchChangeAggregator.handleTargetChange(t),!r.isEqual(dt.min()))try{let t=await wf(e.localStore);r.compareTo(t)>=0&&await xs(e,r)}catch(t){hD(CH,"Failed to raise snapshot:",t),await xn(e,t)}}async function xn(e,t,r){if(dM(t))e.offlineCauses.add(1),await CZ(e),e.onlineStateTracker.set("Offline"),r||(r=()=>wf(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{hD(CH,"Retrying IndexedDB access"),await r(),e.offlineCauses.delete(1),await CJ(e)});else throw t}function xi(e,t){return t().catch(r=>xn(e,r,t))}function xs(e,t){let r=e.watchChangeAggregator.createRemoteEvent(t);return r.targetChanges.forEach((r,n)=>{if(r.resumeToken.approximateByteSize()>0){let i=e.listenTargets.get(n);i&&e.listenTargets.set(n,i.withResumeToken(r.resumeToken,t))}}),r.targetMismatches.forEach((t,r)=>{let n=e.listenTargets.get(t);n&&(e.listenTargets.set(t,n.withResumeToken(fp.EMPTY_BYTE_STRING,n.snapshotVersion)),C6(e,t),C3(e,new ba(n.target,t,r,n.sequenceNumber)))}),e.remoteSyncer.applyRemoteEvent(r)}async function xa(e,t){let r=t.cause;for(let n of t.targetIds)e.listenTargets.has(n)&&(await e.remoteSyncer.rejectListen(n,r),e.listenTargets.delete(n),e.watchChangeAggregator.removeTarget(n))}async function xo(e){let t=hF(e),r=xT(t),n=t.writePipeline.length>0?t.writePipeline[t.writePipeline.length-1].batchId:fD;for(;xl(t);)try{let e=await wb(t.localStore,n);if(null===e){0===t.writePipeline.length&&r.markIdle();break}n=e.batchId,xu(t,e)}catch(e){await xn(t,e)}xc(t)&&xh(t)}function xl(e){return C8(e)&&e.writePipeline.length<CK}function xu(e,t){e.writePipeline.push(t);let r=xT(e);r.isOpen()&&r.handshakeComplete&&r.writeMutations(t.mutations)}function xc(e){return C8(e)&&!xT(e).isStarted()&&e.writePipeline.length>0}function xh(e){xT(e).start()}async function xd(e){xT(e).writeHandshake()}async function xp(e){let t=xT(e);for(let r of e.writePipeline)t.writeMutations(r.mutations)}async function xf(e,t,r){let n=e.writePipeline.shift(),i=yD.from(n,t,r);await xi(e,()=>e.remoteSyncer.applySuccessfulWrite(i)),await xo(e)}async function xm(e,t){t&&xT(e).handshakeComplete&&await xg(e,t),xc(e)&&xh(e)}async function xg(e,t){if(yL(t.code)){let r=e.writePipeline.shift();xT(e).inhibitBackoff(),await xi(e,()=>e.remoteSyncer.rejectFailedWrite(r.batchId,t)),await xo(e)}}async function xy(e){let t=hF(e);t.offlineCauses.add(4),await CZ(t),t.onlineStateTracker.set("Unknown"),t.offlineCauses.delete(4),await CJ(t)}async function xv(e,t){let r=hF(e);r.asyncQueue.verifyOperationInProgress(),hD(CH,"RemoteStore received new credentials");let n=C8(r);r.offlineCauses.add(3),await CZ(r),n&&r.onlineStateTracker.set("Unknown"),await r.remoteSyncer.handleCredentialChange(t),r.offlineCauses.delete(3),await CJ(r)}async function xb(e,t){let r=hF(e);t?(r.offlineCauses.delete(2),await CJ(r)):t||(r.offlineCauses.add(2),await CZ(r),r.onlineStateTracker.set("Unknown"))}function xS(e){return e.watchStream||(e.watchStream=CU(e.datastore,e.asyncQueue,{onConnected:C9.bind(null,e),onOpen:xe.bind(null,e),onClose:xt.bind(null,e),onWatchChange:xr.bind(null,e)}),e.onNetworkStatusChange.push(async t=>{t?(e.watchStream.inhibitBackoff(),C5(e)?C4(e):e.onlineStateTracker.set("Unknown")):(await e.watchStream.stop(),C7(e))})),e.watchStream}function xT(e){return e.writeStream||(e.writeStream=CV(e.datastore,e.asyncQueue,{onConnected:()=>Promise.resolve(),onOpen:xd.bind(null,e),onClose:xm.bind(null,e),onHandshakeComplete:xp.bind(null,e),onMutationResult:xf.bind(null,e)}),e.onNetworkStatusChange.push(async t=>{t?(e.writeStream.inhibitBackoff(),await xo(e)):(await e.writeStream.stop(),e.writePipeline.length>0&&(hD(CH,`Stopping write stream with ${e.writePipeline.length} pending writes`),e.writePipeline=[]))})),e.writeStream}let xw="AsyncQueue";class xC{constructor(e,t,r,n,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=n,this.removalCallback=i,this.deferred=new hq,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(e=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,n,i){let s=new xC(e,t,Date.now()+r,n,i);return s.start(r),s}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new hU(hV.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function xx(e,t){if(hO(xw,`${t}: ${e}`),dM(e))return new hU(hV.UNAVAILABLE,`${t}: ${e}`);throw e}class xE{static emptySet(e){return new xE(e.comparator)}constructor(e){e?this.comparator=(t,r)=>e(t,r)||dl.comparator(t.key,r.key):this.comparator=(e,t)=>dl.comparator(e.key,t.key),this.keyedMap=gU(),this.sortedSet=new fr(this.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof xE)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let e=t.getNext().key,n=r.getNext().key;if(!e.isEqual(n))return!1}return!0}toString(){let e=[];return(this.forEach(t=>{e.push(t.toString())}),0===e.length)?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){let r=new xE;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class x_{constructor(){this.changeMap=new fr(dl.comparator)}track(e){let t=e.doc.key,r=this.changeMap.get(t);if(!r){this.changeMap=this.changeMap.insert(t,e);return}0!==e.type&&3===r.type?this.changeMap=this.changeMap.insert(t,e):3===e.type&&1!==r.type?this.changeMap=this.changeMap.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.changeMap=this.changeMap.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.changeMap=this.changeMap.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.changeMap=this.changeMap.remove(t):1===e.type&&2===r.type?this.changeMap=this.changeMap.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.changeMap=this.changeMap.insert(t,{type:2,doc:e.doc}):hL(63341,{change:e,oldChange:r})}getChanges(){let e=[];return this.changeMap.inorderTraversal((t,r)=>{e.push(r)}),e}}class xI{constructor(e,t,r,n,i,s,a,o,l){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=n,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=o,this.hasCachedResults=l}static fromInitialDocuments(e,t,r,n,i){let s=[];return t.forEach(e=>{s.push({type:0,doc:e})}),new xI(e,t,xE.emptySet(t),s,r,n,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(this.fromCache!==e.fromCache||this.hasCachedResults!==e.hasCachedResults||this.syncStateChanged!==e.syncStateChanged||!this.mutatedKeys.isEqual(e.mutatedKeys)||!g_(this.query,e.query)||!this.docs.isEqual(e.docs)||!this.oldDocs.isEqual(e.oldDocs))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let e=0;e<t.length;e++)if(t[e].type!==r[e].type||!t[e].doc.isEqual(r[e].doc))return!1;return!0}}class xk{constructor(){this.viewSnap=void 0,this.listeners=[]}hasRemoteListeners(){return this.listeners.some(e=>e.listensToRemoteStore())}}function xA(){return new xR}class xR{constructor(){this.queries=xN(),this.onlineState="Unknown",this.snapshotsInSyncListeners=new Set}terminate(){xF(this,new hU(hV.ABORTED,"Firestore shutting down"))}}function xN(){return new gB(e=>gI(e),g_)}async function xD(e,t){let r=hF(e),n=3,i=t.query,s=r.queries.get(i);s?!s.hasRemoteListeners()&&t.listensToRemoteStore()&&(n=2):(s=new xk,n=+!t.listensToRemoteStore());try{switch(n){case 0:s.viewSnap=await r.onListen(i,!0);break;case 1:s.viewSnap=await r.onListen(i,!1);break;case 2:await r.onFirstRemoteStoreListen(i)}}catch(r){let e=xx(r,`Initialization of query '${gk(t.query)}' failed`);t.onError(e);return}r.queries.set(i,s),s.listeners.push(t),t.applyOnlineStateChange(r.onlineState),s.viewSnap&&t.onViewSnapshot(s.viewSnap)&&xV(r)}async function xO(e,t){let r=hF(e),n=t.query,i=3,s=r.queries.get(n);if(s){let e=s.listeners.indexOf(t);e>=0&&(s.listeners.splice(e,1),0===s.listeners.length?i=+!t.listensToRemoteStore():!s.hasRemoteListeners()&&t.listensToRemoteStore()&&(i=2))}switch(i){case 0:return r.queries.delete(n),r.onUnlisten(n,!0);case 1:return r.queries.delete(n),r.onUnlisten(n,!1);case 2:return r.onLastRemoteStoreUnlisten(n);default:return}}function xP(e,t){let r=hF(e),n=!1;for(let e of t){let t=e.query,i=r.queries.get(t);if(i){for(let t of i.listeners)t.onViewSnapshot(e)&&(n=!0);i.viewSnap=e}}n&&xV(r)}function xM(e,t,r){let n=hF(e),i=n.queries.get(t);if(i)for(let e of i.listeners)e.onError(r);n.queries.delete(t)}function xL(e,t){let r=hF(e);r.onlineState=t;let n=!1;r.queries.forEach((e,r)=>{for(let e of r.listeners)e.applyOnlineStateChange(t)&&(n=!0)}),n&&xV(r)}function xB(e,t){hF(e).snapshotsInSyncListeners.add(t),t.next()}function xj(e,t){hF(e).snapshotsInSyncListeners.delete(t)}function xF(e,t){let r=hF(e),n=r.queries;r.queries=xN(),n.forEach((e,r)=>{for(let e of r.listeners)e.onError(t)})}function xV(e){e.snapshotsInSyncListeners.forEach(e=>{e.next()})}!function(e){e.Default="default",e.Cache="cache"}(c||(c={}));class xU{constructor(e,t,r){this.query=e,this.queryObserver=t,this.raisedInitialEvent=!1,this.snap=null,this.onlineState="Unknown",this.options=r||{}}onViewSnapshot(e){if(!this.options.includeMetadataChanges){let t=[];for(let r of e.docChanges)3!==r.type&&t.push(r);e=new xI(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.raisedInitialEvent?this.shouldRaiseEvent(e)&&(this.queryObserver.next(e),t=!0):this.shouldRaiseInitialEvent(e,this.onlineState)&&(this.raiseInitialEvent(e),t=!0),this.snap=e,t}onError(e){this.queryObserver.error(e)}applyOnlineStateChange(e){this.onlineState=e;let t=!1;return this.snap&&!this.raisedInitialEvent&&this.shouldRaiseInitialEvent(this.snap,e)&&(this.raiseInitialEvent(this.snap),t=!0),t}shouldRaiseInitialEvent(e,t){if(!e.fromCache||!this.listensToRemoteStore())return!0;let r="Offline"!==t;return(!this.options.waitForSyncWhenOnline||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}shouldRaiseEvent(e){if(e.docChanges.length>0)return!0;let t=this.snap&&this.snap.hasPendingWrites!==e.hasPendingWrites;return(!!e.syncStateChanged||!!t)&&!0===this.options.includeMetadataChanges}raiseInitialEvent(e){e=xI.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.raisedInitialEvent=!0,this.queryObserver.next(e)}listensToRemoteStore(){return this.options.source!==c.Cache}}class xq{constructor(e,t,r,n){this.targetId=e,this.fromCache=t,this.addedKeys=r,this.removedKeys=n}static fromSnapshot(e,t){let r=gY(),n=gY();for(let e of t.docChanges)switch(e.type){case 0:r=r.add(e.doc.key);break;case 1:n=n.add(e.doc.key)}return new xq(e,t.fromCache,r,n)}}class xz{constructor(e){this.serializer=e}toDocumentKey(e){return vc(this.serializer,e)}toMutableDocument(e){return e.metadata.exists?vv(this.serializer,e.document,!1):mx.newNoDocument(this.toDocumentKey(e.metadata.name),this.toSnapshotVersion(e.metadata.readTime))}toSnapshotVersion(e){return vs(e)}}class x${constructor(e,t,r){this.bundleMetadata=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=xG(e)}addSizedElement(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),!e.payload.documentMetadata.exists&&++t;let r=di.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}getQueryDocumentMapping(e){let t=new Map,r=new xz(this.serializer);for(let n of e)if(n.metadata.queries){let e=r.toDocumentKey(n.metadata.name);for(let r of n.metadata.queries){let n=(t.get(r)||gY()).add(e);t.set(r,n)}}return t}async complete(){let e=await wO(this.localStore,new xz(this.serializer),this.documents,this.bundleMetadata.id),t=this.getQueryDocumentMapping(this.documents);for(let e of this.queries)await wB(this.localStore,e,t.get(e.name));return this.progress.taskState="Success",{progress:this.progress,changedCollectionGroups:this.collectionGroups,changedDocs:e}}}function xG(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}function xH(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}class xK{constructor(e){this.key=e}}class xW{constructor(e){this.key=e}}class xQ{constructor(e,t){this.query=e,this._syncedDocuments=t,this.syncState=null,this.hasCachedResults=!1,this.current=!1,this.limboDocuments=gY(),this.mutatedKeys=gY(),this.docComparator=gM(e),this.documentSet=new xE(this.docComparator)}get syncedDocuments(){return this._syncedDocuments}computeDocChanges(e,t){let r=t?t.changeSet:new x_,n=t?t.documentSet:this.documentSet,i=t?t.mutatedKeys:this.mutatedKeys,s=n,a=!1,o="F"===this.query.limitType&&n.size===this.query.limit?n.last():null,l="L"===this.query.limitType&&n.size===this.query.limit?n.first():null;if(e.inorderTraversal((e,t)=>{let u=n.get(e),c=gA(this.query,t)?t:null,h=!!u&&this.mutatedKeys.has(u.key),d=!!c&&(c.hasLocalMutations||this.mutatedKeys.has(c.key)&&c.hasCommittedMutations),p=!1;u&&c?u.data.isEqual(c.data)?h!==d&&(r.track({type:3,doc:c}),p=!0):!this.shouldWaitForSyncedDocument(u,c)&&(r.track({type:2,doc:c}),p=!0,(o&&this.docComparator(c,o)>0||l&&0>this.docComparator(c,l))&&(a=!0)):!u&&c?(r.track({type:0,doc:c}),p=!0):u&&!c&&(r.track({type:1,doc:u}),p=!0,(o||l)&&(a=!0)),p&&(c?(s=s.add(c),i=d?i.add(e):i.delete(e)):(s=s.delete(e),i=i.delete(e)))}),null!==this.query.limit)for(;s.size>this.query.limit;){let e="F"===this.query.limitType?s.last():s.first();s=s.delete(e.key),i=i.delete(e.key),r.track({type:1,doc:e})}return{documentSet:s,changeSet:r,needsRefill:a,mutatedKeys:i}}shouldWaitForSyncedDocument(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,n){let i=this.documentSet;this.documentSet=e.documentSet,this.mutatedKeys=e.mutatedKeys;let s=e.changeSet.getChanges();s.sort((e,t)=>xY(e.type,t.type)||this.docComparator(e.doc,t.doc)),this.applyTargetChange(r),n=null!=n&&n;let a=t&&!n?this.updateLimboDocuments():[],o=+!!(0===this.limboDocuments.size&&this.current&&!n),l=o!==this.syncState;return(this.syncState=o,0!==s.length||l)?{snapshot:new xI(this.query,e.documentSet,i,s,e.mutatedKeys,0===o,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),limboChanges:a}:{limboChanges:a}}applyOnlineStateChange(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({documentSet:this.documentSet,changeSet:new x_,mutatedKeys:this.mutatedKeys,needsRefill:!1},!1)):{limboChanges:[]}}shouldBeInLimbo(e){return!this._syncedDocuments.has(e)&&!!this.documentSet.has(e)&&!this.documentSet.get(e).hasLocalMutations}applyTargetChange(e){e&&(e.addedDocuments.forEach(e=>this._syncedDocuments=this._syncedDocuments.add(e)),e.modifiedDocuments.forEach(e=>{}),e.removedDocuments.forEach(e=>this._syncedDocuments=this._syncedDocuments.delete(e)),this.current=e.current)}updateLimboDocuments(){if(!this.current)return[];let e=this.limboDocuments;this.limboDocuments=gY(),this.documentSet.forEach(e=>{this.shouldBeInLimbo(e.key)&&(this.limboDocuments=this.limboDocuments.add(e.key))});let t=[];return e.forEach(e=>{this.limboDocuments.has(e)||t.push(new xW(e))}),this.limboDocuments.forEach(r=>{e.has(r)||t.push(new xK(r))}),t}synchronizeWithPersistedState(e){this._syncedDocuments=e.remoteKeys,this.limboDocuments=gY();let t=this.computeDocChanges(e.documents);return this.applyChanges(t,!0)}computeInitialSnapshot(){return xI.fromInitialDocuments(this.query,this.documentSet,this.mutatedKeys,0===this.syncState,this.hasCachedResults)}}function xY(e,t){let r=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return hL(20277,{change:e})}};return r(e)-r(t)}let xJ="SyncEngine";class xX{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class xZ{constructor(e){this.key=e,this.receivedDocument=!1}}class x0{constructor(e,t,r,n,i,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=n,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.syncEngineListener={},this.queryViewsByQuery=new gB(e=>gI(e),g_),this.queriesByTarget=new Map,this.enqueuedLimboResolutions=new Set,this.activeLimboTargetsByKey=new fr(dl.comparator),this.activeLimboResolutionsByTarget=new Map,this.limboDocumentRefs=new TT,this.mutationUserCallbacks={},this.pendingWritesCallbacks=new Map,this.limboTargetIdGenerator=SK.forSyncEngine(),this.onlineState="Unknown",this._isPrimaryClient=void 0}get isPrimaryClient(){return!0===this._isPrimaryClient}}function x1(e,t,r,n,i,s,a){let o=new x0(e,t,r,n,i,s);return a&&(o._isPrimaryClient=!0),o}async function x2(e,t,r=!0){let n,i=Ek(e),s=i.queryViewsByQuery.get(t);return s?(i.sharedClientState.addLocalQueryTarget(s.targetId),n=s.view.computeInitialSnapshot()):n=await x6(i,t,r,!0),n}async function x3(e,t){let r=Ek(e);await x6(r,t,!0,!1)}async function x6(e,t,r,n){let i,s=await wT(e.localStore,gv(t)),a=s.targetId,o=e.sharedClientState.addLocalQueryTarget(a,r);return n&&(i=await x4(e,t,a,"current"===o,s.resumeToken)),e.isPrimaryClient&&r&&C1(e.remoteStore,s),i}async function x4(e,t,r,n,i){e.applyDocChanges=(t,r,n)=>Em(e,t,r,n);let s=await wx(e.localStore,t,!0),a=new xQ(t,s.remoteKeys),o=a.computeDocChanges(s.documents),l=yK.createSynthesizedTargetChangeForCurrentChange(r,n&&"Offline"!==e.onlineState,i),u=a.applyChanges(o,e.isPrimaryClient,l);Eh(e,r,u.limboChanges);let c=new xX(t,r,a);return e.queryViewsByQuery.set(t,c),e.queriesByTarget.has(r)?e.queriesByTarget.get(r).push(t):e.queriesByTarget.set(r,[t]),u.snapshot}async function x5(e,t,r){let n=hF(e),i=n.queryViewsByQuery.get(t),s=n.queriesByTarget.get(i.targetId);if(s.length>1){n.queriesByTarget.set(i.targetId,s.filter(e=>!g_(e,t))),n.queryViewsByQuery.delete(t);return}n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(i.targetId),n.sharedClientState.isActiveQueryTarget(i.targetId)||await wC(n.localStore,i.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(i.targetId),r&&C2(n.remoteStore,i.targetId),Eu(n,i.targetId)}).catch(d_)):(Eu(n,i.targetId),await wC(n.localStore,i.targetId,!0))}async function x8(e,t){let r=hF(e),n=r.queryViewsByQuery.get(t),i=r.queriesByTarget.get(n.targetId);r.isPrimaryClient&&1===i.length&&(r.sharedClientState.removeLocalQueryTarget(n.targetId),C2(r.remoteStore,n.targetId))}async function x7(e,t,r){let n=EA(e);try{let e=await wu(n.localStore,t);n.sharedClientState.addPendingMutation(e.batchId),Eo(n,e.batchId,r),await Ef(n,e.changes),await xo(n.remoteStore)}catch(t){let e=xx(t,"Failed to persist write");r.reject(e)}}async function x9(e,t){let r=hF(e);try{let e=await wm(r.localStore,t);t.targetChanges.forEach((e,t)=>{let n=r.activeLimboResolutionsByTarget.get(t);n&&(hj(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1,22616),e.addedDocuments.size>0?n.receivedDocument=!0:e.modifiedDocuments.size>0?hj(n.receivedDocument,14607):e.removedDocuments.size>0&&(hj(n.receivedDocument,42227),n.receivedDocument=!1))}),await Ef(r,e,t)}catch(e){await d_(e)}}function Ee(e,t,r){let n=hF(e);if(n.isPrimaryClient&&0===r||!n.isPrimaryClient&&1===r){let e=[];n.queryViewsByQuery.forEach((r,n)=>{let i=n.view.applyOnlineStateChange(t);i.snapshot&&e.push(i.snapshot)}),xL(n.eventManager,t),e.length&&n.syncEngineListener.onWatchChange(e),n.onlineState=t,n.isPrimaryClient&&n.sharedClientState.setOnlineState(t)}}async function Et(e,t,r){let n=hF(e);n.sharedClientState.updateQueryState(t,"rejected",r);let i=n.activeLimboResolutionsByTarget.get(t),s=i&&i.key;if(s){let e=new fr(dl.comparator);e=e.insert(s,mx.newNoDocument(s,dt.min()));let r=gY().add(s),i=new yH(dt.min(),new Map,new fr(h2),e,r);await x9(n,i),n.activeLimboTargetsByKey=n.activeLimboTargetsByKey.remove(s),n.activeLimboResolutionsByTarget.delete(t),Ep(n)}else await wC(n.localStore,t,!1).then(()=>Eu(n,t,r)).catch(d_)}async function Er(e,t){let r=hF(e),n=t.batch.batchId;try{let e=await wc(r.localStore,t);El(r,n,null),Es(r,n),r.sharedClientState.updateMutationState(n,"acknowledged"),await Ef(r,e)}catch(e){await d_(e)}}async function En(e,t,r){let n=hF(e);try{let e=await wd(n.localStore,t);El(n,t,r),Es(n,t),n.sharedClientState.updateMutationState(t,"rejected",r),await Ef(n,e)}catch(e){await d_(e)}}async function Ei(e,t){let r=hF(e);C8(r.remoteStore)||hD(xJ,"The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{let e=await wp(r.localStore);if(e===fD)return void t.resolve();let n=r.pendingWritesCallbacks.get(e)||[];n.push(t),r.pendingWritesCallbacks.set(e,n)}catch(r){let e=xx(r,"Initialization of waitForPendingWrites() operation failed");t.reject(e)}}function Es(e,t){(e.pendingWritesCallbacks.get(t)||[]).forEach(e=>{e.resolve()}),e.pendingWritesCallbacks.delete(t)}function Ea(e,t){e.pendingWritesCallbacks.forEach(e=>{e.forEach(e=>{e.reject(new hU(hV.CANCELLED,t))})}),e.pendingWritesCallbacks.clear()}function Eo(e,t,r){let n=e.mutationUserCallbacks[e.currentUser.toKey()];n||(n=new fr(h2)),n=n.insert(t,r),e.mutationUserCallbacks[e.currentUser.toKey()]=n}function El(e,t,r){let n=hF(e),i=n.mutationUserCallbacks[n.currentUser.toKey()];if(i){let e=i.get(t);e&&(r?e.reject(r):e.resolve(),i=i.remove(t)),n.mutationUserCallbacks[n.currentUser.toKey()]=i}}function Eu(e,t,r=null){for(let n of(e.sharedClientState.removeLocalQueryTarget(t),e.queriesByTarget.get(t)))e.queryViewsByQuery.delete(n),r&&e.syncEngineListener.onWatchError(n,r);e.queriesByTarget.delete(t),e.isPrimaryClient&&e.limboDocumentRefs.removeReferencesForId(t).forEach(t=>{e.limboDocumentRefs.containsKey(t)||Ec(e,t)})}function Ec(e,t){e.enqueuedLimboResolutions.delete(t.path.canonicalString());let r=e.activeLimboTargetsByKey.get(t);null!==r&&(C2(e.remoteStore,r),e.activeLimboTargetsByKey=e.activeLimboTargetsByKey.remove(t),e.activeLimboResolutionsByTarget.delete(r),Ep(e))}function Eh(e,t,r){for(let n of r)n instanceof xK?(e.limboDocumentRefs.addReference(n.key,t),Ed(e,n)):n instanceof xW?(hD(xJ,"Document no longer in limbo: "+n.key),e.limboDocumentRefs.removeReference(n.key,t),e.limboDocumentRefs.containsKey(n.key)||Ec(e,n.key)):hL(19791,{limboChange:n})}function Ed(e,t){let r=t.key,n=r.path.canonicalString();e.activeLimboTargetsByKey.get(r)||e.enqueuedLimboResolutions.has(n)||(hD(xJ,"New document in limbo: "+r),e.enqueuedLimboResolutions.add(n),Ep(e))}function Ep(e){for(;e.enqueuedLimboResolutions.size>0&&e.activeLimboTargetsByKey.size<e.maxConcurrentLimboResolutions;){let t=e.enqueuedLimboResolutions.values().next().value;e.enqueuedLimboResolutions.delete(t);let r=new dl(di.fromString(t)),n=e.limboTargetIdGenerator.next();e.activeLimboResolutionsByTarget.set(n,new xZ(r)),e.activeLimboTargetsByKey=e.activeLimboTargetsByKey.insert(r,n),C1(e.remoteStore,new ba(gv(gh(r.path)),n,"TargetPurposeLimboResolution",dH.INVALID))}}async function Ef(e,t,r){let n=hF(e),i=[],s=[],a=[];n.queryViewsByQuery.isEmpty()||(n.queryViewsByQuery.forEach((e,o)=>{a.push(n.applyDocChanges(o,t,r).then(e=>{var t;if((e||r)&&n.isPrimaryClient){let i=e?!e.fromCache:null==(t=null==r?void 0:r.targetChanges.get(o.targetId))?void 0:t.current;n.sharedClientState.updateQueryState(o.targetId,i?"current":"not-current")}if(e){i.push(e);let t=xq.fromSnapshot(o.targetId,e);s.push(t)}}))}),await Promise.all(a),n.syncEngineListener.onWatchChange(i),await wv(n.localStore,s))}async function Em(e,t,r,n){let i=t.view.computeDocChanges(r);i.needsRefill&&(i=await wx(e.localStore,t.query,!1).then(({documents:e})=>t.view.computeDocChanges(e,i)));let s=n&&n.targetChanges.get(t.targetId),a=n&&null!=n.targetMismatches.get(t.targetId),o=t.view.applyChanges(i,e.isPrimaryClient,s,a);return Eh(e,t.targetId,o.limboChanges),o.snapshot}async function Eg(e,t){let r=hF(e);if(!r.currentUser.isEqual(t)){hD(xJ,"User change. New user:",t.toKey());let e=await wl(r.localStore,t);r.currentUser=t,Ea(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await Ef(r,e.affectedDocuments)}}function Ey(e,t){let r=hF(e),n=r.activeLimboResolutionsByTarget.get(t);if(n&&n.receivedDocument)return gY().add(n.key);{let e=gY(),n=r.queriesByTarget.get(t);if(!n)return e;for(let t of n){let n=r.queryViewsByQuery.get(t);e=e.unionWith(n.view.syncedDocuments)}return e}}async function Ev(e,t){let r=hF(e),n=await wx(r.localStore,t.query,!0),i=t.view.synchronizeWithPersistedState(n);return r.isPrimaryClient&&Eh(r,t.targetId,i.limboChanges),i}async function Eb(e,t){let r=hF(e);return wR(r.localStore,t).then(e=>Ef(r,e))}async function ES(e,t,r,n){let i=hF(e),s=await w_(i.localStore,t);if(null===s)return void hD(xJ,"Cannot apply mutation batch with id: "+t);"pending"===r?await xo(i.remoteStore):"acknowledged"===r||"rejected"===r?(El(i,t,n||null),Es(i,t),wI(i.localStore,t)):hL(6720,"Unknown batchState",{batchState:r}),await Ef(i,s)}async function ET(e,t){let r=hF(e);if(Ek(r),EA(r),!0===t&&!0!==r._isPrimaryClient){let e=r.sharedClientState.getAllActiveQueryTargets(),t=await EC(r,e.toArray());for(let e of(r._isPrimaryClient=!0,await xb(r.remoteStore,!0),t))C1(r.remoteStore,e)}else if(!1===t&&!1!==r._isPrimaryClient){let e=[],t=Promise.resolve();r.queriesByTarget.forEach((n,i)=>{r.sharedClientState.isLocalQueryTarget(i)?e.push(i):t=t.then(()=>(Eu(r,i),wC(r.localStore,i,!0))),C2(r.remoteStore,i)}),await t,await EC(r,e),Ew(r),r._isPrimaryClient=!1,await xb(r.remoteStore,!1)}}function Ew(e){let t=hF(e);t.activeLimboResolutionsByTarget.forEach((e,r)=>{C2(t.remoteStore,r)}),t.limboDocumentRefs.removeAllReferences(),t.activeLimboResolutionsByTarget=new Map,t.activeLimboTargetsByKey=new fr(dl.comparator)}async function EC(e,t,r){let n=hF(e),i=[],s=[];for(let e of t){let t,r=n.queriesByTarget.get(e);if(r&&0!==r.length)for(let e of(t=await wT(n.localStore,gv(r[0])),r)){let t=n.queryViewsByQuery.get(e),r=await Ev(n,t);r.snapshot&&s.push(r.snapshot)}else{let r=await wA(n.localStore,e);t=await wT(n.localStore,r),await x4(n,Ex(r),e,!1,t.resumeToken)}i.push(t)}return n.syncEngineListener.onWatchChange(s),i}function Ex(e){return gc(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function EE(e){return wk(hF(e).localStore)}async function E_(e,t,r,n){let i=hF(e);if(i._isPrimaryClient)return void hD(xJ,"Ignoring unexpected query state notification.");let s=i.queriesByTarget.get(t);if(s&&s.length>0)switch(r){case"current":case"not-current":{let e=await wR(i.localStore,gP(s[0])),n=yH.createSynthesizedRemoteEventForCurrentChange(t,"current"===r,fp.EMPTY_BYTE_STRING);await Ef(i,e,n);break}case"rejected":await wC(i.localStore,t,!0),Eu(i,t,n);break;default:hL(64155,r)}}async function EI(e,t,r){let n=Ek(e);if(n._isPrimaryClient){for(let e of t){if(n.queriesByTarget.has(e)&&n.sharedClientState.isActiveQueryTarget(e)){hD(xJ,"Adding an already active target "+e);continue}let t=await wA(n.localStore,e),r=await wT(n.localStore,t);await x4(n,Ex(t),r.targetId,!1,r.resumeToken),C1(n.remoteStore,r)}for(let e of r)n.queriesByTarget.has(e)&&await wC(n.localStore,e,!1).then(()=>{C2(n.remoteStore,e),Eu(n,e)}).catch(d_)}}function Ek(e){let t=hF(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=x9.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Ey.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Et.bind(null,t),t.syncEngineListener.onWatchChange=xP.bind(null,t.eventManager),t.syncEngineListener.onWatchError=xM.bind(null,t.eventManager),t}function EA(e){let t=hF(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Er.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=En.bind(null,t),t}function ER(e,t,r){let n=hF(e);EN(n,t,r).then(e=>{n.sharedClientState.notifyBundleLoaded(e)})}async function EN(e,t,r){try{let n=await t.getMetadata();if(await wP(e.localStore,n))return await t.close(),r._completeWith(xH(n)),Promise.resolve(new Set);r._updateProgress(xG(n));let i=new x$(n,e.localStore,t.serializer),s=await t.nextElement();for(;s;){let e=await i.addSizedElement(s);e&&r._updateProgress(e),s=await t.nextElement()}let a=await i.complete();return await Ef(e,a.changedDocs,void 0),await wM(e.localStore,n),r._completeWith(a.progress),Promise.resolve(a.changedCollectionGroups)}catch(e){return hP(xJ,`Loading bundle failed with ${e}`),r._failWith(e),Promise.resolve(new Set)}}class ED{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Cw(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return wo(this.persistence,new w$,e.initialUser,this.serializer)}createPersistence(e){return new TN(TO.factory,this.serializer)}createSharedClientState(e){return new Ct}async terminate(){var e,t;null==(e=this.gcScheduler)||e.stop(),null==(t=this.indexBackfillerScheduler)||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}ED.provider={build:()=>new ED};class EO extends ED{constructor(e){super(),this.cacheSizeBytes=e}createGarbageCollectionScheduler(e,t){return hj(this.persistence.referenceDelegate instanceof TP,46915),new S7(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createPersistence(e){let t=void 0!==this.cacheSizeBytes?S1.withCacheSize(this.cacheSizeBytes):S1.DEFAULT;return new TN(e=>TP.factory(e,t),this.serializer)}}class EP extends ED{constructor(e,t,r){super(),this.onlineComponentProvider=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.onlineComponentProvider.initialize(this,e),await EA(this.onlineComponentProvider.syncEngine),await xo(this.onlineComponentProvider.remoteStore),await this.persistence.setPrimaryStateListener(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}createLocalStore(e){return wo(this.persistence,new w$,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){return new S7(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){let r=new dG(t,this.persistence);return new d$(e.asyncQueue,r)}createPersistence(e){let t=wt(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?S1.withCacheSize(this.cacheSizeBytes):S1.DEFAULT;return new T7(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,CS(),CT(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new Ct}}class EM extends EP{constructor(e,t){super(e,t,!1),this.onlineComponentProvider=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);let t=this.onlineComponentProvider.syncEngine;this.sharedClientState instanceof w9&&(this.sharedClientState.syncEngine={applyBatchState:ES.bind(null,t),applyTargetState:E_.bind(null,t),applyActiveTargetsChange:EI.bind(null,t),getActiveClients:EE.bind(null,t),synchronizeWithChangedDocuments:Eb.bind(null,t)},await this.sharedClientState.start()),await this.persistence.setPrimaryStateListener(async e=>{await ET(this.onlineComponentProvider.syncEngine,e),this.gcScheduler&&(e&&!this.gcScheduler.started?this.gcScheduler.start():e||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(e&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():e||this.indexBackfillerScheduler.stop())})}createSharedClientState(e){let t=CS();if(!w9.isAvailable(t))throw new hU(hV.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");let r=wt(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new w9(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class EL{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>Ee(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=Eg.bind(null,this.syncEngine),await xb(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return xA()}createDatastore(e){let t=Cw(e.databaseInfo.databaseId),r=Cv(e.databaseInfo);return CL(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return CQ(this.localStore,this.datastore,e.asyncQueue,e=>Ee(this.syncEngine,e,0),Cb())}createSyncEngine(e,t){return x1(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await C0(this.remoteStore),null==(e=this.datastore)||e.terminate(),null==(t=this.eventManager)||t.terminate()}}EL.provider={build:()=>new EL};let EB=10240;function Ej(e,t=EB){let r=0;return{async read(){if(r<e.byteLength){let n={value:e.slice(r,r+t),done:!1};return r+=t,n}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}function EF(e,t,r){if(!r)throw new hU(hV.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function EV(e,t,r,n){if(!0===t&&!0===n)throw new hU(hV.INVALID_ARGUMENT,`${e} and ${r} cannot be used together.`)}function EU(e){if(!dl.isDocumentKey(e))throw new hU(hV.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function Eq(e){if(dl.isDocumentKey(e))throw new hU(hV.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function Ez(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}function E$(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e)if(e instanceof Array)return"an array";else{let t=EG(e);return t?`a custom ${t} object`:"an object"}else if("function"==typeof e)return"a function";else return hL(12329,{type:typeof e})}function EG(e){return e.constructor?e.constructor.name:null}function EH(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t))if(t.name===e.constructor.name)throw new hU(hV.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");else{let r=E$(e);throw new hU(hV.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${r}`)}return e}function EK(e,t){if(t<=0)throw new hU(hV.INVALID_ARGUMENT,`Function ${e}() requires a positive number, but it was: ${t}.`)}function EW(e,t){if(!(e instanceof Uint8Array))throw new hU(hV.INVALID_ARGUMENT,`NodePlatform.toByteStreamReader expects source to be Uint8Array, got ${E$(e)}`);return Ej(e,t)}class EQ{constructor(e){this.observer=e,this.muted=!1}next(e){!this.muted&&this.observer.next&&this.scheduleEvent(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.scheduleEvent(this.observer.error,e):hO("Uncaught Error in snapshot listener:",e.toString()))}mute(){this.muted=!0}scheduleEvent(e,t){setTimeout(()=>{this.muted||e(t)},0)}}class EY{constructor(e,t){this.payload=e,this.byteLength=t}isBundleMetadata(){return"metadata"in this.payload}}class EJ{constructor(e,t){this.reader=e,this.serializer=t,this.metadata=new hq,this.buffer=new Uint8Array,this.textDecoder=h0(),this.nextElementImpl().then(e=>{e&&e.isBundleMetadata()?this.metadata.resolve(e.payload.metadata):this.metadata.reject(Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(null==e?void 0:e.payload)}`))},e=>this.metadata.reject(e))}close(){return this.reader.cancel()}async getMetadata(){return this.metadata.promise}async nextElement(){return await this.getMetadata(),this.nextElementImpl()}async nextElementImpl(){let e=await this.readLength();if(null===e)return null;let t=this.textDecoder.decode(e),r=Number(t);return isNaN(r)&&this.raiseError(`length string (${t}) is not valid number`),new EY(JSON.parse(await this.readJsonString(r)),e.length+r)}indexOfOpenBracket(){return this.buffer.findIndex(e=>123===e)}async readLength(){for(;0>this.indexOfOpenBracket()&&!await this.pullMoreDataToBuffer(););if(0===this.buffer.length)return null;let e=this.indexOfOpenBracket();e<0&&this.raiseError("Reached the end of bundle when a length string is expected.");let t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t}async readJsonString(e){for(;this.buffer.length<e;)await this.pullMoreDataToBuffer()&&this.raiseError("Reached the end of bundle when more is expected.");let t=this.textDecoder.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t}raiseError(e){throw this.reader.cancel(),Error(`Invalid bundle format: ${e}`)}async pullMoreDataToBuffer(){let e=await this.reader.read();if(!e.done){let t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done}}function EX(e,t){return new EJ(e,t)}class EZ{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new hU(hV.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;let t=await Cj(this.datastore,e);return t.forEach(e=>this.recordVersion(e)),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastTransactionError=e}this.writtenDocs.add(e.toString())}delete(e){this.write(new yI(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;let e=this.readVersions;this.mutations.forEach(t=>{e.delete(t.key.toString())}),e.forEach((e,t)=>{let r=dl.fromPath(t);this.mutations.push(new yR(r,this.precondition(r)))}),await CB(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else if(e.isNoDocument())t=dt.min();else throw hL(50498,{documentName:e.constructor.name});let r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new hU(hV.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){let t=this.readVersions.get(e.toString());return this.writtenDocs.has(e.toString())||!t?yc.none():t.isEqual(dt.min())?yc.exists(!1):yc.updateTime(t)}preconditionForUpdate(e){let t=this.readVersions.get(e.toString());if(this.writtenDocs.has(e.toString())||!t)return yc.exists(!0);if(t.isEqual(dt.min()))throw new hU(hV.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return yc.updateTime(t)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class E0{constructor(e,t,r,n,i){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=n,this.deferred=i,this.attemptsRemaining=r.maxAttempts,this.backoff=new CI(this.asyncQueue,"transaction_retry")}run(){this.attemptsRemaining-=1,this.runWithBackOff()}runWithBackOff(){this.backoff.backoffAndRun(async()=>{let e=new EZ(this.datastore),t=this.tryRunUpdateFunction(e);t&&t.then(t=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(t)}).catch(e=>{this.handleTransactionError(e)}))}).catch(e=>{this.handleTransactionError(e)})})}tryRunUpdateFunction(e){try{let t=this.updateFunction(e);if(fO(t)||!t.catch||!t.then)return this.deferred.reject(Error("Transaction callback must return a Promise")),null;return t}catch(e){return this.deferred.reject(e),null}}handleTransactionError(e){this.attemptsRemaining>0&&this.isRetryableTransactionError(e)?(this.attemptsRemaining-=1,this.asyncQueue.enqueueAndForget(()=>(this.runWithBackOff(),Promise.resolve()))):this.deferred.reject(e)}isRetryableTransactionError(e){if("FirebaseError"===e.name){let t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!yM(t)}return!1}}let E1="FirestoreClient",E2=100,E3=11,E6=20,E4=22;class E5{constructor(e,t,r,n,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=n,this.user=h_.UNAUTHENTICATED,this.clientId=h1.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async e=>{hD(E1,"Received user=",e.uid),await this.authCredentialListener(e),this.user=e}),this.appCheckCredentials.start(r,e=>(hD(E1,"Received new app check token=",e),this.appCheckCredentialListener(e,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:E2}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new hq;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(r){let t=xx(r,"Failed to shutdown persistence");e.reject(t)}}),e.promise}}async function E8(e,t){e.asyncQueue.verifyOperationInProgress(),hD(E1,"Initializing OfflineComponentProvider");let r=e.configuration;await t.initialize(r);let n=r.initialUser;e.setCredentialChangeListener(async e=>{n.isEqual(e)||(await wl(t.localStore,e),n=e)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function E7(e,t){e.asyncQueue.verifyOperationInProgress();let r=await _e(e);hD(E1,"Initializing OnlineComponentProvider"),await t.initialize(r,e.configuration),e.setCredentialChangeListener(e=>xv(t.remoteStore,e)),e.setAppCheckTokenChangeListener((e,r)=>xv(t.remoteStore,r)),e._onlineComponents=t}function E9(e){return"FirebaseError"===e.name?e.code===hV.FAILED_PRECONDITION||e.code===hV.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||e.code===E4||e.code===E6||e.code===E3}async function _e(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){hD(E1,"Using user provided OfflineComponentProvider");try{await E8(e,e._uninitializedComponentsProvider._offline)}catch(r){let t=r;if(!E9(t))throw t;hP("Error using user provided cache. Falling back to memory cache: "+t),await E8(e,new ED)}}else hD(E1,"Using default OfflineComponentProvider"),await E8(e,new EO(void 0));return e._offlineComponents}async function _t(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(hD(E1,"Using user provided OnlineComponentProvider"),await E7(e,e._uninitializedComponentsProvider._online)):(hD(E1,"Using default OnlineComponentProvider"),await E7(e,new EL))),e._onlineComponents}function _r(e){return _e(e).then(e=>e.persistence)}function _n(e){return _e(e).then(e=>e.localStore)}function _i(e){return _t(e).then(e=>e.remoteStore)}function _s(e){return _t(e).then(e=>e.syncEngine)}function _a(e){return _t(e).then(e=>e.datastore)}async function _o(e){let t=await _t(e),r=t.eventManager;return r.onListen=x2.bind(null,t.syncEngine),r.onUnlisten=x5.bind(null,t.syncEngine),r.onFirstRemoteStoreListen=x3.bind(null,t.syncEngine),r.onLastRemoteStoreUnlisten=x8.bind(null,t.syncEngine),r}function _l(e,t,r={}){let n=new hq;return e.asyncQueue.enqueueAndForget(async()=>_f(await _o(e),e.asyncQueue,t,r,n)),n.promise}function _u(e,t,r){let n=new hq;return e.asyncQueue.enqueueAndForget(async()=>{try{let i=await _a(e);n.resolve(CF(i,t,r))}catch(e){n.reject(e)}}),n.promise}function _c(e,t){let r=new hq;return e.asyncQueue.enqueueAndForget(async()=>x7(await _s(e),t,r)),r.promise}async function _h(e,t,r){try{let n=await wS(e,t);n.isFoundDocument()?r.resolve(n):n.isNoDocument()?r.resolve(null):r.reject(new hU(hV.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(n){let e=xx(n,`Failed to get document '${t} from cache`);r.reject(e)}}function _d(e,t,r,n,i){let s=new EQ({next:o=>{s.mute(),t.enqueueAndForget(()=>xO(e,a));let l=o.docs.has(r);!l&&o.fromCache?i.reject(new hU(hV.UNAVAILABLE,"Failed to get document because the client is offline.")):l&&o.fromCache&&n&&"server"===n.source?i.reject(new hU(hV.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:e=>i.reject(e)}),a=new xU(gh(r.path),s,{includeMetadataChanges:!0,waitForSyncWhenOnline:!0});return xD(e,a)}async function _p(e,t,r){try{let n=await wx(e,t,!0),i=new xQ(t,n.remoteKeys),s=i.computeDocChanges(n.documents),a=i.applyChanges(s,!1);r.resolve(a.snapshot)}catch(n){let e=xx(n,`Failed to execute query '${t} against cache`);r.reject(e)}}function _f(e,t,r,n,i){let s=new EQ({next:r=>{s.mute(),t.enqueueAndForget(()=>xO(e,a)),r.fromCache&&"server"===n.source?i.reject(new hU(hV.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(r)},error:e=>i.reject(e)}),a=new xU(r,s,{includeMetadataChanges:!0,waitForSyncWhenOnline:!0});return xD(e,a)}function _m(e,t){let r;return EX(EW(r="string"==typeof e?hZ().encode(e):e),t)}function _g(e,t){return e.asyncQueue.enqueue(async()=>wF(await _n(e),t))}function _y(e,t){return e.timeoutSeconds===t.timeoutSeconds}function _v(e){let t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}let _b="ComponentProvider",_S=new Map;function _T(e){let t=_S.get(e);t&&(hD(_b,"Removing Datastore"),_S.delete(e),t.terminate())}function _w(e,t,r,n){return new fk(e,t,r,n.host,n.ssl,n.experimentalForceLongPolling,n.experimentalAutoDetectLongPolling,_v(n.experimentalLongPollingOptions),n.useFetchStreams,n.isUsingEmulator)}let _C="firestore.googleapis.com",_x=!0,_E=5,__=30,_I=!0;class _k{constructor(e){var t,r;if(void 0===e.host){if(void 0!==e.ssl)throw new hU(hV.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=_C,this.ssl=_x}else this.host=e.host,this.ssl=null!=(t=e.ssl)?t:_x;if(this.isUsingEmulator=void 0!==e.emulatorOptions,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=S0;else if(e.cacheSizeBytes!==SZ&&e.cacheSizeBytes<S3)throw new hU(hV.INVALID_ARGUMENT,`cacheSizeBytes must be at least ${S3}`);else this.cacheSizeBytes=e.cacheSizeBytes;EV("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=_I:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=_v(null!=(r=e.experimentalLongPollingOptions)?r:{}),_A(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&_y(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}function _A(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new hU(hV.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (must not be NaN)`);if(e.timeoutSeconds<_E)throw new hU(hV.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (minimum allowed value is ${_E})`);if(e.timeoutSeconds>__)throw new hU(hV.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (maximum allowed value is ${__})`)}}class _R{constructor(e,t,r,n){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=n,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new _k({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new hU(hV.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new hU(hV.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new _k(e),this._emulatorOptions=e.emulatorOptions||{},void 0!==e.credentials&&(this._authCredentials=hJ(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return _T(this),Promise.resolve()}}function _N(e,t,r,n={}){var i;e=EH(e,_R);let s=uW(t),a=e._getSettings(),o=Object.assign(Object.assign({},a),{emulatorOptions:e._getEmulatorOptions()}),l=`${t}:${r}`;s&&(uQ(`https://${l}`),u1("Firestore",!0)),a.host!==_C&&a.host!==l&&hP("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let u=Object.assign(Object.assign({},a),{host:l,ssl:s,emulatorOptions:n});if(!ci(u,o)&&(e._setSettings(u),n.mockUserToken)){let t,r;if("string"==typeof n.mockUserToken)t=n.mockUserToken,r=h_.MOCK_USER;else{t=uY(n.mockUserToken,null==(i=e._app)?void 0:i.options.projectId);let s=n.mockUserToken.sub||n.mockUserToken.user_id;if(!s)throw new hU(hV.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");r=new h_(s)}e._authCredentials=new hG(new hz(t,r))}}class _D{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new _D(this.firestore,e,this._query)}}class _O{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new _P(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new _O(this.firestore,e,this._key)}}class _P extends _D{constructor(e,t,r){super(e,t,gh(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new _O(this.firestore,null,new dl(e))}withConverter(e){return new _P(this.firestore,e,this._path)}}function _M(e,t,...r){if(e=cl(e),EF("collection","path",t),e instanceof _R){let n=di.fromString(t,...r);return Eq(n),new _P(e,null,n)}{if(!(e instanceof _O)&&!(e instanceof _P))throw new hU(hV.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let n=e._path.child(di.fromString(t,...r));return Eq(n),new _P(e.firestore,null,n)}}let _L="AsyncQueue";class _B{constructor(e=Promise.resolve()){this.retryableOps=[],this._isShuttingDown=!1,this.delayedOperations=[],this.failure=null,this.operationInProgress=!1,this.skipNonRestrictedTasks=!1,this.timerIdsToSkip=[],this.backoff=new CI(this,"async_queue_retry"),this.visibilityHandler=()=>{this.backoff.skipBackoff()},this.tail=e}get isShuttingDown(){return this._isShuttingDown}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.verifyNotFailed(),this.enqueueInternal(e)}enterRestrictedMode(e){this._isShuttingDown||(this._isShuttingDown=!0,this.skipNonRestrictedTasks=e||!1)}enqueue(e){if(this.verifyNotFailed(),this._isShuttingDown)return new Promise(()=>{});let t=new hq;return this.enqueueInternal(()=>this._isShuttingDown&&this.skipNonRestrictedTasks?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.retryableOps.push(e),this.retryNextOp()))}async retryNextOp(){if(0!==this.retryableOps.length){try{await this.retryableOps[0](),this.retryableOps.shift(),this.backoff.reset()}catch(e){if(dM(e))hD(_L,"Operation failed with retryable error: "+e);else throw e}this.retryableOps.length>0&&this.backoff.backoffAndRun(()=>this.retryNextOp())}}enqueueInternal(e){let t=this.tail.then(()=>(this.operationInProgress=!0,e().catch(e=>{throw this.failure=e,this.operationInProgress=!1,hO("INTERNAL UNHANDLED ERROR: ",_j(e)),e}).then(e=>(this.operationInProgress=!1,e))));return this.tail=t,t}enqueueAfterDelay(e,t,r){this.verifyNotFailed(),this.timerIdsToSkip.indexOf(e)>-1&&(t=0);let n=xC.createAndSchedule(this,e,t,r,e=>this.removeDelayedOperation(e));return this.delayedOperations.push(n),n}verifyNotFailed(){this.failure&&hL(47125,{messageOrStack:_j(this.failure)})}verifyOperationInProgress(){}async drain(){let e;do e=this.tail,await e;while(e!==this.tail)}containsDelayedOperation(e){for(let t of this.delayedOperations)if(t.timerId===e)return!0;return!1}runAllDelayedOperationsUntil(e){return this.drain().then(()=>{for(let t of(this.delayedOperations.sort((e,t)=>e.targetTimeMs-t.targetTimeMs),this.delayedOperations))if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.drain()})}skipDelaysForTimerId(e){this.timerIdsToSkip.push(e)}removeDelayedOperation(e){let t=this.delayedOperations.indexOf(e);this.delayedOperations.splice(t,1)}}function _j(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}class _F extends _R{constructor(e,t,r,n){super(e,t,r,n),this.type="firestore",this._queue=new _B,this._persistenceKey=(null==n?void 0:n.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new _B(e),this._firestoreClient=void 0,await e}}}function _V(e,t){let r="object"==typeof e?e:c7(),n="string"==typeof e?e:t||fA,i=c1(r,"firestore").getImmediate({identifier:n});if(!i._initialized){let e=uG("firestore");e&&_N(i,...e)}return i}function _U(e){if(e._terminated)throw new hU(hV.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||_q(e),e._firestoreClient}function _q(e){var t,r,n;let i=e._freezeSettings(),s=_w(e._databaseId,(null==(t=e._app)?void 0:t.options.appId)||"",e._persistenceKey,i);!e._componentsProvider&&(null==(r=i.localCache)?void 0:r._offlineComponentProvider)&&(null==(n=i.localCache)?void 0:n._onlineComponentProvider)&&(e._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),e._firestoreClient=new E5(e._authCredentials,e._appCheckCredentials,e._queue,s,e._componentsProvider&&_z(e._componentsProvider))}function _z(e){let t=null==e?void 0:e._online.build();return{_offline:null==e?void 0:e._offline.build(t),_online:t}}function _$(e,t=!0){hk(c5),c0(new cu("firestore",(e,{instanceIdentifier:r,options:n})=>{let i=e.getProvider("app").getImmediate(),s=new _F(new hH(e.getProvider("auth-internal")),new hY(i,e.getProvider("app-check-internal")),fN(i,r),i);return n=Object.assign({useFetchStreams:t},n),s._setSettings(n),s},"PUBLIC").setMultipleInstances(!0)),ht(hx,hE,e),ht(hx,hE,"esm2017")}class _G{constructor(e,t,r){this.alias=e,this.aggregateType=t,this.fieldPath=r}}class _H{constructor(e="count",t){this._internalFieldPath=t,this.type="AggregateField",this.aggregateType=e}}class _K{constructor(e,t,r){this._userDataWriter=t,this._data=r,this.type="AggregateQuerySnapshot",this.query=e}data(){return this._userDataWriter.convertObjectMap(this._data)}}class _W{constructor(e){this._byteString=e}static fromBase64String(e){try{return new _W(fp.fromBase64String(e))}catch(e){throw new hU(hV.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new _W(fp.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class _Q{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new hU(hV.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new da(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class _Y{constructor(e){this._methodName=e}}class _J{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new hU(hV.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new hU(hV.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return h2(this._lat,e._lat)||h2(this._long,e._long)}}class _X{constructor(e){this._values=(e||[]).map(e=>e)}toArray(){return this._values.map(e=>e)}isEqual(e){return wn(this._values,e._values)}}let _Z=/^__.*__$/;class _0{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new yT(e,this.data,this.fieldMask,t,this.fieldTransforms):new yv(e,this.data,t,this.fieldTransforms)}}class _1{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new yT(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function _2(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw hL(40011,{dataSource:e})}}class _3{constructor(e,t,r,n,i,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=n,void 0===i&&this.validatePath(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new _3(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){var t;let r=null==(t=this.path)?void 0:t.child(e),n=this.contextWith({path:r,arrayElement:!1});return n.validatePathSegment(e),n}childContextForFieldPath(e){var t;let r=null==(t=this.path)?void 0:t.child(e),n=this.contextWith({path:r,arrayElement:!1});return n.validatePath(),n}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return Iy(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(0===e.length)throw this.createError("Document fields must not be empty");if(_2(this.dataSource)&&_Z.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class _6{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Cw(e)}createContext(e,t,r,n=!1){return new _3({dataSource:e,methodName:t,targetDoc:r,path:da.emptyPath(),arrayElement:!1,hasConverter:n},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function _4(e){let t=e._freezeSettings(),r=Cw(e._databaseId);return new _6(e._databaseId,!!t.ignoreUndefinedProperties,r)}function _5(e,t,r,n,i,s={}){let a,o,l=e.createContext(s.merge||s.mergeFields?2:0,t,r,i);Ip("Data must be an object, but it was:",l,n);let u=Io(n,l);if(s.merge)a=new fc(l.fieldMask),o=l.fieldTransforms;else if(s.mergeFields){let e=[];for(let n of s.mergeFields){let i=If(t,n,r);if(!l.contains(i))throw new hU(hV.INVALID_ARGUMENT,`Field '${i}' is specified in your field mask but missing from your input data.`);Iv(e,i)||e.push(i)}a=new fc(e),o=l.fieldTransforms.filter(e=>a.covers(e.field))}else a=null,o=l.fieldTransforms;return new _0(new mw(u),a,o)}class _8 extends _Y{_toFieldTransform(e){if(2===e.dataSource)e.fieldMask.push(e.path);else if(1===e.dataSource)throw e.createError(`${this._methodName}() can only appear at the top level of your update data`);else throw e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return null}isEqual(e){return e instanceof _8}}function _7(e,t,r){return new _3({dataSource:3,targetDoc:t.settings.targetDoc,methodName:e._methodName,arrayElement:r},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class _9 extends null{_toFieldTransform(e){return new ya(e.path,new g8)}isEqual(e){return e instanceof _9}}class Ie extends _Y{constructor(e,t){super(e),this._elements=t}_toFieldTransform(e){let t=_7(this,e,!0),r=new g7(this._elements.map(e=>Ia(e,t)));return new ya(e.path,r)}isEqual(e){return e instanceof Ie&&ci(this._elements,e._elements)}}class It extends _Y{constructor(e,t){super(e),this._elements=t}_toFieldTransform(e){let t=_7(this,e,!0),r=new ye(this._elements.map(e=>Ia(e,t)));return new ya(e.path,r)}isEqual(e){return e instanceof It&&ci(this._elements,e._elements)}}class Ir extends _Y{constructor(e,t){super(e),this._operand=t}_toFieldTransform(e){let t=new yr(e.serializer,g1(e.serializer,this._operand));return new ya(e.path,t)}isEqual(e){return e instanceof Ir&&this._operand===e._operand}}function In(e,t,r,n){let i=e.createContext(1,t,r);Ip("Data must be an object, but it was:",i,n);let s=[],a=mw.empty();return p9(n,(e,n)=>{let o=Ig(t,e,r);n=cl(n);let l=i.childContextForFieldPath(o);if(n instanceof _8)s.push(o);else{let e=Ia(n,l);null!=e&&(s.push(o),a.set(o,e))}}),new _1(a,new fc(s),i.fieldTransforms)}function Ii(e,t,r,n,i,s){let a=e.createContext(1,t,r),o=[If(t,n,r)],l=[i];if(s.length%2!=0)throw new hU(hV.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let e=0;e<s.length;e+=2)o.push(If(t,s[e])),l.push(s[e+1]);let u=[],c=mw.empty();for(let e=o.length-1;e>=0;--e)if(!Iv(u,o[e])){let t=o[e],r=l[e];r=cl(r);let n=a.childContextForFieldPath(t);if(r instanceof _8)u.push(t);else{let e=Ia(r,n);null!=e&&(u.push(t),c.set(t,e))}}return new _1(c,new fc(u),a.fieldTransforms)}function Is(e,t,r,n=!1){return Ia(r,e.createContext(n?4:3,t))}function Ia(e,t){if(Id(e=cl(e)))return Ip("Unsupported field value:",t,e),Io(e,t);if(e instanceof _Y)return Iu(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),!(e instanceof Array))return Ic(e,t);if(t.settings.arrayElement&&4!==t.dataSource)throw t.createError("Nested arrays are not supported");return Il(e,t)}function Io(e,t){let r={};return ft(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):p9(e,(e,n)=>{let i=Ia(n,t.childContextForField(e));null!=i&&(r[e]=i)}),{mapValue:{fields:r}}}function Il(e,t){let r=[],n=0;for(let i of e){let e=Ia(i,t.childContextForArray(n));null==e&&(e={nullValue:"NULL_VALUE"}),r.push(e),n++}return{arrayValue:{values:r}}}function Iu(e,t){if(!_2(t.dataSource))throw t.createError(`${e._methodName}() can only be used with update() and set()`);if(!t.path)throw t.createError(`${e._methodName}() is not currently supported inside arrays`);let r=e._toFieldTransform(t);r&&t.fieldTransforms.push(r)}function Ic(e,t){if(null===(e=cl(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return g1(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){let r=de.fromDate(e);return{timestampValue:ve(t.serializer,r)}}else if(e instanceof de){let r=new de(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:ve(t.serializer,r)}}else if(e instanceof _J)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};else if(e instanceof _W)return{bytesValue:vr(t.serializer,e._byteString)};else if(e instanceof _O){let r=t.databaseId,n=e.firestore._databaseId;if(!n.isEqual(r))throw t.createError(`Document reference is for database ${n.projectId}/${n.database} but should be for database ${r.projectId}/${r.database}`);return{referenceValue:va(e.firestore._databaseId||t.databaseId,e._key.path)}}else if(e instanceof _X)return Ih(e,t);else throw t.createError(`Unsupported field value: ${E$(e)}`)}function Ih(e,t){return{mapValue:{fields:{[fL]:{stringValue:fF},[fV]:{arrayValue:{values:e.toArray().map(e=>{if("number"!=typeof e)throw t.createError("VectorValues must only contain numeric values.");return gZ(t.serializer,e)})}}}}}}function Id(e){return"object"==typeof e&&null!==e&&!(e instanceof Array)&&!(e instanceof Date)&&!(e instanceof de)&&!(e instanceof _J)&&!(e instanceof _W)&&!(e instanceof _O)&&!(e instanceof _Y)&&!(e instanceof _X)}function Ip(e,t,r){if(!Id(r)||!Ez(r)){let n=E$(r);if("an object"===n)throw t.createError(e+" a custom object");throw t.createError(e+" "+n)}}function If(e,t,r){if((t=cl(t))instanceof _Q)return t._internalPath;if("string"==typeof t)return Ig(e,t);throw Iy("Field path arguments must be of type string or ",e,!1,void 0,r)}let Im=RegExp("[~\\*/\\[\\]]");function Ig(e,t,r){if(t.search(Im)>=0)throw Iy(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,r);try{return new _Q(...t.split("."))._internalPath}catch(n){throw Iy(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,r)}}function Iy(e,t,r,n,i){let s=n&&!n.isEmpty(),a=void 0!==i,o=`Function ${t}() called with invalid data`;r&&(o+=" (via `toFirestore()`)"),o+=". ";let l="";return(s||a)&&(l+=" (found",s&&(l+=` in field ${n}`),a&&(l+=` in document ${i}`),l+=")"),new hU(hV.INVALID_ARGUMENT,o+e+l)}function Iv(e,t){return e.some(e=>e.isEqual(t))}class Ib{constructor(e,t,r,n,i){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=n,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new _O(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(!this._converter)return this._userDataWriter.convertValue(this._document.data.value);{let e=new IS(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}}}get(e){if(this._document){let t=this._document.data.field(IT("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class IS extends Ib{data(){return super.data()}}function IT(e,t){return"string"==typeof t?Ig(e,t):t instanceof _Q?t._internalPath:t._delegate._internalPath}function Iw(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new hU(hV.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class IC{}class Ix extends IC{}class IE extends Ix{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new IE(e,t,r)}_apply(e){let t=this._parse(e);return IF(e._query,t),new _D(e.firestore,e.converter,gT(e._query,t))}_parse(e){let t=_4(e.firestore);return ID(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}class I_ extends IC{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new I_(e,t)}_parse(e){let t=this._queryConstraints.map(t=>t._parse(e)).filter(e=>e.getFilters().length>0);return 1===t.length?t[0]:mB.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return 0===t.getFilters().length?e:(IV(e._query,t),new _D(e.firestore,e.converter,gT(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class II extends Ix{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new II(e,t)}_apply(e){let t=IO(e._query,this._field,this._direction);return new _D(e.firestore,e.converter,gw(e._query,t))}}class Ik extends Ix{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new Ik(e,t,r)}_apply(e){return new _D(e.firestore,e.converter,gC(e._query,this._limit,this._limitType))}}class IA extends Ix{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new IA(e,t,r)}_apply(e){let t=IN(e,this.type,this._docOrFields,this._inclusive);return new _D(e.firestore,e.converter,gx(e._query,t))}}class IR extends Ix{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new IR(e,t,r)}_apply(e){let t=IN(e,this.type,this._docOrFields,this._inclusive);return new _D(e.firestore,e.converter,gE(e._query,t))}}function IN(e,t,r,n){if(r[0]=cl(r[0]),r[0]instanceof Ib)return IP(e._query,e.firestore._databaseId,t,r[0]._document,n);{let i=_4(e.firestore);return IM(e._query,e.firestore._databaseId,i,t,r,n)}}function ID(e,t,r,n,i,s,a){let o;if(i.isKeyField())if("array-contains"===s||"array-contains-any"===s)throw new hU(hV.INVALID_ARGUMENT,`Invalid Query. You can't perform '${s}' queries on documentId().`);else if("in"===s||"not-in"===s){IB(a,s);let t=[];for(let r of a)t.push(IL(n,e,r));o={arrayValue:{values:t}}}else o=IL(n,e,a);else("in"===s||"not-in"===s||"array-contains-any"===s)&&IB(a,s),o=Is(r,t,a,"in"===s||"not-in"===s);return mL.create(i,s,o)}function IO(e,t,r){if(null!==e.startAt)throw new hU(hV.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new hU(hV.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new mN(t,r)}function IP(e,t,r,n,i){if(!n)throw new hU(hV.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${r}().`);let s=[];for(let r of gy(e))if(r.field.isKeyField())s.push(ma(t,n.key));else{let e=n.data.field(r.field);if(fx(e))throw new hU(hV.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+r.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null!==e)s.push(e);else{let e=r.field.canonicalString();throw new hU(hV.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${e}' (used as the orderBy) does not exist.`)}}return new m_(s,i)}function IM(e,t,r,n,i,s){let a=e.explicitOrderBy;if(i.length>a.length)throw new hU(hV.INVALID_ARGUMENT,`Too many arguments provided to ${n}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);let o=[];for(let s=0;s<i.length;s++){let l=i[s];if(a[s].field.isKeyField()){if("string"!=typeof l)throw new hU(hV.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${n}(), but got a ${typeof l}`);if(!gg(e)&&-1!==l.indexOf("/"))throw new hU(hV.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${n}() must be a plain document ID, but '${l}' contains a slash.`);let r=e.path.child(di.fromString(l));if(!dl.isDocumentKey(r))throw new hU(hV.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${n}() must result in a valid document path, but '${r}' is not because it contains an odd number of segments.`);let i=new dl(r);o.push(ma(t,i))}else{let e=Is(r,n,l);o.push(e)}}return new m_(o,s)}function IL(e,t,r){if("string"==typeof(r=cl(r))){if(""===r)throw new hU(hV.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!gg(t)&&-1!==r.indexOf("/"))throw new hU(hV.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);let n=t.path.child(di.fromString(r));if(!dl.isDocumentKey(n))throw new hU(hV.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return ma(e,new dl(n))}if(r instanceof _O)return ma(e,r._key);throw new hU(hV.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${E$(r)}.`)}function IB(e,t){if(!Array.isArray(e)||0===e.length)throw new hU(hV.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function Ij(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}function IF(e,t){let r=IU(e.filters,Ij(t.op));if(null!==r)if(r===t.op)throw new hU(hV.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`);else throw new hU(hV.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${r.toString()}' filters.`)}function IV(e,t){let r=e;for(let e of t.getFlattenedFilters())IF(r,e),r=gT(r,e)}function IU(e,t){for(let r of e)for(let e of r.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}function Iq(e){let t=e.filter(e=>e instanceof I_).length,r=e.filter(e=>e instanceof IE).length;if(t>1||t>0&&r>0)throw new hU(hV.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}class Iz{convertValue(e,t="none"){switch(fq(e)){case 0:return null;case 1:return e.booleanValue;case 2:return fv(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(fb(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw hL(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return p9(e,(e,n)=>{r[e]=this.convertValue(n,t)}),r}convertVectorValue(e){var t,r,n;return new _X(null==(n=null==(r=null==(t=e.fields)?void 0:t[fV].arrayValue)?void 0:r.values)?void 0:n.map(e=>fv(e.doubleValue)))}convertGeoPoint(e){return new _J(fv(e.latitude),fv(e.longitude))}convertArray(e,t){return(e.values||[]).map(e=>this.convertValue(e,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=f_(e);if(null==r)return null;return this.convertValue(r,t);case"estimate":return this.convertTimestamp(fI(e));default:return null}}convertTimestamp(e){let t=fy(e);return new de(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=di.fromString(e);hj(bs(r),9688,{name:e});let n=new fR(r.get(1),r.get(3)),i=new dl(r.popFirst(5));return n.isEqual(t)||hO(`Document ${i} contains a document reference within a different database (${n.projectId}/${n.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),i}}function I$(e,t,r){let n;return e?r&&(r.merge||r.mergeFields)?e.toFirestore(t,r):e.toFirestore(t):t}class IG extends Iz{constructor(e){super(),this.firestore=e}convertBytes(e){return new _W(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new _O(this.firestore,null,t)}}function IH(e,t){if("object"!=typeof e||null===e)return!1;let r=e;for(let e of t)if(e in r&&"function"==typeof r[e])return!0;return!1}class IK{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class IW extends Ib{constructor(e,t,r,n,i,s){super(e,t,r,n,s),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(!this._converter)return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps);{let t=new IQ(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}}}get(e,t={}){if(this._document){let r=this._document.data.field(IT("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class IQ extends IW{data(e={}){return super.data(e)}}class IY{constructor(e,t,r,n){this._firestore=e,this._userDataWriter=t,this._snapshot=n,this.metadata=new IK(n.hasPendingWrites,n.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new IQ(this._firestore,this._userDataWriter,r.key,r,new IK(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new hU(hV.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=IJ(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function IJ(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map(r=>{let n=new IQ(e._firestore,e._userDataWriter,r.doc.key,r.doc,new IK(e._snapshot.mutatedKeys.has(r.doc.key),e._snapshot.fromCache),e.query.converter);return r.doc,{type:"added",doc:n,oldIndex:-1,newIndex:t++}})}{let r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter(e=>t||3!==e.type).map(t=>{let n=new IQ(e._firestore,e._userDataWriter,t.doc.key,t.doc,new IK(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,s=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(s=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:IX(t.type),doc:n,oldIndex:i,newIndex:s}})}}function IX(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return hL(61501,{type:e})}}class IZ extends Iz{constructor(e){super(),this.firestore=e}convertBytes(e){return new _W(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new _O(this.firestore,null,t)}}function I0(e,t,r){return new _K(t,new IZ(e),r)}class I1{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=EL.provider,this._offlineComponentProvider={build:t=>new EP(t,null==e?void 0:e.cacheSizeBytes,this.forceOwnership)}}}function I2(e){return new I1(null==e?void 0:e.forceOwnership)}function I3(e,t){if((e=cl(e)).firestore===t)return e;throw new hU(hV.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.")}class I6{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=_4(e)}get(e){let t=I3(e,this._firestore),r=new IG(this._firestore);return this._transaction.lookup([t._key]).then(e=>{if(!e||1!==e.length)return hL(24041);let n=e[0];if(n.isFoundDocument())return new Ib(this._firestore,r,n.key,n,t.converter);if(n.isNoDocument())return new Ib(this._firestore,r,t._key,null,t.converter);throw hL(18433,{doc:n})})}set(e,t,r){let n=I3(e,this._firestore),i=I$(n.converter,t,r),s=_5(this._dataReader,"Transaction.set",n._key,i,null!==n.converter,r);return this._transaction.set(n._key,s),this}update(e,t,r,...n){let i,s=I3(e,this._firestore);return i="string"==typeof(t=cl(t))||t instanceof _Q?Ii(this._dataReader,"Transaction.update",s._key,t,r,n):In(this._dataReader,"Transaction.update",s._key,t),this._transaction.update(s._key,i),this}delete(e){let t=I3(e,this._firestore);return this._transaction.delete(t._key),this}}function I4(e){try{return JSON.parse(e)}catch(e){throw new hU(hV.INVALID_ARGUMENT,"Failed to parse JSON: "+(null==e?void 0:e.message))}}function I5(e,t){if("string"!=typeof e[t])throw new hU(hV.INVALID_ARGUMENT,"Missing string value for: "+t);return e[t]}new WeakMap;class I8{constructor(){this.existenceFilterMismatchCallbacksById=new Map}static get instance(){return I7||yV(I7=new I8),I7}notifyOnExistenceFilterMismatch(e){this.existenceFilterMismatchCallbacksById.forEach(t=>t(e))}onExistenceFilterMismatch(e){let t=Symbol(),r=this.existenceFilterMismatchCallbacksById;return r.set(t,e),()=>r.delete(t)}}let I7=null;_$("node"),ht("firebase","11.9.1","app");let I9="firebasestorage.googleapis.com",ke="storageBucket",kt=12e4,kr=6e5,kn=1e3;class ki extends u9{constructor(e,t,r=0){super(ks(e),`Firebase Storage: ${t} (${ks(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,ki.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return ks(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}function ks(e){return"storage/"+e}function ka(){let e="An unknown error occurred, please check the error payload for server response.";return new ki(h.UNKNOWN,e)}function ko(e){return new ki(h.OBJECT_NOT_FOUND,"Object '"+e+"' does not exist.")}function kl(e){return new ki(h.QUOTA_EXCEEDED,"Quota for bucket '"+e+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function ku(){let e="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new ki(h.UNAUTHENTICATED,e)}function kc(){return new ki(h.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function kh(e){return new ki(h.UNAUTHORIZED,"User does not have permission to access '"+e+"'.")}function kd(){return new ki(h.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function kp(){return new ki(h.CANCELED,"User canceled the upload/download.")}function kf(e){return new ki(h.INVALID_URL,"Invalid URL '"+e+"'.")}function km(e){return new ki(h.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+e+"'.")}function kg(){return new ki(h.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+ke+"' property when initializing the app?")}function ky(){return new ki(h.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function kv(){return new ki(h.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function kb(){return new ki(h.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function kS(e){return new ki(h.INVALID_ARGUMENT,e)}function kT(){return new ki(h.APP_DELETED,"The Firebase app was deleted.")}function kw(e){return new ki(h.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function kC(e,t){return new ki(h.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function kx(e){throw new ki(h.INTERNAL_ERROR,"Internal error: "+e)}!function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"}(h||(h={}));class kE{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){let e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=kE.makeFromUrl(e,t)}catch(t){return new kE(e,"")}if(""===r.path)return r;throw km(e)}static makeFromUrl(e,t){let r=null,n="([A-Za-z0-9.\\-_]+)";function i(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}let s=RegExp("^gs://"+n+"(/(.*))?$","i"),a={bucket:1,path:3};function o(e){e.path_=decodeURIComponent(e.path)}let l="v[A-Za-z0-9_]+",u=t.replace(/[.]/g,"\\."),c="(/([^?#]*).*)?$",h=RegExp(`^https?://${u}/${l}/b/${n}/o${c}`,"i"),d=t===I9?"(?:storage.googleapis.com|storage.cloud.google.com)":t,p="([^?#]*)",f=[{regex:s,indices:a,postModify:i},{regex:h,indices:{bucket:1,path:3},postModify:o},{regex:RegExp(`^https?://${d}/${n}/${p}`,"i"),indices:{bucket:1,path:2},postModify:o}];for(let t=0;t<f.length;t++){let n=f[t],i=n.regex.exec(e);if(i){let e=i[n.indices.bucket],t=i[n.indices.path];t||(t=""),r=new kE(e,t),n.postModify(r);break}}if(null==r)throw kf(e);return r}}class k_{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function kI(e,t,r){let n=1,i=null,s=null,a=!1,o=0;function l(){return 2===o}let u=!1;function c(...e){u||(u=!0,t.apply(null,e))}function h(t){i=setTimeout(()=>{i=null,e(p,l())},t)}function d(){s&&clearTimeout(s)}function p(e,...t){let r;if(u)return void d();if(e||l()||a){d(),c.call(null,e,...t);return}n<64&&(n*=2),1===o?(o=2,r=0):r=(n+Math.random())*1e3,h(r)}let f=!1;function m(e){f||(f=!0,d(),!u&&(null!==i?(e||(o=2),clearTimeout(i),h(0)):e||(o=1)))}return h(0),s=setTimeout(()=>{a=!0,m(!0)},r),m}function kk(e){e(!1)}function kA(e){return void 0!==e}function kR(e){return"function"==typeof e}function kN(e){return"object"==typeof e&&!Array.isArray(e)}function kD(e){return"string"==typeof e||e instanceof String}function kO(e){return kP()&&e instanceof Blob}function kP(){return"undefined"!=typeof Blob}function kM(e,t,r,n){if(n<t)throw kS(`Invalid value for '${e}'. Expected ${t} or greater.`);if(n>r)throw kS(`Invalid value for '${e}'. Expected ${r} or less.`)}function kL(e,t,r){let n=t;return null==r&&(n=`https://${t}`),`${r}://${n}/v0${e}`}function kB(e){let t=encodeURIComponent,r="?";for(let n in e)e.hasOwnProperty(n)&&(r=r+(t(n)+"=")+t(e[n])+"&");return r.slice(0,-1)}function kj(e,t){let r=e>=500&&e<600,n=-1!==[408,429].indexOf(e),i=-1!==t.indexOf(e);return r||n||i}!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(d||(d={}));class kF{constructor(e,t,r,n,i,s,a,o,l,u,c,h=!0,d=!1){this.url_=e,this.method_=t,this.headers_=r,this.body_=n,this.successCodes_=i,this.additionalRetryCodes_=s,this.callback_=a,this.errorCallback_=o,this.timeout_=l,this.progressCallback_=u,this.connectionFactory_=c,this.retry=h,this.isUsingEmulator=d,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((e,t)=>{this.resolve_=e,this.reject_=t,this.start_()})}start_(){let e=(e,t)=>{if(t)return void e(!1,new kV(!1,null,!0));let r=this.connectionFactory_();this.pendingConnection_=r;let n=e=>{let t=e.loaded,r=e.lengthComputable?e.total:-1;null!==this.progressCallback_&&this.progressCallback_(t,r)};null!==this.progressCallback_&&r.addUploadProgressListener(n),r.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&r.removeUploadProgressListener(n),this.pendingConnection_=null;let t=r.getErrorCode()===d.NO_ERROR,i=r.getStatus();if(!t||kj(i,this.additionalRetryCodes_)&&this.retry)return void e(!1,new kV(!1,null,r.getErrorCode()===d.ABORT));e(!0,new kV(-1!==this.successCodes_.indexOf(i),r))})},t=(e,t)=>{let r=this.resolve_,n=this.reject_,i=t.connection;if(t.wasSuccessCode)try{let e=this.callback_(i,i.getResponse());kA(e)?r(e):r()}catch(e){n(e)}else if(null!==i){let e=ka();e.serverResponse=i.getErrorText(),n(this.errorCallback_?this.errorCallback_(i,e):e)}else n(t.canceled?this.appDelete_?kT():kp():kd())};this.canceled_?t(!1,new kV(!1,null,!0)):this.backoffId_=kI(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&kk(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class kV{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function kU(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}function kq(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!=t?t:"AppManager")}function kz(e,t){t&&(e["X-Firebase-GMPID"]=t)}function k$(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}function kG(e,t,r,n,i,s,a=!0,o=!1){let l=kB(e.urlParams),u=e.url+l,c=Object.assign({},e.headers);return kz(c,t),kU(c,r),kq(c,s),k$(c,n),new kF(u,e.method,c,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i,a,o)}function kH(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function kK(...e){let t=kH();if(void 0!==t){let r=new t;for(let t=0;t<e.length;t++)r.append(e[t]);return r.getBlob()}if(kP())return new Blob(e);throw new ki(h.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}function kW(e,t,r){return e.webkitSlice?e.webkitSlice(t,r):e.mozSlice?e.mozSlice(t,r):e.slice?e.slice(t,r):null}function kQ(e){if(/[^-A-Za-z0-9+/=]/.test(e))throw kC("base64","Invalid character found");return Buffer.from(e,"base64").toString("binary")}let kY={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class kJ{constructor(e,t){this.data=e,this.contentType=t||null}}function kX(e,t){switch(e){case kY.RAW:return new kJ(kZ(t));case kY.BASE64:case kY.BASE64URL:return new kJ(k1(e,t));case kY.DATA_URL:return new kJ(k3(t),k6(t))}throw ka()}function kZ(e){let t=[];for(let r=0;r<e.length;r++){let n=e.charCodeAt(r);n<=127?t.push(n):n<=2047?t.push(192|n>>6,128|63&n):(64512&n)==55296?r<e.length-1&&(64512&e.charCodeAt(r+1))==56320?(n=65536|(1023&n)<<10|1023&e.charCodeAt(++r),t.push(240|n>>18,128|n>>12&63,128|n>>6&63,128|63&n)):t.push(239,191,189):(64512&n)==56320?t.push(239,191,189):t.push(224|n>>12,128|n>>6&63,128|63&n)}return new Uint8Array(t)}function k0(e){let t;try{t=decodeURIComponent(e)}catch(e){throw kC(kY.DATA_URL,"Malformed data URL.")}return kZ(t)}function k1(e,t){let r;switch(e){case kY.BASE64:{let r=-1!==t.indexOf("-"),n=-1!==t.indexOf("_");if(r||n)throw kC(e,"Invalid character '"+(r?"-":"_")+"' found: is it base64url encoded?");break}case kY.BASE64URL:{let r=-1!==t.indexOf("+"),n=-1!==t.indexOf("/");if(r||n)throw kC(e,"Invalid character '"+(r?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/")}}try{r=kQ(t)}catch(t){if(t.message.includes("polyfill"))throw t;throw kC(e,"Invalid character found")}let n=new Uint8Array(r.length);for(let e=0;e<r.length;e++)n[e]=r.charCodeAt(e);return n}class k2{constructor(e){this.base64=!1,this.contentType=null;let t=e.match(/^data:([^,]+)?,/);if(null===t)throw kC(kY.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");let r=t[1]||null;null!=r&&(this.base64=k4(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function k3(e){let t=new k2(e);return t.base64?k1(kY.BASE64,t.rest):k0(t.rest)}function k6(e){return new k2(e).contentType}function k4(e,t){return e.length>=t.length&&e.substring(e.length-t.length)===t}class k5{constructor(e,t){let r=0,n="";kO(e)?(this.data_=e,r=e.size,n=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=n}size(){return this.size_}type(){return this.type_}slice(e,t){if(!kO(this.data_))return new k5(new Uint8Array(this.data_.buffer,e,t-e),!0);{let r=kW(this.data_,e,t);return null===r?null:new k5(r)}}static getBlob(...e){if(kP()){let t=e.map(e=>e instanceof k5?e.data_:e);return new k5(kK.apply(null,t))}{let t=e.map(e=>kD(e)?kX(kY.RAW,e).data:e.data_),r=0;t.forEach(e=>{r+=e.byteLength});let n=new Uint8Array(r),i=0;return t.forEach(e=>{for(let t=0;t<e.length;t++)n[i++]=e[t]}),new k5(n,!0)}}uploadData(){return this.data_}}function k8(e){let t;try{t=JSON.parse(e)}catch(e){return null}return kN(t)?t:null}function k7(e){if(0===e.length)return null;let t=e.lastIndexOf("/");return -1===t?"":e.slice(0,t)}function k9(e,t){let r=t.split("/").filter(e=>e.length>0).join("/");return 0===e.length?r:e+"/"+r}function Ae(e){let t=e.lastIndexOf("/",e.length-2);return -1===t?e:e.slice(t+1)}function At(e,t){return t}class Ar{constructor(e,t,r,n){this.server=e,this.local=t||e,this.writable=!!r,this.xform=n||At}}let An=null;function Ai(e){return!kD(e)||e.length<2?e:Ae(e)}function As(){if(An)return An;let e=[];function t(e,t){return Ai(t)}e.push(new Ar("bucket")),e.push(new Ar("generation")),e.push(new Ar("metageneration")),e.push(new Ar("name","fullPath",!0));let r=new Ar("name");function n(e,t){return void 0!==t?Number(t):t}r.xform=t,e.push(r);let i=new Ar("size");return i.xform=n,e.push(i),e.push(new Ar("timeCreated")),e.push(new Ar("updated")),e.push(new Ar("md5Hash",null,!0)),e.push(new Ar("cacheControl",null,!0)),e.push(new Ar("contentDisposition",null,!0)),e.push(new Ar("contentEncoding",null,!0)),e.push(new Ar("contentLanguage",null,!0)),e.push(new Ar("contentType",null,!0)),e.push(new Ar("metadata","customMetadata",!0)),An=e}function Aa(e,t){function r(){let r=new kE(e.bucket,e.fullPath);return t._makeStorageReference(r)}Object.defineProperty(e,"ref",{get:r})}function Ao(e,t,r){let n={};n.type="file";let i=r.length;for(let e=0;e<i;e++){let i=r[e];n[i.local]=i.xform(n,t[i.server])}return Aa(n,e),n}function Al(e,t,r){let n=k8(t);return null===n?null:Ao(e,n,r)}function Au(e,t,r,n){let i=k8(t);if(null===i||!kD(i.downloadTokens))return null;let s=i.downloadTokens;if(0===s.length)return null;let a=encodeURIComponent;return s.split(",").map(t=>{let i=e.bucket,s=e.fullPath;return kL("/b/"+a(i)+"/o/"+a(s),r,n)+kB({alt:"media",token:t})})[0]}function Ac(e,t){let r={},n=t.length;for(let i=0;i<n;i++){let n=t[i];n.writable&&(r[n.server]=e[n.local])}return JSON.stringify(r)}let Ah="prefixes",Ad="items";function Ap(e,t,r){let n={prefixes:[],items:[],nextPageToken:r.nextPageToken};if(r[Ah])for(let i of r[Ah]){let r=i.replace(/\/$/,""),s=e._makeStorageReference(new kE(t,r));n.prefixes.push(s)}if(r[Ad])for(let i of r[Ad]){let r=e._makeStorageReference(new kE(t,i.name));n.items.push(r)}return n}function Af(e,t,r){let n=k8(r);return null===n?null:Ap(e,t,n)}class Am{constructor(e,t,r,n){this.url=e,this.method=t,this.handler=r,this.timeout=n,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Ag(e){if(!e)throw ka()}function Ay(e,t){return function(r,n){let i=Al(e,n,t);return Ag(null!==i),i}}function Av(e,t){return function(r,n){let i=Af(e,t,n);return Ag(null!==i),i}}function Ab(e,t){return function(r,n){let i=Al(e,n,t);return Ag(null!==i),Au(i,n,e.host,e._protocol)}}function AS(e){return function(t,r){let n;return(n=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?kc():ku():402===t.getStatus()?kl(e.bucket):403===t.getStatus()?kh(e.path):r).status=t.getStatus(),n.serverResponse=r.serverResponse,n}}function AT(e){let t=AS(e);return function(r,n){let i=t(r,n);return 404===r.getStatus()&&(i=ko(e.path)),i.serverResponse=n.serverResponse,i}}function Aw(e,t,r){let n=kL(t.fullServerUrl(),e.host,e._protocol),i="GET",s=e.maxOperationRetryTime,a=new Am(n,i,Ay(e,r),s);return a.errorHandler=AT(t),a}function AC(e,t,r,n,i){let s={};t.isRoot?s.prefix="":s.prefix=t.path+"/",r&&r.length>0&&(s.delimiter=r),n&&(s.pageToken=n),i&&(s.maxResults=i);let a=kL(t.bucketOnlyServerUrl(),e.host,e._protocol),o="GET",l=e.maxOperationRetryTime,u=new Am(a,o,Av(e,t.bucket),l);return u.urlParams=s,u.errorHandler=AS(t),u}function Ax(e,t,r){let n=new Am(kL(t.fullServerUrl(),e.host,e._protocol)+"?alt=media","GET",(e,t)=>t,e.maxOperationRetryTime);return n.errorHandler=AT(t),void 0!==r&&(n.headers.Range=`bytes=0-${r}`,n.successCodes=[200,206]),n}function AE(e,t,r){let n=kL(t.fullServerUrl(),e.host,e._protocol),i="GET",s=e.maxOperationRetryTime,a=new Am(n,i,Ab(e,r),s);return a.errorHandler=AT(t),a}function A_(e,t,r,n){let i=kL(t.fullServerUrl(),e.host,e._protocol),s="PATCH",a=Ac(r,n),o={"Content-Type":"application/json; charset=utf-8"},l=e.maxOperationRetryTime,u=new Am(i,s,Ay(e,n),l);return u.headers=o,u.body=a,u.errorHandler=AT(t),u}function AI(e,t){let r=new Am(kL(t.fullServerUrl(),e.host,e._protocol),"DELETE",function(e,t){},e.maxOperationRetryTime);return r.successCodes=[200,204],r.errorHandler=AT(t),r}function Ak(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}function AA(e,t,r){let n=Object.assign({},r);return n.fullPath=e.path,n.size=t.size(),n.contentType||(n.contentType=Ak(null,t)),n}function AR(e,t,r,n,i){let s=t.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"},o=function(){let e="";for(let t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();a["Content-Type"]="multipart/related; boundary="+o;let l=AA(t,n,i),u="--"+o+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+Ac(l,r)+"\r\n--"+o+"\r\nContent-Type: "+l.contentType+"\r\n\r\n",c="\r\n--"+o+"--",h=k5.getBlob(u,n,c);if(null===h)throw ky();let d={name:l.fullPath},p=kL(s,e.host,e._protocol),f="POST",m=e.maxUploadRetryTime,g=new Am(p,f,Ay(e,r),m);return g.urlParams=d,g.headers=a,g.body=h.uploadData(),g.errorHandler=AS(t),g}class AN{constructor(e,t,r,n){this.current=e,this.total=t,this.finalized=!!r,this.metadata=n||null}}function AD(e,t){let r=null;try{r=e.getResponseHeader("X-Goog-Upload-Status")}catch(e){Ag(!1)}let n=t||["active"];return Ag(!!r&&-1!==n.indexOf(r)),r}function AO(e,t,r,n,i){let s=t.bucketOnlyServerUrl(),a=AA(t,n,i),o={name:a.fullPath},l=kL(s,e.host,e._protocol),u="POST",c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n.size()}`,"X-Goog-Upload-Header-Content-Type":a.contentType,"Content-Type":"application/json; charset=utf-8"},h=Ac(a,r),d=new Am(l,u,function(e){let t;AD(e);try{t=e.getResponseHeader("X-Goog-Upload-URL")}catch(e){Ag(!1)}return Ag(kD(t)),t},e.maxUploadRetryTime);return d.urlParams=o,d.headers=c,d.body=h,d.errorHandler=AS(t),d}function AP(e,t,r,n){let i={"X-Goog-Upload-Command":"query"},s=new Am(r,"POST",function(e){let t=AD(e,["active","final"]),r=null;try{r=e.getResponseHeader("X-Goog-Upload-Size-Received")}catch(e){Ag(!1)}r||Ag(!1);let i=Number(r);return Ag(!isNaN(i)),new AN(i,n.size(),"final"===t)},e.maxUploadRetryTime);return s.headers=i,s.errorHandler=AS(t),s}let AM=null;function AL(e,t,r,n,i,s,a,o){let l=new AN(0,0);if(a?(l.current=a.current,l.total=a.total):(l.current=0,l.total=n.size()),n.size()!==l.total)throw kv();let u=l.total-l.current,c=u;i>0&&(c=Math.min(c,i));let h=l.current,d=h+c,p="",f={"X-Goog-Upload-Command":p=0===c?"finalize":u===c?"upload, finalize":"upload","X-Goog-Upload-Offset":`${l.current}`},m=n.slice(h,d);if(null===m)throw ky();let g=new Am(r,"POST",function(e,r){let i,a=AD(e,["active","final"]),o=l.current+c,u=n.size();return i="final"===a?Ay(t,s)(e,r):null,new AN(o,u,"final"===a,i)},t.maxUploadRetryTime);return g.headers=f,g.body=m.uploadData(),g.progressCallback=o||null,g.errorHandler=AS(e),g}let AB={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Aj(e){switch(e){case"running":case"pausing":case"canceling":return AB.RUNNING;case"paused":return AB.PAUSED;case"success":return AB.SUCCESS;case"canceled":return AB.CANCELED;default:return AB.ERROR}}class AF{constructor(e,t,r){if(kR(e)||null!=t||null!=r)this.next=e,this.error=null!=t?t:void 0,this.complete=null!=r?r:void 0;else{let t=e;this.next=t.next,this.error=t.error,this.complete=t.complete}}}function AV(e){return(...t)=>{Promise.resolve().then(()=>e(...t))}}let AU=null;class Aq{constructor(){this.errorText_="",this.sent_=!1,this.errorCode_=d.NO_ERROR}async send(e,t,r,n,i){if(this.sent_)throw kx("cannot .send() more than once");this.sent_=!0;try{let s=await AW(e,t,r,i,n);this.headers_=s.headers,this.statusCode_=s.status,this.errorCode_=d.NO_ERROR,this.body_=await s.arrayBuffer()}catch(e){this.errorText_=null==e?void 0:e.message,this.statusCode_=0,this.errorCode_=d.NETWORK_ERROR}}getErrorCode(){if(void 0===this.errorCode_)throw kx("cannot .getErrorCode() before receiving response");return this.errorCode_}getStatus(){if(void 0===this.statusCode_)throw kx("cannot .getStatus() before receiving response");return this.statusCode_}getErrorText(){return this.errorText_}abort(){}getResponseHeader(e){if(!this.headers_)throw kx("cannot .getResponseHeader() before receiving response");return this.headers_.get(e)}addUploadProgressListener(e){}removeUploadProgressListener(e){}}class Az extends null{getResponse(){if(!this.body_)throw kx("cannot .getResponse() before receiving response");return Buffer.from(this.body_).toString("utf-8")}}function A$(){return AU?AU():new Az}class AG extends null{getResponse(){if(!this.body_)throw kx("cannot .getResponse() before sending");return this.body_}}function AH(){return new AG}class AK extends Aq{constructor(){super(...arguments),this.stream_=null}async send(e,t,r,n,i){if(this.sent_)throw kx("cannot .send() more than once");this.sent_=!0;try{let s=await AW(e,t,r,i,n);this.headers_=s.headers,this.statusCode_=s.status,this.errorCode_=d.NO_ERROR,this.stream_=s.body}catch(e){this.errorText_=null==e?void 0:e.message,this.statusCode_=0,this.errorCode_=d.NETWORK_ERROR}}getResponse(){if(!this.stream_)throw kx("cannot .getResponse() before sending");return this.stream_}}function AW(e,t,r,n,i){let s={method:t,headers:n||{},body:i};return uW(e)&&r&&(s.credentials="include"),fetch(e,s)}function AQ(){return new AK}class AY{isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=As(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=e=>{if(this._request=void 0,this._chunkMultiplier=1,e._codeEquals(h.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{let t=this.isExponentialBackoffExpired();if(kj(e.status,[]))if(t)e=kd();else{this.sleepTime=Math.max(2*this.sleepTime,kn),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=e,this._transition("error")}},this._metadataErrorHandler=e=>{this._request=void 0,e._codeEquals(h.CANCELED)?this.completeTransitions_():(this._error=e,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((e,t)=>{this._resolve=e,this._reject=t,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){let e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{let r=AO(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),n=this._ref.storage._makeRequest(r,A$,e,t);this._request=n,n.getPromise().then(e=>{this._request=void 0,this._uploadUrl=e,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){let e=this._uploadUrl;this._resolveToken((t,r)=>{let n=AP(this._ref.storage,this._ref._location,e,this._blob),i=this._ref.storage._makeRequest(n,A$,t,r);this._request=i,i.getPromise().then(e=>{this._request=void 0,this._updateProgress(e.current),this._needToFetchStatus=!1,e.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){let e=AM*this._chunkMultiplier,t=new AN(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((n,i)=>{let s;try{s=AL(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(e){this._error=e,this._transition("error");return}let a=this._ref.storage._makeRequest(s,A$,n,i,!1);this._request=a,a.getPromise().then(e=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(e.current),e.finalized?(this._metadata=e.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){2*(AM*this._chunkMultiplier)<0x2000000&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{let r=Aw(this._ref.storage,this._ref._location,this._mappings),n=this._ref.storage._makeRequest(r,A$,e,t);this._request=n,n.getPromise().then(e=>{this._request=void 0,this._metadata=e,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{let r=AR(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),n=this._ref.storage._makeRequest(r,A$,e,t);this._request=n,n.getPromise().then(e=>{this._request=void 0,this._metadata=e,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){let t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":let t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=kp(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){let e=Aj(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,n){let i=new AF(t||void 0,r||void 0,n||void 0);return this._addObserver(i),()=>{this._removeObserver(i)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){let t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(e=>{this._notifyObserver(e)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(Aj(this._state)){case AB.SUCCESS:AV(this._resolve.bind(null,this.snapshot))();break;case AB.CANCELED:case AB.ERROR:AV(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(Aj(this._state)){case AB.RUNNING:case AB.PAUSED:e.next&&AV(e.next.bind(e,this.snapshot))();break;case AB.SUCCESS:e.complete&&AV(e.complete.bind(e))();break;case AB.CANCELED:case AB.ERROR:default:e.error&&AV(e.error.bind(e,this._error))()}}resume(){let e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){let e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){let e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class AJ{constructor(e,t){this._service=e,t instanceof kE?this._location=t:this._location=kE.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new AJ(e,t)}get root(){let e=new kE(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Ae(this._location.path)}get storage(){return this._service}get parent(){let e=k7(this._location.path);if(null===e)return null;let t=new kE(this._location.bucket,e);return new AJ(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw kw(e)}}function AX(e,t,r){e._throwIfRoot("uploadBytes");let n=AR(e.storage,e._location,As(),new k5(t,!0),r);return e.storage.makeRequestWithTokens(n,A$).then(t=>({metadata:t,ref:e}))}async function AZ(e,t,r){let n={pageToken:r},i=await A0(e,n);t.prefixes.push(...i.prefixes),t.items.push(...i.items),null!=i.nextPageToken&&await AZ(e,t,i.nextPageToken)}function A0(e,t){null!=t&&"number"==typeof t.maxResults&&kM("options.maxResults",1,1e3,t.maxResults);let r=t||{},n=AC(e.storage,e._location,"/",r.pageToken,r.maxResults);return e.storage.makeRequestWithTokens(n,A$)}function A1(e,t){let r=k9(e._location.path,t),n=new kE(e._location.bucket,r);return new AJ(e.storage,n)}function A2(e){return/^[A-Za-z]+:\/\//.test(e)}function A3(e,t){return new AJ(e,t)}function A6(e,t){if(e instanceof A8){let r=e;if(null==r._bucket)throw kg();let n=new AJ(r,r._bucket);return null!=t?A6(n,t):n}return void 0!==t?A1(e,t):e}function A4(e,t){let r=null==t?void 0:t[ke];return null==r?null:kE.makeFromBucketSpec(r,e)}function A5(e,t,r,n={}){e.host=`${t}:${r}`;let i=uW(t);i&&(uQ(`https://${e.host}/b`),u1("Storage",!0)),e._isUsingEmulator=!0,e._protocol=i?"https":"http";let{mockUserToken:s}=n;s&&(e._overrideAuthToken="string"==typeof s?s:uY(s,e.app.options.projectId))}class A8{constructor(e,t,r,n,i,s=!1){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=n,this._firebaseVersion=i,this._isUsingEmulator=s,this._bucket=null,this._host=I9,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=kt,this._maxUploadRetryTime=kr,this._requests=new Set,null!=n?this._bucket=kE.makeFromBucketSpec(n,this._host):this._bucket=A4(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,null!=this._url?this._bucket=kE.makeFromBucketSpec(this._url,e):this._bucket=A4(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){kM("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){kM("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;let e=this._authProvider.getImmediate({optional:!0});if(e){let t=await e.getToken();if(null!==t)return t.accessToken}return null}async _getAppCheckToken(){if(c2(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new AJ(this,e)}_makeRequest(e,t,r,n,i=!0){if(this._deleted)return new k_(kT());{let s=kG(e,this._appId,r,n,t,this._firebaseVersion,i,this._isUsingEmulator);return this._requests.add(s),s.getPromise().then(()=>this._requests.delete(s),()=>this._requests.delete(s)),s}}async makeRequestWithTokens(e,t){let[r,n]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,n).getPromise()}}let A7="@firebase/storage",A9="0.13.13",Re="storage";function Rt(e=c7(),t){let r=c1(e=cl(e),Re).getImmediate({identifier:t}),n=uG("storage");return n&&Rr(r,...n),r}function Rr(e,t,r,n={}){A5(e,t,r,n)}function Rn(e,{instanceIdentifier:t}){let r=e.getProvider("app").getImmediate();return new A8(r,e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t,c5)}!function(){c0(new cu(Re,Rn,"PUBLIC").setMultipleInstances(!0)),ht(A7,A9)}();let Ri={apiKey:"AIzaSyB3STvFlyzwm95CgGjJU5kQbWmAc8j6jpY",authDomain:"cb-vempreender.firebaseapp.com",projectId:"cb-vempreender",storageBucket:"cb-vempreender.firebasestorage.app",messagingSenderId:"826670588256",appId:"1:826670588256:web:1d180e4a246b86c8e47e05"},Rs=c9().length?c7():c8(Ri),Ra=_V(Rs);Rt(Rs),_M(Ra,"posts");let Ro=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]],Rl=(0,v.A)("MessageSquare",Ro);function Ru(){let e="/chat/?id=hyP1f247eFPotrOgqnW8OpQuyz23";return(0,p.jsx)("div",{className:"fixed bottom-6 right-6 z-50",children:(0,p.jsx)(f.$,{asChild:!0,size:"icon",className:"h-14 w-14 rounded-full bg-primary shadow-lg transition-transform hover:scale-110 hover:bg-primary/90","aria-label":"Abrir chat",children:(0,p.jsx)(g(),{href:e,target:"_blank",rel:"noopener noreferrer",children:(0,p.jsx)(Rl,{className:"h-7 w-7"})})})})}var Rc=r(24840),Rh=r(67146);let Rd=[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]],Rp=(0,v.A)("Menu",Rd),Rf=[{href:"/#inicio",label:"In\xedcio"},{href:"/#solucoes",label:"Solu\xe7\xf5es"},{href:"/#como-funciona",label:"Como Funciona"},{href:"/#atraia-clientes",label:"Atraia Clientes"},{href:"/#nosso-plano",label:"Planos"},{href:"/#depoimentos",label:"Depoimentos"},{href:"/blog",label:"Blog"},{href:"/#afiliados",label:"Afiliados"},{href:"/#faq",label:"FAQ"}];function Rm(){let e="/login/auth.html";return(0,p.jsx)("header",{className:"sticky top-0 z-40 w-full border-b border-border/50 bg-background/60 backdrop-blur-lg",children:(0,p.jsxs)("div",{className:"container mx-auto flex h-16 items-center justify-between px-4 md:px-24",children:[(0,p.jsx)(g(),{href:"/",children:(0,p.jsx)(Rc.A,{})}),(0,p.jsxs)("nav",{className:"hidden md:flex items-center gap-4",children:[(0,p.jsx)("div",{className:"flex items-center space-x-4 text-base font-medium",children:Rf.map(e=>(0,p.jsx)(g(),{href:e.href,className:"text-muted-foreground transition-colors hover:text-foreground",children:e.label},e.label))}),(0,p.jsx)(f.$,{variant:"ghost",className:"text-muted-foreground hover:bg-accent/20 hover:text-foreground",asChild:!0,children:(0,p.jsx)(g(),{href:e,target:"_blank",rel:"noopener noreferrer",children:"Login"})})]}),(0,p.jsx)("div",{className:"flex md:hidden",children:(0,p.jsxs)(Rh.Sheet,{children:[(0,p.jsx)(Rh.SheetTrigger,{asChild:!0,children:(0,p.jsxs)(f.$,{variant:"ghost",size:"icon",children:[(0,p.jsx)(Rp,{className:"h-6 w-6"}),(0,p.jsx)("span",{className:"sr-only",children:"Abrir menu"})]})}),(0,p.jsx)(Rh.SheetContent,{side:"right",className:"w-[300px] sm:w-[400px]",children:(0,p.jsxs)("div",{className:"flex flex-col h-full",children:[(0,p.jsx)("div",{className:"mb-8",children:(0,p.jsx)(g(),{href:"/",children:(0,p.jsx)(Rc.A,{})})}),(0,p.jsx)("nav",{className:"flex flex-col gap-6 text-lg font-medium",children:Rf.map(e=>(0,p.jsx)(g(),{href:e.href,className:"text-muted-foreground transition-colors hover:text-foreground",children:e.label},e.label))}),(0,p.jsx)("div",{className:"mt-auto border-t pt-6",children:(0,p.jsx)(f.$,{variant:"ghost",className:"w-full justify-start text-muted-foreground hover:bg-accent/20 hover:text-foreground text-lg",asChild:!0,children:(0,p.jsx)(g(),{href:e,target:"_blank",rel:"noopener noreferrer",children:"Login"})})})]})})]})})]})})}function Rg(){return(0,p.jsx)("footer",{className:"border-t border-border/50 py-8",children:(0,p.jsxs)("div",{className:"container mx-auto flex flex-col items-center justify-between gap-6 px-4 md:px-24 sm:flex-row",children:[(0,p.jsx)(Rc.A,{}),(0,p.jsxs)("div",{className:"text-sm text-muted-foreground flex flex-col sm:flex-row gap-2 sm:gap-4 items-center",children:[(0,p.jsx)(g(),{href:"/politica-de-privacidade",className:"hover:text-foreground",children:"Pol\xedtica de Privacidade"}),(0,p.jsx)("span",{className:"hidden sm:inline",children:"|"}),(0,p.jsx)(g(),{href:"/termos-de-uso",className:"hover:text-foreground",children:"Termos de Uso"})]}),(0,p.jsxs)("p",{className:"text-sm text-muted-foreground",children:["\xa9 Vempreender ",new Date().getFullYear()]})]})})}var Ry=r(65773),Rv=r(29867);function Rb(){(0,Ry.useSearchParams)();let{toast:e}=(0,Rv.dj)();return null}function RS(){let[e,t]=(0,N.useState)([]),[r,n]=(0,N.useState)(!0);return(0,p.jsxs)("div",{className:"flex min-h-screen flex-col",children:[(0,p.jsx)(N.Suspense,{fallback:null,children:(0,p.jsx)(Rb,{})}),(0,p.jsx)(Rm,{}),(0,p.jsxs)("main",{className:"flex-1",children:[(0,p.jsx)(y,{}),(0,p.jsx)(V,{}),(0,p.jsx)(ll,{}),(0,p.jsx)(ld,{}),(0,p.jsx)(lf,{}),(0,p.jsx)(lb,{}),(0,p.jsx)(lT,{posts:e}),(0,p.jsx)(lx,{}),(0,p.jsx)(uI,{})]}),(0,p.jsx)(Ru,{}),(0,p.jsx)(Rg,{})]})}function RT(){return(0,p.jsx)(N.Suspense,{fallback:(0,p.jsx)("div",{children:"Loading..."}),children:(0,p.jsx)(RS,{})})}},81630:e=>{"use strict";e.exports=require("http")},82566:e=>{"use strict";e.exports=JSON.parse('{"nested":{"google":{"nested":{"protobuf":{"nested":{"Api":{"fields":{"name":{"type":"string","id":1},"methods":{"rule":"repeated","type":"Method","id":2},"options":{"rule":"repeated","type":"Option","id":3},"version":{"type":"string","id":4},"sourceContext":{"type":"SourceContext","id":5},"mixins":{"rule":"repeated","type":"Mixin","id":6},"syntax":{"type":"Syntax","id":7}}},"Method":{"fields":{"name":{"type":"string","id":1},"requestTypeUrl":{"type":"string","id":2},"requestStreaming":{"type":"bool","id":3},"responseTypeUrl":{"type":"string","id":4},"responseStreaming":{"type":"bool","id":5},"options":{"rule":"repeated","type":"Option","id":6},"syntax":{"type":"Syntax","id":7}}},"Mixin":{"fields":{"name":{"type":"string","id":1},"root":{"type":"string","id":2}}},"SourceContext":{"fields":{"fileName":{"type":"string","id":1}}},"Option":{"fields":{"name":{"type":"string","id":1},"value":{"type":"Any","id":2}}},"Syntax":{"values":{"SYNTAX_PROTO2":0,"SYNTAX_PROTO3":1}}}}}}}}')},82703:(e,t,r)=>{"use strict";e.exports=h;var n,i,s,a=r(77968);((h.prototype=Object.create(a.prototype)).constructor=h).className="Root";var o=r(73267),l=r(32110),u=r(12630),c=r(93107);function h(e){a.call(this,"",e),this.deferred=[],this.files=[]}function d(){}h.fromJSON=function(e,t){return t||(t=new h),e.options&&t.setOptions(e.options),t.addJSON(e.nested)},h.prototype.resolvePath=c.path.resolve,h.prototype.fetch=c.fetch,h.prototype.load=function e(t,r,n){"function"==typeof r&&(n=r,r=void 0);var a=this;if(!n)return c.asPromise(e,a,t,r);var o=n===d;function l(e,t){if(n){if(o)throw e;var r=n;n=null,r(e,t)}}function u(e){var t=e.lastIndexOf("google/protobuf/");if(t>-1){var r=e.substring(t);if(r in s)return r}return null}function h(e,t){try{if(c.isString(t)&&"{"===t.charAt(0)&&(t=JSON.parse(t)),c.isString(t)){i.filename=e;var n,s=i(t,a,r),h=0;if(s.imports)for(;h<s.imports.length;++h)(n=u(s.imports[h])||a.resolvePath(e,s.imports[h]))&&p(n);if(s.weakImports)for(h=0;h<s.weakImports.length;++h)(n=u(s.weakImports[h])||a.resolvePath(e,s.weakImports[h]))&&p(n,!0)}else a.setOptions(t.options).addJSON(t.nested)}catch(e){l(e)}o||f||l(null,a)}function p(e,t){if(e=u(e)||e,!(a.files.indexOf(e)>-1)){if(a.files.push(e),e in s)return void(o?h(e,s[e]):(++f,setTimeout(function(){--f,h(e,s[e])})));if(o){var r;try{r=c.fs.readFileSync(e).toString("utf8")}catch(e){t||l(e);return}h(e,r)}else++f,a.fetch(e,function(r,i){if(--f,n){if(r)return void(t?f||l(null,a):l(r));h(e,i)}})}}var f=0;c.isString(t)&&(t=[t]);for(var m,g=0;g<t.length;++g)(m=a.resolvePath("",t[g]))&&p(m);if(o)return a;f||l(null,a)},h.prototype.loadSync=function(e,t){if(!c.isNode)throw Error("not supported");return this.load(e,t,d)},h.prototype.resolveAll=function(){if(this.deferred.length)throw Error("unresolvable extensions: "+this.deferred.map(function(e){return"'extend "+e.extend+"' in "+e.parent.fullName}).join(", "));return a.prototype.resolveAll.call(this)};var p=/^[A-Z]/;function f(e,t){var r=t.parent.lookup(t.extend);if(r){var n=new o(t.fullName,t.id,t.type,t.rule,void 0,t.options);return!!r.get(n.name)||(n.declaringField=t,t.extensionField=n,r.add(n),!0)}return!1}h.prototype._handleAdd=function(e){if(e instanceof o)void 0===e.extend||e.extensionField||f(this,e)||this.deferred.push(e);else if(e instanceof l)p.test(e.name)&&(e.parent[e.name]=e.values);else if(!(e instanceof u)){if(e instanceof n)for(var t=0;t<this.deferred.length;)f(this,this.deferred[t])?this.deferred.splice(t,1):++t;for(var r=0;r<e.nestedArray.length;++r)this._handleAdd(e._nestedArray[r]);p.test(e.name)&&(e.parent[e.name]=e)}},h.prototype._handleRemove=function(e){if(e instanceof o){if(void 0!==e.extend)if(e.extensionField)e.extensionField.parent.remove(e.extensionField),e.extensionField=null;else{var t=this.deferred.indexOf(e);t>-1&&this.deferred.splice(t,1)}}else if(e instanceof l)p.test(e.name)&&delete e.parent[e.name];else if(e instanceof a){for(var r=0;r<e.nestedArray.length;++r)this._handleRemove(e._nestedArray[r]);p.test(e.name)&&delete e.parent[e.name]}},h._configure=function(e,t,r){n=e,i=t,s=r}},83273:e=>{"use strict";e.exports=function e(e,t,r){var n=r||8192,i=n>>>1,s=null,a=n;return function(r){if(r<1||r>i)return e(r);a+r>n&&(s=e(n),a=0);var o=t.call(s,a,a+=r);return 7&a&&(a=(7|a)+1),o}}},84553:e=>{"use strict";function t(){this._listeners={}}e.exports=t,t.prototype.on=function(e,t,r){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:t,ctx:r||this}),this},t.prototype.off=function(e,t){if(void 0===e)this._listeners={};else if(void 0===t)this._listeners[e]=[];else for(var r=this._listeners[e],n=0;n<r.length;)r[n].fn===t?r.splice(n,1):++n;return this},t.prototype.emit=function(e){var t=this._listeners[e];if(t){for(var r=[],n=1;n<arguments.length;)r.push(arguments[n++]);for(n=0;n<t.length;)t[n].fn.apply(t[n++].ctx,r)}return this}},85481:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setup=void 0;let n=r(5674);class i{constructor(e,t,r){let n;this.listener=t,this.addresses=[],this.hasReturnedResult=!1,n=""===e.authority?"/"+e.path:e.path,this.addresses=[{path:n}]}updateResolution(){this.hasReturnedResult||(this.hasReturnedResult=!0,process.nextTick(this.listener.onSuccessfulResolution,this.addresses,null,null,null,{}))}destroy(){}static getDefaultAuthority(e){return"localhost"}}t.setup=function(){(0,n.registerResolver)("unix",i)}},86239:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateLoadBalancingConfig=t.getFirstUsableConfig=t.isLoadBalancerNameRegistered=t.createLoadBalancer=t.registerDefaultLoadBalancerType=t.registerLoadBalancerType=t.createChildChannelControlHelper=void 0,t.createChildChannelControlHelper=function(e,t){var r,n,i,s,a,o,l,u,c,h;return{createSubchannel:null!=(n=null==(r=t.createSubchannel)?void 0:r.bind(t))?n:e.createSubchannel.bind(e),updateState:null!=(s=null==(i=t.updateState)?void 0:i.bind(t))?s:e.updateState.bind(e),requestReresolution:null!=(o=null==(a=t.requestReresolution)?void 0:a.bind(t))?o:e.requestReresolution.bind(e),addChannelzChild:null!=(u=null==(l=t.addChannelzChild)?void 0:l.bind(t))?u:e.addChannelzChild.bind(e),removeChannelzChild:null!=(h=null==(c=t.removeChannelzChild)?void 0:c.bind(t))?h:e.removeChannelzChild.bind(e)}};let r={},n=null;t.registerLoadBalancerType=function(e,t,n){r[e]={LoadBalancer:t,LoadBalancingConfig:n}},t.registerDefaultLoadBalancerType=function(e){n=e},t.createLoadBalancer=function(e,t){let n=e.getLoadBalancerName();return n in r?new r[n].LoadBalancer(t):null},t.isLoadBalancerNameRegistered=function(e){return e in r},t.getFirstUsableConfig=function(e,t=!1){for(let t of e)if(t.getLoadBalancerName()in r)return t;return t&&n?new r[n].LoadBalancingConfig:null},t.validateLoadBalancingConfig=function(e){if(null===e||"object"!=typeof e)throw Error("Load balancing config must be an object");let t=Object.keys(e);if(1!==t.length)throw Error("Provided load balancing config has multiple conflicting entries");let n=t[0];if(n in r)return r[n].LoadBalancingConfig.createFromJson(e[n]);throw Error(`Unrecognized load balancing config name ${n}`)}},86777:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Metadata=void 0;let n=r(31359),i=r(71271),s=r(60776),a=/^[0-9a-z_.-]+$/,o=/^[ -~]*$/;function l(e){return a.test(e)}function u(e){return o.test(e)}function c(e){return e.endsWith("-bin")}function h(e){return!e.startsWith("grpc-")}function d(e){return e.toLowerCase()}function p(e,t){if(!l(e))throw Error('Metadata key "'+e+'" contains illegal characters');if(null!=t)if(c(e)){if(!Buffer.isBuffer(t))throw Error("keys that end with '-bin' must have Buffer values")}else{if(Buffer.isBuffer(t))throw Error("keys that don't end with '-bin' must have String values");if(!u(t))throw Error('Metadata string value "'+t+'" contains illegal characters')}}class f{constructor(e={}){this.internalRepr=new Map,this.options=e}set(e,t){p(e=d(e),t),this.internalRepr.set(e,[t])}add(e,t){p(e=d(e),t);let r=this.internalRepr.get(e);void 0===r?this.internalRepr.set(e,[t]):r.push(t)}remove(e){e=d(e),this.internalRepr.delete(e)}get(e){return e=d(e),this.internalRepr.get(e)||[]}getMap(){let e={};for(let[t,r]of this.internalRepr)if(r.length>0){let n=r[0];e[t]=Buffer.isBuffer(n)?Buffer.from(n):n}return e}clone(){let e=new f(this.options),t=e.internalRepr;for(let[e,r]of this.internalRepr){let n=r.map(e=>Buffer.isBuffer(e)?Buffer.from(e):e);t.set(e,n)}return e}merge(e){for(let[t,r]of e.internalRepr){let e=(this.internalRepr.get(t)||[]).concat(r);this.internalRepr.set(t,e)}}setOptions(e){this.options=e}getOptions(){return this.options}toHttp2Headers(){let e={};for(let[t,r]of this.internalRepr)e[t]=r.map(m);return e}toJSON(){let e={};for(let[t,r]of this.internalRepr)e[t]=r;return e}static fromHttp2Headers(e){let t=new f;for(let r of Object.keys(e)){if(":"===r.charAt(0))continue;let a=e[r];try{c(r)?Array.isArray(a)?a.forEach(e=>{t.add(r,Buffer.from(e,"base64"))}):void 0!==a&&(h(r)?a.split(",").forEach(e=>{t.add(r,Buffer.from(e.trim(),"base64"))}):t.add(r,Buffer.from(a,"base64"))):Array.isArray(a)?a.forEach(e=>{t.add(r,e)}):void 0!==a&&t.add(r,a)}catch(t){let e=`Failed to add metadata entry ${r}: ${a}. ${(0,s.getErrorMessage)(t)}. For more information see https://github.com/grpc/grpc-node/issues/1173`;(0,n.log)(i.LogVerbosity.ERROR,e)}}return t}}t.Metadata=f;let m=e=>Buffer.isBuffer(e)?e.toString("base64"):e},86984:(e,t,r)=>{"use strict";e.exports=i;var n=r(8707);function i(e,t,r){if("function"!=typeof e)throw TypeError("rpcImpl must be a function");n.EventEmitter.call(this),this.rpcImpl=e,this.requestDelimited=!!t,this.responseDelimited=!!r}(i.prototype=Object.create(n.EventEmitter.prototype)).constructor=i,i.prototype.rpcCall=function e(t,r,i,s,a){if(!s)throw TypeError("request must be specified");var o=this;if(!a)return n.asPromise(e,o,t,r,i,s);if(!o.rpcImpl)return void setTimeout(function(){a(Error("already ended"))},0);try{return o.rpcImpl(t,r[o.requestDelimited?"encodeDelimited":"encode"](s).finish(),function(e,r){if(e)return o.emit("error",e,t),a(e);if(null===r)return void o.end(!0);if(!(r instanceof i))try{r=i[o.responseDelimited?"decodeDelimited":"decode"](r)}catch(e){return o.emit("error",e,t),a(e)}return o.emit("data",r,t),a(null,r)})}catch(e){o.emit("error",e,t),setTimeout(function(){a(e)},0);return}},i.prototype.end=function(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},88295:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InternalChannel=void 0;let n=r(56070),i=r(71309),s=r(98316),a=r(72910),o=r(71271),l=r(54003),u=r(21135),c=r(5674),h=r(31359),d=r(16239),p=r(26786),f=r(40536),m=r(66827),g=r(76631),y=r(26412),v=r(58546),b=r(81260),S=r(73911),T=r(66683),w=r(4719),C=0x7fffffff,x=1e3,E=18e5,_=new Map,I=0x1000000,k=1048576;class A extends w.BaseSubchannelWrapper{constructor(e,t){super(e),this.channel=t,this.refCount=0,this.subchannelStateListener=(e,r,n,i)=>{t.throttleKeepalive(i)},e.addConnectivityStateListener(this.subchannelStateListener)}ref(){this.child.ref(),this.refCount+=1}unref(){this.child.unref(),this.refCount-=1,this.refCount<=0&&(this.child.removeConnectivityStateListener(this.subchannelStateListener),this.channel.removeWrappedSubchannel(this))}}class R{constructor(e,t,r){var g,y,v,b,w,R,N,D;if(this.credentials=t,this.options=r,this.connectivityState=f.ConnectivityState.IDLE,this.currentPicker=new a.UnavailablePicker,this.configSelectionQueue=[],this.pickQueue=[],this.connectivityStateWatchers=[],this.configSelector=null,this.currentResolutionError=null,this.wrappedSubchannels=new Set,this.callCount=0,this.idleTimer=null,this.channelzEnabled=!0,this.callTracker=new m.ChannelzCallTracker,this.childrenTracker=new m.ChannelzChildrenTracker,"string"!=typeof e)throw TypeError("Channel target must be a string");if(!(t instanceof n.ChannelCredentials))throw TypeError("Channel credentials must be a ChannelCredentials object");if(r&&"object"!=typeof r)throw TypeError("Channel options must be an object");this.originalTarget=e;let O=(0,p.parseUri)(e);if(null===O)throw Error(`Could not parse target name "${e}"`);let P=(0,c.mapUriDefaultScheme)(O);if(null===P)throw Error(`Could not find a default scheme for target name "${e}"`);this.callRefTimer=setInterval(()=>{},C),null==(y=(g=this.callRefTimer).unref)||y.call(g),0===this.options["grpc.enable_channelz"]&&(this.channelzEnabled=!1),this.channelzTrace=new m.ChannelzTrace,this.channelzRef=(0,m.registerChannelzChannel)(e,()=>this.getChannelzInfo(),this.channelzEnabled),this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO","Channel created"),this.options["grpc.default_authority"]?this.defaultAuthority=this.options["grpc.default_authority"]:this.defaultAuthority=(0,c.getDefaultAuthority)(P);let M=(0,d.mapProxyName)(P,r);this.target=M.target,this.options=Object.assign({},this.options,M.extraOptions),this.subchannelPool=(0,s.getSubchannelPool)((null!=(v=r["grpc.use_local_subchannel_pool"])?v:0)===0),this.retryBufferTracker=new T.MessageBufferTracker(null!=(b=r["grpc.retry_buffer_size"])?b:I,null!=(w=r["grpc.per_rpc_retry_buffer_size"])?w:k),this.keepaliveTime=null!=(R=r["grpc.keepalive_time_ms"])?R:-1,this.idleTimeoutMs=Math.max(null!=(N=r["grpc.client_idle_timeout_ms"])?N:E,x);let L={createSubchannel:(e,t)=>{let r=this.subchannelPool.getOrCreateSubchannel(this.target,e,Object.assign({},this.options,t),this.credentials);r.throttleKeepalive(this.keepaliveTime),this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO","Created subchannel or used existing subchannel",r.getChannelzRef());let n=new A(r,this);return this.wrappedSubchannels.add(n),n},updateState:(e,t)=>{this.currentPicker=t;let r=this.pickQueue.slice();for(let e of(this.pickQueue=[],r.length>0&&this.callRefTimerUnref(),r))e.doPick();this.updateState(e)},requestReresolution:()=>{throw Error("Resolving load balancer should never call requestReresolution")},addChannelzChild:e=>{this.channelzEnabled&&this.childrenTracker.refChild(e)},removeChannelzChild:e=>{this.channelzEnabled&&this.childrenTracker.unrefChild(e)}};this.resolvingLoadBalancer=new i.ResolvingLoadBalancer(this.target,L,r,(e,t)=>{e.retryThrottling?_.set(this.getTarget(),new T.RetryThrottler(e.retryThrottling.maxTokens,e.retryThrottling.tokenRatio,_.get(this.getTarget()))):_.delete(this.getTarget()),this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO","Address resolution succeeded"),this.configSelector=t,this.currentResolutionError=null,process.nextTick(()=>{let e=this.configSelectionQueue;for(let t of(this.configSelectionQueue=[],e.length>0&&this.callRefTimerUnref(),e))t.getConfig()})},e=>{this.channelzEnabled&&this.channelzTrace.addTrace("CT_WARNING","Address resolution failed with code "+e.code+' and details "'+e.details+'"'),this.configSelectionQueue.length>0&&this.trace("Name resolution failed with calls queued for config selection"),null===this.configSelector&&(this.currentResolutionError=Object.assign(Object.assign({},(0,S.restrictControlPlaneStatusCode)(e.code,e.details)),{metadata:e.metadata}));let t=this.configSelectionQueue;for(let r of(this.configSelectionQueue=[],t.length>0&&this.callRefTimerUnref(),t))r.reportResolverError(e)}),this.filterStackFactory=new l.FilterStackFactory([new u.CompressionFilterFactory(this,this.options)]),this.trace("Channel constructed with options "+JSON.stringify(r,void 0,2));let B=Error();(0,h.trace)(o.LogVerbosity.DEBUG,"channel_stacktrace","("+this.channelzRef.id+") Channel constructed \n"+(null==(D=B.stack)?void 0:D.substring(B.stack.indexOf("\n")+1))),this.lastActivityTimestamp=new Date}getChannelzInfo(){return{target:this.originalTarget,state:this.connectivityState,trace:this.channelzTrace,callTracker:this.callTracker,children:this.childrenTracker.getChildLists()}}trace(e,t){(0,h.trace)(null!=t?t:o.LogVerbosity.DEBUG,"channel","("+this.channelzRef.id+") "+(0,p.uriToString)(this.target)+" "+e)}callRefTimerRef(){var e,t,r,n;(null==(t=(e=this.callRefTimer).hasRef)?void 0:t.call(e))||(this.trace("callRefTimer.ref | configSelectionQueue.length="+this.configSelectionQueue.length+" pickQueue.length="+this.pickQueue.length),null==(n=(r=this.callRefTimer).ref)||n.call(r))}callRefTimerUnref(){var e,t;(!this.callRefTimer.hasRef||this.callRefTimer.hasRef())&&(this.trace("callRefTimer.unref | configSelectionQueue.length="+this.configSelectionQueue.length+" pickQueue.length="+this.pickQueue.length),null==(t=(e=this.callRefTimer).unref)||t.call(e))}removeConnectivityStateWatcher(e){let t=this.connectivityStateWatchers.findIndex(t=>t===e);t>=0&&this.connectivityStateWatchers.splice(t,1)}updateState(e){for(let t of((0,h.trace)(o.LogVerbosity.DEBUG,"connectivity_state","("+this.channelzRef.id+") "+(0,p.uriToString)(this.target)+" "+f.ConnectivityState[this.connectivityState]+" -> "+f.ConnectivityState[e]),this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO","Connectivity state change to "+f.ConnectivityState[e]),this.connectivityState=e,this.connectivityStateWatchers.slice()))e!==t.currentState&&(t.timer&&clearTimeout(t.timer),this.removeConnectivityStateWatcher(t),t.callback());e!==f.ConnectivityState.TRANSIENT_FAILURE&&(this.currentResolutionError=null)}throttleKeepalive(e){if(e>this.keepaliveTime)for(let t of(this.keepaliveTime=e,this.wrappedSubchannels))t.throttleKeepalive(e)}removeWrappedSubchannel(e){this.wrappedSubchannels.delete(e)}doPick(e,t){return this.currentPicker.pick({metadata:e,extraPickInfo:t})}queueCallForPick(e){this.pickQueue.push(e),this.callRefTimerRef()}getConfig(e,t){return(this.resolvingLoadBalancer.exitIdle(),this.configSelector)?{type:"SUCCESS",config:this.configSelector(e,t)}:this.currentResolutionError?{type:"ERROR",error:this.currentResolutionError}:{type:"NONE"}}queueCallForConfig(e){this.configSelectionQueue.push(e),this.callRefTimerRef()}enterIdle(){this.resolvingLoadBalancer.destroy(),this.updateState(f.ConnectivityState.IDLE),this.currentPicker=new a.QueuePicker(this.resolvingLoadBalancer),this.idleTimer&&(clearTimeout(this.idleTimer),this.idleTimer=null)}startIdleTimeout(e){var t,r;this.idleTimer=setTimeout(()=>{if(this.callCount>0)return void this.startIdleTimeout(this.idleTimeoutMs);let e=new Date().valueOf()-this.lastActivityTimestamp.valueOf();e>=this.idleTimeoutMs?(this.trace("Idle timer triggered after "+this.idleTimeoutMs+"ms of inactivity"),this.enterIdle()):this.startIdleTimeout(this.idleTimeoutMs-e)},e),null==(r=(t=this.idleTimer).unref)||r.call(t)}maybeStartIdleTimer(){this.connectivityState===f.ConnectivityState.SHUTDOWN||this.idleTimer||this.startIdleTimeout(this.idleTimeoutMs)}onCallStart(){this.channelzEnabled&&this.callTracker.addCallStarted(),this.callCount+=1}onCallEnd(e){this.channelzEnabled&&(e.code===o.Status.OK?this.callTracker.addCallSucceeded():this.callTracker.addCallFailed()),this.callCount-=1,this.lastActivityTimestamp=new Date,this.maybeStartIdleTimer()}createLoadBalancingCall(e,t,r,n,i){let s=(0,b.getNextCallNumber)();return this.trace("createLoadBalancingCall ["+s+'] method="'+t+'"'),new g.LoadBalancingCall(this,e,t,r,n,i,s)}createRetryingCall(e,t,r,n,i){let s=(0,b.getNextCallNumber)();return this.trace("createRetryingCall ["+s+'] method="'+t+'"'),new T.RetryingCall(this,e,t,r,n,i,s,this.retryBufferTracker,_.get(this.getTarget()))}createInnerCall(e,t,r,n,i){return 0===this.options["grpc.enable_retries"]?this.createLoadBalancingCall(e,t,r,n,i):this.createRetryingCall(e,t,r,n,i)}createResolvingCall(e,t,r,n,i){let s=(0,b.getNextCallNumber)();this.trace("createResolvingCall ["+s+'] method="'+e+'", deadline='+(0,y.deadlineToString)(t));let a={deadline:t,flags:null!=i?i:o.Propagate.DEFAULTS,host:null!=r?r:this.defaultAuthority,parentCall:n},l=new v.ResolvingCall(this,e,a,this.filterStackFactory.clone(),this.credentials._getCallCredentials(),s);return this.onCallStart(),l.addStatusWatcher(e=>{this.onCallEnd(e)}),l}close(){this.resolvingLoadBalancer.destroy(),this.updateState(f.ConnectivityState.SHUTDOWN),clearInterval(this.callRefTimer),this.idleTimer&&clearTimeout(this.idleTimer),this.channelzEnabled&&(0,m.unregisterChannelzRef)(this.channelzRef),this.subchannelPool.unrefUnusedSubchannels()}getTarget(){return(0,p.uriToString)(this.target)}getConnectivityState(e){let t=this.connectivityState;return e&&(this.resolvingLoadBalancer.exitIdle(),this.lastActivityTimestamp=new Date,this.maybeStartIdleTimer()),t}watchConnectivityState(e,t,r){if(this.connectivityState===f.ConnectivityState.SHUTDOWN)throw Error("Channel has been shut down");let n=null;if(t!==1/0){let e=t instanceof Date?t:new Date(t),s=new Date;if(t===-1/0||e<=s)return void process.nextTick(r,Error("Deadline passed without connectivity state change"));n=setTimeout(()=>{this.removeConnectivityStateWatcher(i),r(Error("Deadline passed without connectivity state change"))},e.getTime()-s.getTime())}let i={currentState:e,callback:r,timer:n};this.connectivityStateWatchers.push(i)}getChannelzRef(){return this.channelzRef}createCall(e,t,r,n,i){if("string"!=typeof e)throw TypeError("Channel#createCall: method must be a string");if(!("number"==typeof t||t instanceof Date))throw TypeError("Channel#createCall: deadline must be a number or Date");if(this.connectivityState===f.ConnectivityState.SHUTDOWN)throw Error("Channel has been shut down");return this.createResolvingCall(e,t,r,n,i)}}t.InternalChannel=R},89374:(e,t,r)=>{"use strict";var n=e.exports=r(17858);function i(e,t,r){return"function"==typeof t?(r=t,t=new n.Root):t||(t=new n.Root),t.load(e,r)}function s(e,t){return t||(t=new n.Root),t.loadSync(e)}n.build="light",n.load=i,n.loadSync=s,n.encoder=r(30847),n.decoder=r(62823),n.verifier=r(16973),n.converter=r(97659),n.ReflectionObject=r(64824),n.Namespace=r(77968),n.Root=r(82703),n.Enum=r(32110),n.Type=r(54351),n.Field=r(73267),n.OneOf=r(12630),n.MapField=r(25585),n.Service=r(3076),n.Method=r(71202),n.Message=r(8920),n.wrappers=r(63695),n.types=r(61810),n.util=r(93107),n.ReflectionObject._configure(n.Root),n.Namespace._configure(n.Type,n.Service,n.Enum),n.Root._configure(n.Type),n.Field._configure(n.Type)},89644:module=>{"use strict";function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(e){}return null}module.exports=inquire},90462:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>a.a,__next_app__:()=>h,pages:()=>c,routeModule:()=>d,tree:()=>u});var n=r(65239),i=r(48088),s=r(88170),a=r.n(s),o=r(30893),l={};for(let e in o)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);r.d(t,l);let u={children:["",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,21204)),"/home/user/studio/src/app/page.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,94431)),"/home/user/studio/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,c=["/home/user/studio/src/app/page.tsx"],h={require:r,loadChunk:()=>Promise.resolve()},d=new n.AppPageRouteModule({definition:{kind:i.RouteKind.APP_PAGE,page:"/page",pathname:"/",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:u}})},91645:e=>{"use strict";e.exports=require("net")},93107:(e,t,r)=>{"use strict";var n,i,s=e.exports=r(8707),a=r(46642);s.codegen=r(98344),s.fetch=r(17757),s.path=r(71140),s.fs=s.inquire("fs"),s.toArray=function(e){if(e){for(var t=Object.keys(e),r=Array(t.length),n=0;n<t.length;)r[n]=e[t[n++]];return r}return[]},s.toObject=function(e){for(var t={},r=0;r<e.length;){var n=e[r++],i=e[r++];void 0!==i&&(t[n]=i)}return t};var o=/\\/g,l=/"/g;s.isReserved=function(e){return/^(?:do|if|in|for|let|new|try|var|case|else|enum|eval|false|null|this|true|void|with|break|catch|class|const|super|throw|while|yield|delete|export|import|public|return|static|switch|typeof|default|extends|finally|package|private|continue|debugger|function|arguments|interface|protected|implements|instanceof)$/.test(e)},s.safeProp=function(e){return!/^[$\w_]+$/.test(e)||s.isReserved(e)?'["'+e.replace(o,"\\\\").replace(l,'\\"')+'"]':"."+e},s.ucFirst=function(e){return e.charAt(0).toUpperCase()+e.substring(1)};var u=/_([a-z])/g;s.camelCase=function(e){return e.substring(0,1)+e.substring(1).replace(u,function(e,t){return t.toUpperCase()})},s.compareFieldsById=function(e,t){return e.id-t.id},s.decorateType=function(e,t){if(e.$type)return t&&e.$type.name!==t&&(s.decorateRoot.remove(e.$type),e.$type.name=t,s.decorateRoot.add(e.$type)),e.$type;n||(n=r(54351));var i=new n(t||e.name);return s.decorateRoot.add(i),i.ctor=e,Object.defineProperty(e,"$type",{value:i,enumerable:!1}),Object.defineProperty(e.prototype,"$type",{value:i,enumerable:!1}),i};var c=0;s.decorateEnum=function(e){if(e.$type)return e.$type;i||(i=r(32110));var t=new i("Enum"+c++,e);return s.decorateRoot.add(t),Object.defineProperty(e,"$type",{value:t,enumerable:!1}),t},s.setProperty=function(e,t,r){function n(e,t,r){var i=t.shift();if("__proto__"===i||"prototype"===i)return e;if(t.length>0)e[i]=n(e[i]||{},t,r);else{var s=e[i];s&&(r=[].concat(s).concat(r)),e[i]=r}return e}if("object"!=typeof e)throw TypeError("dst must be an object");if(!t)throw TypeError("path must be specified");return n(e,t=t.split("."),r)},Object.defineProperty(s,"decorateRoot",{get:function(){return a.decorated||(a.decorated=new(r(82703)))}})},93474:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Http2SubchannelCall=void 0;let n=r(73496),i=r(21820),s=r(71271),a=r(86777),o=r(71037),l=r(31359),u=r(71271),c="subchannel_call";function h(e){for(let[t,r]of Object.entries(i.constants.errno))if(r===e)return t;return"Unknown system error "+e}class d{constructor(e,t,r,i,l){var u;this.http2Stream=e,this.callEventTracker=t,this.listener=r,this.transport=i,this.callId=l,this.isReadFilterPending=!1,this.isPushPending=!1,this.canPush=!1,this.readsClosed=!1,this.statusOutput=!1,this.unpushedReadMessages=[],this.mappedStatusCode=s.Status.UNKNOWN,this.finalStatus=null,this.internalError=null;let c=null!=(u=i.getOptions()["grpc.max_receive_message_length"])?u:s.DEFAULT_MAX_RECEIVE_MESSAGE_LENGTH;this.decoder=new o.StreamDecoder(c),e.on("response",(e,t)=>{let r="";for(let t of Object.keys(e))r+="		"+t+": "+e[t]+"\n";switch(this.trace("Received server headers:\n"+r),e[":status"]){case 400:this.mappedStatusCode=s.Status.INTERNAL;break;case 401:this.mappedStatusCode=s.Status.UNAUTHENTICATED;break;case 403:this.mappedStatusCode=s.Status.PERMISSION_DENIED;break;case 404:this.mappedStatusCode=s.Status.UNIMPLEMENTED;break;case 429:case 502:case 503:case 504:this.mappedStatusCode=s.Status.UNAVAILABLE;break;default:this.mappedStatusCode=s.Status.UNKNOWN}if(t&n.constants.NGHTTP2_FLAG_END_STREAM)this.handleTrailers(e);else{let t;try{t=a.Metadata.fromHttp2Headers(e)}catch(e){this.endCall({code:s.Status.UNKNOWN,details:e.message,metadata:new a.Metadata});return}this.listener.onReceiveMetadata(t)}}),e.on("trailers",e=>{this.handleTrailers(e)}),e.on("data",e=>{let t;if(!this.statusOutput){this.trace("receive HTTP/2 data frame of length "+e.length);try{t=this.decoder.write(e)}catch(e){this.cancelWithStatus(s.Status.RESOURCE_EXHAUSTED,e.message);return}for(let e of t)this.trace("parsed message of length "+e.length),this.callEventTracker.addMessageReceived(),this.tryPush(e)}}),e.on("end",()=>{this.readsClosed=!0,this.maybeOutputStatus()}),e.on("close",()=>{process.nextTick(()=>{var t;let r;if(this.trace("HTTP/2 stream closed with code "+e.rstCode),(null==(t=this.finalStatus)?void 0:t.code)===s.Status.OK)return;let i="";switch(e.rstCode){case n.constants.NGHTTP2_NO_ERROR:if(null!==this.finalStatus)return;r=s.Status.INTERNAL,i=`Received RST_STREAM with code ${e.rstCode}`;break;case n.constants.NGHTTP2_REFUSED_STREAM:r=s.Status.UNAVAILABLE,i="Stream refused by server";break;case n.constants.NGHTTP2_CANCEL:r=s.Status.CANCELLED,i="Call cancelled";break;case n.constants.NGHTTP2_ENHANCE_YOUR_CALM:r=s.Status.RESOURCE_EXHAUSTED,i="Bandwidth exhausted or memory limit exceeded";break;case n.constants.NGHTTP2_INADEQUATE_SECURITY:r=s.Status.PERMISSION_DENIED,i="Protocol not secure enough";break;case n.constants.NGHTTP2_INTERNAL_ERROR:r=s.Status.INTERNAL,null===this.internalError?i=`Received RST_STREAM with code ${e.rstCode} (Internal server error)`:"ECONNRESET"===this.internalError.code||"ETIMEDOUT"===this.internalError.code?(r=s.Status.UNAVAILABLE,i=this.internalError.message):i=`Received RST_STREAM with code ${e.rstCode} triggered by internal client error: ${this.internalError.message}`;break;default:r=s.Status.INTERNAL,i=`Received RST_STREAM with code ${e.rstCode}`}this.endCall({code:r,details:i,metadata:new a.Metadata,rstCode:e.rstCode})})}),e.on("error",e=>{"ERR_HTTP2_STREAM_ERROR"!==e.code&&(this.trace("Node error event: message="+e.message+" code="+e.code+" errno="+h(e.errno)+" syscall="+e.syscall),this.internalError=e),this.callEventTracker.onStreamEnd(!1)})}onDisconnect(){this.endCall({code:s.Status.UNAVAILABLE,details:"Connection dropped",metadata:new a.Metadata})}outputStatus(){this.statusOutput||(this.statusOutput=!0,this.trace("ended with status: code="+this.finalStatus.code+' details="'+this.finalStatus.details+'"'),this.callEventTracker.onCallEnd(this.finalStatus),process.nextTick(()=>{this.listener.onReceiveStatus(this.finalStatus)}),this.http2Stream.resume())}trace(e){l.trace(u.LogVerbosity.DEBUG,c,"["+this.callId+"] "+e)}endCall(e){(null===this.finalStatus||this.finalStatus.code===s.Status.OK)&&(this.finalStatus=e,this.maybeOutputStatus()),this.destroyHttp2Stream()}maybeOutputStatus(){null===this.finalStatus||this.finalStatus.code===s.Status.OK&&(!this.readsClosed||0!==this.unpushedReadMessages.length||this.isReadFilterPending||this.isPushPending)||this.outputStatus()}push(e){this.trace("pushing to reader message of length "+(e instanceof Buffer?e.length:null)),this.canPush=!1,this.isPushPending=!0,process.nextTick(()=>{this.isPushPending=!1,this.statusOutput||(this.listener.onReceiveMessage(e),this.maybeOutputStatus())})}tryPush(e){this.canPush?(this.http2Stream.pause(),this.push(e)):(this.trace("unpushedReadMessages.push message of length "+e.length),this.unpushedReadMessages.push(e))}handleTrailers(e){let t;this.callEventTracker.onStreamEnd(!0);let r="";for(let t of Object.keys(e))r+="		"+t+": "+e[t]+"\n";this.trace("Received server trailers:\n"+r);try{t=a.Metadata.fromHttp2Headers(e)}catch(e){t=new a.Metadata}let n=t.getMap(),i=this.mappedStatusCode;if(i===s.Status.UNKNOWN&&"string"==typeof n["grpc-status"]){let e=Number(n["grpc-status"]);e in s.Status&&(i=e,this.trace("received status code "+e+" from server")),t.remove("grpc-status")}let o="";if("string"==typeof n["grpc-message"]){try{o=decodeURI(n["grpc-message"])}catch(e){o=n["grpc-message"]}t.remove("grpc-message"),this.trace('received status details string "'+o+'" from server')}let l={code:i,details:o,metadata:t};this.endCall(l)}destroyHttp2Stream(){var e;if(!this.http2Stream.destroyed){let t;t=(null==(e=this.finalStatus)?void 0:e.code)===s.Status.OK?n.constants.NGHTTP2_NO_ERROR:n.constants.NGHTTP2_CANCEL,this.trace("close http2 stream with code "+t),this.http2Stream.close(t)}}cancelWithStatus(e,t){this.trace("cancelWithStatus code: "+e+' details: "'+t+'"'),this.endCall({code:e,details:t,metadata:new a.Metadata})}getStatus(){return this.finalStatus}getPeer(){return this.transport.getPeerName()}getCallNumber(){return this.callId}startRead(){if(null!==this.finalStatus&&this.finalStatus.code!==s.Status.OK){this.readsClosed=!0,this.maybeOutputStatus();return}if(this.canPush=!0,this.unpushedReadMessages.length>0){let e=this.unpushedReadMessages.shift();this.push(e);return}this.http2Stream.resume()}sendMessageWithContext(e,t){this.trace("write() called with message of length "+t.length);let r=t=>{process.nextTick(()=>{var r;let n=s.Status.UNAVAILABLE;(null==t?void 0:t.code)==="ERR_STREAM_WRITE_AFTER_END"&&(n=s.Status.INTERNAL),t&&this.cancelWithStatus(n,`Write error: ${t.message}`),null==(r=e.callback)||r.call(e)})};this.trace("sending data chunk of length "+t.length),this.callEventTracker.addMessageSent();try{this.http2Stream.write(t,r)}catch(e){this.endCall({code:s.Status.UNAVAILABLE,details:`Write failed with error ${e.message}`,metadata:new a.Metadata})}}halfClose(){this.trace("end() called"),this.trace("calling end() on HTTP/2 stream"),this.http2Stream.end()}}t.Http2SubchannelCall=d},94735:e=>{"use strict";e.exports=require("events")},96120:(e,t,r)=>{"use strict";e.exports=h;var n,i=r(8707),s=i.LongBits,a=i.base64,o=i.utf8;function l(e,t,r){this.fn=e,this.len=t,this.next=void 0,this.val=r}function u(){}function c(e){this.head=e.head,this.tail=e.tail,this.len=e.len,this.next=e.states}function h(){this.len=0,this.head=new l(u,0,0),this.tail=this.head,this.states=null}var d=function(){return i.Buffer?function(){return(h.create=function(){return new n})()}:function(){return new h}};function p(e,t,r){t[r]=255&e}function f(e,t,r){for(;e>127;)t[r++]=127&e|128,e>>>=7;t[r]=e}function m(e,t){this.len=e,this.next=void 0,this.val=t}function g(e,t,r){for(;e.hi;)t[r++]=127&e.lo|128,e.lo=(e.lo>>>7|e.hi<<25)>>>0,e.hi>>>=7;for(;e.lo>127;)t[r++]=127&e.lo|128,e.lo=e.lo>>>7;t[r++]=e.lo}function y(e,t,r){t[r]=255&e,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24}h.create=d(),h.alloc=function(e){return new i.Array(e)},i.Array!==Array&&(h.alloc=i.pool(h.alloc,i.Array.prototype.subarray)),h.prototype._push=function(e,t,r){return this.tail=this.tail.next=new l(e,t,r),this.len+=t,this},m.prototype=Object.create(l.prototype),m.prototype.fn=f,h.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new m((e>>>=0)<128?1:e<16384?2:e<2097152?3:e<0x10000000?4:5,e)).len,this},h.prototype.int32=function(e){return e<0?this._push(g,10,s.fromNumber(e)):this.uint32(e)},h.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)},h.prototype.uint64=function(e){var t=s.from(e);return this._push(g,t.length(),t)},h.prototype.int64=h.prototype.uint64,h.prototype.sint64=function(e){var t=s.from(e).zzEncode();return this._push(g,t.length(),t)},h.prototype.bool=function(e){return this._push(p,1,+!!e)},h.prototype.fixed32=function(e){return this._push(y,4,e>>>0)},h.prototype.sfixed32=h.prototype.fixed32,h.prototype.fixed64=function(e){var t=s.from(e);return this._push(y,4,t.lo)._push(y,4,t.hi)},h.prototype.sfixed64=h.prototype.fixed64,h.prototype.float=function(e){return this._push(i.float.writeFloatLE,4,e)},h.prototype.double=function(e){return this._push(i.float.writeDoubleLE,8,e)};var v=i.Array.prototype.set?function(e,t,r){t.set(e,r)}:function(e,t,r){for(var n=0;n<e.length;++n)t[r+n]=e[n]};h.prototype.bytes=function(e){var t=e.length>>>0;if(!t)return this._push(p,1,0);if(i.isString(e)){var r=h.alloc(t=a.length(e));a.decode(e,r,0),e=r}return this.uint32(t)._push(v,t,e)},h.prototype.string=function(e){var t=o.length(e);return t?this.uint32(t)._push(o.write,t,e):this._push(p,1,0)},h.prototype.fork=function(){return this.states=new c(this),this.head=this.tail=new l(u,0,0),this.len=0,this},h.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new l(u,0,0),this.len=0),this},h.prototype.ldelim=function(){var e=this.head,t=this.tail,r=this.len;return this.reset().uint32(r),r&&(this.tail.next=e.next,this.tail=t,this.len+=r),this},h.prototype.finish=function(){for(var e=this.head.next,t=this.constructor.alloc(this.len),r=0;e;)e.fn(e.val,t,r),r+=e.len,e=e.next;return t},h._configure=function(e){n=e,h.create=d(),n._configure()}},96138:e=>{"use strict";e.exports=JSON.parse('{"nested":{"google":{"nested":{"protobuf":{"nested":{"Type":{"fields":{"name":{"type":"string","id":1},"fields":{"rule":"repeated","type":"Field","id":2},"oneofs":{"rule":"repeated","type":"string","id":3},"options":{"rule":"repeated","type":"Option","id":4},"sourceContext":{"type":"SourceContext","id":5},"syntax":{"type":"Syntax","id":6}}},"Field":{"fields":{"kind":{"type":"Kind","id":1},"cardinality":{"type":"Cardinality","id":2},"number":{"type":"int32","id":3},"name":{"type":"string","id":4},"typeUrl":{"type":"string","id":6},"oneofIndex":{"type":"int32","id":7},"packed":{"type":"bool","id":8},"options":{"rule":"repeated","type":"Option","id":9},"jsonName":{"type":"string","id":10},"defaultValue":{"type":"string","id":11}},"nested":{"Kind":{"values":{"TYPE_UNKNOWN":0,"TYPE_DOUBLE":1,"TYPE_FLOAT":2,"TYPE_INT64":3,"TYPE_UINT64":4,"TYPE_INT32":5,"TYPE_FIXED64":6,"TYPE_FIXED32":7,"TYPE_BOOL":8,"TYPE_STRING":9,"TYPE_GROUP":10,"TYPE_MESSAGE":11,"TYPE_BYTES":12,"TYPE_UINT32":13,"TYPE_ENUM":14,"TYPE_SFIXED32":15,"TYPE_SFIXED64":16,"TYPE_SINT32":17,"TYPE_SINT64":18}},"Cardinality":{"values":{"CARDINALITY_UNKNOWN":0,"CARDINALITY_OPTIONAL":1,"CARDINALITY_REQUIRED":2,"CARDINALITY_REPEATED":3}}}},"Enum":{"fields":{"name":{"type":"string","id":1},"enumvalue":{"rule":"repeated","type":"EnumValue","id":2},"options":{"rule":"repeated","type":"Option","id":3},"sourceContext":{"type":"SourceContext","id":4},"syntax":{"type":"Syntax","id":5}}},"EnumValue":{"fields":{"name":{"type":"string","id":1},"number":{"type":"int32","id":2},"options":{"rule":"repeated","type":"Option","id":3}}},"Option":{"fields":{"name":{"type":"string","id":1},"value":{"type":"Any","id":2}}},"Syntax":{"values":{"SYNTAX_PROTO2":0,"SYNTAX_PROTO3":1}},"Any":{"fields":{"type_url":{"type":"string","id":1},"value":{"type":"bytes","id":2}}},"SourceContext":{"fields":{"fileName":{"type":"string","id":1}}}}}}}}}')},97587:(e,t,r)=>{"use strict";var n,i;n={value:!0},n=n=t.rS=t.Yi=n=t.Ib=n=n=void 0;let s=r(47099),a=r(68474),o=r(61614),l=r(27603);n=r(56061),n=function(e){return"@type"in e&&"string"==typeof e["@type"]},function(e){e.IDEMPOTENCY_UNKNOWN="IDEMPOTENCY_UNKNOWN",e.NO_SIDE_EFFECTS="NO_SIDE_EFFECTS",e.IDEMPOTENT="IDEMPOTENT"}(i=t.Ib||(t.Ib={}));let u={longs:String,enums:String,bytes:String,defaults:!0,oneofs:!0,json:!0};function c(e,t){return""===e?t:e+"."+t}function h(e){return e instanceof a.Service||e instanceof a.Type||e instanceof a.Enum}function d(e){return e instanceof a.Namespace||e instanceof a.Root}function p(e,t){let r=c(t,e.name);return h(e)?[[r,e]]:d(e)&&void 0!==e.nested?Object.keys(e.nested).map(t=>p(e.nested[t],r)).reduce((e,t)=>e.concat(t),[]):[]}function f(e,t){return function(r){return e.toObject(e.decode(r),t)}}function m(e){return function(t){if(Array.isArray(t))throw Error(`Failed to serialize message: expected object with ${e.name} structure, got array instead`);let r=e.fromObject(t);return e.encode(r).finish()}}function g(e){return(e||[]).reduce((e,t)=>{for(let[r,n]of Object.entries(t))"uninterpreted_option"===r?e.uninterpreted_option.push(t.uninterpreted_option):e[r]=n;return e},{deprecated:!1,idempotency_level:i.IDEMPOTENCY_UNKNOWN,uninterpreted_option:[]})}function y(e,t,r,n){let i=e.resolvedRequestType,a=e.resolvedResponseType;return{path:"/"+t+"/"+e.name,requestStream:!!e.requestStream,responseStream:!!e.responseStream,requestSerialize:m(i),requestDeserialize:f(i,r),responseSerialize:m(a),responseDeserialize:f(a,r),originalName:s(e.name),requestType:b(i,n),responseType:b(a,n),options:g(e.parsedOptions)}}function v(e,t,r,n){let i={};for(let s of e.methodsArray)i[s.name]=y(s,t,r,n);return i}function b(e,t){let r=e.toDescriptor("proto3");return{format:"Protocol Buffer 3 DescriptorProto",type:r.$type.toObject(r,u),fileDescriptorProtos:t}}function S(e,t){let r=e.toDescriptor("proto3");return{format:"Protocol Buffer 3 EnumDescriptorProto",type:r.$type.toObject(r,u),fileDescriptorProtos:t}}function T(e,t,r,n){if(e instanceof a.Service)return v(e,t,r,n);if(e instanceof a.Type)return b(e,n);if(e instanceof a.Enum)return S(e,n);throw Error("Type mismatch in reflection object handling")}function w(e,t){let r={};e.resolveAll();let n=e.toDescriptor("proto3").file.map(e=>Buffer.from(o.FileDescriptorProto.encode(e).finish()));for(let[i,s]of p(e,""))r[i]=T(s,i,t,n);return r}function C(e,t){t=t||{};let r=a.Root.fromDescriptor(e);return r.resolveAll(),w(r,t)}n=function(e,t){return(0,l.loadProtosWithOptions)(e,t).then(e=>w(e,t))},t.Yi=function(e,t){return w((0,l.loadProtosWithOptionsSync)(e,t),t)},t.rS=function(e,t){t=t||{};let r=a.Root.fromJSON(e);return r.resolveAll(),w(r,t)},n=function(e,t){return C(o.FileDescriptorSet.decode(e),t)},n=function(e,t){return C(o.FileDescriptorSet.fromObject(e),t)},(0,l.addCommonProtos)()},97659:(e,t,r)=>{"use strict";var n=t,i=r(32110),s=r(93107);function a(e,t,r,n){var s=!1;if(t.resolvedType)if(t.resolvedType instanceof i){e("switch(d%s){",n);for(var a=t.resolvedType.values,o=Object.keys(a),l=0;l<o.length;++l)a[o[l]]!==t.typeDefault||s||(e("default:")('if(typeof(d%s)==="number"){m%s=d%s;break}',n,n,n),t.repeated||e("break"),s=!0),e("case%j:",o[l])("case %i:",a[o[l]])("m%s=%j",n,a[o[l]])("break");e("}")}else e('if(typeof d%s!=="object")',n)("throw TypeError(%j)",t.fullName+": object expected")("m%s=types[%i].fromObject(d%s)",n,r,n);else{var u=!1;switch(t.type){case"double":case"float":e("m%s=Number(d%s)",n,n);break;case"uint32":case"fixed32":e("m%s=d%s>>>0",n,n);break;case"int32":case"sint32":case"sfixed32":e("m%s=d%s|0",n,n);break;case"uint64":u=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":e("if(util.Long)")("(m%s=util.Long.fromValue(d%s)).unsigned=%j",n,n,u)('else if(typeof d%s==="string")',n)("m%s=parseInt(d%s,10)",n,n)('else if(typeof d%s==="number")',n)("m%s=d%s",n,n)('else if(typeof d%s==="object")',n)("m%s=new util.LongBits(d%s.low>>>0,d%s.high>>>0).toNumber(%s)",n,n,n,u?"true":"");break;case"bytes":e('if(typeof d%s==="string")',n)("util.base64.decode(d%s,m%s=util.newBuffer(util.base64.length(d%s)),0)",n,n,n)("else if(d%s.length >= 0)",n)("m%s=d%s",n,n);break;case"string":e("m%s=String(d%s)",n,n);break;case"bool":e("m%s=Boolean(d%s)",n,n)}}return e}function o(e,t,r,n){if(t.resolvedType)t.resolvedType instanceof i?e("d%s=o.enums===String?(types[%i].values[m%s]===undefined?m%s:types[%i].values[m%s]):m%s",n,r,n,n,r,n,n):e("d%s=types[%i].toObject(m%s,o)",n,r,n);else{var s=!1;switch(t.type){case"double":case"float":e("d%s=o.json&&!isFinite(m%s)?String(m%s):m%s",n,n,n,n);break;case"uint64":s=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":e('if(typeof m%s==="number")',n)("d%s=o.longs===String?String(m%s):m%s",n,n,n)("else")("d%s=o.longs===String?util.Long.prototype.toString.call(m%s):o.longs===Number?new util.LongBits(m%s.low>>>0,m%s.high>>>0).toNumber(%s):m%s",n,n,n,n,s?"true":"",n);break;case"bytes":e("d%s=o.bytes===String?util.base64.encode(m%s,0,m%s.length):o.bytes===Array?Array.prototype.slice.call(m%s):m%s",n,n,n,n,n);break;default:e("d%s=m%s",n,n)}}return e}n.fromObject=function(e){var t=e.fieldsArray,r=s.codegen(["d"],e.name+"$fromObject")("if(d instanceof this.ctor)")("return d");if(!t.length)return r("return new this.ctor");r("var m=new this.ctor");for(var n=0;n<t.length;++n){var o=t[n].resolve(),l=s.safeProp(o.name);o.map?(r("if(d%s){",l)('if(typeof d%s!=="object")',l)("throw TypeError(%j)",o.fullName+": object expected")("m%s={}",l)("for(var ks=Object.keys(d%s),i=0;i<ks.length;++i){",l),a(r,o,n,l+"[ks[i]]")("}")("}")):o.repeated?(r("if(d%s){",l)("if(!Array.isArray(d%s))",l)("throw TypeError(%j)",o.fullName+": array expected")("m%s=[]",l)("for(var i=0;i<d%s.length;++i){",l),a(r,o,n,l+"[i]")("}")("}")):(o.resolvedType instanceof i||r("if(d%s!=null){",l),a(r,o,n,l),o.resolvedType instanceof i||r("}"))}return r("return m")},n.toObject=function(e){var t=e.fieldsArray.slice().sort(s.compareFieldsById);if(!t.length)return s.codegen()("return {}");for(var r=s.codegen(["m","o"],e.name+"$toObject")("if(!o)")("o={}")("var d={}"),n=[],a=[],l=[],u=0;u<t.length;++u)t[u].partOf||(t[u].resolve().repeated?n:t[u].map?a:l).push(t[u]);if(n.length){for(r("if(o.arrays||o.defaults){"),u=0;u<n.length;++u)r("d%s=[]",s.safeProp(n[u].name));r("}")}if(a.length){for(r("if(o.objects||o.defaults){"),u=0;u<a.length;++u)r("d%s={}",s.safeProp(a[u].name));r("}")}if(l.length){for(r("if(o.defaults){"),u=0;u<l.length;++u){var c=l[u],h=s.safeProp(c.name);if(c.resolvedType instanceof i)r("d%s=o.enums===String?%j:%j",h,c.resolvedType.valuesById[c.typeDefault],c.typeDefault);else if(c.long)r("if(util.Long){")("var n=new util.Long(%i,%i,%j)",c.typeDefault.low,c.typeDefault.high,c.typeDefault.unsigned)("d%s=o.longs===String?n.toString():o.longs===Number?n.toNumber():n",h)("}else")("d%s=o.longs===String?%j:%i",h,c.typeDefault.toString(),c.typeDefault.toNumber());else if(c.bytes){var d="["+Array.prototype.slice.call(c.typeDefault).join(",")+"]";r("if(o.bytes===String)d%s=%j",h,String.fromCharCode.apply(String,c.typeDefault))("else{")("d%s=%s",h,d)("if(o.bytes!==Array)d%s=util.newBuffer(d%s)",h,h)("}")}else r("d%s=%j",h,c.typeDefault)}r("}")}var p=!1;for(u=0;u<t.length;++u){var c=t[u],f=e._fieldsArray.indexOf(c),h=s.safeProp(c.name);c.map?(p||(p=!0,r("var ks2")),r("if(m%s&&(ks2=Object.keys(m%s)).length){",h,h)("d%s={}",h)("for(var j=0;j<ks2.length;++j){"),o(r,c,f,h+"[ks2[j]]")("}")):c.repeated?(r("if(m%s&&m%s.length){",h,h)("d%s=[]",h)("for(var j=0;j<m%s.length;++j){",h),o(r,c,f,h+"[j]")("}")):(r("if(m%s!=null&&m.hasOwnProperty(%j)){",h,c.name),o(r,c,f,h),c.partOf&&r("if(o.oneofs)")("d%s=%j",s.safeProp(c.partOf.name),c.name)),r("}")}return r("return d")}},98316:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getSubchannelPool=t.SubchannelPool=void 0;let n=r(57354),i=r(24353),s=r(43356),a=r(26786),o=r(70603),l=1e4;class u{constructor(){this.pool=Object.create(null),this.cleanupTimer=null}unrefUnusedSubchannels(){let e=!0;for(let t in this.pool){let r=this.pool[t].filter(e=>!e.subchannel.unrefIfOneRef());r.length>0&&(e=!1),this.pool[t]=r}e&&null!==this.cleanupTimer&&(clearInterval(this.cleanupTimer),this.cleanupTimer=null)}ensureCleanupTask(){var e,t;null===this.cleanupTimer&&(this.cleanupTimer=setInterval(()=>{this.unrefUnusedSubchannels()},l),null==(t=(e=this.cleanupTimer).unref)||t.call(e))}getOrCreateSubchannel(e,t,r,l){this.ensureCleanupTask();let u=(0,a.uriToString)(e);if(u in this.pool){for(let e of this.pool[u])if((0,s.subchannelAddressEqual)(t,e.subchannelAddress)&&(0,n.channelOptionsEqual)(r,e.channelArguments)&&l._equals(e.channelCredentials))return e.subchannel}let c=new i.Subchannel(e,t,r,l,new o.Http2SubchannelConnector(e));return u in this.pool||(this.pool[u]=[]),this.pool[u].push({subchannelAddress:t,channelArguments:r,channelCredentials:l,subchannel:c}),c.ref(),c}}t.SubchannelPool=u;let c=new u;t.getSubchannelPool=function(e){return e?c:new u}},98344:e=>{"use strict";function t(e,r){"string"==typeof e&&(r=e,e=void 0);var n=[];function i(e){if("string"!=typeof e){var r=s();if(t.verbose&&console.log("codegen: "+r),r="return "+r,e){for(var a=Object.keys(e),o=Array(a.length+1),l=Array(a.length),u=0;u<a.length;)o[u]=a[u],l[u]=e[a[u++]];return o[u]=r,Function.apply(null,o).apply(null,l)}return Function(r)()}for(var c=Array(arguments.length-1),h=0;h<c.length;)c[h]=arguments[++h];if(h=0,e=e.replace(/%([%dfijs])/g,function(e,t){var r=c[h++];switch(t){case"d":case"f":return String(Number(r));case"i":return String(Math.floor(r));case"j":return JSON.stringify(r);case"s":return String(r)}return"%"}),h!==c.length)throw Error("parameter count mismatch");return n.push(e),i}function s(t){return"function "+(t||r||"")+"("+(e&&e.join(",")||"")+"){\n  "+n.join("\n  ")+"\n}"}return i.toString=s,i}e.exports=t,t.verbose=!1}};var __webpack_require__=require("../webpack-runtime.js");__webpack_require__.C(exports);var __webpack_exec__=e=>__webpack_require__(__webpack_require__.s=e),__webpack_exports__=__webpack_require__.X(0,[828,611,835,684,447],()=>__webpack_exec__(90462));module.exports=__webpack_exports__})();